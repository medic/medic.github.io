<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Community Health Toolkit – CHT Gateway</title><link>https://docs.communityhealthtoolkit.org/apps/guides/messaging/gateways/gateway/</link><description>Recent content in CHT Gateway on Community Health Toolkit</description><generator>Hugo -- gohugo.io</generator><atom:link href="https://docs.communityhealthtoolkit.org/apps/guides/messaging/gateways/gateway/index.xml" rel="self" type="application/rss+xml"/><item><title>Apps: Configuration</title><link>https://docs.communityhealthtoolkit.org/apps/guides/messaging/gateways/gateway/configuration/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/guides/messaging/gateways/gateway/configuration/</guid><description>
&lt;p>CHT gateway supports Android 4.1 and above. To have it up and fully working, follow the 3 steps below.&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Install the latest APK from the &lt;a href="https://github.com/medic/cht-gateway/releases">releases page&lt;/a> in the &lt;code>cht-gateway&lt;/code> repo. This APK is not in the Play Store, you will need to side-load it &lt;a href="https://docs.communityhealthtoolkit.org/core/guides/android/publishing/#side-loading">as is done with CHT Android&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Open the app.
if you are installing the app for the first time or afresh, you will get a &lt;code>Warning:medic-gateway is not set as the default messaging app on this device&lt;/code> . Select &lt;code>HELP ME CHANGE&lt;/code> and agree to the follow-up system prompt about changing the default messaging app.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Configure the app. If you&amp;rsquo;re configuring cht-gateway(v1.0.0 and above) for use with hosted medic, with a URL of e.g. &lt;code>https://myproject.dev.medicmobile.org&lt;/code> and a username of &lt;code>gateway&lt;/code> and a password of &lt;code>topSecret&lt;/code>, fill in the settings as follows:&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>Instance name: &lt;code>myproject [dev]&lt;/code> (if &lt;code>https://myproject.app...&lt;/code>, select &amp;lsquo;app&amp;rsquo;)&lt;br>
Username: &lt;code>gateway&lt;/code>(&lt;em>Since&lt;/em> &lt;a href="https://github.com/medic/cht-gateway/releases/tag/v1.2.1">v1.2.1&lt;/a> &lt;em>medic gateway versions this field is not present in the app. The user &lt;code>gateway&lt;/code> is assumed&lt;/em>.)&lt;br>
Password: &lt;code>topSecret&lt;/code>(&lt;em>This should be the password for the &lt;code>gateway&lt;/code> username as set up in the project web instance&lt;/em>)&lt;/p>
&lt;p>&lt;img src="gateway-config.png" alt="configuration">&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
If you&amp;rsquo;re configuring cht-gateway (v0.6.2 and below - recommended if you have a non-&lt;em>Medic&lt;/em> hosted instance) you will need to use the generic build of cht-gateway - links to download are &lt;a href="https://github.com/medic/cht-gateway/releases">here&lt;/a>. Find out the value for webapp URL from your tech support then configure as below
&lt;strong>WebappUrl&lt;/strong>: &lt;code>https://gateway:topSecret@myproject.some-subdomain.mydomain.org&lt;/code>
&lt;/div>
&lt;h1 id="power-saving">Power Saving&lt;/h1>
&lt;p>Care should be taken to disable all power-saving modes on the phone, as these may affect &lt;code>cht-gateway&lt;/code>&amp;rsquo;s ability to check in with the server regularly.&lt;/p>
&lt;p>On different versions of Android, power saving options may be found in different places. Sometimes they will be per-app, and sometimes phone-wide.&lt;/p>
&lt;p>Some places you might find the power savings settings:&lt;/p>
&lt;ul>
&lt;li>&lt;code>WiFi &amp;gt; MORE &amp;gt; Keep WiFi on during sleep &amp;gt; ALWAYS (increases battery usage)&lt;/code>&lt;/li>
&lt;li>&lt;code>Smart Manager &amp;gt; Battery &amp;gt; App Power Saving &amp;gt; OFF&lt;/code>, or&lt;/li>
&lt;li>&lt;code>Smart Manager &amp;gt; Battery &amp;gt; App Power Saving &amp;gt; Detail &amp;gt; CHT Gateway &amp;gt; Disable&lt;/code>&lt;/li>
&lt;/ul></description></item><item><title>Apps: Phones</title><link>https://docs.communityhealthtoolkit.org/apps/guides/messaging/gateways/gateway/phones/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/guides/messaging/gateways/gateway/phones/</guid><description>
&lt;p>In order to use SMS workflows with the CHT you will need an SMS gateway. For reliability an SMS Aggregator, such as &lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/messaging/gateways/africas-talking/">Africa&amp;rsquo;s Talking&lt;/a> or &lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/messaging/gateways/rapidpro/">RapidPro&lt;/a>, is recommended. When an SMS Aggregator is not available, an Android device running &lt;a href="https://github.com/medic/cht-gateway">CHT Gateway&lt;/a> can be used to send and receive SMS in your CHT appplication. You may use an existing Android device and are not required to purchase a new one. However, for more reliable sending and receiving of SMS, the Android device should be in your organization’s office or facility with a consistent internet connection.&lt;/p>
&lt;p>Below is a list of recommended Android devices across a range of prices. You may find these in local mobile equipment stores as well as online through Amazon and other e-commerce sites.&lt;/p>
&lt;h2 id="low-cost-devices">Low-cost devices:&lt;/h2>
&lt;ul>
&lt;li>LG L60 *&lt;/li>
&lt;li>Samsung Duos *&lt;/li>
&lt;li>Lenovo A1000&lt;/li>
&lt;/ul>
&lt;h2 id="medium-cost-devices">Medium-cost devices:&lt;/h2>
&lt;ul>
&lt;li>Samsung Galaxy J5 *&lt;/li>
&lt;li>Huawei Honor 4x *&lt;/li>
&lt;li>Huawei G Play mini *&lt;/li>
&lt;li>Motorola Moto X play&lt;/li>
&lt;/ul>
&lt;h2 id="high-cost-devices">High-cost devices:&lt;/h2>
&lt;ul>
&lt;li>OnePlus 3T&lt;/li>
&lt;li>Nexus 6&lt;/li>
&lt;/ul>
&lt;p>*Devices marked with an asterisk have been tested and used by Medic and our partners.&lt;/p>
&lt;p>Android OS: We also support Android version 4.1 (Jelly Beans) and above. Details of the Android history can be found &lt;a href="https://en.wikipedia.org/wiki/Android_version_history">here&lt;/a>.&lt;/p>
&lt;p>We highly recommend investing in devices that are medium to high-cost, and in models that are marked with an asterisk in the list above to ensure optimal efficiency.&lt;/p></description></item><item><title>Apps: Troubleshooting</title><link>https://docs.communityhealthtoolkit.org/apps/guides/messaging/gateways/gateway/troubleshooting/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/guides/messaging/gateways/gateway/troubleshooting/</guid><description>
&lt;p>In a techlead heaven, we would have immeadiate physical access to gateway phones, but alas, most of the time we have to hand them over to the partner. Fortunately, comes this guide on debugging gateway problems.&lt;/p>
&lt;p>Follow the steps as below (if you don&amp;rsquo;t have physical access to the phone, start with step 2 i.e debug from the server side first)&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Make sure that the device:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Is connected to the internet. You can check this by opening any Browser app in the phone and going to &lt;code>https://google.com&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Check if the instance name, instance type and &lt;code>gateway&lt;/code> user password are set correctly in the Gateway &lt;code>Settings&lt;/code> app screen.&lt;/p>
&lt;p>&lt;img src="settings_screen.png" alt="Settings Screen">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Has the latest Gateway version. Get the latest version by opening the Google Playstore, searching for &lt;code>Medic Gateway&lt;/code> and updating the existing app&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Medic Gatway should be set as the default app for SMS. To check, go to &lt;code>Settings&lt;/code> in the Gateway app. If Medic Gateway is not the default, you will be met with the below app screen. In that case, click &lt;code>Help me change&lt;/code>.&lt;/p>
&lt;p>&lt;img src="not_default.png" alt="Not Default">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>If messages are not going through to the server, in the &lt;code>To Webapp&lt;/code> tab, select some of them and press &lt;code>Retry&lt;/code> at the bottom and wait for about 5-10 minutes.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>If messages are not going through to the users, in the &lt;code>From Webapp&lt;/code> tab, select some of them and press &lt;code>Retry&lt;/code> at the bottom and wait for about 5-10 minutes.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>In CDMA networks, there are operator issues where messages get to the users in chunks of around 160 characters when the message is too long. If this is the case, go to &lt;code>Settings&lt;/code> in the gateway screen and make sure you tick &lt;code>CDMA compatibility mode&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Check if the phone has adequate free space&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Restart the phone if no solution seems to work. Resetting the Adroind state sometimes resolves some persistent problems&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>When attacking the problem from the phones end does not work, move on to the server and try to solve it from there. Maybe the server has a configuration issue which hinders the processing or the acceptance of the messages by &lt;code>Medic-Api&lt;/code>
Follow the steps:&lt;/p>
&lt;ol>
&lt;li>Navigate to &lt;code>/srv/storage/gardener/logs/ &lt;/code>&lt;/li>
&lt;li>Perform &lt;code>ls -lt&lt;/code> to arrange the log files in order of modified date. Note the concerned file which was last modified on the date you are investigating&lt;/li>
&lt;li>Pipe it to grep to get only SMS logs e.g &lt;code>grep api/sms medic_medic_medic-api4.log&lt;/code>. As below, note the errors and work from there.&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;pre tabindex="0">&lt;code>cd /srv/storage/gardener/logs/
ls -lt
grep api/sms medic_medic_medic-api4.log
&lt;/code>&lt;/pre>&lt;p>If the above steps don&amp;rsquo;t yield the problem, read the &lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/debugging/obtaining-logs/#android-logs">Obtaining Logs&lt;/a> page, note the make/model/android version their gateway handset is and escalate with those details to the PM/project techlead.&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
Insist on screenshots even for the most trivial things that partners insist they have performed as you asked. They are also good for giving you a mental image of what is happenning on the phone remotely.
&lt;/div></description></item></channel></rss>