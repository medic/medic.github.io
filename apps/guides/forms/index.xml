<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Community Health Toolkit – Building and Maintaining Forms</title><link>https://docs.communityhealthtoolkit.org/apps/guides/forms/</link><description>Recent content in Building and Maintaining Forms on Community Health Toolkit</description><generator>Hugo -- gohugo.io</generator><atom:link href="https://docs.communityhealthtoolkit.org/apps/guides/forms/index.xml" rel="self" type="application/rss+xml"/><item><title>Apps: Configuring UHC Mode</title><link>https://docs.communityhealthtoolkit.org/apps/guides/forms/uhc-mode/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/guides/forms/uhc-mode/</guid><description>
&lt;p>&lt;em>Introduced in v2.18.0&lt;/em>&lt;/p>
&lt;figure class="right col-6 col-lg-3">&lt;a href="UHC.gif">
&lt;img src="UHC.gif"
alt="UHC Mode screenshot"/> &lt;/a>
&lt;/figure>
&lt;p>The CHT&amp;rsquo;s &lt;a href="https://docs.communityhealthtoolkit.org/apps/features/uhc-mode/">UHC Mode&lt;/a> empowers CHWs to provide equitable and timely care to families in their catchment area. The Community Health Toolkit supports this use-case by displaying the number of visits made to a household and highlighting households which haven&amp;rsquo;t met their visit goal in red at the top of the contact list.&lt;/p>
&lt;p>The date last visited is colored red whenever the date is 30 days or more in the past. The date last visited is displayed as a relative date. This period is described in terms of &amp;ldquo;days&amp;rdquo; up until two months, so &amp;ldquo;Visited 3 days ago&amp;rdquo; or &amp;ldquo;Visited 36 days ago&amp;rdquo;. After two months, we simply say &amp;ldquo;2 months&amp;rdquo; or &amp;ldquo;3 months&amp;rdquo;.&lt;/p>
&lt;h2 id="household-visits">Household Visits&lt;/h2>
&lt;figure class="right col-6 col-lg-3">&lt;a href="sort-dropdown.png">
&lt;img src="sort-dropdown.png"
alt="Contact sorting screenshot"/> &lt;/a>
&lt;/figure>
&lt;p>The date of the last visit is displayed and contacts can be sorted by last visit date to allow the CHW plan their work.&lt;/p>
&lt;p>&amp;ldquo;Date last visited&amp;rdquo; and &amp;ldquo;Visits this month&amp;rdquo; are different data points:&lt;/p>
&lt;ul>
&lt;li>Date last visited is calculated based upon a rolling count of &amp;ldquo;how many days ago&amp;rdquo; and is not tied to the calendar at all.&lt;/li>
&lt;li>Visits this month are tied directly to the calendar.&lt;/li>
&lt;/ul>
&lt;h2 id="configuration">Configuration&lt;/h2>
&lt;p>Any patient- or household-level form or forms can be used to update the date last visited. You may run into performance issues if you configure this to look at forms submitted very frequently. For example, five forms submitted only once a month would work better than two forms submitted every day.&lt;/p>
&lt;h3 id="uhc-permissions">UHC Permissions&lt;/h3>
&lt;p>To see the date last visited instead of the primary contact, grant the relevant user role (usually CHW) the &lt;code>can_view_last_visited_date&lt;/code> permission. Once that permission is enabled, you&amp;rsquo;ll be able to display the date the household was last visited in the list.&lt;/p>
&lt;p>To view UHC metrics, the &lt;code>can_view_uhc_stats&lt;/code> permission needs to be granted to the CHW user role.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#34;permissions&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;can_view_last_visited_date&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;chwUserRole&amp;#34;&lt;/span> &lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#a40000">,&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="forms">Forms&lt;/h3>
&lt;p>Indicate which forms should be included in the calculation of the date last visited. You can use forms at the person or household level. Add the &lt;code>visited_contact_uuid&lt;/code> field to forms to track visits. This should be a &lt;code>calculate&lt;/code> field that contains the place UUID of the visited contact. Ensure this is a top-level field and not in any group. When the form is submitted it would be seen as &lt;code>doc.fields.visited_contact_uuid&lt;/code>.&lt;/p>
&lt;h3 id="settings">Settings&lt;/h3>
&lt;p>Information on when to begin counting visits, household visit goals, and default contact sorting is defined in &lt;code>base_settings.json&lt;/code>.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Setting&lt;/th>
&lt;th>Description&lt;/th>
&lt;th>Default&lt;/th>
&lt;th>Version&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>uhc.contacts_default_sort&lt;/td>
&lt;td>&lt;ul>&lt;li>&amp;ldquo;alpha&amp;rdquo;: Sort contacts alphanumerically&lt;/li>&lt;li>&amp;ldquo;last_visited_date&amp;rdquo;: sort contacts by the date they were most recently visited.&lt;/li>&lt;/ul>&lt;/td>
&lt;td>&amp;ldquo;alpha&amp;rdquo;&lt;/td>
&lt;td>2.18.0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>uhc.visit_count.month_start_date&lt;/td>
&lt;td>The date of each month when the visit count is reset to 0.&lt;/td>
&lt;td>1&lt;/td>
&lt;td>2.18.0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>uhc.visit_count.visit_count_goal&lt;/td>
&lt;td>The monthly visit count goal.&lt;/td>
&lt;td>0&lt;/td>
&lt;td>2.18.0&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Apps: Creating Additional Docs from App Forms</title><link>https://docs.communityhealthtoolkit.org/apps/guides/forms/additional-docs/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/guides/forms/additional-docs/</guid><description>
&lt;p>In version 2.13.0 and higher, you can configure app forms to generate additional docs upon submission. You can create one or more docs using variations on the configuration described below. One case where this can be used is to register a newborn from a delivery report, as shown below. First, here is an overview of what you can do and how the configuration should look in XML:&lt;/p>
&lt;h2 id="extra-docs">Extra Docs&lt;/h2>
&lt;p>Extra docs can be added by defining structures in the model with the attribute&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-zsh" data-lang="zsh">&lt;span style="display:flex;">&lt;span>db-doc&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;true&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
You must have lower-case &lt;code>true&lt;/code> in your XLSform, even though Excel will default to &lt;code>TRUE&lt;/code>.
&lt;/div>
&lt;h3 id="example-form-model">Example Form Model&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-xml" data-lang="xml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">&amp;lt;data&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;root_prop_1&amp;gt;&lt;/span>val A&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/root_prop_1&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;other_doc&lt;/span> &lt;span style="color:#c4a000">db-doc=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;true&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;type&amp;gt;&lt;/span>whatever&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/type&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;other_prop&amp;gt;&lt;/span>val B&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/other_prop&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;/other_doc&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/data&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="resulting-docs">Resulting Docs&lt;/h3>
&lt;p>Report (as before):&lt;/p>
&lt;pre tabindex="0">&lt;code>{
_id: &amp;#39;...&amp;#39;,
_rev: &amp;#39;...&amp;#39;,
type: &amp;#39;report&amp;#39;,
_attachments: { xml: ... ],
fields: {
root_prop_1: &amp;#39;val A&amp;#39;,
}
}
&lt;/code>&lt;/pre>&lt;p>Other doc:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;...&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;_rev&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;...&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;whatever&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;other_prop&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;val B&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="linked-docs">Linked Docs&lt;/h2>
&lt;ul>
&lt;li>Linked docs can be referred to using the doc-ref attribute, with an xpath. This can be done at any point in the model, e.g.:&lt;/li>
&lt;/ul>
&lt;h3 id="example-form-model-1">Example Form Model&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-xml" data-lang="xml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">&amp;lt;sickness&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;sufferer&lt;/span> &lt;span style="color:#c4a000">db-doc-ref=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;/sickness/new&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;new&lt;/span> &lt;span style="color:#c4a000">db-doc=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;true&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;type&amp;gt;&lt;/span>person&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/type&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;name&amp;gt;&lt;/span>Gómez&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/name&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;original_report&lt;/span> &lt;span style="color:#c4a000">db-doc-ref=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;/sickness&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;/new&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/sickness&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="resulting-docs-1">Resulting Docs&lt;/h3>
&lt;p>Report:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;abc-123&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;_rev&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;...&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;report&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;fields&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;sufferer&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;def-456&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Other doc:&lt;/p>
&lt;pre tabindex="0">&lt;code>{
&amp;#34;_id&amp;#34;: &amp;#34;def-456&amp;#34;,
&amp;#34;_rev&amp;#34;: &amp;#34;...&amp;#34;,
&amp;#34;type&amp;#34;: &amp;#34;person&amp;#34;,
&amp;#34;name&amp;#34;: &amp;#34;Gómez&amp;#34;,
&amp;#34;original_report&amp;#34;: &amp;#34;abc-123&amp;#34;
}
&lt;/code>&lt;/pre>&lt;h2 id="repeated-docs">Repeated Docs&lt;/h2>
&lt;ul>
&lt;li>Can have references to other docs, including the parent&lt;/li>
&lt;li>These currently cannot be linked from other docs, as no provision is made for indexing these docs&lt;/li>
&lt;/ul>
&lt;h3 id="example-form">Example Form&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-xml" data-lang="xml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">&amp;lt;thing&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;name&amp;gt;&lt;/span>Ab&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/name&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;related&lt;/span> &lt;span style="color:#c4a000">db-doc=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;true&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;type&amp;gt;&lt;/span>relative&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/type&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;name&amp;gt;&lt;/span>Bo&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/name&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;parent&lt;/span> &lt;span style="color:#c4a000">db-doc-ref=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;/thing&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;/related&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;related&lt;/span> &lt;span style="color:#c4a000">db-doc=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;true&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;type&amp;gt;&lt;/span>relative&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/type&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;name&amp;gt;&lt;/span>Ca&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/name&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;parent&lt;/span> &lt;span style="color:#c4a000">db-doc-ref=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;/thing&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;/related&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/artist&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="resulting-docs-2">Resulting Docs&lt;/h3>
&lt;p>Report:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;abc-123&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;_rev&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;...&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;report&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;fields&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Ab&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Other docs:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;...&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;_rev&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;...&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;relative&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Bo&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;parent&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;abc-123&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;...&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;_rev&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;...&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;relative&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Ch&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;parent&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;abc-123&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="linked-docs-example">Linked Docs Example&lt;/h2>
&lt;p>This example shows how you would register a single newborn from a delivery report.&lt;/p>
&lt;p>First, the relevant section of the delivery report XLSForm file:
&lt;img src="linked_docs_xlsform.png" alt="Delivery report">&lt;/p>
&lt;p>Here is the corresponding portion of XML generated after converting the form:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-xml" data-lang="xml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">&amp;lt;repeat&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;child_repeat&lt;/span> &lt;span style="color:#c4a000">db-doc=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;true&amp;#34;&lt;/span> &lt;span style="color:#c4a000">jr:template=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;child_name/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;child_gender/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;child_doc&lt;/span> &lt;span style="color:#c4a000">db-doc-ref=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34; /delivery/repeat/child_repeat &amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;created_by_doc&lt;/span> &lt;span style="color:#c4a000">db-doc-ref=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;/delivery&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;name/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;sex/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;date_of_birth/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;parent&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;_id/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;parent&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;_id/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;parent&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;_id/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;/parent&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;/parent&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;/parent&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;type&amp;gt;&lt;/span>person&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/type&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;/child_repeat&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/repeat&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>If you&amp;rsquo;ve done your configuration correctly, all you should see when you click on the submitted report from the Reports tab is the &lt;code>child_doc&lt;/code> field with an &lt;code>_id&lt;/code> that corresponds to the linked doc. In this case, you could look for that &lt;code>_id&lt;/code> on the People tab or in the DB itself to confirm that the resulting doc looks correct.&lt;/p>
&lt;h2 id="repeated-docs-example">Repeated Docs Example&lt;/h2>
&lt;p>This example extends the above example to show how you would register one or multiple newborns from a delivery report. This allows you to handle multiple births.&lt;/p>
&lt;p>First, the relevant section of the delivery report XLSForm file:
&lt;img src="repeated_docs_xlsform.png" alt="Delivery report">&lt;/p>
&lt;p>Here is the corresponding portion of XML generated after converting the form:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-xml" data-lang="xml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">&amp;lt;repeat&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;child_repeat&lt;/span> &lt;span style="color:#c4a000">db-doc=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;true&amp;#34;&lt;/span> &lt;span style="color:#c4a000">jr:template=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;child_name/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;child_gender/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;created_by_doc&lt;/span> &lt;span style="color:#c4a000">db-docs-ref=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;/delivery&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;name/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;sex/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;date_of_birth/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;parent&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;_id/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;parent&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;_id/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;parent&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;_id/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;/parent&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;/parent&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;/parent&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;type&amp;gt;&lt;/span>person&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/type&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;/child_repeat&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/repeat&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>If you&amp;rsquo;ve done your configuration correctly, all you should see when you click on the submitted report from the Reports tab is that there will be no information on the children created. You will find the created docs as siblings to the subject of the previously submitted report. Each of these child docs will have a field &lt;code>created_by_doc&lt;/code> whose value is the &lt;code>_id&lt;/code> of the report that created them. You can also look in the DB itself to confirm that the resulting docs look correct.&lt;/p></description></item><item><title>Apps: Making Calls and Sending SMS from App Forms</title><link>https://docs.communityhealthtoolkit.org/apps/guides/forms/app-form-sms/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/guides/forms/app-form-sms/</guid><description>
&lt;h2 id="triggering-calls-and-sms">Triggering Calls and SMS&lt;/h2>
&lt;p>When a XForm is loaded on a phone you can start a phone call or trigger the sending of an SMS within the form itself. This can be useful if within a task or assessment you want to tell the user to contact a patient, or perhaps a health worker at a facility.&lt;/p>
&lt;p>To set up the call or SMS you&amp;rsquo;ll need to create a link with &lt;code>tel:&lt;/code> or &lt;code>sms:&lt;/code> within a &lt;code>note&lt;/code> field. To create the link, use the markdown link format, eg &lt;code>[Call Patient](tel:+2547009875000)&lt;/code>. You can specify the content of the SMS by using the body parameter, eg &lt;code>[Send SMS](sms://+25470098765000?body=Hello World!)&lt;/code>.&lt;/p>
&lt;p>The phone number and message can be generated from fields within the XForm. For instance, if you have &lt;code>patient_name&lt;/code>, &lt;code>patient_phone&lt;/code> and &lt;code>message&lt;/code> fields, you can generate the SMS as follows:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>XLSForm&lt;/strong>
&lt;code>[Send SMS to ${patient_name}](sms://${patient_phone}?body=${message})&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>XForm&lt;/strong>
&lt;code>[Send SMS to &amp;lt;output value=&amp;quot; /data/patient_name &amp;quot;/&amp;gt;](sms://&amp;lt;output value=&amp;quot; /data/patient_phone &amp;quot;/&amp;gt;?body=&amp;lt;output value=&amp;quot; /data/message &amp;quot;/&amp;gt;)&lt;/code>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>If you want to use a button to make the action more obvious, this can be done using HTML and CSS within the note:&lt;/p>
&lt;pre tabindex="0">&lt;code>[&amp;lt;span style=&amp;#39;background-color: #CC0000; color:white; padding: 1em; text-decoration: none; &amp;#39;&amp;gt;Call the patient&amp;lt;/span&amp;gt;](tel:${patient_phone})
&lt;/code>&lt;/pre>&lt;p>Note that the SMS link notation can be interpreted differently from one phone to another. Some devices work well with &lt;code>sms:${phone}?body=${message}&lt;/code>, others with &lt;code>sms://${phone}?body=${message}&lt;/code>. You may find &lt;a href="https://bradorego.com/test/sms.html">these SMS link tests&lt;/a> helpful in determining what works on devices for your deployment.&lt;/p>
&lt;h2 id="sending-reports-as-sms">Sending reports as SMS&lt;/h2>
&lt;p>To define that an XForm should be converted to an SMS, add the field &lt;code>xml2sms&lt;/code> to the form&amp;rsquo;s CouchDB doc and assign it a truthy value (either a boolean or a string).&lt;br>
When submitting such a form, along with creating the report document, the app will try to compact the report&amp;rsquo;s content into an SMS that would be sent to the configured Gateway phone number.&lt;/p>
&lt;p>There are two formats available - either using the &lt;a href="https://getodk.github.io/xforms-spec/#compact-record-representation-(for-sms)">ODK&amp;rsquo;s compact record representation for SMS&lt;/a>, or Medic&amp;rsquo;s custom format.
When the form compaction fails or returns no content, no SMS will be sent.&lt;/p>
&lt;h3 id="odk-compact-record-representation-for-sms">ODK compact record representation for SMS&lt;/h3>
&lt;p>When &lt;code>xml2sms&lt;/code> field value is Boolean &lt;code>true&lt;/code>, the app will try to compact the form using this format.
To get forms sent in this format, follow the &lt;a href="https://getodk.github.io/xforms-spec/#compact-record-representation-(for-sms)">ODK documentation&lt;/a>.&lt;/p>
&lt;h3 id="medic-custom-sms-representation">Medic Custom SMS representation&lt;/h3>
&lt;p>To configure a form to send using Medic&amp;rsquo;s custom SMS definition, the value of &lt;code>xml2sms&lt;/code> from the form&amp;rsquo;s CouchDB doc should be an string containing an &lt;a href="https://docs.angularjs.org/guide/expression">Angular expression&lt;/a>.
This allows access to the &lt;code>fields&lt;/code> property of the &lt;code>data_record&lt;/code> doc created when saving the form submission to the database. Extra functions are also provided to make compiling a form submission more simple.&lt;/p>
&lt;h4 id="special-functions">Special Functions&lt;/h4>
&lt;h5 id="concatargs">&lt;code>concat(...args)&lt;/code>&lt;/h5>
&lt;ul>
&lt;li>
&lt;p>&lt;code>...args&lt;/code>: 0 or more values to be concatenated.&lt;/p>
&lt;pre>&lt;code> concat('A', 'bee', 'Sea') =&amp;gt; 'AbeeSea'
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ul>
&lt;h5 id="spacedargs">&lt;code>spaced(...args)&lt;/code>&lt;/h5>
&lt;ul>
&lt;li>
&lt;p>&lt;code>...args&lt;/code>: 0 or more values to be concatenated with spaces between them.&lt;/p>
&lt;pre>&lt;code> spaced('A', 'bee', 'Sea') =&amp;gt; 'A bee Sea'
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ul>
&lt;h5 id="matchval-matchers">&lt;code>match(val, matchers)&lt;/code>&lt;/h5>
&lt;ul>
&lt;li>
&lt;p>&lt;code>val&lt;/code>: the value to run matches against&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>matchers&lt;/code>: a string representing values to match and their corresponding outputs&lt;/p>
&lt;pre>&lt;code> match('a', 'a:Hay,b:bzz,c:see') =&amp;gt; 'Hay'
match('b', 'a:Hay,b:bzz,c:see') =&amp;gt; 'bzz'
match('c', 'a:Hay,b:bzz,c:see') =&amp;gt; 'c'
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ul>
&lt;h4 id="examples">Examples&lt;/h4>
&lt;h5 id="form-submission-json">Form Submission JSON&lt;/h5>
&lt;pre>&lt;code>doc.fields = {
s_acc_danger_signs: {
s_acc_danger_sign_seizure: 'no',
s_acc_danger_sign_loss_consiousness: 'yes',
s_acc_danger_sign_unable_drink: 'no',
s_acc_danger_sign_confusion: 'yes',
s_acc_danger_sign_vomit: 'no',
s_acc_danger_sign_chest_indrawing: 'yes',
s_acc_danger_sign_wheezing: 'no',
s_acc_danger_sign_bleeding: 'yes',
s_acc_danger_sign_lathargy: 'no',
has_danger_sign: 'true',
},
};
&lt;/code>&lt;/pre>
&lt;h5 id="formdocreport2sms">&lt;code>formDoc.report2sms&lt;/code>&lt;/h5>
&lt;pre>&lt;code>concat(
&amp;quot;U5 &amp;quot;,
match(doc.s_acc_danger_signs.has_danger_sign, &amp;quot;true:DANGER, false:NO_DANGER&amp;quot;),
&amp;quot; &amp;quot;,
match(doc.s_acc_danger_signs.s_acc_danger_sign_seizure, &amp;quot;yes:S&amp;quot;),
match(doc.s_acc_danger_signs.s_acc_danger_sign_loss_consiousness, &amp;quot;yes:L&amp;quot;),
match(doc.s_acc_danger_signs.s_acc_danger_sign_unable_drink, &amp;quot;yes:D&amp;quot;),
match(doc.s_acc_danger_signs.s_acc_danger_sign_confusion, &amp;quot;yes:C&amp;quot;),
match(doc.s_acc_danger_signs.s_acc_danger_sign_vomit, &amp;quot;yes:V&amp;quot;),
match(doc.s_acc_danger_signs.s_acc_danger_sign_chest_indrawing, &amp;quot;yes:I&amp;quot;),
match(doc.s_acc_danger_signs.s_acc_danger_sign_wheezing, &amp;quot;yes:W&amp;quot;),
match(doc.s_acc_danger_signs.s_acc_danger_sign_bleeding, &amp;quot;yes:B&amp;quot;),
match(doc.s_acc_danger_signs.s_acc_danger_sign_lathargy, &amp;quot;yes:Y&amp;quot;)
)
&lt;/code>&lt;/pre>
&lt;h5 id="sms-content">SMS content&lt;/h5>
&lt;pre>&lt;code>U5 DANGER LCIB
&lt;/code>&lt;/pre></description></item><item><title>Apps: Fetching forms from Google Drive</title><link>https://docs.communityhealthtoolkit.org/apps/guides/forms/google-drive/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/guides/forms/google-drive/</guid><description>
&lt;p>To work collaboratively on form design it can be helpful to keep XLSForms in Google Drive. The &lt;code>fetch-forms-from-google-drive&lt;/code> action downloads these XLSForms so that they can be converted to XForms and uploaded to your CHT app.&lt;/p>
&lt;p>This action requires the following files in the top-level folder of your CHT app config: &lt;code>forms-on-google-drive.json&lt;/code> and &lt;code>.gdrive.secrets.json&lt;/code>.&lt;/p>
&lt;h2 id="forms-on-google-drivejson">forms-on-google-drive.json&lt;/h2>
&lt;p>This JSON file contains key value pairs, where the key is the relative path and name for the downloaded file, and the value is the file&amp;rsquo;s Google Drive File ID.&lt;/p>
&lt;p>To get the File ID for the form open the form in Google Sheets. The URL will look something like &lt;code>https://docs.google.com/spreadsheets/d/12345ABCDEF/edit#gid=555666888&lt;/code> . The ID is the middle portion &lt;code>12345ABCDEF&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;app/sample_report.xlsx&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;12345ABCDEF&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;contact/person-create.xlsx&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;ABCDEF123456&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="gdrivesecretsjson">.gdrive.secrets.json&lt;/h2>
&lt;p>This file contains authentication secrets that are generated by enabling access to your Google Drive using these &lt;a href="https://developers.google.com/drive/api/v3/about-auth">instructions&lt;/a>.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;client_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;your_client_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;project_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;your_project_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;auth_uri&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;https://accounts.google.com/o/oauth2/auth&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;token_uri&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;https://accounts.google.com/o/oauth2/token&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;auth_provider_x509_cert_url&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;https://www.googleapis.com/oauth2/v1/certs&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;client_secret&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;your_client_secret&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;redirect_uris&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;your_redirect_uris&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;http://localhost&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="run">Run&lt;/h2>
&lt;p>With the files in place, run cht-conf&amp;rsquo;s &lt;code>fetch-forms-from-google-drive&lt;/code> action in your CHT app&amp;rsquo;s top level directory.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>cht fetch-forms-from-google-drive
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>You will be prompted for an access code from your authenticated user. Follow the prompts through Google&amp;rsquo;s authentication page and copy the access code into your command line. The forms will then be downloaded to the locations set in the forms-on-google-drive.json file.&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
If the browser does not launch own its own copy the URL and paste the authentication url into a browser and then follow the prompts.
&lt;/div></description></item><item><title>Apps: Input data available in forms</title><link>https://docs.communityhealthtoolkit.org/apps/guides/forms/form-inputs/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/guides/forms/form-inputs/</guid><description>
&lt;p>CHT forms have access to varying amounts of input data depending on the type of form and its source.&lt;/p>
&lt;h2 id="contact-forms">&lt;code>contact&lt;/code> forms&lt;/h2>
&lt;p>Available data:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/forms/form-inputs/#inputs-data-for-contact-in-contact-forms">&lt;code>inputs&lt;/code> data for contact&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/forms/form-inputs/#user-data">&lt;code>inputs&lt;/code> data for user&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/forms/form-inputs/#contact-selector">Contact data via contact selector&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="inputs-data-for-contact-in-contact-forms">&lt;code>inputs&lt;/code> data for contact in &lt;code>contact&lt;/code> forms&lt;/h3>
&lt;p>Forms for adding contacts have access to a small group of fields nested in the &lt;code>inputs&lt;/code> group. These fields are contained in a group that is named for the contact_type id of the contact being added (so &lt;code>person&lt;/code>, &lt;code>clinic&lt;/code>, etc).&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
This group of fields is also available at the top level (not nested in the &lt;code>inputs&lt;/code> group).
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>type&lt;/th>
&lt;th>name&lt;/th>
&lt;th>label&lt;/th>
&lt;th>hint&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>inputs&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>person&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hidden&lt;/td>
&lt;td>parent&lt;/td>
&lt;td>Parent Id&lt;/td>
&lt;td>Contains the doc id for the new contact&amp;rsquo;s parent contact doc.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hidden&lt;/td>
&lt;td>contact_type&lt;/td>
&lt;td>Contact Type&lt;/td>
&lt;td>The contact_type id of the contact.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;hr>
&lt;h2 id="app-forms">&lt;code>app&lt;/code> forms&lt;/h2>
&lt;p>Available data:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/forms/form-inputs/#form-source">&lt;code>inputs&lt;/code> data for source&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/forms/form-inputs/#inputs-data-for-contact-in-app-forms">&lt;code>inputs&lt;/code> data for contact&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/forms/form-inputs/#contact-summary-data">&lt;code>contact-summary&lt;/code> data&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/forms/form-inputs/#inputs-data-from-task">&lt;code>inputs&lt;/code> data from task&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/forms/form-inputs/#user-data">&lt;code>inputs&lt;/code> data for user&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/forms/form-inputs/#contact-selector">Contact data via contact selector&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="form-source">Form source&lt;/h3>
&lt;p>If a form is created from the &amp;ldquo;People&amp;rdquo; tab, &lt;code>inputs/source&lt;/code> will be set to &amp;ldquo;contact&amp;rdquo;. If a form is created from a task, &lt;code>inputs/source&lt;/code> will be set to &amp;ldquo;task&amp;rdquo;.&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
The &lt;code>source&lt;/code> field is also available at the top level (not nested in the &lt;code>inputs&lt;/code> group).
&lt;/div>
&lt;h3 id="inputs-data-for-contact-in-app-forms">&lt;code>inputs&lt;/code> data for contact in &lt;code>app&lt;/code> forms&lt;/h3>
&lt;p>&lt;code>app&lt;/code> forms with a contact in context have access to that contact&amp;rsquo;s data in the &lt;code>inputs/contact&lt;/code> group.&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
The &lt;code>contact&lt;/code> group is also available at the top level (not nested in the &lt;code>inputs&lt;/code> group).
&lt;/div>
&lt;p>The &lt;code>contact&lt;/code> group contains all the fields from the doc of the contact in context. If a &lt;em>place&lt;/em> is in context, the primary person for that place will be hydrated in the &lt;code>inputs/contact/contact&lt;/code> group. Alternatively, when a &lt;em>person&lt;/em> is in context, the parent place for the person will be hydrated in &lt;code>inputs/contact/parent&lt;/code>.&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
Contact data is not available in forms created from the &amp;ldquo;Reports&amp;rdquo; tab.
&lt;/div>
&lt;h3 id="contact-summary-data">&lt;code>contact-summary&lt;/code> data&lt;/h3>
&lt;p>&lt;code>app&lt;/code> forms with a contact in context can access the contact-summary data associated with the contact. This is done by referencing an instance named &lt;code>contact-summary&lt;/code>. E.g. &lt;code>instance('contact-summary')/context/${variable}&lt;/code>. See &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/contact-page/#care-guides">the reference documentation&lt;/a> for more information.&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
Contact summary data is not available in &lt;code>contact&lt;/code> forms or in forms created from the &amp;ldquo;Reports&amp;rdquo; tab.
&lt;/div>
&lt;h3 id="inputs-data-from-task">&lt;code>inputs&lt;/code> data from task&lt;/h3>
&lt;p>&lt;code>app&lt;/code> forms created via a task have access to any data &lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/tasks/pass-data-to-form/">supplied by the task&lt;/a> in the &lt;code>inputs&lt;/code> group.&lt;/p>
&lt;hr>
&lt;h2 id="user-data">&lt;code>user&lt;/code> data&lt;/h2>
&lt;p>Both &lt;code>app&lt;/code> and &lt;code>contact&lt;/code> forms can access the current user&amp;rsquo;s data at &lt;code>inputs/user&lt;/code>. The data provided is simply the &lt;a href="https://docs.couchdb.org/en/stable/intro/security.html?highlight=org.couchdb.user#users-documents">CouchDB doc for the user&lt;/a> (e.g. &lt;code>org.couchdb.user:username&lt;/code>) plus an additional &lt;code>language&lt;/code> field that contains the user&amp;rsquo;s currently selected language code.&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
The CouchDB doc for the user is &lt;em>NOT&lt;/em> the same as the CHT &lt;em>contact&lt;/em> doc for the user.
&lt;/div>
&lt;h3 id="example-of-saving-user-data-as-metadata-on-a-report">Example of saving &lt;code>user&lt;/code> data as metadata on a report&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>type&lt;/th>
&lt;th>name&lt;/th>
&lt;th>label&lt;/th>
&lt;th>calculation&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>inputs&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>user&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>string&lt;/td>
&lt;td>contact_id&lt;/td>
&lt;td>User&amp;rsquo;s contact id&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>string&lt;/td>
&lt;td>facility_id&lt;/td>
&lt;td>Id for user&amp;rsquo;s facility&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>name&lt;/td>
&lt;td>name&lt;/td>
&lt;td>Username&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>calculate&lt;/td>
&lt;td>created_by&lt;/td>
&lt;td>Username that created report&lt;/td>
&lt;td>../inputs/user/name&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>calculate&lt;/td>
&lt;td>created_by_person_uuid&lt;/td>
&lt;td>UUID that created report&lt;/td>
&lt;td>../inputs/user/contact_id&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>calculate&lt;/td>
&lt;td>created_by_place_uuid&lt;/td>
&lt;td>Facility of user that created report&lt;/td>
&lt;td>../inputs/user/facility_id&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="loading-the-users-contact-data">Loading the user&amp;rsquo;s contact data&lt;/h3>
&lt;p>While the &lt;code>inputs/user&lt;/code> group does not contain the user&amp;rsquo;s contact data, it does contain the user&amp;rsquo;s &lt;code>contact_id&lt;/code> which can be used to load the contact doc via a &lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/forms/form-inputs/#contact-selector">contact selector&lt;/a>.&lt;/p>
&lt;h2 id="contact-selector">Contact selector&lt;/h2>
&lt;p>Using a contact selector allows you to load data from the selected contact (person or place). The contact&amp;rsquo;s id can be provided by the form or the user can search for an existing contact.&lt;/p>
&lt;p>To select a contact in a form, create a field with the type &lt;code>string&lt;/code> and set the appearance to &lt;code>select-contact type-{{contact_type_1}} type-{{contact_type_2}} ...&lt;/code>. Setting multiple contact_type ids allows the user to search among multiple types of contacts. If no contact type appearance is specified then all contact types will be queried when searching.&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
For CHT version &lt;code>v3.9.x&lt;/code> and below, contacts must be selected by setting the field type to &lt;code>db:{{contact_type}}&lt;/code> and the appearance to &lt;code>db-object&lt;/code> (instead of using &lt;code>string&lt;/code> and &lt;code>select-contact&lt;/code>).
&lt;/div>
&lt;p>The contact selector can be used to link reports to the person or place in context when the form was created. Getting the values for &lt;code>_id&lt;/code> or &lt;code>patient_id&lt;/code> and setting them to &lt;code>patient_id&lt;/code> or &lt;code>patient_uuid&lt;/code> on the final report will link that report to the contact. Then the report will be displayed on the contact&amp;rsquo;s summary page.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>type&lt;/th>
&lt;th>name&lt;/th>
&lt;th>label&lt;/th>
&lt;th>appearance&lt;/th>
&lt;th>calculate&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>inputs&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>contact&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>string&lt;/td>
&lt;td>_id&lt;/td>
&lt;td>Patient ID&lt;/td>
&lt;td>select-contact type-person&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>string&lt;/td>
&lt;td>patient_id&lt;/td>
&lt;td>Medic ID&lt;/td>
&lt;td>hidden&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>calculate&lt;/td>
&lt;td>patient_uuid&lt;/td>
&lt;td>Patient UUID&lt;/td>
&lt;td>&lt;/td>
&lt;td>../contact/_id&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>calculate&lt;/td>
&lt;td>patient_id&lt;/td>
&lt;td>Patient ID&lt;/td>
&lt;td>&lt;/td>
&lt;td>../contact/patient_id&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Warning&lt;/h4>
The data loaded by the contact selector will overwrite any existing data in fields that are in the same group as the contact selector and share the same name as a field on the selected contact.
&lt;/div></description></item><item><title>Apps: Including Multimedia in Forms</title><link>https://docs.communityhealthtoolkit.org/apps/guides/forms/multimedia/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/guides/forms/multimedia/</guid><description>
&lt;h2 id="multimedia-formats">Multimedia Formats&lt;/h2>
&lt;p>There are many supported formats for video, audio, and images. We recommend using h.264(mpeg) for video, jpeg for images, and mp3 for audio. When creating videos or images keep in mind the dimensions and storage capabilities on phones that may be used. Lower end phones have smaller storage and screen sizes. When rendering images, video, and audio the CHT uses the browser&amp;rsquo;s built in rendering tools. This means you can render any media format that is supported by the &lt;a href="https://docs.communityhealthtoolkit.org/core/releases/#dependencies">minimum version of Chrome&lt;/a>.&lt;/p>
&lt;p>&lt;strong>List of Supported formats&lt;/strong> &lt;a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Supported_media_formats">video/audio&lt;/a>
&lt;a href="https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Image_types">images&lt;/a>&lt;/p>
&lt;h2 id="configuration">Configuration&lt;/h2>
&lt;p>To play multimedia from forms you need to add elements to your xml and upload the corresponding multimedia to couchdb as an attachment to your form.&lt;/p>
&lt;h3 id="form-config">Form Config&lt;/h3>
&lt;p>Add an xml element of text and another element of value. Set form equal to the type of multimedia being used(video, audio, image). The value element must contain &lt;code>jr://file_name.suffix&lt;/code> where &lt;code>file_name.suffix&lt;/code> is the name of your multimedia file uploaded to couchdb.&lt;/p>
&lt;p>Example:&lt;/p>
&lt;pre tabindex="0">&lt;code>&amp;lt;text id=&amp;#34;somevideo&amp;#34;&amp;gt;
&amp;lt;value form=&amp;#34;video&amp;#34;&amp;gt;jr://video.mp4&amp;lt;/value&amp;gt;
&amp;lt;/text&amp;gt;
&lt;/code>&lt;/pre>&lt;p>Display Example:&lt;/p>
&lt;pre tabindex="0">&lt;code>&amp;lt;input ref=&amp;#34;q2&amp;#34;&amp;gt;
&amp;lt;label ref=&amp;#34;jr:itext(&amp;#39;somevideo&amp;#39;)&amp;#34;/&amp;gt;
&amp;lt;/input&amp;gt;
&lt;/code>&lt;/pre>&lt;p>Here is a sample form that will display a video and/or image. When this form is opened a video player will be displayed so the user can watch the video. Forms support displaying of images and playing of audio files.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-xml" data-lang="xml">&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;h:html&lt;/span> &lt;span style="color:#c4a000">xmlns=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;http://www.w3.org/2002/xforms&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#c4a000">xmlns:h=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;http://www.w3.org/1999/xhtml&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#c4a000">xmlns:ev=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;http://www.w3.org/2001/xml-events&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#c4a000">xmlns:xsd=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;http://www.w3.org/2001/XMLSchema&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#c4a000">xmlns:jr=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;http://openrosa.org/javarosa&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;h:head&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;h:title&amp;gt;&lt;/span>Multimedia - Demo Form&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/h:title&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;model&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;itext&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;translation&lt;/span> &lt;span style="color:#c4a000">lang=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;en&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">&amp;lt;!-- Attach sample media files to form doc --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">&amp;lt;!-- https://sample-videos.com --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;text&lt;/span> &lt;span style="color:#c4a000">id=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;somevideo&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;value&lt;/span> &lt;span style="color:#c4a000">form=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;video&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>jr://video.mp4&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/value&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;/text&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;text&lt;/span> &lt;span style="color:#c4a000">id=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;someimage&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;value&lt;/span> &lt;span style="color:#c4a000">form=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;image&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>jr://image.jpg&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/value&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;/text&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;text&lt;/span> &lt;span style="color:#c4a000">id=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;someaudio&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;value&lt;/span> &lt;span style="color:#c4a000">form=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;audio&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>jr://audio.mp3&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/value&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;/text&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;/translation&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;/itext&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;instance&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;media&lt;/span> &lt;span style="color:#c4a000">id=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;multimedia&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;meta&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;instanceID/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;/meta&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;/media&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;/instance&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;/model&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;/h:head&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;h:body&lt;/span> &lt;span style="color:#c4a000">class=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;pages&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;group&lt;/span> &lt;span style="color:#c4a000">appearance=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;field-list&amp;#34;&lt;/span> &lt;span style="color:#c4a000">ref=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;g&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;input&lt;/span> &lt;span style="color:#c4a000">ref=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;q2&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;label&lt;/span> &lt;span style="color:#c4a000">ref=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;jr:itext(&amp;#39;somevideo&amp;#39;)&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;/input&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;input&lt;/span> &lt;span style="color:#c4a000">ref=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;q3&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;label&lt;/span> &lt;span style="color:#c4a000">ref=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;jr:itext(&amp;#39;someimage&amp;#39;)&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;/input&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;input&lt;/span> &lt;span style="color:#c4a000">ref=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;q3&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;label&lt;/span> &lt;span style="color:#c4a000">ref=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;jr:itext(&amp;#39;someaudio&amp;#39;)&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;/input&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;/group&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;/h:body&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/h:html&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="couchdb-config">Couchdb Config&lt;/h3>
&lt;p>The file needs to be added as an attachment with a name that matches what is defined in the form. This can be added by using curl or fauxton. Here is the structure of the curl command.&lt;/p>
&lt;p>&lt;code>curl -vX PUT https://user:pass@server_name/medic/&amp;lt;form_doc_id&amp;gt;/&amp;lt;attachment_name.suffix&amp;gt;?rev=&amp;lt;latest_form_revision&amp;gt; --data-binary @&amp;lt;local_file_name&amp;gt; -H &amp;quot;Content-Type: &amp;lt;expected_mime_type&amp;gt;&amp;quot;&lt;/code>&lt;/p>
&lt;p>Here is an example of how it would look uploading a sample video for the form above.&lt;/p>
&lt;p>&lt;code>curl -vX PUT https://user:pass@localhost/medic/form:multimedia/video.mp4?rev=11-a2ebf09cb9678c031859cd2c1da4b603 -k --data-binary @sample.mp4 -H &amp;quot;Content-Type: video/mp4&amp;quot;&lt;/code>&lt;/p>
&lt;p>To use fauxton.&lt;/p>
&lt;ol>
&lt;li>Navigate to fauxton. &lt;code>https://&amp;lt;server_name&amp;gt;/_utils&lt;/code>&lt;/li>
&lt;li>Click on the medic database.&lt;/li>
&lt;li>Locate the form document.&lt;/li>
&lt;li>Click add attachment&lt;/li>
&lt;li>Upload the multimedia file and ensure the name matches what has been defined in the form.&lt;/li>
&lt;/ol>
&lt;h3 id="uploading-with-cht-conf">Uploading with CHT-conf&lt;/h3>
&lt;p>Multimedia files can be uploaded when running CHT-conf to upload your forms.&lt;/p>
&lt;p>To include the files:&lt;/p>
&lt;ol>
&lt;li>Create a directory &lt;code>{form_name}-media&lt;/code>. EX: &lt;code>config/default/forms/app/delivery-media&lt;/code>&lt;/li>
&lt;li>Add multimedia files to &lt;code>{form_name}-media\image.png&lt;/code>. EX: &lt;code>config/default/forms/app/delivery-media/health_baby.png&lt;/code>&lt;/li>
&lt;li>Run &lt;code>cht-conf upload-app-forms&lt;/code>&lt;/li>
&lt;li>Confirm image is uploaded in CHT app.&lt;/li>
&lt;/ol></description></item><item><title>Apps: Tracking Wealth Quintiles</title><link>https://docs.communityhealthtoolkit.org/apps/guides/forms/wealth-quintiles/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/guides/forms/wealth-quintiles/</guid><description>
&lt;p>&lt;em>Introduced in v2.16.0&lt;/em>&lt;/p>
&lt;p>Household surveys with questions about the home, possessions, and access to safe drinking water have been used to create equity score and improve the targeting of health services. This guide will cover how quintile information from a household survey can be used in customizing care for individual household members. For example, the equity quintile can be used to increase the number of pregnancy follow-ups for women in specific households, or to display specific notes or questions within patient forms.&lt;/p>
&lt;p>For quintile information from a household survey to be used for people in that household, a form about a place must contain &lt;code>NationalQuintile&lt;/code> and/or &lt;code>UrbanQuintile&lt;/code> fields at the top level. When that form is submitted all the people belonging to that place will get the corresponding &lt;code>wealth_quintile_national&lt;/code> and &lt;code>wealth_quintile_urban&lt;/code> fields. Those fields can then be used by forms, tasks, and contact profiles accordingly.&lt;/p>
&lt;p>Note that the &lt;code>can_write_wealth_quintiles&lt;/code> permission is needed for the user that is submitting the form.&lt;/p>
&lt;h3 id="sample-form">Sample form&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>type&lt;/th>
&lt;th>name&lt;/th>
&lt;th>label&lt;/th>
&lt;th>relevant&lt;/th>
&lt;th>appearance&lt;/th>
&lt;th>calculate&lt;/th>
&lt;th>&amp;hellip;&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>string&lt;/td>
&lt;td>place_id&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>select-contact type-household&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>integer&lt;/td>
&lt;td>NationalQuintile&lt;/td>
&lt;td>National Quintile&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>integer&lt;/td>
&lt;td>UrbanQuintile&lt;/td>
&lt;td>Urban Quintile&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="sample-report">Sample Report&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;form&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;family_survey&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;data_record&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;content_type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;xml&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;fields&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;place_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;23c7ab6e-6ea5-4f9f-9ffa-f00a1e30278d&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;NationalQuintile&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;5&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;UrbanQuintile&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;3&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="sample-contact">Sample Contact&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;c148d0c7-b200-47f6-a891-3f55c78eda9b&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;_rev&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;3-746a7c8ecb15dc1f43bfa13eba2afbbe&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;person&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Jane Smith&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;notes&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;sex&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;female&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;date_of_birth_method&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;approx&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;date_of_birth&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;1987-12-10&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;phone&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;alternate_phone&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;external_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;reported_date&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1607530340715&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;parent&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;23c7ab6e-6ea5-4f9f-9ffa-f00a1e30278d&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;parent&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;8ed3600f-23e2-4446-8ff4-2528067085e7&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;wealth_quintile_national&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;5&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;wealth_quintile_urban&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;3&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Apps: Customizing Titles in the Reports List</title><link>https://docs.communityhealthtoolkit.org/apps/guides/forms/report-titles/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/guides/forms/report-titles/</guid><description>
&lt;p>&lt;em>Added in 3.9.0&lt;/em>&lt;/p>
&lt;p>By default the CHT shows the name of the subject of the report in the reports list. This can be overridden by configuring the &lt;code>subject_key&lt;/code> property with a translation key in the form document.&lt;/p>
&lt;p>The translation uses a summary of the report as the evaluation context so you can include report fields in your value, for example: &lt;code>Case registration {{case_id}}&lt;/code>. Useful properties available in the summary include: &lt;code>from&lt;/code> (the phone number of the sender), &lt;code>phone&lt;/code> (the phone number of the report contact), &lt;code>form&lt;/code> (the form code), &lt;code>subject.name&lt;/code> (the name of the subject), and &lt;code>case_id&lt;/code> (the generated case id).&lt;/p>
&lt;h2 id="code-sample">Code Sample&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#34;internalId&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;signal&amp;#34;&lt;/span>&lt;span style="color:#a40000">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#34;title&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Signal signoff&amp;#34;&lt;/span>&lt;span style="color:#a40000">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#34;subject_key&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;signal.list.subject&amp;#34;&lt;/span>&lt;span style="color:#a40000">,&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>