<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Community Health Toolkit – CHT Applications</title><link>https://docs.communityhealthtoolkit.org/apps/</link><description>Recent content in CHT Applications on Community Health Toolkit</description><generator>Hugo -- gohugo.io</generator><atom:link href="https://docs.communityhealthtoolkit.org/apps/index.xml" rel="self" type="application/rss+xml"/><item><title>Apps: Accessing CHT Apps</title><link>https://docs.communityhealthtoolkit.org/apps/concepts/access/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/concepts/access/</guid><description>
&lt;p>Apps built with the Core Framework runs on most modern computers with the newest versions of Google Chrome or Mozilla Firefox.&lt;/p>
&lt;h2 id="hardware--software-requirements">Hardware &amp;amp; Software Requirements&lt;/h2>
&lt;p>Hardware procurement, ownership, and management is the responsibility of each implementing organization. We strongly urge all organizations to procure hardware locally to ensure ease of replacement, repair, sustainability, and hardware support when needed.&lt;/p>
&lt;h2 id="accessing-on-desktop">Accessing on Desktop&lt;/h2>
&lt;p>On desktop devices, there is no need to download anything. Simply go to a web browser and type in your unique URL, for example:&lt;/p>
&lt;p>&lt;code>{{projectname}}.app.medicmobile.org&lt;/code>&lt;/p>
&lt;h2 id="accessing-on-mobile">Accessing on Mobile&lt;/h2>
&lt;p>The app also runs with an app on Android phones and tablets. It works best on devices running version 5.1 or later with at least 8 GB of internal memory (16 GB for supervisors) and minimum 1 GB RAM.&lt;/p>
&lt;h3 id="downloading-and-launching">Downloading and Launching&lt;/h3>
&lt;p>To download your app on a mobile device, first navigate to the Google Play Store. From there, click on the search icon in the upper right, and type in the custom name of your health app or project. Make sure the app shown is the correct one and then select it. Then, click on the “Install” button to begin the download.&lt;/p>
&lt;p>Once the download is complete, you can access your app via an app icon in your applications menu. Note that the icon, as well as the app name displayed, is customizable by the organization or project.&lt;/p>
&lt;figure class="left col-3 col-lg-3">&lt;a href="playstore.png">
&lt;img src="playstore.png"/> &lt;/a>
&lt;/figure>
&lt;figure class="left col-3 col-lg-3">&lt;a href="search-results.png">
&lt;img src="search-results.png"/> &lt;/a>
&lt;/figure>
&lt;figure class="left col-3 col-lg-3">&lt;a href="install.png">
&lt;img src="install.png"/> &lt;/a>
&lt;/figure>
&lt;figure class="left col-3 col-lg-3">&lt;a href="siaya.png">
&lt;img src="siaya.png"/> &lt;/a>
&lt;/figure>
&lt;h2 id="login">Login&lt;/h2>
&lt;p>When accessing your app for the very first time, a login page is displayed. Users enter a username and password that grant access to their customized app experience.&lt;/p>
&lt;p>On mobile devices, the app generally stays logged in after initial setup so that CHW users don’t have to type in their credentials each day.&lt;/p>
&lt;p>On desktop devices, the user must login again if they close the app tab or browser window.&lt;/p>
&lt;p>Users may log out by going to the options menu available in the top right corner of the app.&lt;/p>
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/apps/concepts/navigation/">Navigating CHT Apps&lt;/a>&lt;/p>
&lt;figure class="left col-3 col-lg-3">&lt;a href="login-mobile.png">
&lt;img src="login-mobile.png"/> &lt;/a>
&lt;/figure>
&lt;figure class="left col-9 col-lg-9">&lt;a href="login-desktop.png">
&lt;img src="login-desktop.png"/> &lt;/a>
&lt;/figure>
&lt;h2 id="magic-links-for-logging-in-token-login">Magic Links for Logging In (Token Login)&lt;/h2>
&lt;figure class="right col-6 col-lg-9">&lt;a href="admin.png">
&lt;img src="admin.png"/> &lt;/a>
&lt;/figure>
&lt;p>When creating users, the admin has the option to send a user their credentials via SMS using a link. Clicking the link generates a new, random and complex password with a 24-hour expiry. If no gateway is set up, the message may be sent via another messaging app.&lt;/p>
&lt;p>By clicking the magic link to log in, the user is able to enter their project&amp;rsquo;s instance directly, bypassing the need to enter their username and password. If the app is not installed on their phone, it will open in their default browser.&lt;/p>
&lt;p>To recover a password, the user needs to contact the admin so that they may regenerate a new magic link and repeat the workflow.&lt;/p>
&lt;p>
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/apps/examples/training/">Remote Onboarding and Training&lt;/a>&lt;/p>
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/token_login/">.token_login&lt;/a>&lt;/p>
&lt;/p>
&lt;figure class="left col-3 col-lg-3">&lt;a href="link.png">
&lt;img src="link.png"/> &lt;/a>
&lt;/figure>
&lt;figure class="left col-3 col-lg-3">&lt;a href="open-with.png">
&lt;img src="open-with.png"/> &lt;/a>
&lt;/figure>
&lt;figure class="left col-3 col-lg-3">&lt;a href="log-in.png">
&lt;img src="log-in.png"/> &lt;/a>
&lt;/figure>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
The magic link workflow will not work for users who want to use multiple devices or for multiple users on one device.
&lt;/div></description></item><item><title>Apps: Android</title><link>https://docs.communityhealthtoolkit.org/apps/features/integrations/android/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/features/integrations/android/</guid><description>
&lt;p>The &lt;a href="https://github.com/medic/cht-android">CHT Android application&lt;/a> can be launched by clicking on a link or invoking an intent in another Android app. This is useful for enabling login by SMS, directing a user to a specific page, and integrating between Android applications.&lt;/p>
&lt;h2 id="sending-a-url">Sending a URL&lt;/h2>
&lt;figure class="right col-8 col-lg-4">&lt;a href="android-prompt.png">
&lt;img src="android-prompt.png"/> &lt;/a>
&lt;/figure>
&lt;p>When the user clicks on a link to a CHT instance from an SMS, email, WhatsApp, or any other app, Android will prompt the user to choose whether to open the URL in the Android app or the browser. If a CHT app is not installed then the URL will be opened in the browser.&lt;/p>
&lt;p>Users can choose &amp;ldquo;Always&amp;rdquo; to skip this prompt in future. The prompt may look different depending on the version of Android being used.&lt;/p>
&lt;h2 id="using-an-intent">Using an intent&lt;/h2>
&lt;p>To have another Android application launch the CHT Android application, use an &lt;a href="https://developer.android.com/reference/android/content/Intent.html#ACTION_VIEW">ACTION_VIEW&lt;/a> intent, for example:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-java" data-lang="java">&lt;span style="color:#000">String&lt;/span> &lt;span style="color:#000">url&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;https://myapplication.app.medicmobile.org&amp;#34;&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">;&lt;/span>
&lt;span style="color:#000">Intent&lt;/span> &lt;span style="color:#000">i&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#204a87;font-weight:bold">new&lt;/span> &lt;span style="color:#000">Intent&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>&lt;span style="color:#000">Intent&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">ACTION_VIEW&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">);&lt;/span>
&lt;span style="color:#000">i&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">setData&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>&lt;span style="color:#000">Uri&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">parse&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>&lt;span style="color:#000">url&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">));&lt;/span>
&lt;span style="color:#000">startActivity&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>&lt;span style="color:#000">i&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="version-notes">Version notes&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Feature&lt;/th>
&lt;th>CHT Core version&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Released&lt;/td>
&lt;td>3.10.0&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Apps: API to interact with CHT Applications</title><link>https://docs.communityhealthtoolkit.org/apps/reference/api/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/reference/api/</guid><description>
&lt;div class="pageinfo pageinfo-primary">
&lt;p>This page covers the endpoints to use when integrating with the CHT server. If there isn&amp;rsquo;t an endpoint that provides the function or data you need, direct access to the database is possible via the &lt;a href="https://docs.couchdb.org/en/stable/api/index.html">CouchDB API&lt;/a>. Access to the &lt;a href="https://docs.communityhealthtoolkit.org/core/overview/data-flows-for-analytics/">PostgreSQL database&lt;/a> may also prove useful for data analysis. If additional endpoints would be helpful, please make suggestions via a &lt;a href="https://github.com/medic/cht-core/issues/new/choose">GitHub issue&lt;/a>.&lt;/p>
&lt;/div>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#settings">Settings&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#get-apiv1settings">GET /api/v1/settings&lt;/a>&lt;/li>
&lt;li>&lt;a href="#put-apiv1settings">PUT /api/v1/settings&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#query-parameters">Query Parameters&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#export">Export&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#get-apiv2exportdhis">GET /api/v2/export/dhis&lt;/a>&lt;/li>
&lt;li>&lt;a href="#get-apiv2exportreports">GET /api/v2/export/reports&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#query-parameters-1">Query parameters&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#get-apiv2exportmessages">GET /api/v2/export/messages&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#output">Output&lt;/a>&lt;/li>
&lt;li>&lt;a href="#examples">Examples&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#get-apiv2exportfeedback">GET /api/v2/export/feedback&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#query-parameters-2">Query Parameters&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#get-apiv2exportcontacts">GET /api/v2/export/contacts&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#query-parameters-3">Query parameters&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#forms">Forms&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#get-apiv1forms">GET /api/v1/forms&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#headers">Headers&lt;/a>&lt;/li>
&lt;li>&lt;a href="#examples-1">Examples&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#get-apiv1formsidformat">GET /api/v1/forms/{{id}}.{{format}}&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#parameters">Parameters&lt;/a>&lt;/li>
&lt;li>&lt;a href="#examples-2">Examples&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#post-apiv1formsvalidate">POST /api/v1/forms/validate&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#headers-1">Headers&lt;/a>&lt;/li>
&lt;li>&lt;a href="#examples-3">Examples&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#records">Records&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#post-apiv2records">POST /api/v2/records&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#headers-2">Headers&lt;/a>&lt;/li>
&lt;li>&lt;a href="#examples-4">Examples&lt;/a>&lt;/li>
&lt;li>&lt;a href="#errors">Errors&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#sms">SMS&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#post-apisms">POST /api/sms&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#people">People&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#supported-properties">Supported Properties&lt;/a>
&lt;ul>
&lt;li>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#post-apiv1people">POST /api/v1/people&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#permissions">Permissions&lt;/a>&lt;/li>
&lt;li>&lt;a href="#examples-5">Examples&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#places">Places&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#supported-properties-1">Supported Properties&lt;/a>
&lt;ul>
&lt;li>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#post-apiv1places">POST /api/v1/places&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#permissions-1">Permissions&lt;/a>&lt;/li>
&lt;li>&lt;a href="#examples-6">Examples&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#post-apiv1placesid">POST /api/v1/places/{{id}}&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#permissions-2">Permissions&lt;/a>&lt;/li>
&lt;li>&lt;a href="#examples-7">Examples&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#users">Users&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#supported-properties-2">Supported Properties&lt;/a>
&lt;ul>
&lt;li>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#get-apiv1users">GET /api/v1/users&lt;/a>
&lt;ul>
&lt;li>&lt;/li>
&lt;li>&lt;a href="#examples-8">Examples&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#post-apiv1users">POST /api/v1/users&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#permissions-4">Permissions&lt;/a>&lt;/li>
&lt;li>&lt;a href="#examples-9">Examples&lt;/a>&lt;/li>
&lt;li>&lt;a href="#errors-1">Errors&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#post-apiv1usersusername">POST /api/v1/users/{{username}}&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#permissions-5">Permissions&lt;/a>&lt;/li>
&lt;li>&lt;a href="#updating-yourself">Updating yourself&lt;/a>&lt;/li>
&lt;li>&lt;a href="#url-parameters">URL Parameters&lt;/a>&lt;/li>
&lt;li>&lt;a href="#examples-10">Examples&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#delete-apiv1usersusername">DELETE /api/v1/users/{{username}}&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#permissions-6">Permissions&lt;/a>&lt;/li>
&lt;li>&lt;a href="#url-parameters-1">URL Parameters&lt;/a>&lt;/li>
&lt;li>&lt;a href="#examples-11">Examples&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#get-apiv1users-info">GET /api/v1/users-info&lt;/a>
&lt;ul>
&lt;li>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#bulk-operations">Bulk Operations&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#post-apiv1bulk-delete">POST /api/v1/bulk-delete&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#permissions-7">Permissions&lt;/a>&lt;/li>
&lt;li>&lt;a href="#parameters-1">Parameters&lt;/a>&lt;/li>
&lt;li>&lt;a href="#errors-2">Errors&lt;/a>&lt;/li>
&lt;li>&lt;a href="#examples-12">Examples&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#monitoring">Monitoring&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#get-apiv1monitoring">GET /api/v1/monitoring&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#permissions-8">Permissions&lt;/a>&lt;/li>
&lt;li>&lt;a href="#examples-13">Examples&lt;/a>&lt;/li>
&lt;li>&lt;a href="#response-content">Response content&lt;/a>&lt;/li>
&lt;li>&lt;a href="#errors-3">Errors&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#get-apiv2monitoring">GET /api/v2/monitoring&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#permissions-9">Permissions&lt;/a>&lt;/li>
&lt;li>&lt;a href="#examples-14">Examples&lt;/a>&lt;/li>
&lt;li>&lt;a href="#response-content-1">Response content&lt;/a>&lt;/li>
&lt;li>&lt;a href="#errors-4">Errors&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#upgrades">Upgrades&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#post-apiv1upgrade">POST /api/v1/upgrade&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#example-2">Example&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#post-apiv1upgradestage">POST /api/v1/upgrade/stage&lt;/a>&lt;/li>
&lt;li>&lt;a href="#post-apiv1upgradecomplete">POST /api/v1/upgrade/complete&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#hydrate">Hydrate&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#get-apiv1hydrate">GET api/v1/hydrate&lt;/a>
&lt;ul>
&lt;li>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#post-apiv1hydrate">POST api/v1/hydrate&lt;/a>
&lt;ul>
&lt;li>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#contacts-by-phone">Contacts by phone&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#get-apiv1contacts-by-phone">GET api/v1/contacts-by-phone&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#query-parameters-6">Query parameters&lt;/a>&lt;/li>
&lt;li>&lt;a href="#example-5">Example&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#post-apiv1contacts-by-phone">POST api/v1/contacts-by-phone&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#parameters-3">Parameters&lt;/a>&lt;/li>
&lt;li>&lt;a href="#example-6">Example&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#replication-limit">Replication Limit&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#get-apiv1users-doc-count">GET /api/v1/users-doc-count&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#query-parameters-7">Query parameters&lt;/a>&lt;/li>
&lt;li>&lt;a href="#example-7">Example&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#credentials">Credentials&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#put-apiv1credentials">PUT /api/v1/credentials&lt;/a>&lt;/li>
&lt;li>&lt;a href="#3x-api">3.x API&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
&lt;p>Various properties throughout this API use a timestamp value, the
following formats are supported:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ISO 8601 combined date and time with timezone of the format below where &amp;ldquo;Z&amp;rdquo;
is offset from UTC like &amp;ldquo;-03&amp;rdquo;, &amp;ldquo;+1245&amp;rdquo;, or just &amp;ldquo;Z&amp;rdquo; which is UTC (0 offset);&lt;/p>
&lt;pre>&lt;code> YYYY-MM-DDTHH:mm:ssZ
YYYY-MM-DDTHH:mm:ss.SSSZ
&lt;/code>&lt;/pre>
&lt;/li>
&lt;li>
&lt;p>Milliseconds since Unix Epoch&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>A compatible value can be generated using the &lt;code>toISOString&lt;/code> or &lt;code>toValue&lt;/code> method
on a Javascript Date object.&lt;/p>
&lt;h5 id="examples">Examples&lt;/h5>
&lt;ul>
&lt;li>2011-10-10T14:48:00-0300&lt;/li>
&lt;li>2016-07-01T13:48:24+00:00&lt;/li>
&lt;li>2016-07-01T13:48:24Z&lt;/li>
&lt;li>1467383343484 (MS since Epoch)&lt;/li>
&lt;/ul>
&lt;/div>
&lt;h2 id="settings">Settings&lt;/h2>
&lt;p>Get and update the app settings.&lt;/p>
&lt;h3 id="get-apiv1settings">GET /api/v1/settings&lt;/h3>
&lt;p>Returns the settings in JSON format.&lt;/p>
&lt;h3 id="put-apiv1settings">PUT /api/v1/settings&lt;/h3>
&lt;h4 id="query-parameters">Query Parameters&lt;/h4>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Variable&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>overwrite&lt;/td>
&lt;td>Whether to replace settings document with input document. If both replace and overwite are set, then it overwites only. Defaults to replace.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>replace&lt;/td>
&lt;td>Whether to replace existing settings for the given properties or to merge. Defaults to false (merging).&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Returns a JSON object with two fields:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;success&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;upgraded&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">false&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Variable&lt;/th>
&lt;th>Type&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>success&lt;/td>
&lt;td>Boolean&lt;/td>
&lt;td>Always &lt;code>true&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>upgraded&lt;/td>
&lt;td>Boolean&lt;/td>
&lt;td>Whether the settings doc was updated or not&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="export">Export&lt;/h2>
&lt;p>Request different types of data in various formats.&lt;/p>
&lt;p>Each of the export endpoints except contacts and feedback supports a parameter which returns date formatted in human readable form (ISO 8601). Setting this parameter to false or leaving it out will return dates formatted as an epoch timestamp.&lt;/p>
&lt;p>To set this parameter for a GET request use:&lt;/p>
&lt;pre>&lt;code>http://admin:pass@localhost:5988/api/v2/export/messages?options[humanReadable]=true
&lt;/code>&lt;/pre>&lt;p>To set this parameter for a POST request submit this as the request body:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;options&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;humanReadable&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="get-apiv2exportdhis">GET /api/v2/export/dhis&lt;/h3>
&lt;p>Exports target data formatted as a DHIS2 dataValueSet. The data can be filtered to a specific section of the contact hierarchy or for a given time interval.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Parameter&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>dataSet&lt;/td>
&lt;td>A DHIS2 dataSet ID. Targets associated with this dataSet will have their data aggregated. (required)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>date.from&lt;/td>
&lt;td>Filter the target data to be aggregated to be within the month of this timestamp. (required)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>orgUnit&lt;/td>
&lt;td>Filter the target data to only that associated with contacts with attribute &lt;code>{ dhis: { orgUnit } }&lt;/code>. (optional)&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;filters&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;dataSet&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;VMuFODsyWaO&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;date&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;from&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">949392000000&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;orgUnit&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;KbY9DJ8mBkx&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="get-apiv2exportreports">GET /api/v2/export/reports&lt;/h3>
&lt;p>It uses the &lt;a href="https://github.com/medic/cht-core/tree/master/shared-libs/search">search shared library&lt;/a> to ensure identical results in the export and the front-end. It also only supports exporting CSV so we can efficiently stream infinitely large exports.&lt;/p>
&lt;h4 id="query-parameters-1">Query parameters&lt;/h4>
&lt;p>These are identical to the JS objects passed to the shared library, as if you were using it directly in Javascript.&lt;/p>
&lt;p>You may either pass JSON in the request body using &lt;code>POST&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#a40000">POST&lt;/span> &lt;span style="color:#a40000">/api/v&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">2&lt;/span>&lt;span style="color:#a40000">/export/reports&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;filters&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;forms&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;selected&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;code&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;immunization_visit&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Or using form-style parameters as &lt;code>GET&lt;/code>:&lt;/p>
&lt;pre>&lt;code>GET /api/v2/export/reports?filters[search]=&amp;amp;filters[forms][selected][0][code]=immunization_visit
&lt;/code>&lt;/pre>&lt;p>&lt;strong>NB:&lt;/strong> this API is bound directly to this library. For more information on what queries you can perform with the search library, see &lt;a href="https://github.com/medic/cht-core/tree/master/shared-libs/search">its documentation&lt;/a>.&lt;/p>
&lt;h3 id="get-apiv2exportmessages">GET /api/v2/export/messages&lt;/h3>
&lt;p>Download messages.&lt;/p>
&lt;h4 id="output">Output&lt;/h4>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Column&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Record UUID&lt;/td>
&lt;td>The unique ID for the message in the database.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Patient ID&lt;/td>
&lt;td>The generated short patient ID for use in SMS.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Reported Date&lt;/td>
&lt;td>The date the message was received or generated.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>From&lt;/td>
&lt;td>This phone number the message is or will be sent from.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Contact Name&lt;/td>
&lt;td>The name of the user this message is assigned to.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Message Type&lt;/td>
&lt;td>The type of the message&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Message State&lt;/td>
&lt;td>The state of the message at the time this export was generated&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Received Timestamp&lt;/td>
&lt;td>The datetime the message was received. Only applies to incoming messages.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Other Timestamps&lt;/td>
&lt;td>The datetime the message transitioned to each state.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Sent By&lt;/td>
&lt;td>The phone number the message was sent from. Only applies to incoming messages.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>To Phone&lt;/td>
&lt;td>The phone number the message is or will be sent to. Only applies to outgoing messages.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Message Body&lt;/td>
&lt;td>The content of the message.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="examples">Examples&lt;/h4>
&lt;pre>&lt;code>/api/v2/export/messages
&lt;/code>&lt;/pre>&lt;h3 id="get-apiv2exportfeedback">GET /api/v2/export/feedback&lt;/h3>
&lt;p>Export a file containing the user feedback.&lt;/p>
&lt;h4 id="query-parameters-2">Query Parameters&lt;/h4>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Variable&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>format&lt;/td>
&lt;td>The format of the returned file, either &amp;lsquo;csv&amp;rsquo; or &amp;lsquo;xml&amp;rsquo;. Defaults to &amp;lsquo;csv&amp;rsquo;.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>locale&lt;/td>
&lt;td>Locale for translatable data. Defaults to &amp;lsquo;en&amp;rsquo;.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>tz&lt;/td>
&lt;td>The timezone to show date values in, as an offset in minutes from GMT, for example &amp;lsquo;-120&amp;rsquo;.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>skip_header_row&lt;/td>
&lt;td>&amp;lsquo;true&amp;rsquo; to omit the column headings. Defaults to &amp;lsquo;false&amp;rsquo;.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="get-apiv2exportcontacts">GET /api/v2/export/contacts&lt;/h3>
&lt;p>Returns a JSON array of contacts.&lt;/p>
&lt;h4 id="query-parameters-3">Query parameters&lt;/h4>
&lt;p>These are identical to the JS objects passed to the shared library, as if you were using it directly in Javascript.&lt;/p>
&lt;p>You may either pass JSON in the request body using &lt;code>POST&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#a40000">POST&lt;/span> &lt;span style="color:#a40000">/api/v&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">2&lt;/span>&lt;span style="color:#a40000">/export/contacts&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;filters&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;search&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;jim&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Or using form-style parameters as &lt;code>GET&lt;/code>:&lt;/p>
&lt;pre>&lt;code>GET /api/v2/export/contacts?filters[search]=jim
&lt;/code>&lt;/pre>&lt;h2 id="forms">Forms&lt;/h2>
&lt;h3 id="get-apiv1forms">GET /api/v1/forms&lt;/h3>
&lt;p>Returns a list of currently installed forms (in all available formats) in JSON format.&lt;/p>
&lt;h4 id="headers">Headers&lt;/h4>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Key&lt;/th>
&lt;th>Value&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>X-OpenRosa-Version&lt;/td>
&lt;td>1.0&lt;/td>
&lt;td>If this header is specified returns XML formatted forms list. See &lt;a href="https://bitbucket.org/javarosa/javarosa/wiki/FormListAPI">OpenRosa FormListAPI&lt;/a>.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="examples-1">Examples&lt;/h4>
&lt;p>Get list of forms currently installed.&lt;/p>
&lt;pre>&lt;code>GET /api/v1/forms
&lt;/code>&lt;/pre>&lt;pre>&lt;code>HTTP/1.1 200
Content-Type: application/json; charset=utf-8
[&amp;quot;anc_visit.xml&amp;quot;,&amp;quot;anc_registration.xml&amp;quot;,&amp;quot;off.xml&amp;quot;, &amp;quot;off.json&amp;quot;]
&lt;/code>&lt;/pre>&lt;p>Get OpenRosa XForms compatible forms installed in XML format.&lt;/p>
&lt;pre>&lt;code>GET /api/v1/forms
Host: medic.local
X-OpenRosa-Version: 1.0
&lt;/code>&lt;/pre>&lt;pre>&lt;code>HTTP/1.1 200 OK
Content-Type: text/xml; charset=utf-8
X-OpenRosa-Version: 1.0
&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;
&amp;lt;xforms xmlns=&amp;quot;http://openrosa.org/xforms/xformsList&amp;quot;&amp;gt;
&amp;lt;xform&amp;gt;
&amp;lt;name&amp;gt;Visit&amp;lt;/name&amp;gt;
&amp;lt;formID&amp;gt;ANCVisit&amp;lt;/formID&amp;gt;
&amp;lt;hash&amp;gt;md5:1f0f096602ed794a264ab67224608cf4&amp;lt;/hash&amp;gt;
&amp;lt;downloadUrl&amp;gt;http://medic.local/api/v1/forms/anc_visit.xml&amp;lt;/downloadUrl&amp;gt;
&amp;lt;/xform&amp;gt;
&amp;lt;xform&amp;gt;
&amp;lt;name&amp;gt;Registration with LMP&amp;lt;/name&amp;gt;
&amp;lt;formID&amp;gt;PregnancyRegistration&amp;lt;/formID&amp;gt;
&amp;lt;hash&amp;gt;md5:1f0f096602ed794a264ab67224608cf4&amp;lt;/hash&amp;gt;
&amp;lt;downloadUrl&amp;gt;http://medic.local/api/v1/forms/anc_registration.xml&amp;lt;/downloadUrl&amp;gt;
&amp;lt;/xform&amp;gt;
&amp;lt;xform&amp;gt;
&amp;lt;name&amp;gt;Stop&amp;lt;/name&amp;gt;
&amp;lt;formID&amp;gt;Stop&amp;lt;/formID&amp;gt;
&amp;lt;hash&amp;gt;md5:1f0f096602ed794a264ab67224608cf4&amp;lt;/hash&amp;gt;
&amp;lt;downloadUrl&amp;gt;http://medic.local/api/v1/forms/off.xml&amp;lt;/downloadUrl&amp;gt;
&amp;lt;/xform&amp;gt;
&amp;lt;/xforms&amp;gt;
&lt;/code>&lt;/pre>&lt;h3 id="get-apiv1formsidformat">GET /api/v1/forms/{{id}}.{{format}}&lt;/h3>
&lt;p>Return form definition for a given form ID and format.&lt;/p>
&lt;h4 id="parameters">Parameters&lt;/h4>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Variable&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>id&lt;/td>
&lt;td>Form identifier&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>format&lt;/td>
&lt;td>Format string or file extension. e.g. xml, json&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="examples-2">Examples&lt;/h4>
&lt;p>Get latest version of the PregnancyRegistration form in xml (XForms) format.&lt;/p>
&lt;pre>&lt;code>GET /api/v1/forms/pregnancyregistration.xml
&lt;/code>&lt;/pre>&lt;p>Get the latest version of the NPYY form in JSON format.&lt;/p>
&lt;pre>&lt;code>GET /api/v1/forms/NPYY.json
&lt;/code>&lt;/pre>&lt;h3 id="post-apiv1formsvalidate">POST /api/v1/forms/validate&lt;/h3>
&lt;p>&lt;em>Added in 3.12.0&lt;/em>
Validate the XForm passed. Require the &lt;code>can_configure&lt;/code> permission.&lt;/p>
&lt;h4 id="headers-1">Headers&lt;/h4>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Key&lt;/th>
&lt;th>Value&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Content-Type&lt;/td>
&lt;td>application/xml&lt;/td>
&lt;td>The form is sent in XML format&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Authorization&lt;/td>
&lt;td>Basic KEY&lt;/td>
&lt;td>KEY is the &amp;ldquo;basic&amp;rdquo; token&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="examples-3">Examples&lt;/h4>
&lt;pre>&lt;code>POST /api/v1/forms/validate HTTP/1.1
Content-Type: application/xml
Authorization: Basic XXXXXXXXXX
&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;
&amp;lt;xforms xmlns=&amp;quot;http://openrosa.org/xforms/xformsList&amp;quot;&amp;gt;
&amp;lt;xform&amp;gt;
&amp;lt;name&amp;gt;Visit&amp;lt;/name&amp;gt;
&amp;lt;formID&amp;gt;ANCVisit&amp;lt;/formID&amp;gt;
&amp;lt;hash&amp;gt;md5:1f0f096602ed794a264ab67224608cf4&amp;lt;/hash&amp;gt;
&amp;lt;downloadUrl&amp;gt;http://medic.local/api/v1/forms/anc_visit.xml&amp;lt;/downloadUrl&amp;gt;
&amp;lt;/xform&amp;gt;
&amp;lt;xform&amp;gt;
&amp;lt;name&amp;gt;Registration with LMP&amp;lt;/name&amp;gt;
&amp;lt;formID&amp;gt;PregnancyRegistration&amp;lt;/formID&amp;gt;
&amp;lt;hash&amp;gt;md5:1f0f096602ed794a264ab67224608cf4&amp;lt;/hash&amp;gt;
&amp;lt;downloadUrl&amp;gt;http://medic.local/api/v1/forms/anc_registration.xml&amp;lt;/downloadUrl&amp;gt;
&amp;lt;/xform&amp;gt;
&amp;lt;xform&amp;gt;
&amp;lt;name&amp;gt;Stop&amp;lt;/name&amp;gt;
&amp;lt;formID&amp;gt;Stop&amp;lt;/formID&amp;gt;
&amp;lt;hash&amp;gt;md5:1f0f096602ed794a264ab67224608cf4&amp;lt;/hash&amp;gt;
&amp;lt;downloadUrl&amp;gt;http://medic.local/api/v1/forms/off.xml&amp;lt;/downloadUrl&amp;gt;
&amp;lt;/xform&amp;gt;
&amp;lt;/xforms&amp;gt;
&lt;/code>&lt;/pre>&lt;p>Example response when the form passed the validations:&lt;/p>
&lt;pre>&lt;code>HTTP/1.1 200 OK
Content-Type: application/json
{ok: true}
&lt;/code>&lt;/pre>&lt;p>Example response when the form failed the validations:&lt;/p>
&lt;pre>&lt;code>HTTP/1.1 400 Bad Request
Content-Type: application/json
{error: &amp;quot;Error transforming xml. xsltproc return ...&amp;quot;}
&lt;/code>&lt;/pre>&lt;h2 id="records">Records&lt;/h2>
&lt;h3 id="post-apiv2records">POST /api/v2/records&lt;/h3>
&lt;p>Create a new record based on a &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/forms/">JSON form&lt;/a> that has been configured.&lt;/p>
&lt;p>Records can be created one of two ways, parsing the form data yourself and submitting a JSON object or by submitting the raw message string.&lt;/p>
&lt;h4 id="headers-2">Headers&lt;/h4>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Key&lt;/th>
&lt;th>Value&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Content-Type&lt;/td>
&lt;td>application/x-www-form-urlencoded&lt;/td>
&lt;td>Processes form parameters.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Content-Type&lt;/td>
&lt;td>application/json&lt;/td>
&lt;td>Processes form data in request body as JSON.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Only one variant of the &lt;code>Content-Type&lt;/code> header may be provided; RFC 2616 does not
allow multiple content types to appear in a single &lt;code>Content-Type&lt;/code> header.&lt;/p>
&lt;h5 id="form-parameters">Form Parameters&lt;/h5>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Variable&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>message&lt;/td>
&lt;td>Message string in a supported format like Muvuku or Textforms. Depending if your CHT instance is configured in forms-only mode or not you might receive an error if the form is not found.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>from&lt;/td>
&lt;td>Reporting phone number.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>reported_date&lt;/td>
&lt;td>Timestamp in MS since Unix Epoch of when the message was received on the gateway. Defaults to now.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h5 id="json-properties">JSON Properties&lt;/h5>
&lt;p>Special values reside in the property &lt;code>_meta&lt;/code>, so you can&amp;rsquo;t have a form field named &lt;code>_meta&lt;/code>. Only strings and numbers are currently support as field values.&lt;/p>
&lt;p>All property names will be lowercased.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Key&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>_meta.form&lt;/td>
&lt;td>The form code.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>_meta.from&lt;/td>
&lt;td>Reporting phone number. Optional.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>_meta.reported_date&lt;/td>
&lt;td>Timestamp in MS since Unix Epoch of when the message was received on the gateway. Defaults to now.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>_meta.locale&lt;/td>
&lt;td>Optional locale string. Example: &amp;lsquo;fr&amp;rsquo;&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="examples-4">Examples&lt;/h4>
&lt;p>Creating new record using message field.&lt;/p>
&lt;pre>&lt;code>POST /api/v1/records
Content-Type: application/x-www-form-urlencoded
message=1!YYYZ!Sam#23#2015#ANC&amp;amp;from=+5511943348031&amp;amp;reported_date=1352399720000
&lt;/code>&lt;/pre>&lt;pre>&lt;code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
{
&amp;quot;success&amp;quot;: true,
&amp;quot;id&amp;quot;: &amp;quot;364c796a843fbe0a73476f9153012733&amp;quot;
}
&lt;/code>&lt;/pre>&lt;p>Creating new record with JSON.&lt;/p>
&lt;pre>&lt;code>POST /api/v1/records
Content-Type: application/json
{
&amp;quot;nurse&amp;quot;: &amp;quot;Sam&amp;quot;,
&amp;quot;week&amp;quot;: 23,
&amp;quot;year&amp;quot;: 2015,
&amp;quot;visit&amp;quot;: &amp;quot;ANC&amp;quot;,
&amp;quot;_meta&amp;quot;: {
&amp;quot;form&amp;quot;: &amp;quot;YYYZ&amp;quot;,
&amp;quot;reported_date&amp;quot;: 1352399720000
}
}
&lt;/code>&lt;/pre>&lt;pre>&lt;code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
{
&amp;quot;success&amp;quot;: true,
&amp;quot;id&amp;quot;: &amp;quot;364c796a843fbe0a73476f9153012733&amp;quot;
}
&lt;/code>&lt;/pre>&lt;h4 id="errors">Errors&lt;/h4>
&lt;p>If required fields are not found return 500.&lt;/p>
&lt;p>If invalid JSON return error response 500.&lt;/p>
&lt;p>If submitting JSON and corresponding form is not found on the server you will receive an error.&lt;/p>
&lt;h2 id="sms">SMS&lt;/h2>
&lt;h3 id="post-apisms">POST /api/sms&lt;/h3>
&lt;p>Endpoint used by cht-gateway to send sms messages. More documentation in the &lt;a href="https://github.com/medic/cht-gateway/blob/master/README.md">cht-gateway repo&lt;/a>.&lt;/p>
&lt;h2 id="people">People&lt;/h2>
&lt;h3 id="supported-properties">Supported Properties&lt;/h3>
&lt;p>Use JSON in the request body to specify a person&amp;rsquo;s details.&lt;/p>
&lt;p>Note: this does not accommodate having a &lt;code>place&lt;/code> field on your form and will likely be revised soon.&lt;/p>
&lt;h5 id="required">Required&lt;/h5>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Key&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>name&lt;/td>
&lt;td>String used to describe the person.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>type&lt;/td>
&lt;td>ID of the &lt;code>contact_type&lt;/code> for the new person. Defaults to &amp;lsquo;person&amp;rsquo; for backwards compatibility.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h5 id="optional">Optional&lt;/h5>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Key&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>place&lt;/td>
&lt;td>String that references a place or object that defines a new place.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>reported_date&lt;/td>
&lt;td>Timestamp of when the record was reported or created. Defaults to now.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="post-apiv1people">POST /api/v1/people&lt;/h3>
&lt;p>Create new people.&lt;/p>
&lt;h4 id="permissions">Permissions&lt;/h4>
&lt;p>By default any user can create or modify a place. Use these permissions to restrict access:&lt;/p>
&lt;p>&lt;code>can_create_people&lt;/code>, &lt;code>can_create_places&lt;/code>&lt;/p>
&lt;h4 id="examples-5">Examples&lt;/h4>
&lt;p>Create new person and place hierarchy.&lt;/p>
&lt;pre>&lt;code>POST /api/v1/people
Content-Type: application/json
{
&amp;quot;name&amp;quot;: &amp;quot;Hannah&amp;quot;,
&amp;quot;phone&amp;quot;: &amp;quot;+2548277210095&amp;quot;,
&amp;quot;type&amp;quot;: &amp;quot;contact&amp;quot;,
&amp;quot;contact_type&amp;quot;: &amp;quot;patient&amp;quot;,
&amp;quot;place&amp;quot;: {
&amp;quot;name&amp;quot;: &amp;quot;CHP Area One&amp;quot;,
&amp;quot;type&amp;quot;: &amp;quot;health_center&amp;quot;,
&amp;quot;parent&amp;quot;: {
&amp;quot;name&amp;quot;: &amp;quot;CHP Branch One&amp;quot;,
&amp;quot;type&amp;quot;: &amp;quot;district_hospital&amp;quot;
}
}
}
&lt;/code>&lt;/pre>&lt;p>Create new person and assign existing place.&lt;/p>
&lt;pre>&lt;code>POST /api/v1/people
Content-Type: application/json
{
&amp;quot;name&amp;quot;: &amp;quot;Samuel&amp;quot;,
&amp;quot;place&amp;quot;: &amp;quot;1d83f2b4a27eceb40df9e9f9ad06d137&amp;quot;,
&amp;quot;type&amp;quot;: &amp;quot;contact&amp;quot;,
&amp;quot;contact_type&amp;quot;: &amp;quot;chp&amp;quot;
}
&lt;/code>&lt;/pre>&lt;p>Example response:&lt;/p>
&lt;pre>&lt;code>HTTP/1.1 200 OK
Content-Type: application/json
{
&amp;quot;id&amp;quot;: &amp;quot;71df9d25ed6732ea3b4435862510d115&amp;quot;,
&amp;quot;rev&amp;quot;: &amp;quot;1-a4060843d78f46a60a6f41051e40e3b5&amp;quot;
}
&lt;/code>&lt;/pre>&lt;h2 id="places">Places&lt;/h2>
&lt;p>By default any user can create or modify a place.&lt;/p>
&lt;h3 id="supported-properties-1">Supported Properties&lt;/h3>
&lt;p>Use JSON in the request body to specify a place&amp;rsquo;s details.&lt;/p>
&lt;h5 id="required-properties">Required Properties&lt;/h5>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Key&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>name&lt;/td>
&lt;td>String used to describe the place.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>type&lt;/td>
&lt;td>Place type&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>parent&lt;/td>
&lt;td>String that references a place or object that defines a new place. Optional for District Hospital and National Office types.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h5 id="optional-properties">Optional Properties&lt;/h5>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Key&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>contact&lt;/td>
&lt;td>String identifier for a person or object that defines a new person.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>reported_date&lt;/td>
&lt;td>Timestamp of when the record was reported or created. Defaults to now.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h5 id="place-types">Place Types&lt;/h5>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Key&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>clinic&lt;/td>
&lt;td>Clinic&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>health_center&lt;/td>
&lt;td>Health Center&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>district_hospital&lt;/td>
&lt;td>District Hospital&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>national_office&lt;/td>
&lt;td>National Office&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="post-apiv1places">POST /api/v1/places&lt;/h3>
&lt;p>Create a new place and optionally a contact.&lt;/p>
&lt;h4 id="permissions-1">Permissions&lt;/h4>
&lt;p>By default any user can create new places. Use these permissions to restrict access:&lt;/p>
&lt;p>&lt;code>can_create_places&lt;/code>, &lt;code>can_create_people&lt;/code>&lt;/p>
&lt;h4 id="examples-6">Examples&lt;/h4>
&lt;p>Create new place referencing existing parent.&lt;/p>
&lt;pre>&lt;code>POST /api/v1/places
Content-Type: application/json
{
&amp;quot;name&amp;quot;: &amp;quot;Busia Clinic&amp;quot;,
&amp;quot;type&amp;quot;: &amp;quot;clinic&amp;quot;,
&amp;quot;parent&amp;quot;: &amp;quot;1d83f2b4a27eceb40df9e9f9ad06d137&amp;quot;
}
&lt;/code>&lt;/pre>&lt;p>Create child and parent places.&lt;/p>
&lt;pre>&lt;code>POST /api/v1/places
Content-Type: application/json
{
&amp;quot;name&amp;quot;: &amp;quot;CHP Area One&amp;quot;,
&amp;quot;type&amp;quot;: &amp;quot;health_center&amp;quot;,
&amp;quot;parent&amp;quot;: {
&amp;quot;name&amp;quot;: &amp;quot;CHP Branch One&amp;quot;,
&amp;quot;type&amp;quot;: &amp;quot;district_hospital&amp;quot;
}
}
&lt;/code>&lt;/pre>&lt;p>Also creates contact (person).&lt;/p>
&lt;pre>&lt;code>POST /api/v1/places
Content-Type: application/json
{
&amp;quot;name&amp;quot;: &amp;quot;CHP Area One&amp;quot;,
&amp;quot;type&amp;quot;: &amp;quot;health_center&amp;quot;,
&amp;quot;parent&amp;quot;: {
&amp;quot;name&amp;quot;: &amp;quot;CHP Branch One&amp;quot;,
&amp;quot;type&amp;quot;: &amp;quot;district_hospital&amp;quot;
},
&amp;quot;contact&amp;quot;: {
&amp;quot;name&amp;quot;: &amp;quot;Paul&amp;quot;,
&amp;quot;phone&amp;quot;: &amp;quot;+254883720611&amp;quot;
}
}
&lt;/code>&lt;/pre>&lt;p>Or assigns them.&lt;/p>
&lt;pre>&lt;code>POST /api/v1/places
Content-Type: application/json
{
&amp;quot;name&amp;quot;: &amp;quot;CHP Area One&amp;quot;,
&amp;quot;type&amp;quot;: &amp;quot;health_center&amp;quot;,
&amp;quot;parent&amp;quot;: {
&amp;quot;name&amp;quot;: &amp;quot;CHP Branch One&amp;quot;,
&amp;quot;type&amp;quot;: &amp;quot;district_hospital&amp;quot;
},
&amp;quot;contact&amp;quot;: &amp;quot;71df9d25ed6732ea3b4435862510ef8e&amp;quot;
}
&lt;/code>&lt;/pre>&lt;p>Example success response:&lt;/p>
&lt;pre>&lt;code>HTTP/1.1 200 OK
Content-Type: application/json
{
&amp;quot;id&amp;quot;: &amp;quot;71df9d25ed6732ea3b4435862510d115&amp;quot;,
&amp;quot;rev&amp;quot;: &amp;quot;1-a4060843d78f46a60a6f41051e40e3b5&amp;quot;
}
&lt;/code>&lt;/pre>&lt;p>Error response if facility structure is not correct:&lt;/p>
&lt;pre>&lt;code>HTTP/1.1 400 Bad Request
Content-Type: text/plain
Health Centers should have &amp;quot;district_hospital&amp;quot; parent type.
&lt;/code>&lt;/pre>&lt;h3 id="post-apiv1placesid">POST /api/v1/places/{{id}}&lt;/h3>
&lt;p>Update a place and optionally its contact.&lt;/p>
&lt;h4 id="permissions-2">Permissions&lt;/h4>
&lt;p>By default any user can update a place. Use these permissions to restrict access:&lt;/p>
&lt;p>&lt;code>can_update_places&lt;/code>&lt;/p>
&lt;h4 id="examples-7">Examples&lt;/h4>
&lt;p>Update a place&amp;rsquo;s contact.&lt;/p>
&lt;pre>&lt;code>POST /api/v1/places/1d83f2b4a27eceb40df9e9f9ad06d137
Content-Type: application/json
{
&amp;quot;contact&amp;quot;: &amp;quot;71df9d25ed6732ea3b4435862505f7a9&amp;quot;
}
&lt;/code>&lt;/pre>&lt;pre>&lt;code>HTTP/1.1 200 OK
Content-Type: application/json
{
&amp;quot;id&amp;quot;: &amp;quot;1d83f2b4a27eceb40df9e9f9ad06d137&amp;quot;,
&amp;quot;rev&amp;quot;: &amp;quot;12-a4060843d78f46a60a6f41051e40e3b5&amp;quot;
}
&lt;/code>&lt;/pre>&lt;h2 id="users">Users&lt;/h2>
&lt;p>All user related requests are limited to users with admin privileges by default.&lt;/p>
&lt;h3 id="supported-properties-2">Supported Properties&lt;/h3>
&lt;p>Use JSON in the request body to specify user details. Any properties submitted
that are not on the list below will be ignored. Any properties not included
will be undefined.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Name&lt;/th>
&lt;th>Required&lt;/th>
&lt;th>Type&lt;/th>
&lt;th>Description&lt;/th>
&lt;th>Version&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>username&lt;/td>
&lt;td>yes&lt;/td>
&lt;td>String&lt;/td>
&lt;td>identifier used for authentication&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>roles&lt;/td>
&lt;td>yes&lt;/td>
&lt;td>Array&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>place&lt;/td>
&lt;td>yes, if the roles contain an offline role&lt;/td>
&lt;td>string or object&lt;/td>
&lt;td>Place identifier string (UUID) or object this user resides in.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>contact&lt;/td>
&lt;td>yes, if the roles contain an offline role&lt;/td>
&lt;td>string or object&lt;/td>
&lt;td>A person identifier string (UUID) or object based on the form configured in the app.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>password&lt;/td>
&lt;td>yes, if &lt;code>token_login&lt;/code> is not enabled for the user&lt;/td>
&lt;td>String&lt;/td>
&lt;td>Password string used for authentication. Only allowed to be set, not retrieved.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>phone&lt;/td>
&lt;td>yes, if &lt;code>token_login&lt;/code> is enabled for the user&lt;/td>
&lt;td>String&lt;/td>
&lt;td>Valid phone number&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>token_login&lt;/td>
&lt;td>no&lt;/td>
&lt;td>Boolean&lt;/td>
&lt;td>A boolean representing whether or not the Login by SMS should be enabled for this user.&lt;/td>
&lt;td>3.10.0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>fullname&lt;/td>
&lt;td>no&lt;/td>
&lt;td>String&lt;/td>
&lt;td>Full name&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>email&lt;/td>
&lt;td>no&lt;/td>
&lt;td>String&lt;/td>
&lt;td>Email address&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>known&lt;/td>
&lt;td>no&lt;/td>
&lt;td>Boolean&lt;/td>
&lt;td>Boolean to define if the user has logged in before. Used mainly to determine whether or not to start a tour on first login.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h5 id="login-by-sms">Login by SMS&lt;/h5>
&lt;p>When creating or updating a user, sending a truthy value for the field &lt;code>token_login&lt;/code> will enable Login by SMS for this user.
This action resets the user&amp;rsquo;s password to an unknown string and generates a complex 64 character token, that is used to generate a token-login URL.
The URL is sent to the user&amp;rsquo;s phone number by SMS, along with another (configurable) SMS that can contain additional information.
Accessing this link, before its expiration time, will log the user in directly - without the need of any other credentials.
The link can only be accessed once, the token becomes invalid after being used for one login.
The token expires in 24 hours, after which logging in is only possible by either generating a new token, or disabling &lt;code>token_login&lt;/code> and manually setting a password.&lt;/p>
&lt;p>The SMS messages are stored in a doc of a new type &lt;code>login_token&lt;/code>. These docs cannot be viewed as reports from the webapp, and can only be edited by admins, but their messages are visible in the Admin Message Queue page.&lt;/p>
&lt;p>To disable login by SMS for a user, update the user sending &lt;code>token_login&lt;/code> with a &lt;code>false&lt;/code> value.
To regenerate the token, update the user sending &lt;code>token_login&lt;/code> with a &lt;code>true&lt;/code> value.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;code>token_login&lt;/code>&lt;/th>
&lt;th>user state&lt;/th>
&lt;th>action&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>undefined&lt;/td>
&lt;td>new&lt;/td>
&lt;td>None&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>undefined&lt;/td>
&lt;td>existent, no token&lt;/td>
&lt;td>None&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>undefined&lt;/td>
&lt;td>existent, with token&lt;/td>
&lt;td>None. Login by SMS remains enabled. Token is unchanged.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>true&lt;/td>
&lt;td>new&lt;/td>
&lt;td>Login by SMS enabled. Token is generated and SMS is sent.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>true&lt;/td>
&lt;td>existent, no token&lt;/td>
&lt;td>Password is reset. Login by SMS enabled. Token is generated and SMS is sent. Existent sessions are invalidated.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>true&lt;/td>
&lt;td>existent, with token&lt;/td>
&lt;td>Password is reset. Login by SMS enabled. New token is generated and SMS is sent. Old token is invalid. Existent sessions are invalidated.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>false&lt;/td>
&lt;td>new&lt;/td>
&lt;td>None.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>false&lt;/td>
&lt;td>existent, no token&lt;/td>
&lt;td>None.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>false&lt;/td>
&lt;td>existent, with token&lt;/td>
&lt;td>Request requires a password. Login by SMS is disabled. Old token is invalidated. Existent sessions are invalidated.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>This feature uses &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/#app_settingsjson">&lt;code>app_settings.app_url&lt;/code>&lt;/a> and &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/token_login/">&lt;code>app_settings.token_login&lt;/code>&lt;/a> to be defined and enabled.
If &lt;code>app_settings.app_url&lt;/code> is not defined, the generated token-login URL will use the &lt;code>Host&lt;/code> request header, which may not always be correct.&lt;/p>
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/apps/concepts/access/#remote-login">Accessing CHT Apps&lt;/a>&lt;/p>
&lt;h3 id="get-apiv1users">GET /api/v1/users&lt;/h3>
&lt;p>Returns a list of users and their profile data in JSON format.&lt;/p>
&lt;h5 id="permissions-3">Permissions&lt;/h5>
&lt;p>&lt;code>can_view_users&lt;/code>&lt;/p>
&lt;h4 id="examples-8">Examples&lt;/h4>
&lt;p>Get list of users:&lt;/p>
&lt;pre>&lt;code>GET /api/v1/users
&lt;/code>&lt;/pre>&lt;pre>&lt;code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
[
{
&amp;quot;id&amp;quot;: &amp;quot;org.couchdb.user:admin&amp;quot;,
&amp;quot;rev&amp;quot;: &amp;quot;10-6486428924d11781c107ea74de6b63b6&amp;quot;,
&amp;quot;type&amp;quot;: &amp;quot;admin&amp;quot;,
&amp;quot;username&amp;quot;: &amp;quot;admin&amp;quot;
},
{
&amp;quot;id&amp;quot;: &amp;quot;org.couchdb.user:demo&amp;quot;,
&amp;quot;rev&amp;quot;: &amp;quot;14-8758c8493edcc6dac50366173fc3e24a&amp;quot;,
&amp;quot;type&amp;quot;: &amp;quot;district-manager&amp;quot;,
&amp;quot;fullname&amp;quot;: &amp;quot;Example User&amp;quot;,
&amp;quot;username&amp;quot;: &amp;quot;demo&amp;quot;,
&amp;quot;place&amp;quot;: {
&amp;quot;_id&amp;quot;: &amp;quot;eeb17d6d-5dde-c2c0-62c4a1a0ca17d38b&amp;quot;,
&amp;quot;type&amp;quot;: &amp;quot;district_hospital&amp;quot;,
&amp;quot;name&amp;quot;: &amp;quot;Sample District&amp;quot;,
&amp;quot;contact&amp;quot;: {
&amp;quot;_id&amp;quot;: &amp;quot;eeb17d6d-5dde-c2c0-62c4a1a0ca17fd17&amp;quot;,
&amp;quot;type&amp;quot;: &amp;quot;person&amp;quot;,
&amp;quot;name&amp;quot;: &amp;quot;Paul&amp;quot;,
&amp;quot;phone&amp;quot;: &amp;quot;+2868917046&amp;quot;
}
},
&amp;quot;contact&amp;quot;: {
&amp;quot;_id&amp;quot;: &amp;quot;eeb17d6d-5dde-c2c0-62c4a1a0ca17fd17&amp;quot;,
&amp;quot;type&amp;quot;: &amp;quot;person&amp;quot;,
&amp;quot;name&amp;quot;: &amp;quot;Paul&amp;quot;,
&amp;quot;phone&amp;quot;: &amp;quot;+2868917046&amp;quot;
}
}
]
&lt;/code>&lt;/pre>&lt;h3 id="post-apiv1users">POST /api/v1/users&lt;/h3>
&lt;p>Create new users with a place and a contact.&lt;/p>
&lt;p>Creating multiple users at once by passing an array of users was introduced in version 3.15.
All users need to meet the following requirements before any of them are created:&lt;/p>
&lt;ul>
&lt;li>All required fields are filled in&lt;/li>
&lt;li>The password is at least 8 characters long and difficult to guess&lt;/li>
&lt;li>The phone number is valid when &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/token_login/">&lt;code>token_login&lt;/code>&lt;/a> is enabled&lt;/li>
&lt;/ul>
&lt;p>Users are created in parallel and the creation is not aborted even if one of the users fails to be created.&lt;/p>
&lt;p>Passing a single user in the request&amp;rsquo;s body will return a single object whereas
passing an array of users will return an array of objects as shown in the examples below.&lt;/p>
&lt;h4 id="permissions-4">Permissions&lt;/h4>
&lt;p>&lt;code>can_create_users&lt;/code>&lt;/p>
&lt;h4 id="examples-9">Examples&lt;/h4>
&lt;h5 id="create-one-user">Create one user&lt;/h5>
&lt;p>Create a new user that can authenticate with a username of &amp;ldquo;mary&amp;rdquo; and password
of &amp;ldquo;secret&amp;rdquo; that can submit reports and view or modify records associated to
their place. The place is created in the background and automatically linked
to the contact.&lt;/p>
&lt;pre>&lt;code>POST /api/v1/users
Content-Type: application/json
{
&amp;quot;password&amp;quot;: &amp;quot;secret&amp;quot;,
&amp;quot;username&amp;quot;: &amp;quot;mary&amp;quot;,
&amp;quot;type&amp;quot;: &amp;quot;district-manager&amp;quot;,
&amp;quot;place&amp;quot;: {
&amp;quot;name&amp;quot;: &amp;quot;Mary's Area&amp;quot;,
&amp;quot;type&amp;quot;: &amp;quot;health_center&amp;quot;,
&amp;quot;parent&amp;quot;: &amp;quot;d14e1c3d557761320b13a77e7806e8f8&amp;quot;
},
&amp;quot;contact&amp;quot;: {
&amp;quot;name&amp;quot;: &amp;quot;Mary Anyango&amp;quot;,
&amp;quot;phone&amp;quot;: &amp;quot;+2868917046&amp;quot;
}
}
&lt;/code>&lt;/pre>&lt;pre>&lt;code>HTTP/1.1 200
Content-Type: application/json
{
&amp;quot;contact&amp;quot;: {
&amp;quot;id&amp;quot;: &amp;quot;65416b8ceb53ff88ac1847654501aeb3&amp;quot;,
&amp;quot;rev&amp;quot;: &amp;quot;1-0b74d219ae13137c1a06f03a0a52e187&amp;quot;
},
&amp;quot;user-settings&amp;quot;: {
&amp;quot;id&amp;quot;: &amp;quot;org.couchdb.user:mary&amp;quot;,
&amp;quot;rev&amp;quot;: &amp;quot;1-6ac1d36b775143835f4af53f9895d7ae&amp;quot;
},
&amp;quot;user&amp;quot;: {
&amp;quot;id&amp;quot;: &amp;quot;org.couchdb.user:mary&amp;quot;,
&amp;quot;rev&amp;quot;: &amp;quot;1-c3b82a0b47cfe68edd9284c89bebbae4&amp;quot;
}
}
&lt;/code>&lt;/pre>&lt;h5 id="create-many-users">Create many users&lt;/h5>
&lt;p>Create two new users that can authenticate with a username and a password
that can submit reports and view or modify records associated to their place.
The place is created in the background and automatically linked to the contact.&lt;/p>
&lt;pre>&lt;code>POST /api/v1/users
Content-Type: application/json
[
{
&amp;quot;password&amp;quot;: &amp;quot;secret&amp;quot;,
&amp;quot;username&amp;quot;: &amp;quot;mary&amp;quot;,
&amp;quot;type&amp;quot;: &amp;quot;district-manager&amp;quot;,
&amp;quot;place&amp;quot;: {
&amp;quot;name&amp;quot;: &amp;quot;Mary's Area&amp;quot;,
&amp;quot;type&amp;quot;: &amp;quot;health_center&amp;quot;,
&amp;quot;parent&amp;quot;: &amp;quot;d14e1c3d557761320b13a77e7806e8f8&amp;quot;
},
&amp;quot;contact&amp;quot;: {
&amp;quot;name&amp;quot;: &amp;quot;Mary Anyango&amp;quot;,
&amp;quot;phone&amp;quot;: &amp;quot;+2868917046&amp;quot;
}
},
{
&amp;quot;password&amp;quot;: &amp;quot;secret&amp;quot;,
&amp;quot;username&amp;quot;: &amp;quot;bob&amp;quot;,
&amp;quot;type&amp;quot;: &amp;quot;district-manager&amp;quot;,
&amp;quot;place&amp;quot;: {
&amp;quot;name&amp;quot;: &amp;quot;Bob's Area&amp;quot;,
&amp;quot;type&amp;quot;: &amp;quot;health_center&amp;quot;,
&amp;quot;parent&amp;quot;: &amp;quot;d14e1c3d557761320b13a77e7806e8f8&amp;quot;
},
&amp;quot;contact&amp;quot;: {
&amp;quot;name&amp;quot;: &amp;quot;Bob Johnson&amp;quot;,
&amp;quot;phone&amp;quot;: &amp;quot;+2868194607&amp;quot;
}
}
]
&lt;/code>&lt;/pre>&lt;pre>&lt;code>HTTP/1.1 200
Content-Type: application/json
[
{
&amp;quot;contact&amp;quot;: {
&amp;quot;id&amp;quot;: &amp;quot;65416b8ceb53ff88ac1847654501aeb3&amp;quot;,
&amp;quot;rev&amp;quot;: &amp;quot;1-0b74d219ae13137c1a06f03a0a52e187&amp;quot;
},
&amp;quot;user-settings&amp;quot;: {
&amp;quot;id&amp;quot;: &amp;quot;org.couchdb.user:mary&amp;quot;,
&amp;quot;rev&amp;quot;: &amp;quot;1-6ac1d36b775143835f4af53f9895d7ae&amp;quot;
},
&amp;quot;user&amp;quot;: {
&amp;quot;id&amp;quot;: &amp;quot;org.couchdb.user:mary&amp;quot;,
&amp;quot;rev&amp;quot;: &amp;quot;1-c3b82a0b47cfe68edd9284c89bebbae4&amp;quot;
}
},
{
&amp;quot;contact&amp;quot;: {
&amp;quot;id&amp;quot;: &amp;quot;8d8a741c1cb441058e29a60ab7596bf2&amp;quot;,
&amp;quot;rev&amp;quot;: &amp;quot;1-acbc31712fd105eae3cd0806cd20a8f4&amp;quot;
},
&amp;quot;user-settings&amp;quot;: {
&amp;quot;id&amp;quot;: &amp;quot;org.couchdb.user:bob&amp;quot;,
&amp;quot;rev&amp;quot;: &amp;quot;1-d8629838127accd531043f845c416ef6&amp;quot;
},
&amp;quot;user&amp;quot;: {
&amp;quot;id&amp;quot;: &amp;quot;org.couchdb.user:bob&amp;quot;,
&amp;quot;rev&amp;quot;: &amp;quot;1-5eac2542c801ba6b518728f53d9276a0&amp;quot;
}
}
]
&lt;/code>&lt;/pre>&lt;h4 id="errors-1">Errors&lt;/h4>
&lt;h5 id="response-when-the-username-already-exists">Response when the username already exists&lt;/h5>
&lt;pre>&lt;code>HTTP/1.1 400 Bad Request
Content-Type: application/json
{
&amp;quot;code&amp;quot;: 400,
&amp;quot;error&amp;quot;: {
&amp;quot;message&amp;quot;: &amp;quot;Username \&amp;quot;mary\&amp;quot; already taken.&amp;quot;,
&amp;quot;translationKey&amp;quot;: &amp;quot;username.taken&amp;quot;,
&amp;quot;translationParams&amp;quot;: {
&amp;quot;username&amp;quot;: &amp;quot;mary&amp;quot;
}
}
}
&lt;/code>&lt;/pre>&lt;h5 id="response-when-users-are-missing-required-fields">Response when users are missing required fields&lt;/h5>
&lt;pre>&lt;code>HTTP/1.1 400 Bad Request
Content-Type: application/json
{
&amp;quot;code&amp;quot;: 400,
&amp;quot;error&amp;quot;: &amp;quot;Missing required fields:\n\Missing fields username, password, type or roles for user at index 0\nMissing fields password, type or roles for user at index 1&amp;quot;,
&amp;quot;details&amp;quot;: {
&amp;quot;failingIndexes&amp;quot;: [
{
&amp;quot;fields&amp;quot;: [
&amp;quot;username&amp;quot;,
&amp;quot;password&amp;quot;,
&amp;quot;type or roles&amp;quot;
],
&amp;quot;index&amp;quot;: 0
},
{
&amp;quot;fields&amp;quot;: [
&amp;quot;password&amp;quot;,
&amp;quot;type or roles&amp;quot;
],
&amp;quot;index&amp;quot;: 1
}
]
}
}
&lt;/code>&lt;/pre>&lt;h5 id="response-when-some-users-failed-to-be-created">Response when some users failed to be created&lt;/h5>
&lt;pre>&lt;code>HTTP/1.1 200
Content-Type: application/json
[
{
&amp;quot;contact&amp;quot;: {
&amp;quot;id&amp;quot;: &amp;quot;65416b8ceb53ff88ac1847654501aeb3&amp;quot;,
&amp;quot;rev&amp;quot;: &amp;quot;1-0b74d219ae13137c1a06f03a0a52e187&amp;quot;
},
&amp;quot;user-settings&amp;quot;: {
&amp;quot;id&amp;quot;: &amp;quot;org.couchdb.user:mary&amp;quot;,
&amp;quot;rev&amp;quot;: &amp;quot;1-6ac1d36b775143835f4af53f9895d7ae&amp;quot;
},
&amp;quot;user&amp;quot;: {
&amp;quot;id&amp;quot;: &amp;quot;org.couchdb.user:mary&amp;quot;,
&amp;quot;rev&amp;quot;: &amp;quot;1-c3b82a0b47cfe68edd9284c89bebbae4&amp;quot;
}
},
{
&amp;quot;error&amp;quot;: &amp;quot;Failed to find place.&amp;quot;
}
]
&lt;/code>&lt;/pre>&lt;h3 id="post-apiv1usersusername">POST /api/v1/users/{{username}}&lt;/h3>
&lt;p>Allows you to change property values on a user account. Properties listed above
are supported except for &lt;code>contact.parent&lt;/code>. Creating or modifying people
through the user is not supported, see People section.&lt;/p>
&lt;h4 id="permissions-5">Permissions&lt;/h4>
&lt;p>&lt;code>can_update_users&lt;/code>, &lt;code>can_update_places&lt;/code>, &lt;code>can_update_people&lt;/code>&lt;/p>
&lt;h4 id="updating-yourself">Updating yourself&lt;/h4>
&lt;p>You do not need any of the above permissions if the user you are modifying is yourself. However, you are not allowed to modify your &lt;code>type&lt;/code>, &lt;code>roles&lt;/code>, &lt;code>contact&lt;/code> or &lt;code>place&lt;/code>.&lt;/p>
&lt;p>Further more, if you&amp;rsquo;re updating your &lt;code>password&lt;/code> you must be authenticating via Basic Auth (either the header or in the URL). This is to ensure the password is known at time of request, and no one is hijacking a cookie.&lt;/p>
&lt;h4 id="url-parameters">URL Parameters&lt;/h4>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Variable&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>username&lt;/td>
&lt;td>String identifier used for authentication.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="examples-10">Examples&lt;/h4>
&lt;pre>&lt;code>POST /api/v1/users/mary
Content-Type: application/json
{
&amp;quot;password&amp;quot;: &amp;quot;secret&amp;quot;,
&amp;quot;place&amp;quot;: &amp;quot;eeb17d6d-5dde-c2c0-62c4a1a0ca17e342&amp;quot;
}
&lt;/code>&lt;/pre>&lt;pre>&lt;code>HTTP/1.1 200 OK
Content-Type: application/json
{
&amp;quot;user&amp;quot;: {
&amp;quot;id&amp;quot;: &amp;quot;org.couchdb.user:mary&amp;quot;,
&amp;quot;rev&amp;quot;: &amp;quot;23-858e01fafdfa0d367d798fe5b44751ff&amp;quot;
},
&amp;quot;user-settings&amp;quot;: {
&amp;quot;id&amp;quot;: &amp;quot;org.couchdb.user:mary&amp;quot;,
&amp;quot;rev&amp;quot;: &amp;quot;17-c6d03b86d2d5d70f7270c85e67fea96d&amp;quot;
}
}
&lt;/code>&lt;/pre>&lt;h3 id="delete-apiv1usersusername">DELETE /api/v1/users/{{username}}&lt;/h3>
&lt;p>Delete a user. Does not affect a person or place associated to a user.&lt;/p>
&lt;h4 id="permissions-6">Permissions&lt;/h4>
&lt;p>&lt;code>can_delete_users&lt;/code>&lt;/p>
&lt;h4 id="url-parameters-1">URL Parameters&lt;/h4>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Variable&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>username&lt;/td>
&lt;td>String identifier used for authentication.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="examples-11">Examples&lt;/h4>
&lt;pre>&lt;code>DELETE /api/v1/users/mary
&lt;/code>&lt;/pre>&lt;pre>&lt;code>HTTP/1.1 200 OK
&lt;/code>&lt;/pre>&lt;h3 id="get-apiv1users-info">GET /api/v1/users-info&lt;/h3>
&lt;p>Returns the total number of documents an offline user would replicate (&lt;code>total_docs&lt;/code>), the number of docs excluding tasks the user would replicate (&lt;code>warn_docs&lt;/code>), along with a &lt;code>warn&lt;/code> flag if this number exceeds the recommended limit (now set at 10 000).&lt;/p>
&lt;p>When the authenticated requester has an offline role, it returns the requester doc count.&lt;/p>
&lt;h6 id="example">Example&lt;/h6>
&lt;pre>&lt;code>GET /api/v1/users-info -H 'Cookie: AuthSession=OFFLINE_USER_SESSION;'
&lt;/code>&lt;/pre>&lt;pre>&lt;code>HTTP/1.1 200 OK
Content-Type: application/json
{
&amp;quot;total_docs&amp;quot;: 5678,
&amp;quot;warn_docs&amp;quot;: 4852,
&amp;quot;warn&amp;quot;: false,
&amp;quot;limit: 10000
}
&lt;/code>&lt;/pre>&lt;p>When the requester has an online role, the following query parameters are accepted:&lt;/p>
&lt;h5 id="query-parameters-4">Query Parameters&lt;/h5>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Variable&lt;/th>
&lt;th>Description&lt;/th>
&lt;th>Required&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>facility_id&lt;/td>
&lt;td>String identifier representing the uuid of the user&amp;rsquo;s facility&lt;/td>
&lt;td>true&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>role&lt;/td>
&lt;td>String identifier representing the user role - must be configured as an offline role. Accepts valid UTF-8 JSON array for multiple of roles.&lt;/td>
&lt;td>true&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>contact_id&lt;/td>
&lt;td>String identifier representing the uuid of the user&amp;rsquo;s associated contact&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>When requested as an online user, the number of tasks are never counted and never returned, so &lt;code>warn_docs&lt;/code> is always equal to &lt;code>total_docs&lt;/code>.&lt;/p>
&lt;h6 id="example-1">Example&lt;/h6>
&lt;pre>&lt;code>GET /api/v1/users-info?facility_id={{facility_uuid}}&amp;amp;role={{role}}&amp;amp;contact_id={{contact_uuid}} -H 'Cookie: AuthSession=OFFLINE_USER_SESSION;'
&lt;/code>&lt;/pre>&lt;pre>&lt;code>HTTP/1.1 200 OK
Content-Type: application/json
{
&amp;quot;total_docs&amp;quot;: 10265,
&amp;quot;warn_docs&amp;quot;: 10265,
&amp;quot;warn&amp;quot;: true,
&amp;quot;limit: 10000
}
&lt;/code>&lt;/pre>&lt;p>In case any of the required query parameters are omitted or the requested role is not configured as an offline role, the request will result in an error:&lt;/p>
&lt;pre>&lt;code>GET /api/v1/users-info?role={{online_role}} -H 'Cookie: AuthSession=OFFLINE_USER_SESSION;'
&lt;/code>&lt;/pre>&lt;pre>&lt;code>HTTP/1.1 400 Bad Request
Content-Type: application/json
{
&amp;quot;code&amp;quot;: 400,
&amp;quot;error&amp;quot;: &amp;quot;Missing required query params: role and/or facility_id&amp;quot;
}
&lt;/code>&lt;/pre>&lt;h2 id="bulk-operations">Bulk Operations&lt;/h2>
&lt;h3 id="post-apiv1bulk-delete">POST /api/v1/bulk-delete&lt;/h3>
&lt;p>Bulk delete endpoint for deleting large numbers of documents. Docs will be batched into groups of 100 and will be sent sequentially to couch (new batch sent after the previous one has returned). The response will be chunked JSON (one batch at a time), so if you wish to get an indication of progress you will need to parse incomplete JSON (with a library such as &lt;a href="https://github.com/indgov/partial-json-parser">&lt;code>partial-json-parser&lt;/code>&lt;/a>.&lt;/p>
&lt;h4 id="permissions-7">Permissions&lt;/h4>
&lt;p>Only available to online users.&lt;/p>
&lt;h4 id="parameters-1">Parameters&lt;/h4>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Parameter&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>docs&lt;/td>
&lt;td>Array of JSON objects with &lt;code>_id&lt;/code> properties&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>An array of objects each with an &lt;code>_id&lt;/code> property is required (rather than an array of strings representing ids) to ensure forwards compatibility if we choose to require that any additional document information (such as &lt;code>_rev&lt;/code>) also be passed in to this endpoint.&lt;/p>
&lt;h4 id="errors-2">Errors&lt;/h4>
&lt;p>If an error is encountered part-way through the response (eg on the third batch), it&amp;rsquo;s impossible to send new headers to indicate a 5xx error, so the connection will simply be terminated (as recommended here &lt;a href="https://github.com/expressjs/express/issues/2700)">https://github.com/expressjs/express/issues/2700)&lt;/a>.&lt;/p>
&lt;h4 id="examples-12">Examples&lt;/h4>
&lt;pre>&lt;code>POST /api/v1/bulk-delete
Content-Type: application/json
{
&amp;quot;docs&amp;quot;: [
{ &amp;quot;_id&amp;quot;: &amp;quot;id1&amp;quot; },
{ &amp;quot;_id&amp;quot;: &amp;quot;id2&amp;quot; },
...
{ &amp;quot;_id&amp;quot;: &amp;quot;id150&amp;quot; }
]
}
&lt;/code>&lt;/pre>&lt;pre>&lt;code>HTTP/1.1 200 OK
Content-Type: application/json
[
[
{ &amp;quot;ok&amp;quot;: true, &amp;quot;id&amp;quot;: &amp;quot;id1&amp;quot;, &amp;quot;rev&amp;quot;: &amp;quot;1-rev1&amp;quot; },
{ &amp;quot;ok&amp;quot;: true, &amp;quot;id&amp;quot;: &amp;quot;id2&amp;quot;, &amp;quot;rev&amp;quot;: &amp;quot;1-rev2&amp;quot; },
...
{ &amp;quot;ok&amp;quot;: true, &amp;quot;id&amp;quot;: &amp;quot;id100&amp;quot;, &amp;quot;rev&amp;quot;: &amp;quot;1-rev100&amp;quot; }
],
[
{ &amp;quot;ok&amp;quot;: true, &amp;quot;id&amp;quot;: &amp;quot;id101&amp;quot;, &amp;quot;rev&amp;quot;: &amp;quot;1-rev101&amp;quot; },
{ &amp;quot;ok&amp;quot;: true, &amp;quot;id&amp;quot;: &amp;quot;id102&amp;quot;, &amp;quot;rev&amp;quot;: &amp;quot;1-rev102&amp;quot; },
...
{ &amp;quot;ok&amp;quot;: true, &amp;quot;id&amp;quot;: &amp;quot;id150&amp;quot;, &amp;quot;rev&amp;quot;: &amp;quot;1-rev150&amp;quot; }
]
]
&lt;/code>&lt;/pre>&lt;h2 id="monitoring">Monitoring&lt;/h2>
&lt;h3 id="get-apiv1monitoring">GET /api/v1/monitoring&lt;/h3>
&lt;p>&lt;em>Deprecated in 3.12.x in favor of &lt;a href="#get-apiv2monitoring">/api/v2/monitoring&lt;/a>&lt;/em>
Used to retrieve a range of metrics about the instance. While the output is human-readable this is intended for automated monitoring allowing for tracking trends over time and alerting about potential issues.&lt;/p>
&lt;h4 id="permissions-8">Permissions&lt;/h4>
&lt;p>No permissions required.&lt;/p>
&lt;h4 id="examples-13">Examples&lt;/h4>
&lt;h5 id="json-format">JSON format&lt;/h5>
&lt;pre>&lt;code>curl http://localhost:5988/api/v1/monitoring
{&amp;quot;version&amp;quot;:{&amp;quot;app&amp;quot;:&amp;quot;3.9.0&amp;quot;,&amp;quot;node&amp;quot;:&amp;quot;v10.16.0&amp;quot;,&amp;quot;couchdb&amp;quot;:&amp;quot;2.3.1&amp;quot;},&amp;quot;couchdb&amp;quot;:{&amp;quot;medic&amp;quot;:{&amp;quot;name&amp;quot;:&amp;quot;medic&amp;quot;,&amp;quot;update_sequence&amp;quot;:5733,&amp;quot;doc_count&amp;quot;:278,&amp;quot;doc_del_count&amp;quot;:32,&amp;quot;fragmentation&amp;quot;:1.0283517758420173}...
&lt;/code>&lt;/pre>&lt;h4 id="response-content">Response content&lt;/h4>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>JSON path&lt;/th>
&lt;th>Type&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>version.app&lt;/code>&lt;/td>
&lt;td>String&lt;/td>
&lt;td>The version of the webapp.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>version.node&lt;/code>&lt;/td>
&lt;td>String&lt;/td>
&lt;td>The version of NodeJS.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>version.couchdb&lt;/code>&lt;/td>
&lt;td>String&lt;/td>
&lt;td>The version of CouchDB.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>couchdb.&amp;lt;dbname&amp;gt;.name&lt;/code>&lt;/td>
&lt;td>String&lt;/td>
&lt;td>The name of the db, usually one of &amp;ldquo;medic&amp;rdquo;, &amp;ldquo;medic-sentinel&amp;rdquo;, &amp;ldquo;medic-users-meta&amp;rdquo;, &amp;ldquo;_users&amp;rdquo;.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>couchdb.&amp;lt;dbname&amp;gt;.update_sequence&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>The number of changes in the db.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>couchdb.&amp;lt;dbname&amp;gt;.doc_count&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>The number of docs in the db.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>couchdb.&amp;lt;dbname&amp;gt;.doc_del_count&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>The number of deleted docs in the db.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>couchdb.&amp;lt;dbname&amp;gt;.fragmentation&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>The fragmentation of the db, lower is better, &amp;ldquo;1&amp;rdquo; is no fragmentation.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>date.current&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>The current server date in millis since the epoch, useful for ensuring the server time is correct.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>date.uptime&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>How long API has been running.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>sentinel.backlog&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>Number of changes yet to be processed by Sentinel.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messaging.outgoing.state.due&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>The number of messages due to be sent.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messaging.outgoing.state.scheduled&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>The number of messages scheduled to be sent in the future.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messaging.outgoing.state.muted&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>The number of messages that are muted and therefore will not be sent.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messaging.outgoing.state.delivered&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>The number of messages that have been delivered or sent. As of 3.12.x.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messaging.outgoing.state.failed&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>The number of messages have failed to be delivered. As of 3.12.x&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>outbound_push.backlog&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>Number of changes yet to be processed by Outbound Push.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>feedback.count&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>Number of feedback docs created usually indicative of client side errors.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>conflict.count&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>Number of doc conflicts which need to be resolved manually.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>replication_limit.count&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>Number of users that exceeded the replication limit of documents.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>connected_users.count&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>Number of users that have connected to the api in a given number of days. The period defaults to 7 days but this can be changed by adding &lt;code>connected_user_interval&lt;/code> as a query parameter e.g. &lt;code>http://localhost:5988/api/v1/monitoring?connected_user_interval=14&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="errors-3">Errors&lt;/h4>
&lt;ul>
&lt;li>A metric of &lt;code>&amp;quot;&amp;quot;&lt;/code> (for string values) or &lt;code>-1&lt;/code> (for numeric values) indicates an error occurred while querying the metric - check the API logs for details.&lt;/li>
&lt;li>If no response or an error response is received the instance is unreachable. Thus, this API can be used as an uptime monitoring endpoint.&lt;/li>
&lt;/ul>
&lt;h3 id="get-apiv2monitoring">GET /api/v2/monitoring&lt;/h3>
&lt;p>Available as of 3.12.x.
Used to retrieve a range of metrics about the instance. While the output is human-readable this is intended for automated monitoring allowing for tracking trends over time and alerting about potential issues.&lt;/p>
&lt;h4 id="permissions-9">Permissions&lt;/h4>
&lt;p>No permissions required.&lt;/p>
&lt;h4 id="examples-14">Examples&lt;/h4>
&lt;h5 id="json-format-1">JSON format&lt;/h5>
&lt;pre>&lt;code>curl http://localhost:5988/api/v2/monitoring
{&amp;quot;version&amp;quot;:{&amp;quot;app&amp;quot;:&amp;quot;3.12.0&amp;quot;,&amp;quot;node&amp;quot;:&amp;quot;v10.16.0&amp;quot;,&amp;quot;couchdb&amp;quot;:&amp;quot;2.3.1&amp;quot;},&amp;quot;couchdb&amp;quot;:{&amp;quot;medic&amp;quot;:{&amp;quot;name&amp;quot;:&amp;quot;medic&amp;quot;,&amp;quot;update_sequence&amp;quot;:5733,&amp;quot;doc_count&amp;quot;:278,&amp;quot;doc_del_count&amp;quot;:32,&amp;quot;fragmentation&amp;quot;:1.0283517758420173}...
&lt;/code>&lt;/pre>&lt;h4 id="response-content-1">Response content&lt;/h4>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>JSON path&lt;/th>
&lt;th>Type&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>version.app&lt;/code>&lt;/td>
&lt;td>String&lt;/td>
&lt;td>The version of the webapp.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>version.node&lt;/code>&lt;/td>
&lt;td>String&lt;/td>
&lt;td>The version of NodeJS.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>version.couchdb&lt;/code>&lt;/td>
&lt;td>String&lt;/td>
&lt;td>The version of CouchDB.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>couchdb.&amp;lt;dbname&amp;gt;.name&lt;/code>&lt;/td>
&lt;td>String&lt;/td>
&lt;td>The name of the db, usually one of &amp;ldquo;medic&amp;rdquo;, &amp;ldquo;medic-sentinel&amp;rdquo;, &amp;ldquo;medic-users-meta&amp;rdquo;, &amp;ldquo;_users&amp;rdquo;.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>couchdb.&amp;lt;dbname&amp;gt;.update_sequence&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>The number of changes in the db.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>couchdb.&amp;lt;dbname&amp;gt;.doc_count&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>The number of docs in the db.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>couchdb.&amp;lt;dbname&amp;gt;.doc_del_count&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>The number of deleted docs in the db.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>couchdb.&amp;lt;dbname&amp;gt;.fragmentation&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>The fragmentation of the db, lower is better, &amp;ldquo;1&amp;rdquo; is no fragmentation.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>date.current&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>The current server date in millis since the epoch, useful for ensuring the server time is correct.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>date.uptime&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>How long API has been running.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>sentinel.backlog&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>Number of changes yet to be processed by Sentinel.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messaging.outgoing.total.due&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>The number of messages due to be sent.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messaging.outgoing.total.scheduled&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>The number of messages scheduled to be sent in the future.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messaging.outgoing.total.muted&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>The number of messages that are muted and therefore will not be sent.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messaging.outgoing.total.delivered&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>The number of messages that have been delivered or sent.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messaging.outgoing.total.failed&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>The number of messages have failed to be delivered.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messaging.outgoing.seven_days.due&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>The number of messages due to be sent in the last seven days.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messaging.outgoing.seven_days.scheduled&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>The number of messages that were scheduled to be sent in the last seven days.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messaging.outgoing.seven_days.muted&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>The number of messages that were due in the last seven days and are muted.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messaging.outgoing.seven_days.delivered&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>The number of messages that were due in the last seven days and have been delivered or sent.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messaging.outgoing.seven_days.failed&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>The number of messages that were due in the last seven days and have failed to be delivered.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messaging.outgoing.last_hundred.pending&lt;/code>&lt;/td>
&lt;td>Object&lt;/td>
&lt;td>Counts within last 100 messages that have received status updates, and are one of the &amp;ldquo;pending&amp;rdquo; group statuses&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messaging.outgoing.last_hundred.pending.pending&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>Number of messages that are pending&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messaging.outgoing.last_hundred.pending.forwarded-to-gateway&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>Number of messages that are forwarded-to-gateway&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messaging.outgoing.last_hundred.pending.received-by-gateway&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>Number of messages that are received-by-gateway&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messaging.outgoing.last_hundred.pending.forwarded-by-gateway&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>Number of messages that are forwarded-by-gateway&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messaging.outgoing.last_hundred.final&lt;/code>&lt;/td>
&lt;td>Object&lt;/td>
&lt;td>Counts within last 100 messages that have received status updates, and are in one of the &amp;ldquo;final&amp;rdquo; group statuses&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messaging.outgoing.last_hundred.final.sent&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>Number of messages that are sent&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messaging.outgoing.last_hundred.final.delivered&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>Number of messages that are delivered&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messaging.outgoing.last_hundred.final.failed&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>Number of messages that are failed&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messaging.outgoing.last_hundred.muted&lt;/code>&lt;/td>
&lt;td>Object&lt;/td>
&lt;td>Counts within last 100 messages that have received status updates, and are in one of the &amp;ldquo;muted&amp;rdquo; group statuses&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messaging.outgoing.last_hundred.final.denied&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>Number of messages that are denied&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messaging.outgoing.last_hundred.final.cleared&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>Number of messages that are cleared&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messaging.outgoing.last_hundred.final.muted&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>Number of messages that are muted&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messaging.outgoing.last_hundred.final.duplicate&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>Number of messages that are duplicate&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>outbound_push.backlog&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>Number of changes yet to be processed by Outbound Push.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>feedback.count&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>Number of feedback docs created usually indicative of client side errors.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>conflict.count&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>Number of doc conflicts which need to be resolved manually.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>replication_limit.count&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>Number of users that exceeded the replication limit of documents.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>connected_users.count&lt;/code>&lt;/td>
&lt;td>Number&lt;/td>
&lt;td>Number of users that have connected to the api in a given number of days. The period defaults to 7 days but this can be changed by adding &lt;code>connected_user_interval&lt;/code> as a query parameter e.g. &lt;code>http://localhost:5988/api/v2/monitoring?connected_user_interval=14&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="errors-4">Errors&lt;/h4>
&lt;ul>
&lt;li>A metric of &lt;code>&amp;quot;&amp;quot;&lt;/code> (for string values) or &lt;code>-1&lt;/code> (for numeric values) indicates an error occurred while querying the metric - check the API logs for details.&lt;/li>
&lt;li>If no response or an error response is received the instance is unreachable. Thus, this API can be used as an uptime monitoring endpoint.&lt;/li>
&lt;/ul>
&lt;h2 id="upgrades">Upgrades&lt;/h2>
&lt;p>All of these endpoints require the &lt;code>can_configure&lt;/code> permission.&lt;/p>
&lt;p>All of these endpoints are asynchronous. Progress can be followed by watching the &lt;code>horti-upgrade&lt;/code> document and looking at the &lt;code>log&lt;/code> property.&lt;/p>
&lt;h3 id="post-apiv1upgrade">POST /api/v1/upgrade&lt;/h3>
&lt;p>Performs a complete upgrade to the provided version. This is equivalent of calling &lt;code>/api/v1/upgrade/stage&lt;/code> and then &lt;code>/api/v1/upgrade/complete&lt;/code> once staging has finished.&lt;/p>
&lt;h4 id="example-2">Example&lt;/h4>
&lt;pre>&lt;code>POST /api/v1/upgrade
{
&amp;quot;build&amp;quot;: {
&amp;quot;namespace&amp;quot;: &amp;quot;medic&amp;quot;,
&amp;quot;application&amp;quot;: &amp;quot;medic&amp;quot;,
&amp;quot;version&amp;quot;: &amp;quot;3.0.0-beta.1&amp;quot;
}
}
&lt;/code>&lt;/pre>&lt;p>For potential forwards compatibility, you must pass the &lt;code>namespace&lt;/code> and &lt;code>application&lt;/code> as &lt;code>medic&lt;/code>.&lt;/p>
&lt;p>The &lt;code>version&lt;/code> should correspond to a release, pre-release or branch that has been pushed to our builds server, which is currently hard-coded to &lt;code>https://staging.dev.medicmobile.org/builds&lt;/code>. This happens automatically upon a successful travis run.&lt;/p>
&lt;p>Calling this endpoint will eventually cause api and sentinel to restart.&lt;/p>
&lt;p>It is expected that the caller ensures forwards or backwards compatibility is maintained between deployed versions. This endpoint does not stop you from &amp;ldquo;upgrading&amp;rdquo; to an earlier version, or a branch that is incompatible with your current state.&lt;/p>
&lt;h3 id="post-apiv1upgradestage">POST /api/v1/upgrade/stage&lt;/h3>
&lt;p>Stages an upgrade to the provided version. Does as much of the upgrade as possible without actually swapping versions over and restarting.&lt;/p>
&lt;p>Parameters are the same as &lt;code>/api/v1/upgrade&lt;/code>.&lt;/p>
&lt;p>You know that an upgrade has been staged when the &lt;code>horti-upgrade&lt;/code> document in CouchDB has &lt;code>&amp;quot;action&amp;quot;: &amp;quot;stage&amp;quot;&lt;/code> and &lt;code>&amp;quot;staging_complete&amp;quot;: true&lt;/code>.&lt;/p>
&lt;h3 id="post-apiv1upgradecomplete">POST /api/v1/upgrade/complete&lt;/h3>
&lt;p>Completes a staged upgrade. Throws a &lt;code>404&lt;/code> if there is no upgrade in the staged position.&lt;/p>
&lt;h2 id="hydrate">Hydrate&lt;/h2>
&lt;p>Accepts a JSON array of document uuids and returns fully hydrated documents, in the same order in which they were requested.
When documents are not found, an entry with the missing uuid and an error is added instead.
Supports both GET and POST.
Only allowed for users with &amp;ldquo;online&amp;rdquo; roles.&lt;/p>
&lt;h3 id="get-apiv1hydrate">GET api/v1/hydrate&lt;/h3>
&lt;h5 id="query-parameters-5">Query parameters&lt;/h5>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Name&lt;/th>
&lt;th>Required&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>doc_ids&lt;/td>
&lt;td>true&lt;/td>
&lt;td>A JSON array of document uuids&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h5 id="example-3">Example&lt;/h5>
&lt;pre>&lt;code>GET /api/v1/hydrate?doc_ids=[&amp;quot;id1&amp;quot;,&amp;quot;missingId&amp;quot;,&amp;quot;id3&amp;quot;]
&lt;/code>&lt;/pre>&lt;pre>&lt;code>HTTP/1.1 200 OK
Content-Type: application/json
[
{ &amp;quot;id&amp;quot;: &amp;quot;id1&amp;quot;, &amp;quot;doc&amp;quot;: { &amp;lt;...the hydrated document...&amp;gt; } },
{ &amp;quot;id&amp;quot;: &amp;quot;missingId1&amp;quot;, &amp;quot;error&amp;quot;: &amp;quot;not_found&amp;quot; },
{ &amp;quot;id&amp;quot;: &amp;quot;id3&amp;quot;, &amp;quot;doc&amp;quot;: { &amp;lt;...the hydrated document...&amp;gt; } },
]
&lt;/code>&lt;/pre>&lt;h3 id="post-apiv1hydrate">POST api/v1/hydrate&lt;/h3>
&lt;h5 id="parameters-2">Parameters&lt;/h5>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Name&lt;/th>
&lt;th>Required&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>doc_ids&lt;/td>
&lt;td>true&lt;/td>
&lt;td>A JSON array of document uuids&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h5 id="example-4">Example&lt;/h5>
&lt;pre>&lt;code>POST /api/v1/hydrate
Content-Type: application/json
{
&amp;quot;doc_ids&amp;quot;: [&amp;quot;id1&amp;quot;,&amp;quot;missingId&amp;quot;,&amp;quot;id3&amp;quot;]
}
&lt;/code>&lt;/pre>&lt;pre>&lt;code>HTTP/1.1 200 OK
Content-Type: application/json
[
{ &amp;quot;id&amp;quot;: &amp;quot;id1&amp;quot;, &amp;quot;doc&amp;quot;: { &amp;lt;...the hydrated document...&amp;gt; } },
{ &amp;quot;id&amp;quot;: &amp;quot;missingId&amp;quot;, &amp;quot;error&amp;quot;: &amp;quot;not_found&amp;quot; },
{ &amp;quot;id&amp;quot;: &amp;quot;id3&amp;quot;, &amp;quot;doc&amp;quot;: { &amp;lt;...the hydrated document...&amp;gt; } },
]
&lt;/code>&lt;/pre>&lt;h2 id="contacts-by-phone">Contacts by phone&lt;/h2>
&lt;p>&lt;em>Added in 3.10.0&lt;/em>
Accepts a phone number parameter and returns fully hydrated contacts that match the requested phone number.
If multiple contacts are found, all are returned. When no matches are found, a 404 error is returned.
Supports both GET and POST.
Only allowed for users with &amp;ldquo;online&amp;rdquo; roles.&lt;/p>
&lt;h3 id="get-apiv1contacts-by-phone">GET api/v1/contacts-by-phone&lt;/h3>
&lt;h4 id="query-parameters-6">Query parameters&lt;/h4>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Name&lt;/th>
&lt;th>Required&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>phone&lt;/td>
&lt;td>true&lt;/td>
&lt;td>A URL encoded string representing a phone number&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="example-5">Example&lt;/h4>
&lt;pre>&lt;code>GET /api/v1/contacts-by-phone?phone=&amp;quot;%2B40-(744)-999-999&amp;quot;
&lt;/code>&lt;/pre>&lt;pre>&lt;code>HTTP/1.1 200 OK
Content-Type: application/json
{
&amp;quot;ok&amp;quot;: true,
&amp;quot;docs&amp;quot;: {
{ &amp;lt;... first hydrated matching contact found ...&amp;gt; },
{ &amp;lt;... second hydrated matching contact found ...&amp;gt; },
...
}
}
&lt;/code>&lt;/pre>&lt;h3 id="post-apiv1contacts-by-phone">POST api/v1/contacts-by-phone&lt;/h3>
&lt;h4 id="parameters-3">Parameters&lt;/h4>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Name&lt;/th>
&lt;th>Required&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>phone&lt;/td>
&lt;td>true&lt;/td>
&lt;td>A string representing a phone number&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="example-6">Example&lt;/h4>
&lt;pre>&lt;code>POST /api/v1/contacts-by-phone
Content-Type: application/json
{
&amp;quot;phone&amp;quot;: &amp;quot;+40 (21) 222-3333&amp;quot;
}
&lt;/code>&lt;/pre>&lt;pre>&lt;code>HTTP/1.1 200 OK
Content-Type: application/json
{
&amp;quot;ok&amp;quot;: true,
&amp;quot;docs&amp;quot;: {
{ &amp;lt;... first hydrated matching contact found ...&amp;gt; },
{ &amp;lt;... second hydrated matching contact found ...&amp;gt; },
...
}
}
&lt;/code>&lt;/pre>&lt;h2 id="replication-limit">Replication Limit&lt;/h2>
&lt;p>&lt;em>Added in 3.11.0&lt;/em>
Returns the quantity of documents that were replicated by each user.
Accepts filtering by user name, when not provided, it returns all users.
Supports GET.
Only allowed for users with &amp;ldquo;_admin&amp;rdquo; role.&lt;/p>
&lt;h3 id="get-apiv1users-doc-count">GET /api/v1/users-doc-count&lt;/h3>
&lt;h4 id="query-parameters-7">Query parameters&lt;/h4>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Name&lt;/th>
&lt;th>Required&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>user&lt;/td>
&lt;td>false&lt;/td>
&lt;td>User&amp;rsquo;s name&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="example-7">Example&lt;/h4>
&lt;pre>&lt;code>GET /api/v1/users-doc-count?user=mary&amp;quot;
&lt;/code>&lt;/pre>&lt;pre>&lt;code>HTTP/1.1 200 OK
Content-Type: application/json
{
&amp;quot;limit&amp;quot;: 10000,
&amp;quot;users&amp;quot;: {
&amp;quot;_id&amp;quot;: &amp;quot;replication-count-mary&amp;quot;,
&amp;quot;_rev&amp;quot;: &amp;quot;5-cd3252e852ae075da216c3c3fe461291&amp;quot;,
&amp;quot;user&amp;quot;: &amp;quot;mary&amp;quot;,
&amp;quot;date&amp;quot;: 1595328973273,
&amp;quot;count&amp;quot;: 58
}
}
&lt;/code>&lt;/pre>&lt;h2 id="credentials">Credentials&lt;/h2>
&lt;p>Securely store credentials for authentication with third party systems such as SMS aggregators and HMIS. Certain CHT services rely on these credentials when enabled.&lt;/p>
&lt;h3 id="put-apiv1credentials">PUT /api/v1/credentials&lt;/h3>
&lt;p>&lt;em>Added in 4.0.0&lt;/em>&lt;/p>
&lt;p>Provide the credential key as a URL parameter and the password in the request body, for example, to set a credential with key &amp;ldquo;mykey&amp;rdquo; and password &amp;ldquo;my pass&amp;rdquo; use the following command.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">curl -X PUT -H &lt;span style="color:#4e9a06">&amp;#34;Content-Type: text/plain&amp;#34;&lt;/span> https://&amp;lt;user&amp;gt;:&amp;lt;pass&amp;gt;@&amp;lt;domain&amp;gt;/api/v1/credentials/mykey -d &lt;span style="color:#4e9a06">&amp;#39;my pass&amp;#39;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="3x-api">3.x API&lt;/h3>
&lt;p>For 3.x deployments credentials are stored in &lt;a href="https://docs.couchdb.org/en/stable/api/server/configuration.html">CouchDB configuration&lt;/a> in a custom &lt;code>medic-credentials&lt;/code> section.&lt;/p>
&lt;p>To add the credential to the admin config you need to PUT the value using curl, for example, to set a credential with key &amp;ldquo;mykey&amp;rdquo; and password &amp;ldquo;my pass&amp;rdquo; use the following command.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">curl -X PUT https://&amp;lt;user&amp;gt;:&amp;lt;pass&amp;gt;@&amp;lt;domain&amp;gt;/_node/_local/_config/medic-credentials/mykey -d &lt;span style="color:#4e9a06">&amp;#39;&amp;#34;my pass&amp;#34;&amp;#39;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You can also add it via Fauxton:&lt;/p>
&lt;ul>
&lt;li>Navigate to the Config screen at &lt;code>https://&amp;lt;domain&amp;gt;/_utils/#/_config&lt;/code>&lt;/li>
&lt;li>Click &lt;code>Add Option&lt;/code>&lt;/li>
&lt;li>The &lt;code>Section&lt;/code> should be &lt;code>medic-credentials&lt;/code>, the &lt;code>Name&lt;/code> should be (in this example) &lt;code>mykey&lt;/code> and the value should be the password&lt;/li>
&lt;li>Click &lt;code>Create&lt;/code>&lt;/li>
&lt;li>You should then be able to see your credential in the list of configuration shown&lt;/li>
&lt;/ul></description></item><item><title>Apps: Local Couch2pg Setup</title><link>https://docs.communityhealthtoolkit.org/apps/tutorials/couch2pg-setup/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/tutorials/couch2pg-setup/</guid><description>
&lt;div class="pageinfo pageinfo-primary">
&lt;p>This tutorial will take you through setting up a Couch2pg service.&lt;/p>
&lt;p>By the end of the tutorial you should be able to:&lt;/p>
&lt;ul>
&lt;li>Set up a Couch2pg service&lt;/li>
&lt;li>Run the Couch2pg service&lt;/li>
&lt;/ul>
&lt;/div>
&lt;p>&lt;a href="https://github.com/medic/cht-couch2pg">CHT Couch2pg&lt;/a> is a background process that moves data from Couchdb to Postgres through one way replication. It therefore, needs to have full read and write access to both the Postgres Database and Couchdb upstream. It is built in nodejs and can be set up as a background process using systemd. Review this &lt;a href="https://docs.communityhealthtoolkit.org/core/overview/architecture/#overview">architecture diagram&lt;/a> to get a conceptual understanding of how couch2pg works.&lt;/p>
&lt;h2 id="brief-overview-of-key-environmental-variables">Brief Overview of key environmental variables&lt;/h2>
&lt;p>&lt;em>COUCHDB_URL&lt;/em> is the CouchDB instance URL with no trailing slash after &lt;code>/medic&lt;/code>, format: &lt;code>https://[user]:[password]@localhost:[port]/medic&lt;/code>&lt;/p>
&lt;p>&lt;em>POSTGRESQL_URL&lt;/em> is the PostgresSQL instance URL, format: &lt;code>postgres://[user]:[password]@localhost:[port]/[database name]&lt;/code>&lt;/p>
&lt;p>&lt;em>COUCH2PG_SLEEP_MINS&lt;/em> is the interval size in minutes Couch2pg will use to poll Couchdb.&lt;/p>
&lt;p>&lt;em>COUCH2PG_DOC_LIMIT&lt;/em> is the number of documents Couch2pg will fetch in each query.&lt;/p>
&lt;p>&lt;em>COUCH2PG_RETRY_COUNT&lt;/em> is the amount of times couch2pg should retry a failed connection before it fails.&lt;/p>
&lt;p>&lt;em>COUCH2PG_CHANGES_LIMIT&lt;/em> is the number of changes to query since the last sync operation.&lt;/p>
&lt;p>To read more about environmental variables, see the &lt;a href="https://github.com/medic/cht-couch2pg#readme">CHT Couch2pg readme&lt;/a>.&lt;/p>
&lt;h2 id="required-resources">Required Resources&lt;/h2>
&lt;p>Before you begin, you need to have some useful software and tools that are required for things to work:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://nodejs.org/en/">nodejs&lt;/a> 8 upto 12.&lt;/li>
&lt;li>&lt;a href="https://www.npmjs.com/get-npm">npm&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.postgresql.org/">PostgreSQL&lt;/a> 9.4 or later&lt;/li>
&lt;/ul>
&lt;h2 id="prerequisites">Prerequisites&lt;/h2>
&lt;p>You should have a functioning &lt;a href="https://docs.communityhealthtoolkit.org/apps/tutorials/local-setup/">CHT instance installed locally&lt;/a>&lt;/p>
&lt;p>You should have a working database with a user that has full creation rights on the database. A database &lt;code>POSTGRES_DB_NAME&lt;/code> and &lt;code>couch2pg&lt;/code> user can be created and access granted using the following query:&lt;/p>
&lt;pre>&lt;code>CREATE DATABASE POSTGRES_DB_NAME;
CREATE USER couch2pg WITH ENCRYPTED PASSWORD 'mypassword';
GRANT ALL PRIVILEGES ON DATABASE POSTGRES_DB_NAME TO couch2pg;
&lt;/code>&lt;/pre>&lt;p>All steps below require you to have a local clone of the repo.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">git clone https://github.com/medic/cht-couch2pg.git&lt;span style="color:#4e9a06">`&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="setting-up-with-environment-variables">Setting up with environment variables&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>Change directory into the repo&amp;rsquo;s directory where you cloned it: &lt;code>cd /path/to/cht-couch2pg&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Install dependencies: &lt;code>npm ci&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Export the four variables with the correct values:&lt;/p>
&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">POSTGRESQL_URL&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>postgres://&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>user&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>:&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>password&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>@localhost:&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>port&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>/&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>database name&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">COUCHDB_URL&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>https://&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>user&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>:&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>password&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>@localhost:&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>port&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>/medic
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">COUCH2PG_DOC_LIMIT&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1000&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">COUCH2PG_RETRY_COUNT&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">5&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">COUCH2PG_SLEEP_MINS&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">120&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">COUCH2PG_CHANGES_LIMIT&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1000&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="4">
&lt;li>Run: &lt;code>node .&lt;/code>&lt;/li>
&lt;/ol>
&lt;p>If you want to set and save all possible variables:&lt;/p>
&lt;ol start="5">
&lt;li>
&lt;p>Copy &lt;code>sample.env&lt;/code> to &lt;code>couch2pg.env&lt;/code>: &lt;code>cp sample.env couch2pg.env&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Edit &lt;code>couch2pg.env&lt;/code> to have all the variables you need.&lt;/p>
&lt;/li>
&lt;/ol>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
&lt;code>POSTGRESQL_URL&lt;/code> shouldn’t be edited as it is defined by the variables above it.
&lt;/div>
&lt;ol start="7">
&lt;li>Run: &lt;code>. ./couch2pg.env &amp;amp;&amp;amp; node .&lt;/code>&lt;/li>
&lt;/ol>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
To run cht-couch2pg in interactive mode, use &lt;code>node . -i&lt;/code>. You will be prompted to answer questions to capture the same the environmental variables. For each question, you will be given suggestions for an answer.
&lt;/div>
&lt;br clear="all">
&lt;hr>
&lt;h2 id="using-docker-compose">Using docker-compose&lt;/h2>
&lt;p>The simplest way to run couch2pg is with &lt;code>docker-compose&lt;/code> which only needs configuration of the CouchDB instance URL. The compose file will then create a PostgresSQL container, connect to the CouchDB server and proceed to download couchDB documents to the PostgreSQL container:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Change directory into the repo&amp;rsquo;s directory where you cloned it: &lt;code>cd /path/to/cht-couch2pg&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Set the URL for CouchDB in the &lt;code>COUCHDB_URL&lt;/code> env variable. e.g.&lt;/p>
&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">COUCHDB_URL&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>https://medic:password@192-168-68-26.my.local-ip.co:8442/medic
&lt;/code>&lt;/pre>&lt;/div>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
The CouchDB URL needs to be reachable from the docker container (i.e. not localhost).
&lt;/div>
&lt;ol start="3">
&lt;li>
&lt;p>Run: &lt;code>docker-compose up&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Connect to the PostgreSQL instance with login &lt;code>cht_couch2pg&lt;/code>, password &lt;code>cht_couch2pg_password&lt;/code> and database &lt;code>cht&lt;/code>.&lt;/p>
&lt;/li>
&lt;/ol>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
To set all possible variables or store the variables in configuration file, follow steps 5 and 6 above. To connect to the PostgreSQL instance, use the server from &lt;code>POSTGRES_SERVER_NAME&lt;/code>, use login from &lt;code>COUCH2PG_USER&lt;/code>, password from &lt;code>COUCH2PG_USER_PASSWORD&lt;/code> and the database from &lt;code>POSTGRES_DB_NAME&lt;/code>.
&lt;/div>
&lt;br clear="all">
&lt;hr>
&lt;h2 id="known-issues">Known issues&lt;/h2>
&lt;ol>
&lt;li>Node version compatibility&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>Version 14 and 16 have been known to fail silently, and you can conveniently switch between node versions using &lt;a href="https://github.com/nvm-sh/nvm">nvm&lt;/a>.&lt;/li>
&lt;/ul>
&lt;ol start="2">
&lt;li>Postgres authentication&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>
&lt;p>If the error &lt;code>Error: Unknown authenticationOk message typeMessage { name: 'authenticationOk', length: 23 }&lt;/code> is observed, it is because Postgres is setup to use a different password encryption algorithm compared to what Couch2pg uses. Couch2pg was made to work with &lt;code>md5&lt;/code> which is the default method in Postgres v10-13. However, on postgres v14 the default method is &lt;code>scram-sha-256&lt;/code> detailed in the &lt;a href="https://postgresqlco.nf/doc/en/param/password_encryption/14/">notes&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>The setting can be updated in the Postgres configuration file which is in &lt;code>/etc/postgresql/14/main/postgres.conf&lt;/code> in Ubuntu 20.04. The key &lt;code>password_encryption&lt;/code> should be set to md5. After updating the setting, restart the Postgres service.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>To confirm that the role used with couch2pg has an md5 encrypted password use the query &lt;code>SELECT rolname, rolpassword FROM pg_authid&lt;/code>. The role password should start with md5.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;br clear="all">
&lt;hr></description></item><item><title>Apps: Custom</title><link>https://docs.communityhealthtoolkit.org/apps/features/integrations/custom/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/features/integrations/custom/</guid><description>
&lt;p>The CHT Core Framework includes functionality that allows sharing data with any API-based system. Developers have configured CHT integrations with OpenMRS, KenyaEMR, Bahmni, DHIS2, RapidPro, Apache NiFi, OpenHIM, custom electronic medical records (EMR), and several other systems.&lt;/p>
&lt;h2 id="overview">Overview&lt;/h2>
&lt;p>Integrating a CHT App into your digital health ecosystem starts with identifying an integration use case. It&amp;rsquo;s important to first understand all the components present in the ecosystem (EMR, laboratory system, community health information system, etc) and then plan out what the workflow will look like operationally. It is important to consider what information is needed at each point, will it be available to them, what happens if it is not, is this workflow even useful for them.&lt;/p>
&lt;p>One of the biggest challenges in developing integrations between systems is patient matching and/or &lt;a href="https://en.wikipedia.org/wiki/Data_deduplication">deduplication&lt;/a>. Sometimes this can be controlled operationally, other times it requires complicated algorithms or human intervention.&lt;/p>
&lt;p>Below are a few example integration use cases:&lt;/p>
&lt;ol>
&lt;li>&lt;strong>Lost to Follow-up&lt;/strong>: EMR generates a list of patients that require follow-up in the community, that list is sent to the CHT and healthworkers receive a task in the CHT to find those patients and refer them to the health facility.&lt;/li>
&lt;li>&lt;strong>Referrals from the community&lt;/strong>: When a CHW does an assessment and determines the patient should be referred to a health facility, send the referral information to the EMR.&lt;/li>
&lt;li>&lt;strong>Contact Tracing&lt;/strong>: Similar to Lost to Follow-Up, the EMR generates a list of contacts to be followed up with and this is sent to the CHT so that a tracer can call those contacts to see if they have symptoms.&lt;/li>
&lt;li>&lt;strong>Interactive Messaging&lt;/strong>: Integrate with a messaging platform (such as RapidPro) to allow community members to initiate self-screening assessments, which can then be sent to the CHT for follow-up by a healthworker.&lt;/li>
&lt;/ol>
&lt;p>As you design your use cases, creating a &lt;a href="https://www.websequencediagrams.com/">sequence diagram&lt;/a> will be helpful in illustrating what the flow will look like. &lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/integrations/rapidpro/#sequence-diagrams">Here&lt;/a> is an example sequence diagram for an integration use case with RapidPro.&lt;/p>
&lt;h2 id="integration-design-patterns">Integration Design Patterns&lt;/h2>
&lt;p>There are a number of different interactions that may occur between digital health systems. Below are some common use cases:&lt;/p>
&lt;ol>
&lt;li>Creating a patient in the CHT creates that patient in another system&lt;/li>
&lt;li>Creating a patient in another system creates that patient in the CHT&lt;/li>
&lt;li>Submitting a form in the CHT triggers an event in another system&lt;/li>
&lt;li>Submitting a form in the CHT sends data to another system&lt;/li>
&lt;li>Activity in another system triggers an event in the CHT&lt;/li>
&lt;li>Activity in another system stores the results in the CHT&lt;/li>
&lt;li>Another system needs to look up data in the CHT&lt;/li>
&lt;/ol>
&lt;h2 id="sending-data-to-other-systems">Sending data to other systems&lt;/h2>
&lt;p>Using the &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/outbound/">outbound push&lt;/a> feature, you can configure the CHT to send data to another system. Before starting, you&amp;rsquo;ll want to make sure you understand the APIs of the destination system and have login credentials with adequate privileges.&lt;/p>
&lt;p>To send data to other systems from the CHT, you will need to do the following:&lt;/p>
&lt;ol>
&lt;li>Enable &lt;code>outbound&lt;/code> in &lt;code>app_settings&lt;/code>&lt;/li>
&lt;li>Specify &lt;em>when&lt;/em> data is sent&lt;/li>
&lt;li>Specify &lt;em>where&lt;/em> data is sent&lt;/li>
&lt;li>Specify &lt;em>what&lt;/em> data is sent&lt;/li>
&lt;li>Set up credentials for the destination system&lt;/li>
&lt;/ol>
&lt;h3 id="enable-outbound">Enable outbound&lt;/h3>
&lt;p>&lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/outbound/#configuration">Enable&lt;/a> the &lt;code>mark_for_outbound&lt;/code> transition in &lt;code>app_settings&lt;/code>.&lt;/p>
&lt;h3 id="when-data-is-sent">When data is sent&lt;/h3>
&lt;p>Whenever a document is changed (such as submitting a form, creating a new contact, or editing an existing one) you can configure outbound to send data to another system. The &lt;code>relevant_to&lt;/code> &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/outbound/#relevant_to">property&lt;/a> in the outbound configuration is used to identify which activities will trigger the sending of data.&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Example&lt;/h4>
Send data to the EMR whenever a CHW submits an &lt;code>assessment&lt;/code> form where &lt;code>referral = true&lt;/code>.
&lt;/div>
&lt;h3 id="where-data-is-sent">Where data is sent&lt;/h3>
&lt;p>The &lt;code>destination&lt;/code> &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/outbound/#destination">property&lt;/a> in the outbound configuration is used to specify &lt;em>where&lt;/em> to send data. This will normally be the API endpoint of the destination system or interoperabiliy layer.&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Example&lt;/h4>
Send data to the &lt;code>/api/v1/referral&lt;/code> endpoint in the destination system.
&lt;/div>
&lt;h3 id="what-data-is-sent">What data is sent&lt;/h3>
&lt;p>You configure &lt;em>what&lt;/em> data is sent using the &lt;code>mapping&lt;/code> &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/outbound/#mapping">property&lt;/a>. You will map data from the CHT to the format required by the destination API endpoint.&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Example&lt;/h4>
Map the &lt;code>contact.name&lt;/code> field in the CHT to the &lt;code>patient.name&lt;/code> field in the EMR.
&lt;/div>
&lt;h3 id="authentication">Authentication&lt;/h3>
&lt;p>Credentials for the destination system are &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/outbound/#credentials">stored in CouchdDB&lt;/a>. You will need to set this up before you can test your configuration.&lt;/p>
&lt;h2 id="requests-from-other-systems">Requests from other systems&lt;/h2>
&lt;p>The CHT has a complete RESTful API that other systems can utilize to interact with data in the CHT.&lt;/p>
&lt;p>The most common uses are:&lt;/p>
&lt;ol>
&lt;li>Looking up data in the CHT from another system&lt;/li>
&lt;li>POSTing data to the CHT from another system&lt;/li>
&lt;/ol>
&lt;h3 id="look-up-data-in-the-cht">Look up data in the CHT&lt;/h3>
&lt;p>The CHT has a number of different API endpoints that can be used to look up data.&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Example 1&lt;/h4>
You have a patient’s phone number and you want to look up more information about that patient, such as who their CHW is or what Catchment Area they live in.
&lt;/div>
&lt;p>You can use the &lt;code>contacts_by_phone&lt;/code> &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/api/#get-apiv1contacts-by-phone">endpoint&lt;/a> will return the fully hydrated contact information for those patients.&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Example 2&lt;/h4>
You just have the internal UUID of a particular contact but want to get the complete information available for that contact.
&lt;/div>
&lt;p>You can use the &lt;code>hydrate&lt;/code> &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/api/#get-apiv1hydrate">endpoint&lt;/a> to obtain this information. to look up the complete information for that contact.&lt;/p>
&lt;h3 id="post-data-to-the-cht">POST data to the CHT&lt;/h3>
&lt;p>The CHT API also allows you to POST data. Using these endpoints, you can create new records in your CHT API. You can store activities that took place in another system on that contact&amp;rsquo;s profile in the CHT, and even create tasks for CHWs in the CHT based on activities that took place in the other system.&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Example 1&lt;/h4>
You use RapidPro to send daily quarantine follow-up messages to a patient. You want to store the patient’s responses to those messages on their profile in the CHT.
&lt;/div>
&lt;p>You can do this by submitting a JSON Form to the records &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/api/#post-apiv2records">endpoint&lt;/a>.&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Example 2&lt;/h4>
Continuing from Example 1, create a task for a CHW in the CHT whenever a patient responds that they have developed symptoms.
&lt;/div>
&lt;p>You would do this by simply configuring a &lt;a href="https://docs.communityhealthtoolkit.org/apps/features/tasks/">task&lt;/a> to be generated based on criteria available in the report that was created in Example 1.&lt;/p></description></item><item><title>Apps: DHIS2</title><link>https://docs.communityhealthtoolkit.org/apps/features/integrations/dhis2/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/features/integrations/dhis2/</guid><description>
&lt;p>Most health systems have regular reporting requirements for community-level activities. Health workers often carry around heavy logbooks to manually record all relevant activities. When it is time to submit their data, community health workers (CHWs) summarize what was recorded in their logbooks and share this information with their supervisors, who in turn create paper records of these totals across entire community units or health facilities. This paper record is often passed to yet another individual whose responsibility is to manually key in the data into a health information management system, such as DHIS2.&lt;/p>
&lt;p>In communities using digital health apps that do not integrate with DHIS2, it is highly likely that health workers are duplicating efforts by recording the same information both in their app and in their logbook(s). For example, they are not only registering new pregnancies in their app, but they are also manually recording this in their logbooks, manually adding them up at the end of the month, and then someone else is manually keying this into DHIS2.&lt;/p>
&lt;p>In communities using digital health apps built with the CHT, health systems can reduce or eliminate the need to complete paper based forms for DHIS2 reporting needs. This gives health workers more time to focus on caring for the families in their community while also increasing accuracy and timeliness of their DHIS2 reporting requirements.&lt;/p>
&lt;h2 id="overview">Overview&lt;/h2>
&lt;p>The CHT Core Framework supports integrations with DHIS2 in a variety of ways:&lt;/p>
&lt;ol>
&lt;li>Sending patient data&lt;/li>
&lt;li>Sending event data&lt;/li>
&lt;li>Sending pre-aggregated &amp;ldquo;Service Reports&amp;rdquo;&lt;/li>
&lt;li>Aggregating data across multiple health workers into DHIS2 Data Values&lt;/li>
&lt;li>Exporting a file that can be imported into DHIS2 as a Data Set&lt;/li>
&lt;li>Exposing an API for DHIS2 app developers to pull aggregate data from CHT Core&lt;/li>
&lt;li>Receiving data from DHIS2&lt;/li>
&lt;/ol>
&lt;p>Sending patient, event, and pre-aggregated data can be achieved using the &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/outbound/">Outbound push&lt;/a> feature. Receiving data from DHIS2 can be achieved using the &lt;a href="https://github.com/medic/cht-core/tree/master/api">CHT Core Web API&lt;/a>.&lt;/p>
&lt;p>Aggregating data across multiple health workers requires a somewhat specific workflow and was designed with three key user personas in mind. The aggregate workflow is described in more detail below.&lt;/p>
&lt;h2 id="aggregate-workflow">Aggregate Workflow&lt;/h2>
&lt;p>The aggregate workflow was designed specifically for CHWs, Supervisors, and Health Records Information Officers (HRIO) but may be adapted to other contexts.&lt;/p>
&lt;p>&lt;strong>CHW (offline user)&lt;/strong>: Conducts home visits and records information in the app. Reviews aggregate data throughout the month and makes sure to sync at the end of the month.&lt;/p>
&lt;p>&lt;strong>Supervisor (offline user)&lt;/strong>: Provides supervision to the CHWs, reviews and verifies aggregate data for an entire community unit.&lt;/p>
&lt;p>&lt;strong>HRIO (online user)&lt;/strong>: Exports a file from the CHT and imports into DHIS2. Reviews data in DHIS2.&lt;/p>
&lt;h3 id="community-health-workers">Community Health Workers&lt;/h3>
&lt;p>CHWs support patients in their community by following care guides and recording responses in the CHT. The CHT calculates aggregate DHIS2 Data Values for each CHW based on rules configured in the CHT. CHWs can view these indicators on the Targets tab and should review them and sync at the end of the month.&lt;/p>
&lt;p>&lt;img src="chw.png" alt="CHWs" title="Feature Overview CHWs">&lt;/p>
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/apps/features/targets/">Targets&lt;/a>&lt;/p>
&lt;h3 id="supervisors">Supervisors&lt;/h3>
&lt;p>In addition to their own targets, Supervisors can see the aggregate of each DHIS2 Data Value across &lt;em>all&lt;/em> CHWs in their area from the &lt;em>CHW Aggregate&lt;/em> view on the &lt;strong>Targets tab&lt;/strong>. By tapping on a target, they can also see each CHW’s contribution towards that total. Supervisors can review and verify with CHWs that everyone has synced and that their data is correct. The Supervisor can communicate with the HRIO when everything has been validated.&lt;/p>
&lt;p>&lt;img src="supervisor.png" alt="Supervisors" title="Feature Overview Supervisors">&lt;/p>
&lt;h3 id="health-records-information-officers">Health Records Information Officers&lt;/h3>
&lt;p>HRIOs access the &lt;strong>CHT App Management&lt;/strong> tab and select the appropriate &lt;em>DHIS2 Data Set, Organisation Unit,&lt;/em> and &lt;em>Period&lt;/em>. They then &lt;em>Export&lt;/em> a file that is formatted for DHIS2. HRIOs will need access to the &lt;strong>Import/Export&lt;/strong> feature in DHIS2 so that they can &lt;strong>Import&lt;/strong> the file. Once it has been imported into DHIS2, they review the data from the &lt;strong>Data Entry&lt;/strong> screen in DHIS2.&lt;/p>
&lt;p>&lt;img src="data-entry-1.png" alt="Data Entry" title="Feature Overview Data Entry 1">&lt;/p>
&lt;h2 id="dhis2-apps">DHIS2 apps&lt;/h2>
&lt;p>The CHT also includes an &lt;a href="https://github.com/medic/cht-core/tree/master/api">API&lt;/a> that can be called from other applications that returns DHIS2 Data Sets. This means that you can build a &lt;a href="https://docs.dhis2.org/master/en/developer/html/apps_creating_apps.html">DHIS2 app&lt;/a> that pulls data from the CHT and imports it electronically into DHIS2. This would allow &lt;strong>Data Entry&lt;/strong> to control the process directly from DHIS2 without having to access the CHT.&lt;/p>
&lt;p>&lt;img src="data-entry-2.png" alt="Data Entry" title="Feature Overview Data Entry 2">&lt;/p>
&lt;h2 id="version-notes">Version Notes&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Feature&lt;/th>
&lt;th>CHT Core version&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Calculate DHIS2 Data Values by aggregating data from CHT Core reports&lt;/td>
&lt;td>3.9.0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Export file from CHT Core that can be imported into DHIS2 as a Data Set&lt;/td>
&lt;td>3.9.0&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Apps: CHT Local Environment Setup</title><link>https://docs.communityhealthtoolkit.org/apps/tutorials/local-setup/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/tutorials/local-setup/</guid><description>
&lt;div class="pageinfo pageinfo-primary">
&lt;p>This tutorial will take you through setting up a local environment to build and test CHT applications on CHT version 3.9.0. This includes setting up the necessary tools to download and run the CHT public docker image as well as a command line interface tool to manage and build CHT apps.&lt;/p>
&lt;p>By the end of the tutorial you should be able to:&lt;/p>
&lt;ul>
&lt;li>View the login page to CHT webapp on localhost&lt;/li>
&lt;li>Upload default settings to localhost&lt;/li>
&lt;/ul>
&lt;/div>
&lt;h2 id="brief-overview-of-key-concepts">Brief Overview of Key Concepts&lt;/h2>
&lt;p>The &lt;em>CHT Core Framework&lt;/em> makes it faster to build full-featured, scalable digital health apps by providing a foundation developers can build on. These apps can support most languages, are &lt;a href="https://docs.communityhealthtoolkit.org/core/overview/offline-first/">Offline-First&lt;/a>, and work on basic phones (via SMS), smartphones, tablets, and computers.&lt;/p>
&lt;p>&lt;em>CHT Project Configurer&lt;/em> also known as &lt;em>&lt;strong>cht-conf&lt;/strong>&lt;/em> is command-line interface tool to manage and configure CHT apps.&lt;/p>
&lt;p>&lt;em>Docker&lt;/em> is a tool designed to make it easier to create, deploy, and run applications by using containers.&lt;/p>
&lt;p>&lt;em>Containers&lt;/em> allow a developer to package up an application with all of the parts it needs, such as libraries and other dependencies, and deploy it as one package.&lt;/p>
&lt;p>To read more about these concepts, see our &lt;a href="https://docs.communityhealthtoolkit.org/core/guides/docker-setup/">Docker Setup guide&lt;/a>.&lt;/p>
&lt;h2 id="required-resources">Required Resources&lt;/h2>
&lt;p>Before you begin, you need to have some useful software and tools that are required for things to work:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://nodejs.org/en/">nodejs&lt;/a> version 12&lt;/li>
&lt;li>&lt;a href="https://www.npmjs.com/get-npm">npm&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://git-scm.com/downloads">git&lt;/a> or the &lt;a href="https://desktop.github.com/">Github Desktop&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/hosting/requirements/#docker">docker and docker-compose&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h2 id="implementation-steps">Implementation Steps&lt;/h2>
&lt;p>Now that you have the dependent tools and software installed, you are ready to set up your CHT local environment.&lt;/p>
&lt;h3 id="1-create-docker-composeyml">1. Create docker-compose.yml&lt;/h3>
&lt;p>Open your terminal and navigate to your working folder. Run the command:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">curl -o docker-compose.yml https://raw.githubusercontent.com/medic/cht-core/master/docker-compose.yml
&lt;/code>&lt;/pre>&lt;/div>&lt;p>This will create a copy of the &lt;code>docker-compose.yml&lt;/code> file from &lt;code>cht-core&lt;/code>.&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
You can also copy the content of the docker-compose.yml file from this &lt;a href="https://raw.githubusercontent.com/medic/cht-core/master/docker-compose.yml">link&lt;/a>.
&lt;/div>
&lt;p>Run the following command inside the directory that you saved the &lt;code>docker-compose.yml&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">docker-compose up
&lt;/code>&lt;/pre>&lt;/div>&lt;figure class="right col-6 col-lg-8">&lt;a href="medic-login.png">
&lt;img src="medic-login.png"/> &lt;/a>
&lt;/figure>
&lt;p>Once the command is finished, navigate to &lt;a href="https://localhost">https://localhost&lt;/a> with the Google Chrome browser and login with the default username &lt;code>medic&lt;/code> and default password &lt;code>password&lt;/code>.&lt;/p>
&lt;p>You might get an error &amp;ldquo;Your connection is not private&amp;rdquo; (see &lt;a href="./privacy.error.png">screenshot&lt;/a>). Click &amp;ldquo;Advanced&amp;rdquo; and then click &amp;ldquo;Proceed to localhost&amp;rdquo;.&lt;/p>
&lt;p>If you are using Mac you will not be able to find the &amp;ldquo;Proceed to localhost&amp;rdquo; link in Chrome, to bypass that error just click anywhere on the denial page and type &amp;ldquo;thisisunsafe&amp;rdquo;.&lt;/p>
&lt;p>This error can be fixed in step 5 below.&lt;/p>
&lt;p>If you encounter an error &lt;code>bind: address already in use&lt;/code>, see the &lt;a href="https://docs.communityhealthtoolkit.org/core/guides/docker-setup/#port-conflicts">Port Conflicts section&lt;/a> in the Docker Setup guide.&lt;/p>
&lt;p>This CHT instance is empty and has no data in it. While you&amp;rsquo;re free to explore and add your own data, in step 3 below we will upload sample data. Proceed to step 2 to install &lt;code>cht-conf&lt;/code> which is needed to upload the test data.&lt;/p>
&lt;br clear="all">
&lt;hr>
&lt;h3 id="2-install-cht-conf">2. Install cht-conf&lt;/h3>
&lt;p>Using npm and python on your terminal, install cht-conf and pyxform globally using the following commands:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">npm install -g cht-conf
sudo python -m pip install git+https://github.com/medic/pyxform.git@medic-conf-1.17#egg&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>pyxform-medic
&lt;/code>&lt;/pre>&lt;/div>&lt;figure class="right col-6 col-lg-8">&lt;a href="confirm-cht-conf.png">
&lt;img src="confirm-cht-conf.png"/> &lt;/a>
&lt;/figure>
&lt;p>You can confirm that the installation was successful by typing &lt;code>cht&lt;/code> in your terminal.&lt;/p>
&lt;p>If you have trouble installing &lt;code>cht-conf&lt;/code>, see the application&amp;rsquo;s &lt;a href="https://github.com/medic/cht-conf">GitHub repository&lt;/a> for more information.&lt;/p>
&lt;br clear="all">
&lt;hr>
&lt;h3 id="3-upload-test-data">3. Upload Test Data&lt;/h3>
&lt;p>By default, the CHT will have the &lt;a href="https://docs.communityhealthtoolkit.org/apps/examples/anc/">Maternal &amp;amp; Newborn Health Reference Application&lt;/a> installed. To upload demo data you can use &lt;code>cht-conf&lt;/code>:&lt;/p>
&lt;figure class="right col-3 col-lg-6">&lt;a href="test.data.png">
&lt;img src="test.data.png"/> &lt;/a>
&lt;/figure>
&lt;ul>
&lt;li>Clone &lt;code>cht-core&lt;/code> on your computer using the following command:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">git clone https://github.com/medic/cht-core.git
&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Navigate your terminal to the &lt;code>cht-core/config/default&lt;/code> directory. This is where the reference application is stored.&lt;/li>
&lt;li>Run the following &lt;code>cht-conf&lt;/code> command to compile and upload default test data to your local instance:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">cht --url&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>https://medic:password@localhost --accept-self-signed-certs csv-to-docs upload-docs
&lt;/code>&lt;/pre>&lt;/div>&lt;p>With the test data uploaded, log back into your CHT instance and note the &amp;ldquo;Test Health Facility&amp;rdquo; and related data.&lt;/p>
&lt;br clear="all">
&lt;hr>
&lt;h3 id="4-create-and-upload-a-blank-project">4. Create and Upload a Blank Project&lt;/h3>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
This step will erase the default Maternal &amp;amp; Newborn Health Reference Application.
&lt;/div>
&lt;p>With &lt;code>cht-conf&lt;/code> you can also create a blank project. This provides you a template from which you can begin working on CHT. To do so, run the following commands:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">mkdir cht-app-tutorials
&lt;span style="color:#204a87">cd&lt;/span> cht-app-tutorials
cht initialise-project-layout
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Then deploy the blank project onto your local test environment with the command:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">cht --url&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>https://medic:password@localhost --accept-self-signed-certs
&lt;/code>&lt;/pre>&lt;/div>&lt;p>If the above command shows an error similar to this one &lt;code>ERROR Error: Webpack warnings when building contact-summary&lt;/code> you will need to install all the dependencies and libraries it needs, then you need to restart the docker-compose and try again.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">npm ci
docker-compose restart
cht --url&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>https://medic:password@localhost --accept-self-signed-certs
&lt;/code>&lt;/pre>&lt;/div>&lt;figure class="right col-6 col-lg-8">&lt;a href="all-actions-completed.png">
&lt;img src="all-actions-completed.png"/> &lt;/a>
&lt;/figure>
&lt;p>&lt;code>accept-self-signed-certs&lt;/code> tells cht-conf that it’s OK that the server’s certificate isn’t signed properly, which will be the case when using docker locally.&lt;/p>
&lt;p>Once you have run the above command it should complete with the message: &lt;code>INFO All actions completed.&lt;/code>.&lt;/p>
&lt;br clear="all">
&lt;hr>
&lt;h3 id="5-optional-install-valid-tls-certificate">5. Optional: Install Valid TLS Certificate&lt;/h3>
&lt;figure class="right col-6 col-lg-8">&lt;a href="local-ip.TLS.png">
&lt;img src="local-ip.TLS.png"/> &lt;/a>
&lt;/figure>
&lt;p>With the blank project deployed to your CHT instance, you&amp;rsquo;re ready to start writing your first app. A big part of authoring an app is testing it on a mobile device, likely using the unbranded version of &lt;a href="https://github.com/medic/cht-android">CHT Android&lt;/a>. In order to test in the APK, your CHT instance needs a valid TLS certificate which the default docker version does not have.&lt;/p>
&lt;p>To install a valid certificate, open a terminal in the &lt;code>cht-core&lt;/code> directory. Ensure the &lt;code>medic-os&lt;/code> container is running and make this call:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">./scripts/add-local-ip-certs-to-docker.sh
&lt;/code>&lt;/pre>&lt;/div>&lt;p>To see what a before and after looks like, note the screenshot to the left which uses &lt;code>curl&lt;/code> to test the certificate validity.&lt;/p>
&lt;p>The output of &lt;code>add-local-ip-certs-to-docker.sh&lt;/code> looks like this:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-text" data-lang="text">Debug: Service &amp;#39;medic-core/nginx&amp;#39; exited with status 143
Info: Service &amp;#39;medic-core/nginx&amp;#39; restarted successfully
Success: Finished restarting services in package &amp;#39;medic-core&amp;#39;
If no errors output above, certificates successfully installed.
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The IP of your computer is used in the URL of the CHT instance now. For example if your IP is &lt;code>192.168.68.40&lt;/code> then the CHT URL with a valid TLS certificate is &lt;code>192-168-68-40.my.local-ip.co&lt;/code>. See the &lt;a href="http://local-ip.co/">local-ip.co&lt;/a> site to read more about these free to use certificates.&lt;/p>
&lt;p>When using &lt;code>cht-conf&lt;/code> you can now drop the use of &lt;code>--accept-self-signed-certs&lt;/code>. Further, update the URL to be based on your IP. Using the example IP above, this would be &lt;code>--url=https://medic:password@192-168-68-40.my.local-ip.co&lt;/code>. As well, you can now use this URL to test with the CHT Android app.&lt;/p>
&lt;h2 id="frequently-asked-questions">Frequently Asked Questions&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://forum.communityhealthtoolkit.org/t/cant-upgrade-to-3-8-version/608">How do I upgrade to a higher version of the webapp?&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://forum.communityhealthtoolkit.org/t/unable-to-install-core-framework-in-cloud-instance/533">How do I access the instance remotely?&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://forum.communityhealthtoolkit.org/t/installing-cht-conf/1593">Error &amp;lsquo;No module named pip&amp;rsquo; when installing cht-conf&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://forum.communityhealthtoolkit.org/t/couchdb-failed-to-start-properly/1683">CouchDB failed to start properly&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://forum.communityhealthtoolkit.org/t/enable-adding-contacts-in-a-blank-project-deployed-onlocal-test-environment-for-cht-instance/1652">Enable adding contacts in a blank project&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Apps: Maternal and Newborn Health Reference App</title><link>https://docs.communityhealthtoolkit.org/apps/examples/anc/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/examples/anc/</guid><description>
&lt;div class="pageinfo pageinfo-primary">
&lt;p>This &amp;ldquo;reference application&amp;rdquo; for maternal and newborn health provides a template for structuring and organizing your Community Health Toolkit digital health app, its configuration, and test code. It can be used as is, or serve as a great way to learn about the CHT&amp;rsquo;s foundation for forms, data fields, and analytics that can be easily customized to fit your context.&lt;/p>
&lt;/div>
&lt;h2 id="problem-being-addressed">Problem Being Addressed&lt;/h2>
&lt;p>Access to quality maternal and newborn care is the cornerstone of many community health programs. For many women living in communities at the last mile, pregnancy can be a &lt;a href="https://www.who.int/health-topics/maternal-health">vulnerable time&lt;/a>. There is a need for community health programs to support early pregnancy registration, consistent antenatal care (ANC) visits, and in-facility deliveries. In addition, the short time window following delivery for postnatal care (PNC) is a critical time for catching life-threatening danger signs for the new mother and baby.&lt;/p>
&lt;h2 id="solution-overview">Solution Overview&lt;/h2>
&lt;p>The maternal and newborn health workflow ensures that women receive the care that they need during their pregnancy with the support of CHWs. Early pregnancy registration, timely antenatal care visits, and improved care coordination between CHWs and clinics increase the likelihood that women will deliver in a facility with the support of skilled birth attendants. This ultimately will help save the lives of mothers and babies, as well as strengthen the maternal and newborn health services of the health system. Community Health Toolkit applications with maternal and newborn workflows are used by health workers and clinical staff to:&lt;/p>
&lt;ul>
&lt;li>Register pregnancies&lt;/li>
&lt;li>Provide a schedule for on-time ANC visits&lt;/li>
&lt;li>Offer education for the mother at each stage of pregnancy&lt;/li>
&lt;li>Screen for and report danger signs in the pregnant woman and newborn&lt;/li>
&lt;li>Refer and encourage pregnant women to deliver at a facility&lt;/li>
&lt;li>Ensure on-time PNC visits for mother and newborn&lt;/li>
&lt;/ul>
&lt;h2 id="forms-hierarchy">Forms Hierarchy&lt;/h2>
&lt;p>Once a &lt;a href="https://docs.communityhealthtoolkit.org/apps/concepts/hierarchy/">hierarchy&lt;/a> of people and places is established, forms are added at different levels. This diagram indicates the forms that can be filled about a person in the app (in this case, family members at the household level), as well as the person/user who will access these forms and make the reports (CHWs at the CHW Area level). Some forms are accessible as actions from the family member’s profile as actions, others from the CHW’s task list as tasks, and some as either.&lt;/p>
&lt;figure class="right col-12 col-lg-12">&lt;a href="forms-hierarchy.png">
&lt;img src="forms-hierarchy.png"/> &lt;/a>
&lt;/figure>
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/forms/app/">Controlling form properties&lt;/a>&lt;/p>
&lt;h2 id="workflows">Workflows&lt;/h2>
&lt;p>Both maternal and newborn care workflows are defined to connect form actions and data with people. Detailed documentation for these forms and task schedules are linked from the workflow diagrams below. Accompanying this documentation are tips and insights into the design decisions made along the way, and suggestions for how and where to customize the forms.&lt;/p>
&lt;h3 id="pregnancy-workflow">Pregnancy Workflow&lt;/h3>
&lt;div class="container workflow align-items-center">
&lt;div class="row d-none d-sm-flex text-center">
&lt;div class="col-3 align-self-end">
&lt;img src="pregnancy-1.png" alt="Condition" />&lt;h4>Condition&lt;/h4>
&lt;/div>
&lt;div class="col-1">&lt;/div>
&lt;div class="col-3 align-self-end">
&lt;img src="pregnancy-2.png" alt="Task" />&lt;h4>Task&lt;/h4>
&lt;/div>
&lt;div class="col-1">&lt;/div>
&lt;div class="col-3 align-self-end">
&lt;img src="pregnancy-3.png" alt="Resolution" />&lt;h4>Resolution&lt;/h4>
&lt;/div>
&lt;/div>
&lt;div class="row">
&lt;div class="col-12 col-sm-3 text">&lt;h4 class="d-sm-none">Condition&lt;/h4>Upon discovering a pregnancy, a CHW submits a &lt;a href="https://docs.google.com/drawings/d/1u4OQIgTyzUysFv9Cop-C54nrbPiuPmq7GTpBTFmwZn0/edit">Pregnancy Form&lt;/a> confirming a new pregnancy with the estimated gestational age.&lt;/div>
&lt;div class="col-1 d-none d-sm-flex align-self-center">&lt;i class="fas fa-arrow-alt-circle-right">&lt;/i>&lt;/div>
&lt;div class="col-1 d-sm-none">&lt;i class="fas fa-long-arrow-alt-right fa-rotate-45">&lt;/i>&lt;/div>
&lt;div class="col-11 col-sm-3 text">&lt;h4 class="d-sm-none">Task&lt;/h4>At the 8 ANC touchpoints defined by the WHO, the CHW receives a &lt;a href="https://docs.google.com/document/d/17pJXBf2gEB2wD1P5g9S5XQ2u4QnLGMiUU4sX0XQsvSk/edit#heading=h.wf9x0zhfeasi">Pregnancy Home Visit Task&lt;/a> to let her know that it’s time to check in on the pregnant woman.&lt;/div>
&lt;div class="col-1 d-none d-sm-flex align-self-center">&lt;i class="fas fa-arrow-alt-circle-right">&lt;/i>&lt;/div>
&lt;div class="col-1 d-sm-none">&lt;i class="fas fa-long-arrow-alt-right fa-rotate-45">&lt;/i>&lt;/div>
&lt;div class="col-11 col-sm-4 text">&lt;h4 class="d-sm-none">Resolution&lt;/h4>CHW submits &lt;a href="https://docs.google.com/drawings/d/1_2i6XTMtMkrfQ6NFNjcEDwJPS8i0rEeQlaPgYQhacSw/edit">Pregnancy Home Visit Form&lt;/a>, demonstrating that she provided ANC counseling, gathered information from prior facility visits, and screened for danger signs.&lt;/div>
&lt;/div>
&lt;div class="row">
&lt;div class="col-12 col-sm-3 text">&lt;h4 class="d-sm-none">Condition&lt;/h4>A &lt;a href="https://docs.google.com/drawings/d/1u4OQIgTyzUysFv9Cop-C54nrbPiuPmq7GTpBTFmwZn0/edit">Pregnancy Form&lt;/a> is submitted with the gestational age unknown.&lt;/div>
&lt;div class="col-1 d-none d-sm-flex align-self-center">&lt;i class="fas fa-arrow-alt-circle-right">&lt;/i>&lt;/div>
&lt;div class="col-1 d-sm-none">&lt;i class="fas fa-long-arrow-alt-right fa-rotate-45">&lt;/i>&lt;/div>
&lt;div class="col-11 col-sm-3 text">&lt;h4 class="d-sm-none">Task&lt;/h4>A &lt;a href="https://docs.google.com/document/d/17pJXBf2gEB2wD1P5g9S5XQ2u4QnLGMiUU4sX0XQsvSk/edit#heading=h.2pls723gu6wl">Pregnancy Visit Task&lt;/a> appears every 2 weeks for 42 weeks.&lt;/div>
&lt;div class="col-1 d-none d-sm-flex align-self-center">&lt;i class="fas fa-arrow-alt-circle-right">&lt;/i>&lt;/div>
&lt;div class="col-1 d-sm-none">&lt;i class="fas fa-long-arrow-alt-right fa-rotate-45">&lt;/i>&lt;/div>
&lt;div class="col-11 col-sm-4 text">&lt;h4 class="d-sm-none">Resolution&lt;/h4>CHW submits &lt;a href="https://docs.google.com/drawings/d/1_2i6XTMtMkrfQ6NFNjcEDwJPS8i0rEeQlaPgYQhacSw/edit">Pregnancy Home Visit Form&lt;/a>. If the gestational age is entered, the workflow will change to &lt;a href="https://docs.google.com/document/d/17pJXBf2gEB2wD1P5g9S5XQ2u4QnLGMiUU4sX0XQsvSk/edit#heading=h.wf9x0zhfeasi">Pregnancy Home Visit Tasks&lt;/a>.&lt;/div>
&lt;/div>
&lt;div class="row">
&lt;div class="col-12 col-sm-3 text">&lt;h4 class="d-sm-none">Condition&lt;/h4>A CHW submits a &lt;a href="https://docs.google.com/drawings/d/1_2i6XTMtMkrfQ6NFNjcEDwJPS8i0rEeQlaPgYQhacSw/edit">Pregnancy Home Visit Form&lt;/a> that includes an upcoming facility visit date.&lt;/div>
&lt;div class="col-1 d-none d-sm-flex align-self-center">&lt;i class="fas fa-arrow-alt-circle-right">&lt;/i>&lt;/div>
&lt;div class="col-1 d-sm-none">&lt;i class="fas fa-long-arrow-alt-right fa-rotate-45">&lt;/i>&lt;/div>
&lt;div class="col-11 col-sm-3 text">&lt;h4 class="d-sm-none">Task&lt;/h4>A &lt;a href="https://docs.google.com/document/d/17pJXBf2gEB2wD1P5g9S5XQ2u4QnLGMiUU4sX0XQsvSk/edit#heading=h.v3b7bata6j">Health Facility ANC Reminder Task&lt;/a> 1 week ahead of the facility visit to remind the woman to attend.&lt;/div>
&lt;div class="col-1 d-none d-sm-flex align-self-center">&lt;i class="fas fa-arrow-alt-circle-right">&lt;/i>&lt;/div>
&lt;div class="col-1 d-sm-none">&lt;i class="fas fa-long-arrow-alt-right fa-rotate-45">&lt;/i>&lt;/div>
&lt;div class="col-11 col-sm-4 text">&lt;h4 class="d-sm-none">Resolution&lt;/h4>CHW submits &lt;em>Health Facility ANC Reminder Form&lt;/em>, confirming that she called or visited the woman to remind her of her upcoming facility visit.&lt;/div>
&lt;/div>
&lt;div class="row">
&lt;div class="col-12 col-sm-3 text">&lt;h4 class="d-sm-none">Condition&lt;/h4>If the CHW notices danger signs at any time, then she submits a &lt;em>Danger Sign Form&lt;/em> and immediately refers the patient to the facility.&lt;/div>
&lt;div class="col-1 d-none d-sm-flex align-self-center">&lt;i class="fas fa-arrow-alt-circle-right">&lt;/i>&lt;/div>
&lt;div class="col-1 d-sm-none">&lt;i class="fas fa-long-arrow-alt-right fa-rotate-45">&lt;/i>&lt;/div>
&lt;div class="col-11 col-sm-3 text">&lt;h4 class="d-sm-none">Task&lt;/h4>A &lt;a href="https://docs.google.com/document/d/17pJXBf2gEB2wD1P5g9S5XQ2u4QnLGMiUU4sX0XQsvSk/edit#heading=h.82ea7ww1x1k">Danger Sign Follow-Up Task&lt;/a> will appear immediately and is due 3 days later. Tasks persists for 7 days after due date.&lt;/div>
&lt;div class="col-1 d-none d-sm-flex align-self-center">&lt;i class="fas fa-arrow-alt-circle-right">&lt;/i>&lt;/div>
&lt;div class="col-1 d-sm-none">&lt;i class="fas fa-long-arrow-alt-right fa-rotate-45">&lt;/i>&lt;/div>
&lt;div class="col-11 col-sm-4 text">&lt;h4 class="d-sm-none">Resolution&lt;/h4>CHW submits a &lt;em>Danger Sign Follow-Up Form&lt;/em>, verifying that she called or visited the woman to confirm that she attended the facility. If this is not received, another &lt;em>Danger Sign Follow-Up Task&lt;/em> is triggered.&lt;/div>
&lt;/div>
&lt;/div>
&lt;h3 id="delivery-workflow">Delivery Workflow&lt;/h3>
&lt;div class="container workflow align-items-center">
&lt;div class="row d-none d-sm-flex text-center">
&lt;div class="col-3 align-self-end">
&lt;img src="delivery-1.png" alt="Condition" />&lt;h4>Condition&lt;/h4>
&lt;/div>
&lt;div class="col-1">&lt;/div>
&lt;div class="col-3 align-self-end">
&lt;img src="delivery-2.png" alt="Task" />&lt;h4>Task&lt;/h4>
&lt;/div>
&lt;div class="col-1">&lt;/div>
&lt;div class="col-3 align-self-end">
&lt;img src="delivery-3.png" alt="Resolution" />&lt;h4>Resolution&lt;/h4>
&lt;/div>
&lt;/div>
&lt;div class="row">
&lt;div class="col-12 col-sm-3 text">&lt;h4 class="d-sm-none">Condition&lt;/h4>A currently registered pregnant person has reached a gestational age of 42 weeks and has not had a miscarriage or a delivery reported.&lt;/div>
&lt;div class="col-1 d-none d-sm-flex align-self-center">&lt;i class="fas fa-arrow-alt-circle-right">&lt;/i>&lt;/div>
&lt;div class="col-1 d-sm-none">&lt;i class="fas fa-long-arrow-alt-right fa-rotate-45">&lt;/i>&lt;/div>
&lt;div class="col-11 col-sm-3 text">&lt;h4 class="d-sm-none">Task&lt;/h4>A &lt;a href="https://docs.google.com/document/d/17pJXBf2gEB2wD1P5g9S5XQ2u4QnLGMiUU4sX0XQsvSk/edit#heading=h.roycts63w3b8">Delivery Task&lt;/a> requesting that the CHW check in on the woman to see whether she has delivered.&lt;/div>
&lt;div class="col-1 d-none d-sm-flex align-self-center">&lt;i class="fas fa-arrow-alt-circle-right">&lt;/i>&lt;/div>
&lt;div class="col-1 d-sm-none">&lt;i class="fas fa-long-arrow-alt-right fa-rotate-45">&lt;/i>&lt;/div>
&lt;div class="col-11 col-sm-4 text">&lt;h4 class="d-sm-none">Resolution&lt;/h4>CHW submits a &lt;a href="https://docs.google.com/drawings/d/1r4SkpSGWzvOZPv3-pFp9wS1k531MnWcbjzzC8U4tt0o/edit">Delivery Form&lt;/a>, confirming the pregnancy outcomes. Profiles are created for each baby that is alive. This “ends” the pregnancy workflow.&lt;/div>
&lt;/div>
&lt;div class="row">
&lt;div class="col-12 col-sm-3 text">&lt;h4 class="d-sm-none">Condition&lt;/h4>A CHW submits a &lt;a href="https://docs.google.com/drawings/d/1r4SkpSGWzvOZPv3-pFp9wS1k531MnWcbjzzC8U4tt0o/edit">Delivery Form&lt;/a> that contains a danger sign for mom or baby, or reports that either mom or baby are “alive and unwell.”&lt;/div>
&lt;div class="col-1 d-none d-sm-flex align-self-center">&lt;i class="fas fa-arrow-alt-circle-right">&lt;/i>&lt;/div>
&lt;div class="col-1 d-sm-none">&lt;i class="fas fa-long-arrow-alt-right fa-rotate-45">&lt;/i>&lt;/div>
&lt;div class="col-11 col-sm-3 text">&lt;h4 class="d-sm-none">Task&lt;/h4>A &lt;a href="https://docs.google.com/document/d/17pJXBf2gEB2wD1P5g9S5XQ2u4QnLGMiUU4sX0XQsvSk/edit#heading=h.ojap92eg1e82">Danger Sign Follow-Up Task&lt;/a> appears immediately and is due 3 days later. Persists for 7 days after due date.&lt;/div>
&lt;div class="col-1 d-none d-sm-flex align-self-center">&lt;i class="fas fa-arrow-alt-circle-right">&lt;/i>&lt;/div>
&lt;div class="col-1 d-sm-none">&lt;i class="fas fa-long-arrow-alt-right fa-rotate-45">&lt;/i>&lt;/div>
&lt;div class="col-11 col-sm-4 text">&lt;h4 class="d-sm-none">Resolution&lt;/h4>The CHW calls or visits woman to confirm that she attended and submits a &lt;em>Danger Sign Follow-Up Form&lt;/em>. If this is not received, another &lt;a href="https://docs.google.com/document/d/17pJXBf2gEB2wD1P5g9S5XQ2u4QnLGMiUU4sX0XQsvSk/edit#heading=h.ojap92eg1e82">Danger Sign Follow-Up Task&lt;/a> is triggered.&lt;/div>
&lt;/div>
&lt;div class="row">
&lt;div class="col-12 col-sm-3 text">&lt;h4 class="d-sm-none">Condition&lt;/h4>If the CHW notices danger signs at any time, then she submits a &lt;em>Danger Sign Form&lt;/em> and immediately refers the patient to the facility.&lt;/div>
&lt;div class="col-1 d-none d-sm-flex align-self-center">&lt;i class="fas fa-arrow-alt-circle-right">&lt;/i>&lt;/div>
&lt;div class="col-1 d-sm-none">&lt;i class="fas fa-long-arrow-alt-right fa-rotate-45">&lt;/i>&lt;/div>
&lt;div class="col-11 col-sm-3 text">&lt;h4 class="d-sm-none">Task&lt;/h4>A &lt;a href="https://docs.google.com/document/d/17pJXBf2gEB2wD1P5g9S5XQ2u4QnLGMiUU4sX0XQsvSk/edit#heading=h.ojap92eg1e82">Danger Sign Follow-Up Task&lt;/a> will appear immediately and is due 3 days later. Tasks persists for 7 days after due date.&lt;/div>
&lt;div class="col-1 d-none d-sm-flex align-self-center">&lt;i class="fas fa-arrow-alt-circle-right">&lt;/i>&lt;/div>
&lt;div class="col-1 d-sm-none">&lt;i class="fas fa-long-arrow-alt-right fa-rotate-45">&lt;/i>&lt;/div>
&lt;div class="col-11 col-sm-4 text">&lt;h4 class="d-sm-none">Resolution&lt;/h4>CHW submits &lt;em>Danger Sign Follow-Up Form&lt;/em>, verifying that she called or visited the woman to confirm that she attended the facility. If this is not received, another &lt;a href="https://docs.google.com/document/d/17pJXBf2gEB2wD1P5g9S5XQ2u4QnLGMiUU4sX0XQsvSk/edit#heading=h.ojap92eg1e82">Danger Sign Follow-Up Task&lt;/a> is triggered.&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="additional-resources-to-get-started">Additional Resources to Get Started&lt;/h2>
&lt;p>Here are a few additional resources to help get you started with the maternal and newborn health reference application.&lt;/p>
&lt;ul>
&lt;li>View the &lt;a href="https://github.com/medic/cht-core/tree/master/config/default/">configuration code for this reference app&lt;/a>&lt;/li>
&lt;li>Install the reference app following these &lt;a href="https://docs.communityhealthtoolkit.org/apps/tutorials/local-setup/">easy installation instructions&lt;/a>&lt;/li>
&lt;li>Modify the maternal and newborn reference application for your project context using &lt;a href="https://docs.communityhealthtoolkit.org/design/best-practices/">configuration best practices&lt;/a>&lt;/li>
&lt;li>Understand the basis for measuring the impact of maternal and newborn workflows by reviewing the World Health Organization&amp;rsquo;s &lt;a href="https://www.who.int/healthinfo/indicators/2018/en/">Core Health Indicators&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Apps: Contact and User Management - Part 1</title><link>https://docs.communityhealthtoolkit.org/apps/tutorials/contact-and-users-1/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/tutorials/contact-and-users-1/</guid><description>
&lt;div class="pageinfo pageinfo-primary">
&lt;p>In this tutorial you will learn how to create and edit contacts and their associated users in and application built with the CHT using the default contact creation forms. This will help you get familiar with the UI of the webapp as well as some features and functionality. If you are already comfortable with this, you can skip to &lt;a href="https://docs.communityhealthtoolkit.org/apps/tutorials/contact-and-users-2/">part 2, which covers manipulating contacts and their associated documents using cht-conf&lt;/a>.&lt;/p>
&lt;/div>
&lt;h2 id="brief-overview-of-key-concepts">Brief Overview of Key Concepts&lt;/h2>
&lt;p>&lt;em>Contacts&lt;/em> are people or places that are created in the CHT application.&lt;/p>
&lt;p>&lt;em>People&lt;/em> are both patients in the system and users of the system, such as CHWs or Nurses.&lt;/p>
&lt;p>&lt;em>Places&lt;/em> represent either an actual physical location such as a health facility, clinic, or a grouping such as a household or CHW Area.&lt;/p>
&lt;p>&lt;em>Contact forms&lt;/em> are forms in the CHT app that are used to create people or places.&lt;/p>
&lt;p>&lt;em>CHT App Hierarchy&lt;/em> is often modeled after the health system, health program or community structure. All people who are registered in the app must be associated with a Place. These Places are located in a hierarchy with other Places. For instance, a Family Member is part of a Household. A Household and CHWs are part of a CHW Area. A CHW Area and nurses are part of a Health Facility. Additional levels may be added as needed. The Admin level operates outside of the hierarchy and gives access to all levels and people.&lt;/p>
&lt;p>&lt;img src="app-hierarchy.jpg" alt="app hierarchy" title="Default app hierarchy">&lt;/p>
&lt;p>&lt;em>Users&lt;/em> represent credentials and roles / permissions for accessing the application. This can either be:&lt;/p>
&lt;ul>
&lt;li>People who can log into the application, such as CHWs or Nurses or&lt;/li>
&lt;li>Credentials granting external software restricted permissions to perform certain tasks, such as allowing an external service permission to write reports via the api.&lt;/li>
&lt;/ul>
&lt;h2 id="required-resources">Required Resources&lt;/h2>
&lt;p>You should have a functioning CHT instance with contact forms configured. Read &lt;a href="https://docs.communityhealthtoolkit.org/apps/tutorials/local-setup/">How to set up a CHT local configuration environment&lt;/a>&lt;/p>
&lt;h2 id="implementation-steps">Implementation Steps&lt;/h2>
&lt;p>In this tutorial, you will work with the default contact forms and the default hierachy, which is illustrated above in the overview of key concepts.&lt;/p>
&lt;p>While logged in as an admin user, you will first create the Health Facility, CHW Supervisor, CHW Area, and CHW. You will then create the users for the CHW so that they can log in and create households and household members.&lt;/p>
&lt;h3 id="1-create-new-health-facility">1. Create New Health Facility&lt;/h3>
&lt;br clear="all">
&lt;figure class="right col-6 col-lg-8">&lt;a href="new-facility/select-new-facility.png">
&lt;img src="new-facility/select-new-facility.png"/> &lt;/a>
&lt;/figure>
&lt;p>While logged into the CHT application, go to the &lt;strong>People tab&lt;/strong> and select &lt;strong>New Health Facility&lt;/strong>&lt;/p>
&lt;br clear="all">
&lt;figure class="right col-6 col-lg-8">&lt;a href="new-facility/skip-primary-contact.png">
&lt;img src="new-facility/skip-primary-contact.png"/> &lt;/a>
&lt;/figure>
&lt;p>For now we will skip creating or assigning a primary contact so that we can focus on creating the new Health Facility.&lt;/p>
&lt;br clear="all">
&lt;figure class="right col-6 col-lg-8">&lt;a href="new-facility/enter-facility-name.png">
&lt;img src="new-facility/enter-facility-name.png"/> &lt;/a>
&lt;/figure>
&lt;p>Enter the details of the Health Facility and submit the form.&lt;/p>
&lt;br clear="all">
&lt;figure class="right col-6 col-lg-8">&lt;a href="new-facility/created-facility.png">
&lt;img src="new-facility/created-facility.png"/> &lt;/a>
&lt;/figure>
&lt;p>You should see the newly created Health Facility appear on the left-hand side and when you select it, you will see details of the Health Facility appear on the right-hand side.&lt;/p>
&lt;br clear="all">
&lt;hr>
&lt;h3 id="2-create-chw-area-and-chw">2. Create CHW Area and CHW&lt;/h3>
&lt;p>We will now create a Place and the primary contact for it within one form. We want to create a CHW Area within the Health Facility that we previously created.&lt;/p>
&lt;br clear="all">
&lt;figure class="right col-6 col-lg-8">&lt;a href="new-chw-area/new-chw-area.png">
&lt;img src="new-chw-area/new-chw-area.png"/> &lt;/a>
&lt;/figure>
&lt;p>Select the &lt;strong>Health Facility&lt;/strong> on the left-hand side. You will then select &lt;strong>New Area&lt;/strong> on the right-hand side.&lt;/p>
&lt;br clear="all">
&lt;figure class="right col-6 col-lg-8">&lt;a href="new-chw-area/create-new-person.png">
&lt;img src="new-chw-area/create-new-person.png"/> &lt;/a>
&lt;/figure>
&lt;p>Select the option that lets you create a new person within the form. This person will automatically become the primary contact for the created place.&lt;/p>
&lt;br clear="all">
&lt;figure class="right col-6 col-lg-8">&lt;a href="new-chw-area/fill-required-fields.png">
&lt;img src="new-chw-area/fill-required-fields.png"/> &lt;/a>
&lt;/figure>
&lt;p>Fill in the required fields and go to the next section.&lt;/p>
&lt;br clear="all">
&lt;figure class="right col-6 col-lg-8">&lt;a href="new-chw-area/name-after-primary-contact.png">
&lt;img src="new-chw-area/name-after-primary-contact.png"/> &lt;/a>
&lt;/figure>
&lt;p>You will get an option to name the Place after the created contact person or name it yourself. If you select &lt;strong>Yes&lt;/strong>, the new place will be named &lt;code>&amp;lt;contact-name&amp;gt;'s Area&lt;/code>. For example &lt;code>Jane Doe's Area&lt;/code>.&lt;/p>
&lt;br clear="all">
&lt;figure class="right col-6 col-lg-8">&lt;a href="new-chw-area/created-chw-area.png">
&lt;img src="new-chw-area/created-chw-area.png"/> &lt;/a>
&lt;/figure>
&lt;p>Once you submit, a new CHW Area will be created. On the right-hand you should see the CHW Area name, the primary contact of the CHW Area, and the Health Facility that the CHW Area belongs to.&lt;/p>
&lt;br clear="all">
&lt;hr>
&lt;h3 id="3-create-chw-supervisor">3. Create CHW Supervisor&lt;/h3>
&lt;br clear="all">
&lt;figure class="right col-6 col-lg-8">&lt;a href="new-chw-supervisor/new-person.png">
&lt;img src="new-chw-supervisor/new-person.png"/> &lt;/a>
&lt;/figure>
&lt;p>To create a primary contact for an existing Place (in this case, for the Health Facility that we created without a primary contact); select the Place and then select the &lt;strong>New Person&lt;/strong> action.&lt;/p>
&lt;br clear="all">
&lt;figure class="right col-6 col-lg-8">&lt;a href="new-chw-supervisor/belongs-to.png">
&lt;img src="new-chw-supervisor/belongs-to.png"/> &lt;/a>
&lt;/figure>
&lt;p>A &lt;em>new person form&lt;/em> will appear with an option to change the Place the new person will belong to. A new contact will be created in the Health Facility when you submit this form.&lt;/p>
&lt;br clear="all">
&lt;figure class="right col-6 col-lg-8">&lt;a href="new-chw-supervisor/edit-facility.png">
&lt;img src="new-chw-supervisor/edit-facility.png"/> &lt;/a>
&lt;/figure>
&lt;p>Finally, we will set the newly created person as a primary contact for the Health Facility they belong to. To do this, select the Health Facility and then select the &lt;strong>Edit&lt;/strong> action.&lt;/p>
&lt;br clear="all">
&lt;figure class="right col-6 col-lg-8">&lt;a href="new-chw-supervisor/set-primary-contact.png">
&lt;img src="new-chw-supervisor/set-primary-contact.png"/> &lt;/a>
&lt;/figure>
&lt;p>You should see an edit form from which you can set the primary contact of the Health Facility. Click &lt;strong>Submit&lt;/strong> to apply the changes.&lt;/p>
&lt;br clear="all">
&lt;hr>
&lt;h3 id="4-create-the-chw-user">4. Create the CHW User&lt;/h3>
&lt;p>You may want to log in as a CHW and perform some actions now that the CHW and CHW Supervisor contacts are created; let&amp;rsquo;s create a CHW user who&amp;rsquo;s linked to the CHW contact we created earlier.&lt;/p>
&lt;br clear="all">
&lt;figure class="right col-6 col-lg-8">&lt;a href="new-chw-user/app-settings.png">
&lt;img src="new-chw-user/app-settings.png"/> &lt;/a>
&lt;/figure>
&lt;p>Go to the &lt;strong>hamburger menu&lt;/strong> and select &lt;strong>App Settings&lt;/strong>.&lt;/p>
&lt;br clear="all">
&lt;figure class="right col-6 col-lg-8">&lt;a href="new-chw-user/add-user.png">
&lt;img src="new-chw-user/add-user.png"/> &lt;/a>
&lt;/figure>
&lt;p>When you are on the &lt;strong>App Settings&lt;/strong> page, select &lt;strong>Users&lt;/strong> on the left-hand side and then select &lt;strong>Add User&lt;/strong> on the right-hand side.&lt;/p>
&lt;br clear="all">
&lt;figure class="right col-6 col-lg-8">&lt;a href="new-chw-user/fill-user-details.png">
&lt;img src="new-chw-user/fill-user-details.png"/> &lt;/a>
&lt;/figure>
&lt;p>You should now see an &lt;strong>Add User Form&lt;/strong>. Fill in the user name, then select the role as &lt;strong>CHW&lt;/strong> or &lt;strong>Regional Admin&lt;/strong>. In the &lt;strong>Place&lt;/strong> field, select the name of the CHW Area whose CHW you want to create a user for (you can search by typing the first few letters of the CHW Area name). Once that is done, under the &lt;strong>Associate Contact&lt;/strong> field select the name of the CHW whose user you are creating. Finally, input a password and hit &lt;strong>Submit&lt;/strong>.&lt;/p>
&lt;br clear="all">
&lt;p>Once this is done, you can logout and log into the app using the username and password that you just created.&lt;/p>
&lt;h2 id="frequently-asked-questions">Frequently Asked Questions&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://forum.communityhealthtoolkit.org/t/is-there-any-downside-of-creating-too-many-users/531">Is there any downside of creating too many users?&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://forum.communityhealthtoolkit.org/t/for-offline-users-how-often-does-the-app-try-to-refresh-if-there-is-an-available-internet-connection/503">For offline users, how often does the app try to refresh if there is an available internet connection?&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://forum.communityhealthtoolkit.org/t/can-one-person-belong-to-multiple-places-in-the-same-hierarchy/101">Can one person belong to multiple places in the same hierarchy?&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Apps: Database document hydration</title><link>https://docs.communityhealthtoolkit.org/apps/guides/data/hydration/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/guides/data/hydration/</guid><description>
&lt;p>Documents are connected with each other via their document &lt;code>_id&lt;/code>.
For example:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>a contact document is connected to its parent by storing their &lt;code>_id&lt;/code> in the &lt;code>parent&lt;/code> property&lt;/p>
&lt;/li>
&lt;li>
&lt;p>a report document is connected to its submitter by storing their &lt;code>_id&lt;/code> in the &lt;code>contact&lt;/code> property&lt;/p>
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/core/overview/db-schema/">DB Schema&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>To optimize database storage, documents are &amp;ldquo;minified&amp;rdquo; when stored and are &amp;ldquo;hydrated&amp;rdquo; when they are used by the app.&lt;/p>
&lt;h3 id="minification">Minification&lt;/h3>
&lt;p>Minification means replacing a linked document&amp;rsquo;s content with an object that only contains its uuid. This is done to reduce duplication of data to save storage space on the client and server. Additionally, as we only have one copy of the data is easier to keep the information up to date.&lt;/p>
&lt;p>Unminified object:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;clinic_uuid&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Clinic&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;clinic&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;parent&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;health_center_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Health Center&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;health_center&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;parent&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;district_hospital_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span> &lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;District&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;district_hospital&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;contact&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;contact_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Primary contact&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;phone&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;555 111 222&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;linked_docs&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;tag1&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;sibling_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Sibling clinic&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;clinic&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;tag2&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;supervisor_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;The supervisor&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;person&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>when minified, becomes:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;clinic_uuid&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Clinic&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;clinic&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;parent&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;health_center_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;parent&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;district_hospital_id&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;contact&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;contact_id&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;linked_docs&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;tag1&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;sibling_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;tag2&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;supervisor_id&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The following properties are minified:&lt;/p>
&lt;ol>
&lt;li>&lt;code>parent&lt;/code> and recursively, every ancestor&lt;/li>
&lt;li>&lt;code>contact&lt;/code>&lt;/li>
&lt;li>&lt;code>patient&lt;/code> and &lt;code>place&lt;/code> are removed from reports. The &lt;code>place_id&lt;/code>, &lt;code>place_uuid&lt;/code>, &lt;code>patient_id&lt;/code>, or &lt;code>patient_uuid&lt;/code> fields are available in the document.&lt;/li>
&lt;li>&lt;code>linked_docs&lt;/code> when minifying a contact (&lt;em>as of &lt;code>3.10.0&lt;/code>&lt;/em>)&lt;/li>
&lt;/ol>
&lt;h3 id="hydration">Hydration&lt;/h3>
&lt;p>Hydration represents the inverse process to minification, where a stored id representing a connected document is replaced with the corresponding document&amp;rsquo;s content.&lt;/p>
&lt;p>Minified doc:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;clinic_uuid&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Clinic&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;clinic&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;parent&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;health_center_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;parent&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;district_hospital_id&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;contact&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;contact_id&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;linked_docs&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;tag1&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;sibling_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;tag2&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;supervisor_id&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>when hydrated becomes:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;clinic_uuid&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Clinic&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;clinic&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;parent&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;health_center_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Health Center&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;health_center&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;contact&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;supervisor_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Supervisor&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;person&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;parent&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;parent_id&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;parent&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;district_hospital_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span> &lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;District&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;district_hospital&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;contact&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;manager_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Manager&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;person&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;parent&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;parent_id&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;contact&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;contact_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Primary contact&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;phone&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;555 111 222&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;parent&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;parent_id&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;linked_docs&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;tag1&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;sibling_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Sibling clinic&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;clinic&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;tag2&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;supervisor_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;The supervisor&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;person&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>There are two types of hydration:&lt;/p>
&lt;ul>
&lt;li>&lt;em>shallow&lt;/em> hydration - when the id is replaced with the document&amp;rsquo;s content&lt;/li>
&lt;li>&lt;em>deep&lt;/em> hydration - when the id is replaced with the document&amp;rsquo;s content and, recursively, each ancestor is deeply hydrated&lt;/li>
&lt;/ul>
&lt;h6 id="a-hydrated-contact-has">A hydrated contact has&lt;/h6>
&lt;ul>
&lt;li>deeply hydrated &lt;code>parent&lt;/code> along with every ancestor&lt;/li>
&lt;li>shallowly hydrated primary &lt;code>contact&lt;/code>&lt;/li>
&lt;li>shallowly hydrated &lt;code>linked_docs&lt;/code> (&lt;em>as of 3.10&lt;/em>)&lt;/li>
&lt;/ul>
&lt;h6 id="a-hydrated-report-has">A hydrated report has&lt;/h6>
&lt;ul>
&lt;li>a deeply hydrated submitter &lt;code>contact&lt;/code>&lt;/li>
&lt;li>a deeply hydrated &lt;code>patient&lt;/code>, if the report has a &lt;code>patient_id&lt;/code>/&lt;code>patient_uuid&lt;/code>&lt;/li>
&lt;li>a deeply hydrated &lt;code>place&lt;/code>, if the report has a &lt;code>place_id&lt;/code>&lt;/li>
&lt;/ul></description></item><item><title>Apps: Navigating CHT Apps</title><link>https://docs.communityhealthtoolkit.org/apps/concepts/navigation/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/concepts/navigation/</guid><description>
&lt;h2 id="summary-of-page-tabs">Summary of Page Tabs&lt;/h2>
&lt;p>Page tabs are the primary way to navigate apps built with the Core Framework. The number of tabs is variable depending on the user’s role and place in the hierarchy. For example, non-admin users don’t have Messages. The Reports tab is accessible to CHWs but often located inside the secondary menu drawer.&lt;/p>
&lt;figure class="left col-12 col-lg-7">&lt;a href="tabs.gif">
&lt;img src="tabs.gif"/> &lt;/a>
&lt;/figure>
&lt;p>&lt;br>&lt;br>&lt;br>&lt;br>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Messages​&lt;/strong>: A place for community-based staff to send and exchange messages&lt;/li>
&lt;li>&lt;strong>Tasks​&lt;/strong>: This is a list of upcoming visits, follow-ups, or other required tasks&lt;/li>
&lt;li>&lt;strong>Reports​&lt;/strong>: A detailed history of all forms submitted by CHWs and other staff&lt;/li>
&lt;li>&lt;strong>People​&lt;/strong>: This is where profiles of districts, staff, CHWs and patients live&lt;/li>
&lt;li>&lt;strong>Targets&lt;/strong>: Displays real-time visualizations of key activity and impact indicators&lt;/li>
&lt;/ul>
&lt;h2 id="the-menu-drawer">The Menu Drawer&lt;/h2>
&lt;figure class="right col-6 col-lg-4">&lt;a href="menu.png">
&lt;img src="menu.png"/> &lt;/a>
&lt;/figure>
&lt;p>Tap the menu icon in the upper right corner of the header to access other pages, edit personal settings, view sync status and more.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Admin Console&lt;/strong>: Change advanced app settings (only admin users will see this)&lt;/li>
&lt;li>&lt;strong>Guided Tour&lt;/strong>: Review new features and important tips&lt;/li>
&lt;li>&lt;strong>About&lt;/strong>: View your app version and other detailed database information&lt;/li>
&lt;li>&lt;strong>User Settings&lt;/strong>: Update basic user information like email, phone number, and password&lt;/li>
&lt;li>&lt;strong>Report Bug&lt;/strong>: Let us know if something isn’t working or you encounter errors&lt;/li>
&lt;li>&lt;strong>Log Out&lt;/strong>: Sign out of the app&lt;/li>
&lt;/ul>
&lt;h3 id="sync-status">Sync Status&lt;/h3>
&lt;figure class="right col-6 col-lg-4">&lt;a href="sync-status.png">
&lt;img src="sync-status.png"/> &lt;/a>
&lt;/figure>
&lt;p>Data synchronisation is important for &lt;a href="https://docs.communityhealthtoolkit.org/apps/concepts/users/">offline users&lt;/a>. These users keep a copy of the data they have access to on their device. They can work from their device while disconnected from the internet (offline), by reading from and writing to their copy of the data. &amp;ldquo;Sync&amp;rdquo; (synchronisation) is when data on the device is made to match the data on the server. Synchronisation consists of uploading all new or altered data from the device to the server, and downloading new or altered data from the server to the device. This latter step may include the download of software updates to the CHT core or CHT app when available.&lt;/p>
&lt;p>At the bottom of the menu is a notification which provides important information about data synchronisation.&lt;/p>
&lt;p>If the sync status is green and says “All reports synced,” this means you have successfully uploaded the most recent data on your device to the server. It also means that you downloaded the latest data from the server as of the time displayed. Note that there could be more recent data changes on the server, and it doesn&amp;rsquo;t guarantee you are up to date.&lt;/p>
&lt;p>If the indicator is red, it means you have data changes waiting to be uploaded to the server. You should check your internet and data connection to ensure a successful sync.&lt;/p>
&lt;aside class="right col-6 col-lg-4">
&lt;figure>&lt;a href="sync-inprogress.jpg">
&lt;img src="sync-inprogress.jpg"/> &lt;/a>
&lt;/figure>
&lt;figure>&lt;a href="sync-failure.jpg">
&lt;img src="sync-failure.jpg"/> &lt;/a>
&lt;/figure>
&lt;figure>&lt;a href="sync-successful.jpg">
&lt;img src="sync-successful.jpg"/> &lt;/a>
&lt;/figure>
&lt;/aside>
&lt;p>Triggering a manual sync by clicking the &amp;ldquo;Sync now&amp;rdquo; button will provide feedback at every step of the process through a snackbar appearing on the bottom side of the screen.&lt;br>
It will also allow to retry the sync process in case of failure.&lt;/p></description></item><item><title>Apps: OpenMRS</title><link>https://docs.communityhealthtoolkit.org/apps/features/integrations/openmrs/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/features/integrations/openmrs/</guid><description>
&lt;p>&lt;a href="https://openmrs.org">OpenMRS&lt;/a> is an open source electronic medical record system used in dozens of countries. Integrating CHT apps with OpenMRS can open up opportunities to improve health outcomes for patients by promoting better coordination of care. For example, referrals by CHWs in the community can be sent electronically to health facilities using OpenMRS so that nurses and clinicians can prepare for their visit and have full access to the assessment done by a CHW.&lt;/p>
&lt;p>Integrating CHT apps with OpenMRS can be achieved by following the CHT&amp;rsquo;s &lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/integrations/openmrs/">OpenMRS integration guide&lt;/a>, which leverages the &lt;a href="https://rest.openmrs.org">OpenMRS REST API&lt;/a>.&lt;/p></description></item><item><title>Apps: resources/</title><link>https://docs.communityhealthtoolkit.org/apps/reference/resources/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/reference/resources/</guid><description>
&lt;h2 id="icons">Icons&lt;/h2>
&lt;p>Apps can be customized by defining the icons to use for tasks, targets, and contacts.&lt;/p>
&lt;p>Add icons to the &lt;code>resources&lt;/code> folder, and include them by name in the &lt;code>resources.json&lt;/code> file as the following example:&lt;/p>
&lt;pre>&lt;code> {
&amp;quot;icon-risk&amp;quot;: &amp;quot;icon-healthcare-warning@2x.png&amp;quot;,
&amp;quot;icon-treatment&amp;quot;: &amp;quot;icon-healthcare-medicine@2x.png&amp;quot;,
&amp;quot;medic-clinic&amp;quot;: &amp;quot;medic-family.svg&amp;quot;,
&amp;quot;medic-district-hospital&amp;quot;: &amp;quot;medic-family.svg&amp;quot;,
&amp;quot;medic-health-center&amp;quot;: &amp;quot;medic-chw-area.svg&amp;quot;,
&amp;quot;medic-person&amp;quot;: &amp;quot;medic-person.svg&amp;quot;
}
&lt;/code>&lt;/pre>
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/design/icons/">Icon Library&lt;/a>&lt;/p>
&lt;p>The folder and files structure would look like this:&lt;/p>
&lt;pre>&lt;code>./
resources.json
/resources
icon-healthcare-warning@2x.png
icon-healthcare-medicine@2x.png
medic-family.svg
medic-family.svg
medic-chw-area.svg
medic-person.svg
&lt;/code>&lt;/pre>&lt;p>Finally run the command: &lt;code>cht --local upload-resources&lt;/code>&lt;/p>
&lt;h2 id="branding">Branding&lt;/h2>
&lt;p>The site title, favicon, and header logo are configurable. The location to change these are in the Admin console on the images page under the branding tab.&lt;/p>
&lt;p>Another way to configure these options is by using the &lt;code>cht-conf&lt;/code>, add the favicon and the header logo in the &lt;code>branding&lt;/code> folder, then include the options in the &lt;code>branding.json&lt;/code> as the following example:&lt;/p>
&lt;pre>&lt;code> {
&amp;quot;title&amp;quot;: &amp;quot;My Clinic&amp;quot;,
&amp;quot;resources&amp;quot;: {
&amp;quot;logo&amp;quot;: &amp;quot;logo.png&amp;quot;,
&amp;quot;favicon&amp;quot;: &amp;quot;favicon.ico&amp;quot;
}
}
&lt;/code>&lt;/pre>&lt;p>The folder and files structure would look like this:&lt;/p>
&lt;pre>&lt;code>./
branding.json
/branding
logo.png
favicon.ico
&lt;/code>&lt;/pre>&lt;p>Finally run the command: &lt;code>cht --local upload-branding&lt;/code>&lt;/p>
&lt;h2 id="partner-logos">Partner logos&lt;/h2>
&lt;p>Adding your partner logos can be done in the Admin console on the images page under the Partners tab. This will add partner logos on the about page.&lt;/p>
&lt;p>Another way is by using the &lt;code>cht-conf&lt;/code>, add the partners logo in the &lt;code>partners&lt;/code> folder, then include them in the &lt;code>partners.json&lt;/code> as the following example:&lt;/p>
&lt;pre>&lt;code> {
&amp;quot;resources&amp;quot;: {
&amp;quot;partnerA&amp;quot;: &amp;quot;parnerA.png&amp;quot;,
&amp;quot;partnerB&amp;quot;: &amp;quot;parnerB.png&amp;quot;
}
}
&lt;/code>&lt;/pre>&lt;p>The folder and files structure would look like this:&lt;/p>
&lt;pre>&lt;code>./
partners.json
/partners
parnerA.png
parnerB.png
&lt;/code>&lt;/pre>&lt;p>Finally run the command: &lt;code>cht --local upload-partners&lt;/code>&lt;/p></description></item><item><title>Apps: translations/</title><link>https://docs.communityhealthtoolkit.org/apps/reference/translations/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/reference/translations/</guid><description>
&lt;p>Given that CHT apps are used around the world, the Core Framework was designed with localization in mind. The Core Framework itself is available in English, French, Hindi, Nepali, Spanish, Swahili, and Indonesian. In the &lt;code>app_settings.json&lt;/code> file the default language for the application is set, along with a separate default language for outgoing messages that are sent via SMS.&lt;/p>
&lt;div class="alert alert-info" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
Please open &lt;a href="https://github.com/medic/cht-core/issues/new">an issue&lt;/a> if you are interested in translating the app into a different language, as we can work together to make that language available to the community.
&lt;/div>
&lt;h2 id="translations">Translations&lt;/h2>
&lt;p>To modify some labels in the app add the key and modified label in a custom translations file in the &lt;code>translations&lt;/code> folder. All the properties files use the format &lt;code>messages-{language-code}.properties&lt;/code>, where the language code is the same 2-letter code used to identify the language in the application. For instance, for English, we would have a &lt;code>translations/messages-en.properties&lt;/code> file.&lt;/p>
&lt;p>New elements in CHT apps, such as tasks, targets, profiles, and forms should be localized as well. These labels should be included in the same custom translations properties file. If a translation is missing for the user&amp;rsquo;s language it will use that of the default language.&lt;/p>
&lt;p>Here is an example, including both a modified label, and a new one:&lt;/p>
&lt;h3 id="translationsmessages-language-codeproperties">&lt;code>translations/messages-{language-code}.properties&lt;/code>&lt;/h3>
&lt;pre>&lt;code> [Application Text]
contact.type.district_hospital = Community
targets.assessments.title = Assessments Completed
&lt;/code>&lt;/pre>&lt;h2 id="forms">Forms&lt;/h2>
&lt;p>Translations for XForms are defined within the forms themselves. The XLSForm notation is &lt;a href="http://xlsform.org/en/#multiple-language-support">documented here&lt;/a>, and would use the corresponding 2-character language codes.&lt;/p>
&lt;h2 id="build">Build&lt;/h2>
&lt;p>Custom translations from the properties files are added to the app with the &lt;code>upload-custom-translations&lt;/code> action.&lt;/p>
&lt;p>&lt;code>cht --local upload-custom-translations&lt;/code>&lt;/p>
&lt;p>Updated translations from forms need to be added with the actions to upload forms.&lt;/p>
&lt;p>&lt;code>cht --local upload-contact-forms upload-app-forms&lt;/code>&lt;/p></description></item><item><title>Apps: Contact and User Management - Part 2</title><link>https://docs.communityhealthtoolkit.org/apps/tutorials/contact-and-users-2/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/tutorials/contact-and-users-2/</guid><description>
&lt;div class="pageinfo pageinfo-primary">
&lt;p>In this tutorial you will learn how to create and edit contacts and their associated users in the CHT application using cht-conf. If you haven&amp;rsquo;t already, have a look at &lt;a href="https://docs.communityhealthtoolkit.org/apps/tutorials/contact-and-users-1/">part 1&lt;/a> of this tutorial for a useful overview of key concepts.&lt;/p>
&lt;/div>
&lt;h2 id="brief-overview-of-key-concepts">Brief Overview of Key Concepts&lt;/h2>
&lt;p>&lt;a href="https://github.com/medic/cht-conf">&lt;em>cht-conf&lt;/em>&lt;/a> is a command-line interface tool to manage and configure your apps built using the Core Framework of the Community Health Toolkit.&lt;/p>
&lt;p>See more &lt;a href="https://docs.communityhealthtoolkit.org/apps/tutorials/contact-and-users-1/#brief-overview-of-key-concepts">key concepts&lt;/a> in part 1 of this tutorial.&lt;/p>
&lt;h2 id="required-resources">Required Resources&lt;/h2>
&lt;p>You should have a functioning CHT instance and have cht-conf installed locally. Read &lt;a href="https://docs.communityhealthtoolkit.org/apps/tutorials/local-setup/">How to set up a CHT local configuration environment&lt;/a>&lt;/p>
&lt;h2 id="implementation-steps">Implementation Steps&lt;/h2>
&lt;p>In these steps you are going to create a Health Facility, CHW Areas, primary contacts for the CHW Areas, and their associated users.&lt;/p>
&lt;h3 id="1-create-health-facilities-using-cht-confs-csv-to-docs-and-upload-docs-features">1. Create Health Facilities (using cht-conf&amp;rsquo;s csv-to-docs and upload-docs features)&lt;/h3>
&lt;p>To create contacts and their associated users with cht-conf, you will need to create a CSV file with the information of the contacts and the users that you would like to create. The name of the file determines the type of doc created for rows contained in the file.&lt;/p>
&lt;p>For example, file named &lt;code>place.district_hospital.csv&lt;/code> adds the property &lt;code>&amp;quot;type&amp;quot;:&amp;quot;district_hospital&amp;quot;&lt;/code> and a file named &lt;code>person.clinic.csv&lt;/code> add the property &lt;code>&amp;quot;type&amp;quot;:&amp;quot;person&amp;quot;&lt;/code>&lt;/p>
&lt;p>Create a CSV file named &lt;code>place.district_hospital.csv&lt;/code> and add the details of the Health Facilities you would like to create.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>name&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Nairobi South Facility&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Nairobi West Facility&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Nairobi East Facility&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Save this file to a folder name &lt;code>csv&lt;/code> in your project&amp;rsquo;s base directory.&lt;/p>
&lt;p>Open terminal or command line. &lt;code>cd&lt;/code> to your project&amp;rsquo;s base directory and then run the command&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-zsh" data-lang="zsh">cht csv-to-docs
&lt;/code>&lt;/pre>&lt;/div>&lt;p>This will convert rows of the CSV files from the &lt;code>csv&lt;/code> folder to JSON docs that are stored in a &lt;code>json-docs&lt;/code> folder.&lt;/p>
&lt;p>To upload the JSON docs to your local test instance, run the command&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-zsh" data-lang="zsh">cht --url&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>https://&amp;lt;username&amp;gt;:&amp;lt;password&amp;gt;@localhost --accept-self-signed-certs upload-docs
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Be sure to replace the values &lt;code>&amp;lt;username&amp;gt;&lt;/code> and &lt;code>&amp;lt;password&amp;gt;&lt;/code> with the actual username and password of your test instance.&lt;/p>
&lt;br clear="all">
&lt;hr>
&lt;h3 id="2-create-chw-areas-chw-contacts-and-users-using-cht-confs-create-users-feature">2. Create CHW Areas, CHW Contacts and Users (using cht-conf&amp;rsquo;s create-users feature)&lt;/h3>
&lt;p>Next you are going to create CHW Areas for the Health Facilities you created in the step above along with the CHW contacts and users for these CHW Areas.&lt;/p>
&lt;p>Create a CSV file named &lt;code>users.csv&lt;/code> and add the details of the Users, CHW contacts, and CHW Areas you would like to create. Save this file in the base project directory.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>username&lt;/th>
&lt;th>password&lt;/th>
&lt;th>roles&lt;/th>
&lt;th>fullname&lt;/th>
&lt;th>phone&lt;/th>
&lt;th>contact.name&lt;/th>
&lt;th>contact.phone&lt;/th>
&lt;th>contact.sex&lt;/th>
&lt;th>contact.age&lt;/th>
&lt;th>place.type&lt;/th>
&lt;th>place.name&lt;/th>
&lt;th>place.parent&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>mmutiso&lt;/td>
&lt;td>q3Z5-vH5&lt;/td>
&lt;td>district_admin&lt;/td>
&lt;td>Mary Mutiso&lt;/td>
&lt;td>0712345678&lt;/td>
&lt;td>Mary Mutiso&lt;/td>
&lt;td>0712345678&lt;/td>
&lt;td>Female&lt;/td>
&lt;td>36&lt;/td>
&lt;td>health_center&lt;/td>
&lt;td>Mary Mutiso&amp;rsquo;s Area&lt;/td>
&lt;td>&lt;code>&amp;lt;facility uuid&amp;gt;&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;br clear="all">
&lt;figure class="right col-6 col-lg-8">&lt;a href="facility-uuid.png">
&lt;img src="facility-uuid.png"/> &lt;/a>
&lt;/figure>
&lt;p>The value &lt;code>place.parent&lt;/code> is the uuid of the Facility to which the CHW Area belongs to. You can get this value by selecting the Health Facility in the webapp and copying the last portion of the url.&lt;/p>
&lt;br clear="all">
&lt;p>Run the command&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-zsh" data-lang="zsh">cht --url&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>https://&amp;lt;username&amp;gt;:&amp;lt;password&amp;gt;@localhost --accept-self-signed-certs create-users
&lt;/code>&lt;/pre>&lt;/div>&lt;p>This will create the CHW Area, the CHW contact, and the user that the CHW will use to log into the application.&lt;/p>
&lt;h2 id="frequently-asked-questions">Frequently Asked Questions&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://forum.communityhealthtoolkit.org/t/can-one-person-belong-to-multiple-places-in-the-same-hierarchy/101">Can one person belong to multiple places in the same hierarchy?&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Apps: Forms</title><link>https://docs.communityhealthtoolkit.org/apps/concepts/forms/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/concepts/forms/</guid><description>
&lt;p>Forms are a building block of all CHT apps. They are used when creating or editing contacts, and when completing a care guide or survey within the app. Forms are also used to interpret SMS interactions with the CHT.&lt;/p>
&lt;p>When a completed form is submitted, it is treated as a Report in the app. All reports can be viewed in the &lt;a href="https://docs.communityhealthtoolkit.org/apps/features/reports/">Reports tab&lt;/a> by those with the proper access within the &lt;a href="https://docs.communityhealthtoolkit.org/apps/concepts/hierarchy/">hierarchy&lt;/a>.&lt;/p>
&lt;p>There are four different types of forms:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/forms/contact/">&lt;strong>Contact Forms&lt;/strong>&lt;/a>: used to create and edit contacts. Defined as CHT-enhanced XForms.&lt;/li>
&lt;li>&lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/forms/app/">&lt;strong>App Forms&lt;/strong>&lt;/a>: serve as actions within the app, such as a task or an action. Defined as CHT-enhanced XForms.&lt;/li>
&lt;li>&lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/forms/collect/">&lt;strong>Collect Forms&lt;/strong>&lt;/a>: used to render forms in Medic Collect. Defined as ODK XForms and need a corresponding JSON form to receive data in CHT.&lt;/li>
&lt;li>&lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/forms/">&lt;strong>JSON Forms&lt;/strong>&lt;/a>: used for data coming from external channels such as SMS, or via interoperability with other tools. Defined according to a JavaScript Object Notation schema.&lt;/li>
&lt;/ul>
&lt;p>Forms that can be completed in the app are built using a CHT-enhanced version of &lt;a href="https://opendatakit.github.io/xforms-spec/">ODK XForms&lt;/a> notation &amp;ndash; a XML definition of the structure and format for a set of questions. Since writing raw XML can be tedious, the &lt;a href="http://xlsform.org/">XLSForm standard&lt;/a> is commonly used to define forms. The &lt;a href="https://github.com/medic/cht-conf">cht-conf&lt;/a> command line tool can be used to convert to the XForm format and include the form in a CHT application. The instructions on this site assume some knowledge of XLSForm.&lt;/p></description></item><item><title>Apps: OppiaMobile</title><link>https://docs.communityhealthtoolkit.org/apps/features/integrations/oppia/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/features/integrations/oppia/</guid><description>
&lt;p>&lt;a href="https://digital-campus.org/oppiamobile">OppiaMobile&lt;/a> is an open source mobile learning platform built by Digital Campus specially designed for delivering learning content, multimedia, and quizzes in low connectivity settings. All the content and activities can be accessed and used when no internet connection is available, and users can earn points and badges for completing activities and watching videos. To learn more about the platform, check out the &lt;a href="https://digital-campus.org/oppiamobile/developers">overview&lt;/a>, OppiaMobile on &lt;a href="https://github.com/DigitalCampus">Github&lt;/a>, and their &lt;a href="http://oppiamobile.readthedocs.io/en/latest">documentation site&lt;/a>. You can also join the OppiaMobile &lt;a href="https://community.oppia-mobile.org">Community Discussion Board&lt;/a>.&lt;/p>
&lt;h2 id="overview">Overview&lt;/h2>
&lt;p>This documentation describes how the CHT and OppiaMobile can integrate to provide a learning and care experience for community health workers and other health care providers. It demonstrates how both apps link to one another to provide a seamless user experience, describes features of both applications, and the required configuration adjustments.&lt;/p>
&lt;p>We provide a detailed example of the CHT&amp;lt;&amp;gt;OppiaMobile integration, including how to access the learning material, an overview of the functionalities within educational modules, and post-course assessment and supervisor support.&lt;/p>
&lt;h2 id="features">Features&lt;/h2>
&lt;p>This integration leverages the &lt;strong>remote onboarding, task &amp;amp; scheduling, and target features&lt;/strong> of the CHT core framework with the &lt;strong>curated, multimedia educational content&lt;/strong> available via OppiaMobile’s learning platform.&lt;/p>
&lt;p>The CHT Core Framework &amp;amp; OppiaMobile integration currently supports the following capabilities and features:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://docs.communityhealthtoolkit.org/apps/features/tasks/">Task management&lt;/a> for notifications on new educational modules and software updates&lt;/li>
&lt;li>&lt;a href="https://docs.communityhealthtoolkit.org/apps/examples/training/">Remote onboarding&lt;/a> to new apps, software features, and workflows when they are updated, without relying on face-to-face training&lt;/li>
&lt;li>Optimized multimedia content with links to educational modules powered by OppiaMobile&lt;/li>
&lt;li>Message and feedback options, to contact supervisors with questions and seek support&lt;/li>
&lt;li>&lt;a href="https://docs.communityhealthtoolkit.org/apps/features/targets/#supervisor-view">Supervisor visibility&lt;/a> into CHW progress for onboarding, learning, and care&lt;/li>
&lt;li>Hosting options for government-led, government-owned platforms&lt;/li>
&lt;/ul></description></item><item><title>Apps: RapidPro</title><link>https://docs.communityhealthtoolkit.org/apps/features/integrations/rapidpro/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/features/integrations/rapidpro/</guid><description>
&lt;p>&lt;a href="https://rapidpro.io/">RapidPro&lt;/a> is a software product that allows you to visually build logic to support interactive messaging flows. The flows support a variety of technologies such as: SMS, USSD, IVR, Telegram, Facebook Messenger, and WhatsApp. RapidPro is open source and provides an &lt;a href="https://community.rapidpro.io/rapidpros-api/">API&lt;/a> to integrate with other applications. To learn more about the platform, check out RapidPro on &lt;a href="https://rapidpro.github.io/rapidpro/">GitHub&lt;/a>, their &lt;a href="https://community.rapidpro.io/">Community&lt;/a> website, or join their Google &lt;a href="https://groups.google.com/g/rapidpro">Group&lt;/a>.&lt;/p>
&lt;h2 id="overview">Overview&lt;/h2>
&lt;p>CHT-based &lt;a href="https://docs.communityhealthtoolkit.org/apps/concepts/workflows/#sms-messaging">SMS workflows&lt;/a> can be configured to support registering of new patients or pregnancies, recording outcomes of visits, confirmation via auto-responses, and scheduling reminders. Some projects are designed entirely around SMS workflows. The CHT also supports person to person SMS &lt;a href="https://docs.communityhealthtoolkit.org/apps/features/messaging/">messaging&lt;/a> from the Messages tab.&lt;/p>
&lt;p>For more complex messaging workflows or to utilize other messaging platforms, you can design workflows that leverage the functionality of RapidPro and the CHT together. This enables semi-automated, direct to patient approaches to health assessments and care coordination at the community level.&lt;/p>
&lt;h2 id="workflows">Workflows&lt;/h2>
&lt;p>Integrated RapidPro/CHT workflows are very flexible and leverage the full functionality of each application; You configure RapidPro directly in RapidPro, and configure the CHT in the CHT and the two systems communicate with each other through APIs and &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/outbound/">Outbound push&lt;/a>. With this architecture, you are not limited to a subset of functionality within either application.&lt;/p>
&lt;p>A simple RapidPro/CHT integration might include triggering an interactive SMS messaging flow in RapidPro whenever a new patient is registered in the CHT and then storing the responses of that messaging flow in the CHT. You could then conditionally trigger a &lt;a href="https://docs.communityhealthtoolkit.org/apps/features/tasks/">Task&lt;/a> for a health worker in the CHT based on the patient responses from the RapidPro flow.&lt;/p>
&lt;p>App builders have built and deployed a number of interactive messaging workflows that integrate RapidPro and the CHT already, see below for a few examples.&lt;/p>
&lt;h3 id="contact-tracing">Contact Tracing&lt;/h3>
&lt;p>The &lt;a href="https://docs.communityhealthtoolkit.org/apps/examples/contact-tracing/#workflow-example">COVID-19 Contact Tracing app&lt;/a> uses RapidPro to send messages to quarantined COVID-19 patients. Messages are sent to the patients daily asking whether or not they developed new symptoms. If so, a health worker will be notified by SMS and receive a CHT task. All responses to the RapidPro workflow are recorded in the CHT and can be queried in analytics.&lt;/p>
&lt;h3 id="remote-training">Remote Training&lt;/h3>
&lt;p>The &lt;a href="https://docs.communityhealthtoolkit.org/apps/examples/training/#remote-training-by-sms">Remote Training by SMS app&lt;/a> uses RapidPro to train health workers on Antenatal Care in the language of their choice. If the health worker answers a training question incorrectly, a task can be created for their supervisor to follow up with them.&lt;/p>
&lt;h3 id="chw-symptom-and-mental-health-checks">CHW Symptom and Mental Health Checks&lt;/h3>
&lt;p>The &lt;a href="https://docs.google.com/document/d/19F6vOCNFKQnSyREiaBnryUmre20s5QZzYe0hWuWn-0k/edit">CHW Symptom and Mental Health Checks app&lt;/a> is used to proactively check in with health workers to screen for COVID-19 symptoms and/or the need for psychosocial counseling.&lt;/p></description></item><item><title>Apps: CHT Application Settings</title><link>https://docs.communityhealthtoolkit.org/apps/tutorials/application-settings/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/tutorials/application-settings/</guid><description>
&lt;div class="pageinfo pageinfo-primary">
&lt;p>This tutorial will take you through how to manage the CHT application settings, including;&lt;/p>
&lt;ul>
&lt;li>Setting user roles and permissions&lt;/li>
&lt;li>Enabling and disabling transitions&lt;/li>
&lt;li>Configuring contact hierarchy and configuring replication.&lt;/li>
&lt;/ul>
&lt;p>App settings allow you to both persist information that is critical to the application outside the code, and to create profiles that store the preferences for project deployments.&lt;/p>
&lt;/div>
&lt;h2 id="brief-overview-of-key-concepts">Brief Overview of Key Concepts&lt;/h2>
&lt;p>The settings which control CHT apps are defined in the &lt;em>&lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/">app_settings.json&lt;/a>&lt;/em> file, and stored in the settings doc in the database.&lt;/p>
&lt;p>&lt;em>&lt;a href="https://docs.communityhealthtoolkit.org/apps/concepts/users/#permissions">Permissions&lt;/a>&lt;/em> are settings that control access to specific app features and functionality.&lt;/p>
&lt;p>&lt;em>&lt;a href="https://docs.communityhealthtoolkit.org/apps/concepts/users/#roles">Roles&lt;/a>&lt;/em> define permissions for users to perform access a group of app features and functionality.&lt;/p>
&lt;p>&lt;em>&lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/performance/replication/">Replication&lt;/a>&lt;/em> is when users download a copy of the data on to their device. &lt;em>Replication depth&lt;/em> refers to the number of levels within a hierarchy a specific user role is able to replicate.&lt;/p>
&lt;p>&lt;em>&lt;a href="https://docs.communityhealthtoolkit.org/core/overview/transitions/">Transitions&lt;/a>&lt;/em> are Javascript code that run when a document is changed. A transition can edit the changed doc or do anything server side code can do for that matter.&lt;/p>
&lt;h2 id="required-resources">Required Resources&lt;/h2>
&lt;p>You should have a functioning CHT instance and have cht-conf installed locally.
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/apps/tutorials/local-setup/">How to set up a CHT local configuration environment&lt;/a>&lt;/p>
&lt;/p>
&lt;h2 id="implementation-steps">Implementation Steps&lt;/h2>
&lt;p>In this section, you will define a new role, set persmissions for the role, set transitions, configure a hierarchy, and upload your modified app settings file to your local environment.&lt;/p>
&lt;h3 id="1-set-roles-and-permissions">1. Set Roles and Permissions&lt;/h3>
&lt;p>To add a new role, edit the object corresponding to &lt;code>&amp;quot;roles&amp;quot;&lt;/code> key in &lt;code>app_settings.json&lt;/code>. Add the new role as a key and within it, have an object with key/value pairs indicating the translation key of the role and whether it is an online or offline role.&lt;/p>
&lt;p>Configure a CHW role by adding the following snippet to the &lt;code>&amp;quot;roles&amp;quot;&lt;/code> object:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json"> &lt;span style="color:#4e9a06">&amp;#34;chw&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;usertype.chw&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;offline&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/user-roles/">Roles&lt;/a>&lt;/p>
&lt;p>Set permissions for the new role by adding the role to the relevant permission in the &lt;code>&amp;quot;permissions&amp;quot;&lt;/code> object.&lt;/p>
&lt;p>For instance, to grant the CHW role permission to create people, add the role to the array with the key &lt;code>&amp;quot;can_create_people&amp;quot;&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json"> &lt;span style="color:#4e9a06">&amp;#34;permissions&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#a40000">...&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;can_create_people&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#4e9a06">&amp;#34;program_officer&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#4e9a06">&amp;#34;chw_supervisor&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#4e9a06">&amp;#34;chw&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#a40000">...&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/user-permissions/">Permissions&lt;/a>&lt;/p>
&lt;h3 id="2-set-transitions">2. Set Transitions&lt;/h3>
&lt;p>To enable or disable a transition, edit the object corresponding to the &lt;code>&amp;quot;transitions&amp;quot;&lt;/code> key in &lt;code>app_settings.json&lt;/code>. Enable the &lt;code>transition&lt;/code> by setting its corresponding value to &lt;code>true&lt;/code>, disable it by settings its value to &lt;code>false&lt;/code>.
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/transitions/">Transitions&lt;/a>&lt;/p>
&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json"> &lt;span style="color:#4e9a06">&amp;#34;transitions&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;accept_patient_reports&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">false&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;conditional_alerts&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">false&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;default_responses&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">false&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;update_sent_by&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">false&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;registration&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">false&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;update_clinics&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">false&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;update_notifications&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">false&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;update_scheduled_reports&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">false&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;update_sent_forms&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">false&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;generate_patient_id_on_people&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;death_reporting&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>In this example, the &lt;code>generate_patient_id_on_people&lt;/code> and &lt;code>death_reporting&lt;/code> transitions are enabled while the rest are disabled.&lt;/p>
&lt;h3 id="3-set-hierarchy">3. Set Hierarchy&lt;/h3>
&lt;p>You can configure hierarchies by editing the object corresponding to the &lt;code>&amp;quot;contact_types&amp;quot;&lt;/code> key in &lt;code>app_settings.json&lt;/code>. The following code sample represents the default hierarchy configuration. You can modify existing contact types by editing the objects within the array.&lt;/p>
&lt;p>When configuring a new deployment, it&amp;rsquo;s important to plan your hierarchy well. While there are no limits in the CHT to the hierarchical depth or breadth it will support, there are some trade-offs and caveats:&lt;/p>
&lt;ul>
&lt;li>While it it possible to &lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/updates/moving-contacts/">update the hierarchy configuration&lt;/a> after launch it can be difficult and potentially disruptive to users. Try and avoid this by planning ahead as best as possible.&lt;/li>
&lt;li>If your hierarchy is too shallow, users will download more docs than are necessary for their work which will impact the performance of the app. Taking the time to get the hierarchy configuration right makes it easy to give users access to only the docs they need.&lt;/li>
&lt;/ul>
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/hierarchy/">Hierarchy&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json"> &lt;span style="color:#4e9a06">&amp;#34;contact_types&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;district_hospital&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;contact.type.district_hospital&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;group_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;contact.type.district_hospital.plural&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;create_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;contact.type.district_hospital.new&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;edit_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;contact.type.place.edit&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;icon&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;medic-district-hospital&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;create_form&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;form:contact:district_hospital:create&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;edit_form&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;form:contact:district_hospital:edit&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;health_center&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;contact.type.health_center&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;group_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;contact.type.health_center.plural&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;create_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;contact.type.health_center.new&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;edit_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;contact.type.place.edit&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;parents&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#4e9a06">&amp;#34;district_hospital&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;icon&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;medic-health-center&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;create_form&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;form:contact:health_center:create&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;edit_form&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;form:contact:health_center:edit&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;clinic&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;contact.type.clinic&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;group_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;contact.type.clinic.plural&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;create_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;contact.type.clinic.new&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;edit_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;contact.type.place.edit&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;parents&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#4e9a06">&amp;#34;health_center&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;icon&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;medic-clinic&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;create_form&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;form:contact:clinic:create&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;edit_form&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;form:contact:clinic:edit&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;count_visits&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;person&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;contact.type.person&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;group_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;contact.type.person.plural&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;create_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;contact.type.person.new&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;edit_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;contact.type.person.edit&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;primary_contact_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;clinic.field.contact&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;parents&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#4e9a06">&amp;#34;district_hospital&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#4e9a06">&amp;#34;health_center&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#4e9a06">&amp;#34;clinic&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;icon&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;medic-person&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;create_form&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;form:contact:person:create&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;edit_form&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;form:contact:person:edit&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;person&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="4-set-replication-depth">4. Set Replication Depth&lt;/h3>
&lt;p>To configure replication depth for a specific role, edit the object corresponding to the &lt;code>&amp;quot;replication_depth&amp;quot;&lt;/code> key in &lt;code>app_settings.json&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;replication_depth&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;role&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;district_manager&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;depth&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> &lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;role&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;national_manager&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;depth&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">2&lt;/span> &lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Configure the CHW role&amp;rsquo;s depth to 2 by adding the following key/value pairs to the array above.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;role&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;chw&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;depth&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">2&lt;/span> &lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/performance/replication/">Replication Depth&lt;/a>&lt;/p>
&lt;h3 id="5-upload-app-settings">5. Upload App Settings&lt;/h3>
&lt;p>To upload app settings to your local instance, run the following command:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-zsh" data-lang="zsh">cht --url&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>https://&amp;lt;username&amp;gt;:&amp;lt;password&amp;gt;@localhost --accept-self-signed-certs upload-app-settings
&lt;/code>&lt;/pre>&lt;/div>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
Be sure to replace the values &lt;code>&amp;lt;username&amp;gt;&lt;/code> and &lt;code>&amp;lt;password&amp;gt;&lt;/code> with the actual username and password of your test instance.
&lt;/div>
&lt;h2 id="frequently-asked-questions">Frequently Asked Questions&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://forum.communityhealthtoolkit.org/t/default-config-do-not-compile/536">Compiling default app settings&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://forum.communityhealthtoolkit.org/t/documentation-for-role-permissions/502">Documentation for role permissions&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://forum.communityhealthtoolkit.org/t/is-it-possible-to-prevent-editing-for-some-forms-but-allow-it-for-others/93">Is it possible to prevent editing for some forms but allow it for others?&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://forum.communityhealthtoolkit.org/t/can-one-person-belong-to-multiple-places-in-the-same-hierarchy/101/2">Can one person belong to multiple places in the same hierarchy?&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://forum.communityhealthtoolkit.org/t/can-we-disable-the-guided-tour-on-first-login-if-yes-how-do-we-do-it/98/2">Can we disable the guided tour on first login?&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Apps: Care Guides</title><link>https://docs.communityhealthtoolkit.org/apps/concepts/care-guides/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/concepts/care-guides/</guid><description>
&lt;h2 id="care-guides">Care Guides&lt;/h2>
&lt;figure class="right col-12 col-lg-6">&lt;a href="care-guides.png">
&lt;img src="care-guides.png"/> &lt;/a>
&lt;/figure>
&lt;p>Forms are used to build “Care Guides” that take health workers through care protocols and provide decision support for their interactions with patients. App designers can use the basic form building functionality in a variety of ways.&lt;/p>
&lt;p>Care Guides also allow CHWs to register new families and people, assess a sick child, and enroll a new pregnancy into an antenatal care schedule. Care Guides can be located in many parts of your app, including the Tasks, People, and Reports tabs.&lt;/p>
&lt;p>Care Guides provided in the CHT&amp;rsquo;s Reference Applications can be configured for your app, or a new Care Guide can be written from scratch. Some configuration is probably necessary due to different local requirements, and government protocols.&lt;/p>
&lt;h3 id="functionality">Functionality&lt;/h3>
&lt;figure class="right col-12 col-lg-4">&lt;a href="functionality.png">
&lt;img src="functionality.png"/> &lt;/a>
&lt;/figure>
&lt;p>Care Guides consists of questions grouped into pages. They are capable of presenting many different types of questions, skip logic, images, and videos. Validation rules can require certain questions to be answered or restrict answers to a specified type or range.&lt;/p>
&lt;p>It’s possible to reference previous information that was submitted about the person or household from within the care guide. The interaction can also conclude with a summary that includes assessment results, treatment recommendations, and referral info.&lt;/p>
&lt;p>Care Guides can include images for instructional purposes and can access a user’s camera to take a photo if needed.&lt;/p>
&lt;h3 id="summary">Summary&lt;/h3>
&lt;figure class="right col-12 col-lg-4">&lt;a href="summary.png">
&lt;img src="summary.png"/> &lt;/a>
&lt;/figure>
&lt;p>After all of the required questions have been answered, a summary page can be displayed.&lt;/p>
&lt;p>Here, health workers can review the information they entered, receive instructions for treatment, care, and referrals, and relay detailed education to the patient.&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
The form is not submitted until the user scrolls to the very end of the summary and clicks the &lt;code>Submit&lt;/code> button.
&lt;/div>
&lt;h3 id="examples">Examples&lt;/h3>
&lt;figure class="right col-12 col-lg-4">&lt;a href="examples.png">
&lt;img src="examples.png"/> &lt;/a>
&lt;/figure>
&lt;ul>
&lt;li>While a health worker is going through the form during the care visit, you can include a family planning question only if the person who the form is about is a woman and not pregnant.&lt;/li>
&lt;li>You can include on-the-spot conversational prompts and advice for the CHW based on how they answer questions in the form. For instance, if a CHW answers “yes” to the question about a woman’s interest in family planning, text can automatically appear to provide information on her options.&lt;/li>
&lt;li>An image showing how to read a rapid test can be displayed within a form, to help health workers to correctly interpret their test results.&lt;/li>
&lt;/ul></description></item><item><title>Apps: .accept_case_reports</title><link>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/accept_case_reports/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/accept_case_reports/</guid><description>
&lt;p>The &lt;code>accept_case_reports&lt;/code> key contains the actions to take when reports about cases are received.&lt;/p>
&lt;h2 id="app_settingsjson-accept_case_reports">&lt;code>app_settings.json .accept_case_reports[]&lt;/code>&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>property&lt;/th>
&lt;th>description&lt;/th>
&lt;th>required&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>form&lt;/code>&lt;/td>
&lt;td>Form ID of the case form.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>silence_type&lt;/code>&lt;/td>
&lt;td>A comma separated list of schedules to mute.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>silence_for&lt;/code>&lt;/td>
&lt;td>Duration from when the report was submitted for which messages should be muted. It is structured as a string with an integer value followed by a space and the time unit. For instance &lt;code>8 weeks&lt;/code> or &lt;code>2 days&lt;/code>. The units available are &lt;code>seconds&lt;/code>, &lt;code>minutes&lt;/code>, &lt;code>hours&lt;/code>, &lt;code>days&lt;/code>, &lt;code>weeks&lt;/code>, &lt;code>months&lt;/code>, &lt;code>years&lt;/code>, and their singular forms as well. When a message is muted all messages belonging to the same group will be muted, even if it falls outside of this time period. See &lt;code>messages[].group&lt;/code> in &lt;em>Schedules&lt;/em> for related info.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>validations&lt;/code>&lt;/td>
&lt;td>A set of validations to perform on incoming reports. Read more information about &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/#validations">configuring validation rules&lt;/a>.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>validations.join_responses&lt;/code>&lt;/td>
&lt;td>A boolean specifying whether validation messages should be combined into one message.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>validations.list[]&lt;/code>&lt;/td>
&lt;td>An array of validation rules a report should pass to be considered valid.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>validations.list[].property&lt;/code>&lt;/td>
&lt;td>Report field for which this validation rule will be applied.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>validations.list[].rule&lt;/code>&lt;/td>
&lt;td>Validation condition to be applied to the property field.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>validations.list[].translation_key&lt;/code>&lt;/td>
&lt;td>Translation key for the message reply to be sent if a report fails this rule.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messages&lt;/code>&lt;/td>
&lt;td>An array of automated responses to incoming reports.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messages[].translation_key&lt;/code>&lt;/td>
&lt;td>Translation key for the message text associated with this event&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messages[].event_type&lt;/code>&lt;/td>
&lt;td>An event that will trigger sending of this message. Typical values are: &lt;code>report_accepted&lt;/code> when the report has been successfully validated, &lt;code>registration_not_found&lt;/code> when the case ID supplied in the report doesn&amp;rsquo;t match any case ID issued by Medic. Read the &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/transitions/#muting">documentation on muting&lt;/a>.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messages[].recipient&lt;/code>&lt;/td>
&lt;td>Who the message should be sent to. Use &lt;code>reporting_unit&lt;/code> for the sender of the report, &lt;code>clinic&lt;/code> for clinic contact, and &lt;code>parent&lt;/code> for the parent contact.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="code-sample">Code sample&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#4e9a06">&amp;#34;accept_case_reports&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;form&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;SIGNOFF&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;validations&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;messages&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;event_type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;report_accepted&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;bool_expr&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;some expression&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;message&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;some message&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;recipient&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;some recipients&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}]&lt;/span>
&lt;span style="color:#000;font-weight:bold">}]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Apps: .contact_types</title><link>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/hierarchy/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/hierarchy/</guid><description>
&lt;p>From 3.7.0 it is possible to configure what types of places and people are available by modifying the &lt;code>contact_types&lt;/code> array in the app settings. Each type has the following properties.&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
Prior to version 3.7.0, CHT Core supported 4 contact types - 3 place types (&lt;code>clinic&lt;/code>, &lt;code>health_center&lt;/code>, &lt;code>district_hospital&lt;/code>) and one person type (&lt;code>person&lt;/code>).
&lt;/div>
&lt;h3 id="app_settingsjson-contact_types">&lt;code>app_settings.json .contact_types[]&lt;/code>&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Property&lt;/th>
&lt;th>Description&lt;/th>
&lt;th>Required&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>id&lt;/code>&lt;/td>
&lt;td>String identifier for the type. At times this will be used to sort the contacts in the UI so it is recommended to using a number prefix with gaps between numbers, eg: &lt;code>10-district&lt;/code>, &lt;code>20-region&lt;/code>, etc.&lt;/td>
&lt;td>Yes.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>name_key&lt;/code>&lt;/td>
&lt;td>The translation key used for the title for the contact profile.&lt;/td>
&lt;td>No, defaults to &amp;lsquo;contact.profile&amp;rsquo;.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>group_key&lt;/code>&lt;/td>
&lt;td>The translation key used for the title of a list of contacts of this type.&lt;/td>
&lt;td>Yes.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>create_key&lt;/code>&lt;/td>
&lt;td>The translation key used on the button for creating new contacts of this type.&lt;/td>
&lt;td>Yes.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>edit_key&lt;/code>&lt;/td>
&lt;td>The translation key used on the button for editing contacts of this type.&lt;/td>
&lt;td>Yes.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>primary_contact_key&lt;/code>&lt;/td>
&lt;td>The translation key used to identify a person as the primary contact of contacts of this type.&lt;/td>
&lt;td>No, defaults to &amp;lsquo;Primary contact&amp;rsquo;.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>parents&lt;/code>&lt;/td>
&lt;td>An array of strings of IDs of parent types. If more than one then this type can appear in different places in the hierarchy. If more than one type lists the same type as a parent then a user will get a dropdown of places to create. If no parents then contacts of this type will be at the top of the hierarchy and cannot be added as a child of any contact.&lt;/td>
&lt;td>No, defaults to no parents.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>icon&lt;/code>&lt;/td>
&lt;td>The string ID for the icon to show beside contacts of this type.&lt;/td>
&lt;td>Yes.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>create_form&lt;/code>&lt;/td>
&lt;td>The string ID for the xform used to create contacts of this type.&lt;/td>
&lt;td>Yes.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>edit_form&lt;/code>&lt;/td>
&lt;td>The string ID for the xform used to edit contacts of this type.&lt;/td>
&lt;td>No, defaults to the create_form.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>count_visits&lt;/code>&lt;/td>
&lt;td>Whether or not to show a count of visits for contacts of this type. Requires UHC to be enabled.&lt;/td>
&lt;td>No, defaults to &lt;code>false&lt;/code>.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>sort_by_dob&lt;/code>&lt;/td>
&lt;td>Whether or not to sort contacts by date of birth in the contact detail page. By default, contacts are sorted alphabetically.&lt;/td>
&lt;td>No, defaults to &lt;code>false&lt;/code>.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>person&lt;/code>&lt;/td>
&lt;td>Whether this is a person type or a place type.&lt;/td>
&lt;td>No, defaults to &lt;code>false&lt;/code>.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="forms">Forms&lt;/h3>
&lt;p>When creating contacts the type will be automatically assigned based on the button the user clicked. However if the form also creates sibling or child contacts these nested sections must specify a &lt;code>type&lt;/code> field with a hardcoded value of &amp;ldquo;contact&amp;rdquo; and a &lt;code>contact_type&lt;/code> field with the ID of the desired contact type.&lt;/p>
&lt;h3 id="changing-the-configuration">Changing the configuration&lt;/h3>
&lt;p>You can change any contact type configuration easily except for the IDs. To change the ID of a contact type in configuration of a project which already has contact data the contact docs will also have be updated to have a &lt;code>type&lt;/code> of &amp;ldquo;contact&amp;rdquo; and a &lt;code>contact_type&lt;/code> with the new ID of the contact type.&lt;/p>
&lt;h3 id="migration">Migration&lt;/h3>
&lt;p>If you already have person and place documents, switching from using the fixed hierarchy requires that you also update all the exisitng docs. Each contact and report holds the IDs of ancestors in their hierarchy so they will all need to be updated to be consistent with the changes you&amp;rsquo;ve made. You can use the cht-conf &lt;code>move-contacts&lt;/code> command to help with this migration.&lt;/p></description></item><item><title>Apps: .dhis_data_sets</title><link>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/dhis2/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/dhis2/</guid><description>
&lt;p>From 3.9.0 it is possible to integrate with DHIS2 by modifying the &lt;code>dhis_data_sets&lt;/code> property in &lt;code>app_settings.json&lt;/code>.&lt;/p>
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/apps/features/integrations/dhis2/">DHIS2 Integration&lt;/a>&lt;/p>
&lt;h2 id="app_settingsjs-dhis_data_sets">&lt;code>app_settings.js .dhis_data_sets[]&lt;/code>&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Property&lt;/th>
&lt;th>Type&lt;/th>
&lt;th>Description&lt;/th>
&lt;th>Required&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>id&lt;/td>
&lt;td>&lt;code>string&lt;/code>&lt;/td>
&lt;td>The data set id from DHIS2 with which to integrate&lt;/td>
&lt;td>Yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>translation_key&lt;/td>
&lt;td>&lt;code>string&lt;/code>&lt;/td>
&lt;td>The translation key of the DHIS2 data set name to be displayed&lt;/td>
&lt;td>Yes&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="code-samples">Code samples&lt;/h2>
&lt;p>Configure the &lt;code>id&lt;/code> and &lt;code>translation_key&lt;/code> of the DHIS2 data set. The &lt;code>id&lt;/code> corresponds to the &lt;code>id&lt;/code> of the data set in the DHIS2 instance you want to integrate with. The &lt;code>translation_key&lt;/code> corresponds to the name of the DHIS2 data set as it appears in the dropdown in the App Management app.&lt;/p>
&lt;h3 id="app_settingsjs">&lt;code>app_settings.js&lt;/code>&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#4e9a06">&amp;#34;dhis_data_sets&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;VMuFODsyWaO&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;dhis.dataset.moh515&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>&lt;span style="color:#a40000">,&lt;/span>
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Apps: .forms</title><link>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/forms/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/forms/</guid><description>
&lt;p>JSON forms are defined in either the &lt;code>base_settings.json&lt;/code> or the &lt;code>app_settings/forms.json&lt;/code> file and compiled in to the &lt;code>app_settings.json&lt;/code> file with the &lt;code>compile-app-settings&lt;/code> action in the &lt;code>cht-conf&lt;/code> tool. JSON Forms are used for parsing reports from formatted SMS, SIM applications, and Medic Collect. JSON form definitions are also used for interoperability with third-party systems. Each form is defined as an JSON form object according to the following schema. The key for each object must be unique and all characters must be uppercase.&lt;/p>
&lt;h2 id="app_settingsjson-forms">&lt;code>app_settings.json .forms{}&lt;/code>&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>property&lt;/th>
&lt;th>type&lt;/th>
&lt;th>description&lt;/th>
&lt;th>required&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>meta&lt;/code>&lt;/td>
&lt;td>object&lt;/td>
&lt;td>Information about the report.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>meta.code&lt;/code>&lt;/td>
&lt;td>string&lt;/td>
&lt;td>The unique form identifier, which will be sent with all reports of this form. Must be the same as the form&amp;rsquo;s key.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>meta.icon&lt;/code>&lt;/td>
&lt;td>string&lt;/td>
&lt;td>Name of the icon resource shown in the app.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>meta.translation_key&lt;/code>&lt;/td>
&lt;td>string&lt;/td>
&lt;td>Name of the form shown in the app.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>meta.subject_key&lt;/code>&lt;/td>
&lt;td>string&lt;/td>
&lt;td>A translation key to display in the report list instead of the subject name (default). The translation is provided with a summary of the report which can be used for evaluation, eg: &lt;code>Case registration {{case_id}}&lt;/code>. Useful properties available in the summary include: &lt;code>from&lt;/code> (the phone number of the sender), &lt;code>phone&lt;/code> (the phone number of the report contact), &lt;code>form&lt;/code> (the form code), &lt;code>subject.name&lt;/code> (the name of the subject), and &lt;code>case_id&lt;/code> (the generated case id). Added in 3.9.0&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>fields&lt;/code>&lt;/td>
&lt;td>object&lt;/td>
&lt;td>Collection of field objects included in the form.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>fields.${field}&lt;/code>&lt;/td>
&lt;td>object&lt;/td>
&lt;td>Field that is part of the form.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>fields.${field}.type&lt;/code>&lt;/td>
&lt;td>string&lt;/td>
&lt;td>Data type of field:&lt;br> - &lt;code>&amp;quot;integer&amp;quot;&lt;/code>: a whole number&lt;br> - &lt;code>&amp;quot;string&amp;quot;&lt;/code>: any collection of characters&lt;br> - &lt;code>&amp;quot;date&amp;quot;&lt;/code>: a date in the format &lt;code>YYYY-mm-dd&lt;/code>, for example &amp;ldquo;2019-01-28&amp;quot;&lt;br> - &lt;code>&amp;quot;bsDate&amp;quot;&lt;/code>: a Bikram Sambat date in the form &lt;code>YYYY-mm-dd&lt;/code>, for example &amp;ldquo;2078-02-32&amp;quot;&lt;br> - &lt;code>&amp;quot;bsYear&amp;quot;&lt;/code>: a Bikram Sambat year in the form &lt;code>YYYY&lt;/code>, for example &amp;ldquo;2078&amp;quot;&lt;br> - &lt;code>&amp;quot;bsMonth&amp;quot;&lt;/code>: a Bikram Sambat month, for example &amp;ldquo;9&amp;quot;&lt;br> - &lt;code>&amp;quot;bsDay&amp;quot;&lt;/code>: a Bikram Sambat day, for example &amp;ldquo;8&amp;quot;&lt;br> - &lt;code>&amp;quot;boolean&amp;quot;&lt;/code>: true or false, represented by the digit &lt;code>1&lt;/code> and &lt;code>0&lt;/code> respectively (native JSON booleans are also supported if sending via JSON)&lt;br> - &lt;code>&amp;quot;custom&amp;quot;&lt;/code>: Only possible for JSON forms that are passed as actual JSON (not an SMS that gets parsed into JSON). Effectively any non-specific data structure, which will be taken without validation.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>fields.${field}.labels&lt;/code>&lt;/td>
&lt;td>object&lt;/td>
&lt;td>&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>fields.${field}.labels.short&lt;/code>&lt;/td>
&lt;td>string, object with &lt;code>translation_key&lt;/code> field, or translation object&lt;/td>
&lt;td>Label shown for field in the app, seen when report is viewed in Reports tab. If missing, label will default to a translation key of &lt;code>report.${form_name}.${field_name}&lt;/code> (eg &lt;code>report.f.patient_id&lt;/code>) which can be translated in the app languages.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>fields.${field}.labels.tiny&lt;/code>&lt;/td>
&lt;td>string&lt;/td>
&lt;td>Unique identifier within the form for this field. Used in form submission to bind values to fields. Not required for all submission formats.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>fields.${field}.position&lt;/code>&lt;/td>
&lt;td>integer&lt;/td>
&lt;td>Zero based order of this field for incoming reports.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>fields.${field}.flags&lt;/code>&lt;/td>
&lt;td>object&lt;/td>
&lt;td>Additional instructions that could be used by form renderers. For instance &lt;code>{ &amp;quot;input_digits_only&amp;quot;: true }&lt;/code> indicated to SIM applications to show the number keyboard. Obsolete.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>fields.${field}.length&lt;/code>&lt;/td>
&lt;td>array with two integers&lt;/td>
&lt;td>Inclusive range accepted for length of the field.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>fields.${field}.required&lt;/code>&lt;/td>
&lt;td>boolean&lt;/td>
&lt;td>Determines if a report without this field is considered valid.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>public_form&lt;/code>&lt;/td>
&lt;td>boolean&lt;/td>
&lt;td>Determines if reports will be accepted from phone numbers not associated to a contact. Set to false if you want to reject reports from unknown senders. Default: true.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>facility_reference&lt;/code>&lt;/td>
&lt;td>string&lt;/td>
&lt;td>The form field whose value is to be used to match the incoming report to a contact&amp;rsquo;s &lt;code>rc_code&lt;/code>. Useful when reports are sent on behalf of a facility by unknown or various phone numbers. Requires the &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/transitions/#available-transitions">&lt;code>update_clinics&lt;/code> transition&lt;/a>.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="code-sample">Code Sample&lt;/h2>
&lt;p>The following form has two fields, one for the patient ID, another for notes.&lt;/p>
&lt;h3 id="app_settingsjson">&lt;code>app_settings.json&lt;/code>&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#4e9a06">&amp;#34;forms&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;F&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;meta&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;code&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;F&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;icon&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;risk&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;form.flag.title&amp;#34;&lt;/span> &lt;span style="color:#a40000">//&lt;/span> &lt;span style="color:#a40000">displayed&lt;/span> &lt;span style="color:#a40000">in&lt;/span> &lt;span style="color:#a40000">the&lt;/span> &lt;span style="color:#a40000">webapp&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;fields&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;patient_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#a40000">//&lt;/span> &lt;span style="color:#a40000">this&lt;/span> &lt;span style="color:#a40000">is&lt;/span> &lt;span style="color:#a40000">used&lt;/span> &lt;span style="color:#a40000">for&lt;/span> &lt;span style="color:#a40000">the&lt;/span> &lt;span style="color:#a40000">property&lt;/span> &lt;span style="color:#a40000">name&lt;/span> &lt;span style="color:#a40000">when&lt;/span> &lt;span style="color:#a40000">the&lt;/span> &lt;span style="color:#a40000">report&lt;/span> &lt;span style="color:#a40000">doc&lt;/span> &lt;span style="color:#a40000">is&lt;/span> &lt;span style="color:#a40000">created&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;labels&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;short&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;form.flag.patient_id.short&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span> &lt;span style="color:#a40000">//&lt;/span> &lt;span style="color:#a40000">displayed&lt;/span> &lt;span style="color:#a40000">in&lt;/span> &lt;span style="color:#a40000">the&lt;/span> &lt;span style="color:#a40000">webapp&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;tiny&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;pid&amp;#34;&lt;/span> &lt;span style="color:#a40000">//&lt;/span> &lt;span style="color:#a40000">used&lt;/span> &lt;span style="color:#a40000">in&lt;/span> &lt;span style="color:#a40000">form&lt;/span> &lt;span style="color:#a40000">submission&lt;/span> &lt;span style="color:#a40000">to&lt;/span> &lt;span style="color:#a40000">bind&lt;/span> &lt;span style="color:#a40000">values&lt;/span> &lt;span style="color:#a40000">to&lt;/span> &lt;span style="color:#a40000">fields&lt;/span> &lt;span style="color:#a40000">-&lt;/span> &lt;span style="color:#a40000">not&lt;/span> &lt;span style="color:#a40000">required&lt;/span> &lt;span style="color:#a40000">for&lt;/span> &lt;span style="color:#a40000">all&lt;/span> &lt;span style="color:#a40000">submission&lt;/span> &lt;span style="color:#a40000">formats&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;position&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#a40000">//&lt;/span> &lt;span style="color:#a40000">specifies&lt;/span> &lt;span style="color:#a40000">where&lt;/span> &lt;span style="color:#a40000">in&lt;/span> &lt;span style="color:#a40000">the&lt;/span> &lt;span style="color:#a40000">SMS&lt;/span> &lt;span style="color:#a40000">this&lt;/span> &lt;span style="color:#a40000">value&lt;/span> &lt;span style="color:#a40000">should&lt;/span> &lt;span style="color:#a40000">be&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;string&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;length&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#0000cf;font-weight:bold">5&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#0000cf;font-weight:bold">13&lt;/span>
&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;required&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;notes&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;labels&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;short&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;form.flag.notes.short&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;tiny&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;form.flag.notes.tiny&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;position&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;string&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;length&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#0000cf;font-weight:bold">100&lt;/span>
&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;required&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">false&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;public_form&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Apps: .header_tabs</title><link>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/header_tabs/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/header_tabs/</guid><description>
&lt;h2 id="app_settingsjs-header_tabs">&lt;code>app_settings.js .header_tabs&lt;/code>&lt;/h2>
&lt;p>As of &lt;code>3.10.0&lt;/code>, app header tabs icons can be configured by modifying the &lt;code>header_tabs&lt;/code> section in the app settings.
The &lt;code>header_tabs&lt;/code> section consists of key:value pairs, where the key is the name of the tab to configure.
These values can also be changed from the Admin console, on the Images page under the &amp;ldquo;Header tabs icons&amp;rdquo; tab.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;messages&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;icon&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;fa-user&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;tasks&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;resource_icon&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;medic-health-center&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;analytics&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;icon&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;fa-flag&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;resource_icon&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;icon-treatment&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="available-tabs">Available tabs&lt;/h4>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>tab name&lt;/th>
&lt;th>default &lt;a href="https://fontawesome.com/v4.7.0/">FontAwesome&lt;/a> icon&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>messages&lt;/code>&lt;/td>
&lt;td>&lt;code>fa-envelope&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>tasks&lt;/code>&lt;/td>
&lt;td>&lt;code>fa-flag&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>reports&lt;/code>&lt;/td>
&lt;td>&lt;code>fa-list-alt&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>contacts&lt;/code>&lt;/td>
&lt;td>&lt;code>fa-user&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>analytics&lt;/code>&lt;/td>
&lt;td>&lt;code>fa-bar-chart-o&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="app_settingsjs-header_tabstab_name">&lt;code>app_settings.js .header_tabs.&amp;lt;tab_name&amp;gt;&lt;/code>&lt;/h4>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>property&lt;/th>
&lt;th>type&lt;/th>
&lt;th>required&lt;/th>
&lt;th>description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>icon&lt;/code>&lt;/td>
&lt;td>string&lt;/td>
&lt;td>no&lt;/td>
&lt;td>&lt;a href="https://fontawesome.com/v4.7.0/">FontAwesome&lt;/a> icon name&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>resource_icon&lt;/code>&lt;/td>
&lt;td>string&lt;/td>
&lt;td>no&lt;/td>
&lt;td>&lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/resources/">Resource icon&lt;/a> name.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
Selected Resource icons take precedence over selected FontAwesome icons.&lt;br>
If the selected Resource icon does not exist, the default icon will be displayed.&lt;br>
If the selected FontAwesome icon does not exist, the default icon will be displayed. &lt;br>
If the selected Resource icon is not an &lt;code>svg&lt;/code> that supports css color filling, the icon will have a static color for every state (inactive, active and hovered). Colors will change only for FontAwesome icons and css fillable &lt;code>svg&lt;/code> icons. &lt;br>
The Admin console Resource icon dropdowns only supports selecting &lt;code>svg&lt;/code> icons. If mismatched Resource Icons are selected, they will be deselected upon saving. &lt;br>
Resource icons images will be sized to &lt;code>24 x 24px&lt;/code> when displayed.
&lt;/div></description></item><item><title>Apps: .outbound</title><link>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/outbound/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/outbound/</guid><description>
&lt;p>&lt;em>Outbound is only available in CHT Core 3.5.0 and above&lt;/em>&lt;/p>
&lt;p>Outbound push allows configurers to have the creation or editing of CouchDB documents trigger outbound REST requests using the data in that document. For example, upon receiving a referral report you could send that referral to an external facility system that will manage and process that event.&lt;/p>
&lt;p>These triggers can apply to all document types (not just common types such as reports or contacts) and as such care should be taken to only send the documents you intend (see configuration of &lt;code>relevant_to&lt;/code> below).&lt;/p>
&lt;h2 id="configuration">Configuration&lt;/h2>
&lt;p>For outbound pushes to occur, you must &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/transitions/#available-transitions">enable the &lt;code>mark_for_outbound&lt;/code> transition in config&lt;/a>:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;transitions&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;mark_for_outbound&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The rest of the configuration is against the &lt;code>outbound&lt;/code> configuration property, which allows you to configure as many outbound pushes as you like, keyed off a unique name:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;outbound&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;first config&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;relevant_to&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;...&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;destination&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;mapping&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{}&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;second config&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Each outbound push configuration contains the following properties: &lt;code>relevant_to&lt;/code>, &lt;code>destination&lt;/code> and &lt;code>mapping&lt;/code>.&lt;/p>
&lt;h3 id="relevant_to">relevant_to&lt;/h3>
&lt;p>An &amp;ldquo;expression&amp;rdquo; (some JS code that resolves to a truthy or falsy value) that determines whether this configuration is relevant to a document. The document is passed to the expression as &lt;code>doc&lt;/code>, and if relevant is fully hydrated before being passed (i.e. the attached contact, its parents etc are fully attached instead of just being stubs).&lt;/p>
&lt;p>Example: you want to send a referral to a facility&amp;rsquo;s EMR system when a CHW refers a patient:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;relevant_to&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;doc.type === &amp;#39;data_record&amp;#39; &amp;amp;&amp;amp; doc.form === &amp;#39;referral&amp;#39;&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>Note:&lt;/strong> all documents that Sentinel processes can be picked up by your configuration, so it&amp;rsquo;s important to correctly configure &lt;code>relevant_to&lt;/code>. Checking the document type as shown above is probably a good start.&lt;/p>
&lt;h3 id="destination">destination&lt;/h3>
&lt;p>A complex property that defines the details of the connection to the external service. It currently supports several authentication types: basic authentication, HTTP authorization request header, and a custom authentication mode for Muso SIH.&lt;/p>
&lt;p>Basic auth example:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;destination&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;base_url&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;https://example.com&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;auth&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;basic&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;username&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;admin&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;password_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;example.com&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;path&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;/api/v1/referral&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Here &lt;code>password_key&lt;/code> is a key used to find the password in CHT credentials. For more information about how to store credentials, refer to the &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/api#put-apiv1credentials">API documentation&lt;/a>.&lt;/p>
&lt;p>If you don&amp;rsquo;t provide an authentication parameter then the request will be sent without authentication.&lt;/p>
&lt;p>As of 3.9, the &lt;code>header&lt;/code> type is also supported, which sends authentication credentials via a HTTP request header: &lt;code>Authorization: '&amp;lt;value&amp;gt;'&lt;/code>. The value is set in CHT credentials configuration, and referred to by the &lt;code>value_key&lt;/code>, similarly to the &lt;code>password_key&lt;/code>. The value must match the credentials needed for the third party tool, and is generally formatted as &lt;code>&amp;lt;type&amp;gt; &amp;lt;credentials&amp;gt;&lt;/code>. For instance, to send data to RapidPro, the value in the configuration would be set to the complete RapidPro API Token: eg &lt;code>Token 123456789abcdef&lt;/code>.&lt;/p>
&lt;p>Header auth example:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;destination&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;base_url&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;https://example.com&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;auth&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;header&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Authorization&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;value_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;example.com&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;path&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;/api/v1/referral&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="mapping">mapping&lt;/h3>
&lt;p>A complex property that declares how the payload to be sent to the &lt;code>destination&lt;/code> should be created.&lt;/p>
&lt;p>Each key is a string &lt;a href="https://github.com/mariocasciaro/object-path#user-content-usage">object path&lt;/a> to a location in the payload, and each value is either:&lt;/p>
&lt;ul>
&lt;li>a string object path to the location of the source data in the report being processed, where the value is required to exist&lt;/li>
&lt;li>an object with either a &lt;code>path&lt;/code> property that represents a string object path as above, or an &lt;code>expr&lt;/code> property which is an expression similar to &lt;code>relevant_to&lt;/code> to determine the resulting value. If you wish for the value to be optional (that is to say it&amp;rsquo;s OK if &lt;code>path&lt;/code> or &lt;code>expr&lt;/code> evaluate to &lt;code>undefined&lt;/code>) you may also set &lt;code>optional&lt;/code> to &lt;code>true&lt;/code>&lt;/li>
&lt;/ul>
&lt;h4 id="a-mapping-example">A mapping example&lt;/h4>
&lt;p>Given the following example (incomplete) report:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;abc-1234&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;data_record&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;form&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;referral&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;reported_date&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1555069530966&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;fields&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;patient_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;12345&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;patient_temp_deg_F&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">100&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;danger_signs&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;V&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;BL&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;D&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;IG&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;contact&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;def-5678&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Jane CHW&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;parent&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;hij-9012&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;...&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The following mapping configuration:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;mapping&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;patient_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;doc.fields.patient_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;chw_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;doc.contact._id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;event.temp_c&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;expr&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;((doc.fields.patient_temp_deg_F - 32) * (5.0/9.0)).toFixed(2)&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;event.in_danger&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;expr&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;doc.fields.danger_signs.length &amp;gt;= 3 ? true : undefined&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;optional&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;event.additional_notes&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;path&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;doc.fields.notes&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;optional&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Would create the following JSON payload to send:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;patient_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;12345&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;chw_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;def-5678&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;event&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;temp_c&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">37.78&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;in_danger&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>This example makes a few points:&lt;/p>
&lt;ul>
&lt;li>The report that is being used to generate the outbound push is referenced as &lt;code>doc&lt;/code> in both &lt;code>path&lt;/code> and &lt;code>expr&lt;/code> properties&lt;/li>
&lt;li>To define a property that is itself an object, you can make the mapping key a JSON path.&lt;/li>
&lt;li>If you define a property as &lt;code>optional&lt;/code>, it won&amp;rsquo;t exist at all in the payload if the resulting value is &lt;code>undefined&lt;/code>, either because that is the result of executing the &lt;code>expr&lt;/code>, or the &lt;code>path&lt;/code> doesn&amp;rsquo;t exist. Note that if the &lt;code>event.in_danger&lt;/code> expression was instead &lt;code>doc.fields.danger_signs.length &amp;gt;= 3&lt;/code> the property &lt;code>in_danger&lt;/code> would always exist and would either be &lt;code>true&lt;/code> or &lt;code>false&lt;/code>&lt;/li>
&lt;/ul>
&lt;h4 id="other-notes">Other Notes&lt;/h4>
&lt;ul>
&lt;li>Your report will be hydrated before being passed to the mapper. This gives you access to the contact and its parents&lt;/li>
&lt;li>object paths that may have undefined properties need to be dealt with differently depending on if you are using a &lt;code>path&lt;/code> or an &lt;code>expr&lt;/code>. Given &lt;code>doc.foo.bar.smang&lt;/code> as a path where any of those properties may not exist in the doc:&lt;/li>
&lt;li>If you&amp;rsquo;re using &lt;code>path&lt;/code> just use the path as is, if any part of the path is &lt;code>undefined&lt;/code> the resulting value will safely be &lt;code>undefined&lt;/code>&lt;/li>
&lt;li>However, in &lt;code>expr&lt;/code> you &lt;strong>do&lt;/strong> need to handle this situation: &lt;code>doc.foo &amp;amp;&amp;amp; doc.foo.bar &amp;amp;&amp;amp; doc.foo.bar.smang&lt;/code>&lt;/li>
&lt;li>If any of your &lt;code>expr&lt;/code> expressions throw an exception (for example because you didn&amp;rsquo;t handle potentially &lt;code>undefined&lt;/code> properties as noted above) your push will fail&lt;/li>
&lt;li>If any of your &lt;code>path&lt;/code> declarations result in an &lt;code>undefined&lt;/code> value and you have not also declared that property optional your push will fail&lt;/li>
&lt;/ul>
&lt;h2 id="how-outbound-messages-are-sent">How Outbound messages are sent&lt;/h2>
&lt;p>Send semantics have changed over the course of developing this feature, and are important to understand for your deployment to be successful.&lt;/p>
&lt;h3 id="in-310-and-above">In 3.10 and above&lt;/h3>
&lt;ul>
&lt;li>Outbound messages are sent immediately&lt;/li>
&lt;li>If there is an error in sending it will be added to a send queue to be retried every 5 minutes.&lt;/li>
&lt;li>When it does finally send it will include any new changes to the document that have occurred in that time.&lt;/li>
&lt;li>&lt;strong>Documents can be sent again&lt;/strong>, as long as the resulting payload (as defined in the configuration&amp;rsquo;s &lt;code>mapping&lt;/code> property) is different from the most recent outbound push performed for this document and configuration.&lt;/li>
&lt;/ul>
&lt;p>It&amp;rsquo;s important to understand that if your &lt;code>mapping&lt;/code> configuration produces a different result every time it&amp;rsquo;s run you may experience Outbound sending the &amp;ldquo;same&amp;rdquo; data many more times than you&amp;rsquo;d expect.&lt;/p>
&lt;p>For example, if you want a timestamp in your payload you could configure it like this:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;timestamp&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;#34;expr&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;new Date()&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Outbound may send your request multiple times even if the user just hit save once. If this is a problem for your deployment, consider using values on the document itself that will not change every time your mapping is executed:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;timestamp&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;doc.timestamp&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="in-39">In 3.9&lt;/h3>
&lt;ul>
&lt;li>Outbound messages are sent immediately&lt;/li>
&lt;li>If there is an error in sending it will be added to a send queue to be retried every 5 minutes.&lt;/li>
&lt;li>When it does finally send it will include any new changes to the document that have occurred in that time.&lt;/li>
&lt;li>&lt;strong>Documents are only ever sent once for configuration&lt;/strong>&lt;/li>
&lt;/ul>
&lt;h3 id="in-34-38">In 3.4-3.8&lt;/h3>
&lt;ul>
&lt;li>Outbound messages are added to a send queue that is executed once every 5 minutes or so.&lt;/li>
&lt;li>If there is an error in sending it will be kept in the queue to be retried in another 5 minutes.&lt;/li>
&lt;li>When it does finally send it will include any new changes to the document that have occurred in that time.&lt;/li>
&lt;li>Once the document has successfully sent if the document is changed again it will be sent again, using the same rules as above.&lt;/li>
&lt;/ul>
&lt;h2 id="inbound">Inbound?&lt;/h2>
&lt;p>The outbound feature is used for sending data to an external service. If you are looking to &lt;strong>receive&lt;/strong> data from an external service, take a look at &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/api/#records">the records api&lt;/a>.&lt;/p></description></item><item><title>Apps: .patient_reports</title><link>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/patient_reports/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/patient_reports/</guid><description>
&lt;p>The &lt;code>patient_reports&lt;/code> key contains the actions to take when reports about people are received.&lt;/p>
&lt;h2 id="app_settingsjson-patient_reports">&lt;code>app_settings.json .patient_reports[]&lt;/code>&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>property&lt;/th>
&lt;th>description&lt;/th>
&lt;th>required&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>form&lt;/code>&lt;/td>
&lt;td>Form ID of the form.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>name&lt;/code>&lt;/td>
&lt;td>Descriptive name of the form. This is not currently used in the app, but can be a helpful annotation.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>format&lt;/code>&lt;/td>
&lt;td>Guide of how the form can be used. This is not currently used in the app, but can be a helpful annotation.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>silence_type&lt;/code>&lt;/td>
&lt;td>A comma separated list of schedules to mute.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>silence_for&lt;/code>&lt;/td>
&lt;td>Duration from when the report was submitted for which messages should be muted. It is structured as a string with an integer value followed by a space and the time unit. For instance &lt;code>8 weeks&lt;/code> or &lt;code>2 days&lt;/code>. The units available are &lt;code>seconds&lt;/code>, &lt;code>minutes&lt;/code>, &lt;code>hours&lt;/code>, &lt;code>days&lt;/code>, &lt;code>weeks&lt;/code>, &lt;code>months&lt;/code>, &lt;code>years&lt;/code>, and their singular forms as well. When a message is muted all messages belonging to the same group will be muted, even if it falls outside of this time period. See &lt;code>messages[].group&lt;/code> in &lt;em>Schedules&lt;/em> for related info.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>fields&lt;/code>&lt;/td>
&lt;td>Descriptive list of form fields. This is not currently used in the app, but can be a helpful annotation.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>validations&lt;/code>&lt;/td>
&lt;td>A set of validations to perform on incoming reports. More information about validation rules can be found &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/#validations">here&lt;/a>.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>validations.join_responses&lt;/code>&lt;/td>
&lt;td>A boolean specifying whether validation messages should be combined into one message.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>validations.list[]&lt;/code>&lt;/td>
&lt;td>An array of validation rules a report should pass to be considered valid.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>validations.list[].property&lt;/code>&lt;/td>
&lt;td>Report field for which this validation rule will be applied.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>validations.list[].rule&lt;/code>&lt;/td>
&lt;td>Validation condition to be applied to the property field. More information about rules can be found &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/#rules">here&lt;/a>.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>validations.list[].translation_key&lt;/code>&lt;/td>
&lt;td>Translation key for the message reply to be sent if a report fails this rule.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messages&lt;/code>&lt;/td>
&lt;td>An array of automated responses to incoming reports.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messages[].translation_key&lt;/code>&lt;/td>
&lt;td>Translation key for the message text associated with this event&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messages[].event_type&lt;/code>&lt;/td>
&lt;td>An event that will trigger sending of this message. Typical values are: &lt;code>report_accepted&lt;/code> when the report has been successfully validated, &lt;code>registration_not_found&lt;/code> when the shortcode (patient ID or place ID) supplied in the report doesn&amp;rsquo;t match any shortcode issued by Medic. &lt;code>on_mute&lt;/code> and &lt;code>on_unmute&lt;/code> are used in the context of muting as described &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/transitions/#muting">here&lt;/a>&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messages[].recipient&lt;/code>&lt;/td>
&lt;td>Who the message should be sent to. Use &lt;code>reporting_unit&lt;/code> for the sender of the report, &lt;code>clinic&lt;/code> for clinic contact, and &lt;code>parent&lt;/code> for the parent contact. &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/#sms-recipient-resolution">See SMS Recipients&lt;/a>&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="code-sample">Code sample&lt;/h2>
&lt;p>This sample shows a &lt;code>V&lt;/code> report clearing schedules that have messages within 8 days of the report being received. The sample also defines the response messages if the report is accepted or if the patient is not found.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json"> &lt;span style="color:#4e9a06">&amp;#34;patient_reports&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;form&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;V&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Visit (SMS)&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;format&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;V &amp;lt;patientid&amp;gt;&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;silence_type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;ANC Reminders, ANC Reminders LMP, ANC Reminders LMP from App&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;silence_for&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;8 days&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;fields&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;field_name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;title&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;validations&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;join_responses&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;list&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;property&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;patient_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;rule&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;regex(&amp;#39;^[0-9]{5,13}$&amp;#39;)&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;messages.generic.validation.patient_id&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;messages&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;messages.v.report_accepted&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;event_type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;report_accepted&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;recipient&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;reporting_unit&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;messages.generic.registration_not_found&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;event_type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;registration_not_found&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;recipient&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;reporting_unit&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Apps: .permissions</title><link>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/user-permissions/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/user-permissions/</guid><description>
&lt;p>Permissions are defined by the &lt;code>permissions&lt;/code> object in the &lt;code>base_settings.json&lt;/code> file. Permissions can also be configured using the App Management app.
Each permission is defined as an array of user role identifiers that have the permission granted.&lt;/p>
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/user-roles/">User roles&lt;/a>&lt;/p>
&lt;h3 id="app_settingsjson-permissions">&lt;code>app_settings.json .permissions{}&lt;/code>&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Property&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>can_access_gateway_api&lt;/code>&lt;/td>
&lt;td>Allows access to gateway API&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_aggregate_targets&lt;/code>&lt;/td>
&lt;td>Allows access to Target Aggregates page&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_bulk_delete_reports&lt;/code>&lt;/td>
&lt;td>Allows users to select multiple reports and delete&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_configure&lt;/code>&lt;/td>
&lt;td>Allows update of configuration parameters&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_upgrade&lt;/code>&lt;/td>
&lt;td>Allows upgrades of the CHT Core Framework version via the API or admin interface&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_create_people&lt;/code>&lt;/td>
&lt;td>Allows creation &amp;amp; editing of person contacts&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_create_places&lt;/code>&lt;/td>
&lt;td>Allows creation &amp;amp; editing of place contacts&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_create_records&lt;/code>&lt;/td>
&lt;td>Allows creation of reports&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_create_users&lt;/code>&lt;/td>
&lt;td>Allows creation of user logins&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_delete_contacts&lt;/code>&lt;/td>
&lt;td>Allows deletion of people and places&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_delete_messages&lt;/code>&lt;/td>
&lt;td>Allows deletion of messages&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_delete_reports&lt;/code>&lt;/td>
&lt;td>Allows deletion of reports&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_delete_users&lt;/code>&lt;/td>
&lt;td>Allows deletion of users&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_edit&lt;/code>&lt;/td>
&lt;td>Allows creating and editing of documents in CouchDB. Note that even without this permission a user can still create and edit reports on their device, but the changes will not be replicated to the server. See &lt;a href="https://github.com/medic/cht-core/issues/6215">this issue&lt;/a> for more details.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_edit_profile&lt;/code>&lt;/td>
&lt;td>Allows editing of their own user profile&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_edit_verification&lt;/code>&lt;/td>
&lt;td>Allows setting and editing of report verification status. To block the user from updating the existing status, use &lt;code>can_verify_reports&lt;/code> instead.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_export_all&lt;/code>&lt;/td>
&lt;td>Allows export of data including data they do not have access to&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_export_contacts&lt;/code>&lt;/td>
&lt;td>Allows export of contacts&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_export_dhis&lt;/code>&lt;/td>
&lt;td>Allows export of DHIS2 metrics&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_export_feedback&lt;/code>&lt;/td>
&lt;td>Allows export of user feedback&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_export_messages&lt;/code>&lt;/td>
&lt;td>Allows export of reports and messages&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_log_out_on_android&lt;/code>&lt;/td>
&lt;td>Displays logout menu item in hamburger menu for android users and can be used to log out form the application&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_update_places&lt;/code>&lt;/td>
&lt;td>Allows editing of place documents&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_update_reports&lt;/code>&lt;/td>
&lt;td>Allows editing of report documents&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_update_users&lt;/code>&lt;/td>
&lt;td>Allows editing of user documents&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_verify_reports&lt;/code>&lt;/td>
&lt;td>Allows setting report verification status if no status is currently set. To allow the user to update the existing status, use &lt;code>can_edit_verification&lt;/code> instead.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_view_analytics&lt;/code>&lt;/td>
&lt;td>Allows access to in-app analytics&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_view_analytics_tab&lt;/code>&lt;/td>
&lt;td>Displays analytics tab on the application&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_view_call_action&lt;/code>&lt;/td>
&lt;td>Displays a button to call the selected person&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_view_contacts&lt;/code>&lt;/td>
&lt;td>Allows viewing contacts&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_view_contacts_tab&lt;/code>&lt;/td>
&lt;td>Displays the contacts tab in the application&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_view_last_visited_date&lt;/code>&lt;/td>
&lt;td>Enable display of the date a family was last visited&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_view_message_action&lt;/code>&lt;/td>
&lt;td>Displays a button to send a message to the selected contact&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_view_messages&lt;/code>&lt;/td>
&lt;td>Allows viewing messages&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_view_messages_tab&lt;/code>&lt;/td>
&lt;td>Displays the messages tab in the application&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_view_outgoing_messages&lt;/code>&lt;/td>
&lt;td>Allows viewing outgoing messages when logged in as an administrator&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_view_reports&lt;/code>&lt;/td>
&lt;td>Allows viewing reports&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_view_reports_tab&lt;/code>&lt;/td>
&lt;td>Displays the reports tab in the application&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_view_tasks&lt;/code>&lt;/td>
&lt;td>Allows viewing tasks&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_view_tasks_tab&lt;/code>&lt;/td>
&lt;td>Displays tasks tab in the application&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_view_tasks_group&lt;/code>&lt;/td>
&lt;td>Displays all available tasks within same place after submitting&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_view_uhc_stats&lt;/code>&lt;/td>
&lt;td>Allows users to view UHC metrics&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_view_unallocated_data_records&lt;/code>&lt;/td>
&lt;td>Allows viewing reports that have no associated contact&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_view_users&lt;/code>&lt;/td>
&lt;td>Allows viewing all user accounts&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>can_write_wealth_quintiles&lt;/code>&lt;/td>
&lt;td>Allows updating contacts with wealth quintile information&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Apps: .registrations</title><link>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/registrations/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/registrations/</guid><description>
&lt;p>The &lt;code>registrations&lt;/code> key contains actions that need to be performed for incoming reports of the specified form.&lt;/p>
&lt;h2 id="app_settingsjson-registrations">&lt;code>app_settings.json .registrations[]&lt;/code>&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>property&lt;/th>
&lt;th>description&lt;/th>
&lt;th>required&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>form&lt;/code>&lt;/td>
&lt;td>Form ID that should trigger the schedule.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>events&lt;/code>&lt;/td>
&lt;td>An array of event object definitions of what should happen when this form is received.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>event[].name&lt;/code>&lt;/td>
&lt;td>Name of the event that has happened. The only supported event is &lt;code>on_create&lt;/code> which happens when a form is received.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>event[].trigger&lt;/code>&lt;/td>
&lt;td>What should happen after the named event. &lt;code>assign_schedule&lt;/code> will assign the schedule named in &lt;code>params&lt;/code> to this report. Similarly &lt;code>clear_schedule&lt;/code> will permanently clear all messages for a patient or place that are part of schedules listed in the &lt;code>params&lt;/code> field. The full set of trigger configuration directives are described &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/transitions/#triggers">here&lt;/a>.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>event[].params&lt;/code>&lt;/td>
&lt;td>Any useful information for the event. In our case, it holds the name of the schedule to be triggered.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>event[].bool_expr&lt;/code>&lt;/td>
&lt;td>A JavaScript expression that will be cast to boolean to qualify execution of the event. Leaving blank will default to always true. CouchDB document fields can be accessed using &lt;code>doc.key.subkey&lt;/code>. Regular expressions can be tested using &lt;code>pattern.test(value)&lt;/code> e.g. /^[0-9]+$/.test(doc.fields.last_menstrual_period). In our example above, we&amp;rsquo;re making sure the form has an LMP date.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>validations&lt;/code>&lt;/td>
&lt;td>A set of validations to perform on incoming reports. More information about validation rules can be found &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/#validations">here&lt;/a>.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>validations.join_responses&lt;/code>&lt;/td>
&lt;td>A boolean specifying whether validation messages should be combined into one message.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>validations.list[]&lt;/code>&lt;/td>
&lt;td>An array of validation rules a report should pass to be considered valid.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>validations.list[].property&lt;/code>&lt;/td>
&lt;td>Report field for which this validation rule will be applied.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>validations.list[].rule&lt;/code>&lt;/td>
&lt;td>Validation condition to be applied to the property field. More information about rules can be found &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/#rules">here&lt;/a>.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>validations.list[].translation_key&lt;/code>&lt;/td>
&lt;td>Translation key for the message reply to be sent if a report fails this rule.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messages&lt;/code>&lt;/td>
&lt;td>An array of automated responses to incoming reports.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messages[].translation_key&lt;/code>&lt;/td>
&lt;td>Translation key for the message text associated with this event.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messages[].event_type&lt;/code>&lt;/td>
&lt;td>An event that will trigger sending of this message. Typical values are: &lt;code>report_accepted&lt;/code> when the report has been successfully validated and &lt;code>registration_not_found&lt;/code> when the shortcode (patient ID or place ID) supplied in the report doesn&amp;rsquo;t match any shortcode issued by Medic.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messages[].recipient&lt;/code>&lt;/td>
&lt;td>Who the message should be sent to. Use &lt;code>reporting_unit&lt;/code> for the sender of the report, &lt;code>clinic&lt;/code> for clinic contact, and &lt;code>parent&lt;/code> for the parent contact. &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/#sms-recipient-resolution">See SMS Recipients&lt;/a>&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="code-sample">Code sample&lt;/h2>
&lt;p>This sample shows how a schedule would be triggered by a &lt;code>pregnancy&lt;/code> report if the &lt;code>last_menstrual_period&lt;/code> value is set.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">
&lt;span style="color:#4e9a06">&amp;#34;registrations&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;form&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;pregnancy&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;events&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;on_create&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;trigger&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;assign_schedule&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;params&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;ANC Visit Reminders&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;bool_expr&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;doc.fields.last_menstrual_period&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;validations&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;messages&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[]&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Apps: .reminders</title><link>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/reminders/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/reminders/</guid><description>
&lt;p>Configure SMS reminders to notify primary contacts to submit reports for their places.&lt;/p>
&lt;h2 id="app_settingsjs-reminders">&lt;code>app_settings.js .reminders[]&lt;/code>&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Property&lt;/th>
&lt;th>Type&lt;/th>
&lt;th>Description&lt;/th>
&lt;th>Required&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>form&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code>&lt;/td>
&lt;td>If a report with this ID is submitted for this place then the SMS will not be sent.&lt;/td>
&lt;td>Yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>translation_key&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code>&lt;/td>
&lt;td>The translation key to use to look up the SMS message content.&lt;/td>
&lt;td>Yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>message&lt;/code>&lt;/td>
&lt;td>&lt;code>array&lt;/code> or &lt;code>string&lt;/code>&lt;/td>
&lt;td>&lt;em>Deprecated&lt;/em>. The SMS content. Use translation_key instead.&lt;/td>
&lt;td>No&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>text_expression&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code>&lt;/td>
&lt;td>The &lt;a href="http://bunkat.github.io/later/parsers.html#text">later text expression&lt;/a> to use to set the frequency of this reminder.&lt;/td>
&lt;td>Yes (unless cron is defined)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>cron&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code>&lt;/td>
&lt;td>The &lt;a href="https://en.wikipedia.org/wiki/Cron">cron expression&lt;/a> to use to set the frequency of this reminder&lt;/td>
&lt;td>Yes (unless text_expression is defined)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>contact_types&lt;/code>&lt;/td>
&lt;td>&lt;code>array&lt;/code>&lt;/td>
&lt;td>All contact type IDs that should receive the SMS. Defaults to the lowest level places. &lt;em>Added in 3.10.0&lt;/em>&lt;/td>
&lt;td>No&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="code-samples">Code samples&lt;/h2>
&lt;h3 id="app_settingsjs">&lt;code>app_settings.js&lt;/code>&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#4e9a06">&amp;#34;reminders&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;form&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;stock&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;sms.reminder.stock&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;text_expression&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;on the first day of the week&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;contact_types&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;health_center&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;hospital&amp;#34;&lt;/span> &lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>&lt;span style="color:#a40000">,&lt;/span>
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Apps: .replication_depth</title><link>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/replication_depth/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/replication_depth/</guid><description>
&lt;p>Replication depth is defined under &lt;code>replication_depth&lt;/code> as an array of objects. It grants the ability to limit document replication depending on user roles.&lt;/p>
&lt;h2 id="app_settingsjson-replication_depth">&lt;code>app_settings.json .replication_depth&lt;/code>&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>property&lt;/th>
&lt;th>description&lt;/th>
&lt;th>required&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>role&lt;/code>&lt;/td>
&lt;td>The configured user role the depth applies to.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>depth&lt;/code>&lt;/td>
&lt;td>The replication depth value. Must be a positive integer or 0.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>report_depth&lt;/code>&lt;/td>
&lt;td>&lt;strong>As of 3.10&lt;/strong>. Replication depth applied to reports submitted by other users&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h5 id="code-sample">Code sample:&lt;/h5>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;replication_depth&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;role&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;district_manager&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;depth&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;report_depth&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> &lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;role&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;national_manager&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;depth&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">2&lt;/span> &lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Apps: .replications [deprecated]</title><link>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/replications/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/replications/</guid><description>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Deprecated&lt;/h4>
The &lt;code>replications&lt;/code> field is only available in versions 3.5.0 to 3.9.0. As of 3.10.0 this field is ignored, and replication happens nightly for user meta databases to a central meta data database.
&lt;/div>
&lt;p>Replications are defined under the &lt;code>app_settings.replications&lt;/code> key as an array of replication objects. The definition takes the typical form below:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#4e9a06">&amp;#34;replications&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;fromSuffix&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;user-[^\\-]+-meta&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;toSuffix&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;users-meta&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;text_expression&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;cron&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;0 2 * * *&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>property&lt;/th>
&lt;th>description&lt;/th>
&lt;th>required&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>fromSuffix&lt;/code>&lt;/td>
&lt;td>The suffix of the source table(s). Regular expression may be used.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>toSuffix&lt;/code>&lt;/td>
&lt;td>The suffix of the target table.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>text_expression&lt;/code>&lt;/td>
&lt;td>Any valid text expression. For more information, see &lt;a href="https://bunkat.github.io/later/parsers.html#text">LaterJS&lt;/a>&lt;/td>
&lt;td>no if &lt;code>cron&lt;/code> provided&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>cron&lt;/code>&lt;/td>
&lt;td>Any valid Cron expression. For more information, see &lt;a href="https://bunkat.github.io/later/parsers.html#cron">LaterJS&lt;/a>&lt;/td>
&lt;td>no if &lt;code>text_expression&lt;/code> provided&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Apps: .roles</title><link>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/user-roles/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/user-roles/</guid><description>
&lt;p>Each user is assigned one of the defined roles. Roles can be defined using the App Management app, which is represented by the &lt;code>roles&lt;/code> object of the &lt;code>app-settings.json&lt;/code> file. Each role is defined by an identifier as the key, and an object with the following properties:&lt;/p>
&lt;h3 id="app_settingsjson-roles">&lt;code>app_settings.json .roles{}&lt;/code>&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Property&lt;/th>
&lt;th>Description&lt;/th>
&lt;th>Required&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>name&lt;/code>&lt;/td>
&lt;td>The translation key for this role&lt;/td>
&lt;td>Yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>offline&lt;/code>&lt;/td>
&lt;td>Determines if user will be an online or offline user. Set to &lt;code>false&lt;/code> for users to be &amp;ldquo;online&amp;rdquo; users.&lt;/td>
&lt;td>No, default &lt;code>true&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Apps: .schedules</title><link>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/schedules/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/schedules/</guid><description>
&lt;p>Schedules are defined in either the &lt;code>base_settings.json&lt;/code> or the &lt;code>app_settings/schedules.json&lt;/code> file and compiled in to the &lt;code>app_settings.json&lt;/code> file with the &lt;code>compile-app-settings&lt;/code> action in the &lt;code>cht-conf&lt;/code> tool.&lt;/p>
&lt;p>The &lt;code>schedules&lt;/code> key contains an array of schedule objects, each representing the messages to send based on a registration.&lt;/p>
&lt;h2 id="app_settingsjson-schedules">&lt;code>app_settings.json .schedules[]&lt;/code>&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>property&lt;/th>
&lt;th>description&lt;/th>
&lt;th>required&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>name&lt;/code>&lt;/td>
&lt;td>A unique string label that is used to identify the schedule. Spaces are allowed.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>summary&lt;/code>&lt;/td>
&lt;td>Short description of the of the schedule.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>description&lt;/code>&lt;/td>
&lt;td>A narrative for the schedule.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>start_from&lt;/code>&lt;/td>
&lt;td>The base date from which the &lt;code>messages[].offset&lt;/code> is added to determine when to send individual messages. You could specify any property on the report that contains a date value. The default is &lt;code>reported_date&lt;/code>, which is when the report was submitted.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>start_mid_group&lt;/code>&lt;/td>
&lt;td>Whether or not a schedule can start mid-group. If not present, the schedule will not start mid-group. In other terms, the default value is &lt;code>false&lt;/code>&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messages&lt;/code>&lt;/td>
&lt;td>Array of objects, each containing a message to send out and its properties.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messages[].translation_key&lt;/code>&lt;/td>
&lt;td>The translation key of the message to send out. Available in 2.15+.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messages[].messages&lt;/code>&lt;/td>
&lt;td>Array of message objects, each with &lt;code>content&lt;/code> and &lt;code>locale&lt;/code> properties. From 2.15 on use &lt;code>translation_key&lt;/code> instead.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messages[].group&lt;/code>&lt;/td>
&lt;td>Integer identifier to group messages that belong together so that they can be cleared together as a group by future reports. For instance a series of messages announcing a visit, and following up for a missed visit could be grouped together and cleared by a single visit report.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messages[].offset&lt;/code>&lt;/td>
&lt;td>Time interval from the &lt;code>start_from&lt;/code> date for when the message should be sent. It is structured as a string with an integer value followed by a space and the time unit. For instance &lt;code>8 weeks&lt;/code> or &lt;code>2 days&lt;/code>. The units available are &lt;code>seconds&lt;/code>, &lt;code>minutes&lt;/code>, &lt;code>hours&lt;/code>, &lt;code>days&lt;/code>, &lt;code>weeks&lt;/code>, &lt;code>months&lt;/code>, &lt;code>years&lt;/code>, and their singular forms as well. Note that although you can specify &lt;code>seconds&lt;/code>, the accuracy of the sending time will be determined by delays in the processing the message on the server and on the gateway.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messages[].send_day&lt;/code>&lt;/td>
&lt;td>String value of the day of the week on which the message should be sent. For instance, to send a message at the beginning of the week setting it to &lt;code>&amp;quot;Monday&amp;quot;&lt;/code> will make sure the message goes out on the closest Monday &lt;em>after&lt;/em> the &lt;code>start_date&lt;/code> + &lt;code>offset&lt;/code>.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messages[].send_time&lt;/code>&lt;/td>
&lt;td>Time of day that the message should be sent in 24 hour format.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messages[].recipient&lt;/code>&lt;/td>
&lt;td>Recipient of the message. It can be set to &lt;code>reporting_unit&lt;/code> (sender of the form), &lt;code>clinic&lt;/code> (clinic that the sender of the form is attached to), &lt;code>parent&lt;/code> (parent of the sender of the form), or a specific phone number. &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/#sms-recipient-resolution">See SMS Recipients&lt;/a>&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="code-sample">Code Sample&lt;/h2>
&lt;p>This sample shows a schedule with a single message, which will be sent on Monday 9am 4 weeks after the LMP date on the report that triggers this schedule:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json"> &lt;span style="color:#4e9a06">&amp;#34;schedules&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;ANC Visit Reminders&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;summary&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;description&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;start_from&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;lmp_date&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;start_mid_group&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;messages&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;messages.schedule.registration.followup_anc_pnc&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;group&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;offset&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;4 weeks&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;send_day&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;monday&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;send_time&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;09:00&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;recipient&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;reporting_unit&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Apps: .sms</title><link>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/sms/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/sms/</guid><description>
&lt;p>SMS settings are defined under the &lt;code>sms&lt;/code> key, as an object supporting the following properties:&lt;/p>
&lt;h2 id="app_settingsjson-sms">&lt;code>app_settings.json .sms&lt;/code>&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>property&lt;/th>
&lt;th>default&lt;/th>
&lt;th>description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>outgoing_service&lt;/td>
&lt;td>cht-gateway&lt;/td>
&lt;td>Defines the service to use to send SMS messages. Currently supports &amp;ldquo;cht-gateway&amp;rdquo;, &amp;ldquo;africas-talking&amp;rdquo; or &amp;ldquo;rapidpro&amp;rdquo;. For more information read the documentation on &lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/messaging/gateways/africas-talking/">&amp;ldquo;africas-talking&amp;rdquo; configuration&lt;/a> and &lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/messaging/gateways/rapidpro/">&amp;ldquo;rapidpro&amp;rdquo; configuration&lt;/a>.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>duplicate_limit&lt;/td>
&lt;td>5&lt;/td>
&lt;td>The number of identical sms message allowed to be sent to the same recipient.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="code-sample">Code sample&lt;/h2>
&lt;p>The definition takes the typical form below:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#4e9a06">&amp;#34;sms&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;outgoing_service&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;medic-gateway&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;duplicate_limit&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;2&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="duplicate-sms-messages-handling">Duplicate SMS messages handling&lt;/h4>
&lt;p>Every time a service (API or Sentinel) creates an SMS, we cache the recipient, and the message content, along with the current timestamp.
When more than &lt;code>duplicate_limit&lt;/code> messages have been created for the same pair of recipient+content, within the cache time limit, we mark the new message with a &amp;ldquo;duplicate&amp;rdquo; status. Such messages are never sent.
The cache is cleared 30 minutes after the last SMS message for a specific pair was generated.&lt;/p></description></item><item><title>Apps: .token_login</title><link>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/token_login/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/token_login/</guid><description>
&lt;p>Login via SMS settings are defined under the &lt;code>token_login&lt;/code> key, as an object supporting the following properties:&lt;/p>
&lt;h2 id="app_settingsjson-token_login">&lt;code>app_settings.json .token_login&lt;/code>&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>property&lt;/th>
&lt;th>type&lt;/th>
&lt;th>required&lt;/th>
&lt;th>description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>enabled&lt;/td>
&lt;td>Boolean&lt;/td>
&lt;td>yes&lt;/td>
&lt;td>Enables or disables token_login deployment-wide. When this is false, users can&amp;rsquo;t be updated to use token_login and any requests to login with a token link will fail.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>translation_key&lt;/td>
&lt;td>String&lt;/td>
&lt;td>yes&lt;/td>
&lt;td>Translation key for the information (helper) sms message that the user receives, along with their token-login link&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="code-sample">Code sample&lt;/h2>
&lt;p>The definition takes the typical form below:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#4e9a06">&amp;#34;token_login&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;enabled&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;sms.token.login.help&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Apps: .transitions</title><link>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/transitions/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/reference/app-settings/transitions/</guid><description>
&lt;p>When sentinel detects a document has changed it runs transitions against the doc. These transitions can be used to generate a short form patient id or assign a report to a facility.&lt;/p>
&lt;h2 id="configuration">Configuration&lt;/h2>
&lt;p>By default all transitions are disabled. They can be enabled by configuring the &lt;code>transitions&lt;/code> property to have a key with the transitions name and a &lt;code>truthy&lt;/code> value.
As of version 3.12.0 some transitions will partially run on the client for offline users. To opt out from client-side transitions, add a &lt;code>&amp;quot;client_side: false&amp;quot;&lt;/code> property to the transition configuration.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;transitions&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;a&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;b&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;c&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;disable&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">false&lt;/span> &lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;d&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;disable&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span> &lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;e&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;client_side&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">false&lt;/span> &lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>In this example the &lt;code>d&lt;/code> transition will not be applied, &lt;code>a&lt;/code>, &lt;code>b&lt;/code> &lt;code>c&lt;/code> will be applied on the server and on the client, while &lt;code>e&lt;/code> will only be applied on the server.&lt;/p>
&lt;h2 id="available-transitions">Available transitions&lt;/h2>
&lt;p>The following transitions are available and executed in order.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Key&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>maintain_info_document&lt;/td>
&lt;td>Records metadata about the document such as when it was replicated. Enabled by default.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;a href="#update_clinics">update_clinics&lt;/a>&lt;/td>
&lt;td>Adds a contact&amp;rsquo;s info to a new data record. This is used to attribute an incoming SMS message or report to the appropriate contact. The &lt;code>rc_code&lt;/code> value on the contact is used to match to the value of the form field set as the &lt;code>facility_reference&lt;/code> in the &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/forms/#app_settingsjson-forms">JSON form definition&lt;/a>. This matching is useful when reports are sent on behalf of a facility by unknown or various phone numbers. If &lt;code>facility_reference&lt;/code> is not set for a form, the contact match is attempted using the sender&amp;rsquo;s phone number. If a form is not public and a match is not found then the &lt;code>sys.facility_not_found&lt;/code> error is raised. A message will be sent out whenever this error is raised.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;a href="#registration">registration&lt;/a>&lt;/td>
&lt;td>For registering a patient or place to a schedule. Performs some validation and creates the patient document if the patient does not already exist. Can create places (as of 3.8.x). Can assign schedules to places (as of 3.11.x)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;a href="#accept-patient-reports">accept_patient_reports&lt;/a>&lt;/td>
&lt;td>Validates reports about a patient or place and silences relevant reminders.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;a href="#accept-case-reports">accept_case_reports&lt;/a>&lt;/td>
&lt;td>Validates reports about a case, assigns the associated place_uuid, and silences relevant reminders. Available since 3.9.0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;a href="#generate-shortcode-on-contacts">generate_shortcode_on_contacts&lt;/a>&lt;/td>
&lt;td>Automatically generates the &lt;code>patient_id&lt;/code> on all person documents and the &lt;code>place_id&lt;/code> on all place documents. Available since 3.8.x.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;a href="#generate-patient-id-on-people">generate_patient_id_on_people&lt;/a>&lt;/td>
&lt;td>&lt;strong>Deprecated in 3.8.x&lt;/strong> Automatically generates the &lt;code>patient_id&lt;/code> on all person documents. As of 3.8.x, also generates the &lt;code>place_id&lt;/code> on all place documents and is an alias for &lt;code>generate_shortcode_on_contacts&lt;/code>.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>default_responses&lt;/td>
&lt;td>Responds to the message with a confirmation or validation error.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>update_sent_by&lt;/td>
&lt;td>Sets the sent_by field of the report based on the sender&amp;rsquo;s phone number.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>update_sent_forms&lt;/td>
&lt;td>&lt;strong>Deprecated in 3.7.x&lt;/strong> Update sent_forms property on facilities so we can setup reminders for specific forms. &lt;em>As of 3.7.x, reminders no longer require this transition&lt;/em>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;a href="#death_reporting">death_reporting&lt;/a>&lt;/td>
&lt;td>Updates the deceased status of patients.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>conditional_alerts&lt;/td>
&lt;td>Executes the configured condition and sends an alert if the condition is met.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;a href="#multi_report_alerts">multi_report_alerts&lt;/a>&lt;/td>
&lt;td>Similar to conditional_alerts, with more flexible configuration, including using different form types for the same alert.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;a href="#update_notifications">update_notifications&lt;/a>&lt;/td>
&lt;td>&lt;strong>Deprecated in 3.2.x&lt;/strong> Mutes or unmutes scheduled messages based on configuration.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>update_scheduled_reports&lt;/td>
&lt;td>If a report has a month/week/week_number, year and clinic then look for duplicates and update those instead.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>resolve_pending&lt;/td>
&lt;td>Sets the state of pending messages to sent. It is useful during builds where we don&amp;rsquo;t want any outgoing messages queued for sending.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;a href="#muting">muting&lt;/a>&lt;/td>
&lt;td>Implements muting/unmuting actions of people and places. Available since 3.2.x. Is partially applied on the client, as of 3.12.0.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/outbound/">mark_for_outbound&lt;/a>&lt;/td>
&lt;td>Enables outbound pushes. Available since 3.5.x&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;a href="#self_report">self_report&lt;/a>&lt;/td>
&lt;td>Maps patient to sender. Available since 3.9.x&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="transition-configuration-guide">Transition Configuration Guide&lt;/h2>
&lt;p>Guides for how to setup specific transitions.&lt;/p>
&lt;h3 id="multi_report_alerts">multi_report_alerts&lt;/h3>
&lt;p>Send alert messages by SMS when specific conditions are received through reports. More flexible than simple Alerts.&lt;/p>
&lt;p>Example: send SMS to the district manager when 2 CHWs within the same district report cholera or diarrhea symptoms within the last week.&lt;/p>
&lt;p>Understanding the different types of reports used in the configuration:&lt;/p>
&lt;pre>&lt;code> previous suspected_cholera alert was sent
|
| latest_report comes in, suspected_cholera alert is sent
| |
v v
---[---*-o---*--*--o-o---*]-------&amp;gt; time
1 0
&lt;/code>&lt;/pre>&lt;p>&lt;code>[]&lt;/code> : time window&lt;/p>
&lt;p>&lt;code>*&lt;/code> and &lt;code>o&lt;/code> : &lt;code>reports&lt;/code> : any report that came in to the server.&lt;/p>
&lt;p>&lt;code>*&lt;/code> : &lt;code>counted_reports&lt;/code> : reports that came in that passed the &lt;code>is_report_counted&lt;/code> filter function.&lt;/p>
&lt;p>&lt;code>0&lt;/code>, &lt;code>1&lt;/code> : &lt;code>new_reports&lt;/code> : &lt;code>counted_reports&lt;/code> that came in since the previous alert was sent. They haven&amp;rsquo;t been messaged about yet.&lt;/p>
&lt;h4 id="configuration-1">Configuration&lt;/h4>
&lt;pre>&lt;code>&amp;quot;multi_report_alerts&amp;quot; : [
{
&amp;quot;name&amp;quot;: &amp;quot;suspected_cholera&amp;quot;,
&amp;quot;is_report_counted&amp;quot;: &amp;quot;function(report, latest_report) { return latest_report.contact.parent.parent._id === report.contact.parent.parent._id; }&amp;quot;,
&amp;quot;num_reports_threshold&amp;quot;: 2,
&amp;quot;message&amp;quot;: &amp;quot;{{num_counted_reports}} patients with {{alert_name}} in {{time_window_in_days}} days reported at {{new_reports.0.contact.parent.name}}. New reports from: {{new_reports.0.contact.name}}, {{new_reports.1.contact.name}}, {{new_reports.2.contact.name}}.&amp;quot;,
&amp;quot;recipients&amp;quot;: [
&amp;quot;+123456&amp;quot;,
&amp;quot;new_report.contact.phone&amp;quot;, // sender of each report in new_reports
&amp;quot;new_report.contact.parent.parent.contact.phone&amp;quot;, // contact person for the parent place of the sender of each report in new_reports.
// If it's the same for several reports, only one message will be sent (recipient phone numbers are deduplicated before generating messages).
],
&amp;quot;time_window_in_days&amp;quot;: 7,
&amp;quot;forms&amp;quot;: [&amp;quot;C&amp;quot;, &amp;quot;D&amp;quot;] // Only Cholera and Diarrhea forms.
}
]
&lt;/code>&lt;/pre>&lt;p>Note that we are using Mustache templates for our message templates (anything with &lt;code>{{}}&lt;/code>), and they use a &lt;code>.&lt;/code> notation to access items in an array (e.g. &lt;code>new_reports.1&lt;/code>) rather than a &lt;code>[]&lt;/code> notation as in conventional javascript (&lt;code>new_reports[1]&lt;/code>).&lt;/p>
&lt;p>For performance reasons the &lt;code>num_reports_threshold&lt;/code> cannot exceed 100.&lt;/p>
&lt;h3 id="death_reporting">death_reporting&lt;/h3>
&lt;p>Updates patient documents with a &lt;code>date_of_death&lt;/code> field which updates how the patient is displayed in the UI.&lt;/p>
&lt;h4 id="configuration-2">Configuration&lt;/h4>
&lt;p>Configuration is stored in the &lt;code>death_reporting&lt;/code> field of the settings.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Property&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>mark_deceased_forms&lt;/code>&lt;/td>
&lt;td>An array of form codes which will cause patients to be recorded as deceased.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>undo_deceased_forms&lt;/code>&lt;/td>
&lt;td>An array of form codes which will remove the deceased date from the patient. Optional.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>date_field&lt;/code>&lt;/td>
&lt;td>The path to the field in the report document which has the date the patient died. Optional: if not configured it defaults to the reported_date of the report.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h5 id="example">Example&lt;/h5>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#4e9a06">&amp;#34;death_reporting&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;mark_deceased_forms&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;death&amp;#34;&lt;/span> &lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;undo_deceased_forms&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;undo-death&amp;#34;&lt;/span> &lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;date_field&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;fields.death_date&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="registration">Registration&lt;/h3>
&lt;p>Configuration is held at &lt;code>app_settings.registrations&lt;/code>, as a list of objects connecting forms to validations, events and messages.&lt;/p>
&lt;h4 id="events">Events&lt;/h4>
&lt;p>Lists different events.&lt;/p>
&lt;h5 id="on_create">&lt;code>on_create&lt;/code>&lt;/h5>
&lt;p>This is the only supported event.&lt;/p>
&lt;h4 id="triggers">Triggers&lt;/h4>
&lt;h5 id="add_patient">&lt;code>add_patient&lt;/code>&lt;/h5>
&lt;p>Sets the &lt;code>patient_id&lt;/code> on the root of the registration document and creates the person doc if required. Can be configured to either use a provided ID or generate a new unique one.&lt;/p>
&lt;h6 id="external-patient-id">External Patient ID&lt;/h6>
&lt;p>If you are providing the patient id instead of having Sentinel generate you one, name the field in a &lt;code>patient_id_field&lt;/code> key in &lt;code>&amp;quot;params&amp;quot;&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;on_create&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;trigger&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;add_patient&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;params&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;{\&amp;#34;patient_id_field\&amp;#34;: \&amp;#34;external_id\&amp;#34;}&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;bool_expr&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>In this example the provided id would be in &lt;code>fields.external_id&lt;/code> on the registration document.&lt;/p>
&lt;p>&lt;strong>NB:&lt;/strong> this field must not be called &lt;code>patient_id&lt;/code>.
&lt;strong>NB:&lt;/strong> the JSON passed in &lt;code>&amp;quot;params&amp;quot;&lt;/code> should still be a string. Support for raw JSON as shown below exists, but is in beta and may not always work correctly in all situations, because kanso.json does not support it:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;params&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;#34;patient_id_field&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;external_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h6 id="alternative-name-location">Alternative Name Location&lt;/h6>
&lt;p>To provide an alternative location for the patient name, either provide a &lt;code>patient_name_field&lt;/code> in &lt;code>&amp;quot;params&amp;quot;&lt;/code> or provide it directly into the &lt;code>&amp;quot;params&amp;quot;&lt;/code> field as a String:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;params&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;{\&amp;#34;patient_name_field\&amp;#34;: \&amp;#34;full_name\&amp;#34;}&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;params&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;full_name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The first format is required if you wish to also provide other params:&lt;/p>
&lt;h6 id="contact-type">Contact Type&lt;/h6>
&lt;p>If you have changed from the default contact hierarchy you will need to specify which type of contact the registration should create.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;params&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;{ \&amp;#34;contact_type\&amp;#34;: \&amp;#34;patient\&amp;#34; }&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h6 id="specific-parent-as-of-380">Specific Parent &lt;em>as of 3.8.0&lt;/em>&lt;/h6>
&lt;p>By default, the newly created person will have the same parent as the report submitter.
A different parent may be selected by providing a location for the parent id. This field should
contain the &lt;code>place_id&lt;/code> of the place in question.
If the selected parent is invalid - does not exist or does not respect the configured hierarchy&lt;/p>
&lt;ul>
&lt;li>the report is rejected as invalid and the person document is not created. As such
, &lt;code>report_accepted&lt;/code> event should check if the report has a &lt;code>patient&lt;/code> property (or similar).&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json"> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;params&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;{ \&amp;#34;parent_id\&amp;#34;: \&amp;#34;parent_id\&amp;#34; }&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h6 id="events-1">Events&lt;/h6>
&lt;ul>
&lt;li>&lt;code>parent_field_not_provided&lt;/code> - triggered when the report does not have the required parent_id field&lt;/li>
&lt;li>&lt;code>parent_invalid&lt;/code> - triggered when selected parent is invalid (parent document is found and
either does not have a configured type or its type is not configured to be a parent to the
person type to be created)&lt;/li>
&lt;li>&lt;code>parent_not_found&lt;/code> - triggered when selected parent is not found&lt;/li>
&lt;/ul>
&lt;p>The selected parent (if found) can be accessed by using the &lt;code>parent&lt;/code> path in error messages:
&lt;code>Cannot create a person type &amp;quot;patient&amp;quot; under parent {{parent.place_id}}({{parent.contact_type}})&lt;/code>&lt;/p>
&lt;h5 id="add_patient_id">&lt;code>add_patient_id&lt;/code>&lt;/h5>
&lt;p>&lt;strong>Deprecated in favour of &lt;code>add_patient&lt;/code>.&lt;/strong> Previously this only added a &lt;code>patient_id&lt;/code> to the root of the registration form. This functionality has been merged into &lt;code>add_patient&lt;/code>. Now, using this event will result in the same functionality as described in &lt;code>add_patient&lt;/code> above.&lt;/p>
&lt;h5 id="add_expected_date">&lt;code>add_expected_date&lt;/code>&lt;/h5>
&lt;h5 id="add_birth_date">&lt;code>add_birth_date&lt;/code>&lt;/h5>
&lt;h5 id="assign_schedule">&lt;code>assign_schedule&lt;/code>&lt;/h5>
&lt;h5 id="clear_schedule">&lt;code>clear_schedule&lt;/code>&lt;/h5>
&lt;h5 id="add_place-as-of-380">&lt;code>add_place&lt;/code> &lt;em>as of 3.8.0&lt;/em>&lt;/h5>
&lt;p>Sets the &lt;code>place_id&lt;/code> on the root of the registration document and creates the place doc with the
provided type.&lt;/p>
&lt;p>By default, the created place would have the same parent as the submitter. If such a combination is
invalid - for example a contact under a &amp;ldquo;clinic&amp;rdquo; attempts to create a new &amp;ldquo;health_center&amp;rdquo; - the
report will be rejected as errored and the place document will not be created. As such,
&lt;code>report_accepted&lt;/code> event should check if the report has a &lt;code>place&lt;/code> property (or similar).&lt;/p>
&lt;p>The created place does not have a primary contact.
The created place can be accessed by the &lt;code>place&lt;/code> path in messages:
&lt;code>Place {{place.name}}({{place.place_id}}) added to {{place.parent.name}}({{place.parent.place_id}})&lt;/code>&lt;/p>
&lt;h6 id="contact-type-1">Contact Type&lt;/h6>
&lt;p>Specifying the contact type is required, even if not using configurable hierarchies.
The selected contact type must be a configured place type.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;params&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;{ \&amp;#34;contact_type\&amp;#34;: \&amp;#34;clinic\&amp;#34; }&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h6 id="specific-parent">Specific Parent&lt;/h6>
&lt;p>By default, the newly created place will have the same parent as the report submitter.
A different parent may be selected by providing a location for the parent id. This field should
contain the &lt;code>place_id&lt;/code> of the place in question.
If the selected parent is invalid - does not exist or is not an acceptable parent to the
selected type in the configured hierarchy - the report will be rejected as errored.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json"> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;params&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;{ \&amp;#34;parent_id\&amp;#34;: \&amp;#34;parent_id\&amp;#34; }&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h6 id="events-2">Events&lt;/h6>
&lt;ul>
&lt;li>&lt;code>parent_field_not_provided&lt;/code> - triggered when the report does not have the required parent_id field&lt;/li>
&lt;li>&lt;code>parent_invalid&lt;/code> - triggered when selected parent is invalid (parent document is found and
either does not have a configured type or its type is not configured to be a parent to the
place type to be created)&lt;/li>
&lt;li>&lt;code>parent_not_found&lt;/code> - triggered when selected parent is not found&lt;/li>
&lt;/ul>
&lt;p>The selected parent (if found) can be accessed by using the &lt;code>parent&lt;/code> path in error messages:
&lt;code>'Cannot create a place type &amp;quot;health_center&amp;quot; under parent {{parent.place_id}}({{parent.contact_type}})'&lt;/code>&lt;/p>
&lt;h6 id="alternative-name-location-1">Alternative Name Location&lt;/h6>
&lt;p>The created place&amp;rsquo;s name is provided in the &lt;code>place_name&lt;/code> field by default.
To provide an alternative location for the place name, provide a &lt;code>place_name_field&lt;/code> in
&lt;code>&amp;quot;params&amp;quot;&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;params&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;{\&amp;#34;place_name_field\&amp;#34;: \&amp;#34;clinic_name\&amp;#34;}&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h5 id="add_case-as-of-390">&lt;code>add_case&lt;/code> &lt;em>as of 3.9.0&lt;/em>&lt;/h5>
&lt;p>Sets the &lt;code>case_id&lt;/code> on the root of the registration document.&lt;/p>
&lt;h3 id="generate-shortcode-on-contacts">Generate Shortcode on Contacts&lt;/h3>
&lt;p>No custom configuration for &lt;code>generate_shortcode_on_contacts&lt;/code>.&lt;/p>
&lt;h3 id="generate-patient-id-on-people">Generate Patient ID On People&lt;/h3>
&lt;p>&lt;strong>Deprecated since 3.8.x&lt;/strong> in favor of &lt;code>generate_shortcode_on_contacts&lt;/code>&lt;/p>
&lt;p>No custom configuration for &lt;code>generate_patient_id_on_people&lt;/code>.&lt;/p>
&lt;h3 id="update_notifications">update_notifications&lt;/h3>
&lt;p>&lt;strong>Deprecated in favor of &lt;a href="#muting">Muting&lt;/a>&lt;/strong>&lt;/p>
&lt;h4 id="configuration-3">Configuration&lt;/h4>
&lt;pre>&lt;code>&amp;quot;notifications&amp;quot;: {
&amp;quot;off_form&amp;quot;: &amp;quot;OFF&amp;quot;,
&amp;quot;on_form&amp;quot;: &amp;quot;ON&amp;quot;,
&amp;quot;validations&amp;quot;: {
&amp;quot;join_responses&amp;quot;: true,
&amp;quot;list&amp;quot;: []
},
&amp;quot;messages&amp;quot;: [
{
&amp;quot;translation_key&amp;quot;: &amp;quot;&amp;quot;,
&amp;quot;event_type&amp;quot;: &amp;quot;on_mute&amp;quot;,
&amp;quot;recipient&amp;quot;: &amp;quot;reporting_unit&amp;quot;
},
{
&amp;quot;translation_key&amp;quot;: &amp;quot;&amp;quot;,
&amp;quot;event_type&amp;quot;: &amp;quot;on_unmute&amp;quot;,
&amp;quot;recipient&amp;quot;: &amp;quot;reporting_unit&amp;quot;
},
{
&amp;quot;translation_key&amp;quot;: &amp;quot;&amp;quot;,
&amp;quot;event_type&amp;quot;: &amp;quot;patient_not_found&amp;quot;,
&amp;quot;recipient&amp;quot;: &amp;quot;reporting_unit&amp;quot;
}
]
}
&lt;/code>&lt;/pre>&lt;h3 id="muting">Muting&lt;/h3>
&lt;p>Implements muting/unmuting of persons and places. Supports multiple forms for each action, for webapp and sms workflows.&lt;/p>
&lt;h5 id="muting-action">Muting action&lt;/h5>
&lt;p>As of 3.12.0, client-side muting only runs on new reports or new contacts, before they are saved in the local database:&lt;/p>
&lt;ul>
&lt;li>updates the target contact and all its descendants&lt;sup>[10]&lt;/sup>, setting the &lt;code>muted&lt;/code> property equal to the device&amp;rsquo;s current &lt;code>date&lt;/code> in ISO format&lt;sup>[8]&lt;/sup>.&lt;/li>
&lt;li>adds/updates the &lt;code>muting_history&lt;/code>&lt;sup>[11]&lt;/sup> property on every updated contact, to keep track of all the updates that have been processed client-side, as well as the last known server-side state of the contact and sets the &lt;code>last_update&lt;/code> property to &lt;code>client_side&lt;/code>&lt;/li>
&lt;li>updates the report doc to add a &lt;code>client_side_transitions&lt;/code> property to track which transitions have run client-side&lt;/li>
&lt;/ul>
&lt;p>Server-side:&lt;/p>
&lt;ul>
&lt;li>updates the target contact and all its descendants&lt;sup>[1]&lt;/sup>, setting the &lt;code>muted&lt;/code> property equal to the current &lt;code>date&lt;/code> in ISO format&lt;sup>[2]&lt;/sup>. If the contact was already muted by a client, the &lt;code>muted&lt;/code> date will be overwritten. The client-side &lt;code>muting_history&lt;/code> will have a copy of the client-side muting date.&lt;/li>
&lt;li>adds a &lt;code>muting_history&lt;/code> entry to Sentinel &lt;code>info&lt;/code> docs for every updated contact&lt;sup>[7]&lt;/sup>&lt;/li>
&lt;li>updates all connected registrations&lt;sup>[3]&lt;/sup>, changing the state of all unsent&lt;sup>[4]&lt;/sup> &lt;code>scheduled_tasks&lt;/code> to &lt;code>muted&lt;/code>&lt;/li>
&lt;li>as of 3.12.0, updates the contact&amp;rsquo;s client-side &lt;code>muting_history&lt;/code> to set the &lt;code>last_update&lt;/code> property to &lt;code>server_side&lt;/code> and update the &lt;code>server_side&lt;/code> section with the current date and muted state.&lt;/li>
&lt;li>as of 3.12.0, if the report was processed client-side, all &amp;ldquo;following&amp;rdquo; muting/unmuting events that have affected the same contacts will be replayed. This means the transition &lt;em>could&lt;/em> end up running multiple times over the same report&lt;sup>[9]&lt;/sup>.&lt;/li>
&lt;/ul>
&lt;h5 id="unmuting-action">Unmuting action:&lt;/h5>
&lt;p>As of 3.12.0, client-side unmuting only runs on new reports before they are saved in the local database:&lt;/p>
&lt;ul>
&lt;li>updates the target contact&amp;rsquo;s topmost muted ancestor&lt;sup>[10][5]&lt;/sup> and all its descendants, removing the &lt;code>muted&lt;/code> property.&lt;/li>
&lt;li>adds/updates the &lt;code>muting_history&lt;/code>&lt;sup>[9]&lt;/sup> property on every updated contact, sets the last known server-side state of the contact and sets the &lt;code>last_update&lt;/code> property to &lt;code>client_side&lt;/code>&lt;/li>
&lt;li>updates the report doc to add a &lt;code>client_side_transitions&lt;/code> property to track which transitions have run client-side&lt;/li>
&lt;/ul>
&lt;p>Server-side:&lt;/p>
&lt;ul>
&lt;li>updates the target contact&amp;rsquo;s topmost muted ancestor&lt;sup>[1][5]&lt;/sup> and all its descendants, removing the &lt;code>muted&lt;/code> property&lt;/li>
&lt;li>adds a &lt;code>muting_history&lt;/code> entry to Sentinel &lt;code>info&lt;/code> docs for every updated contact&lt;sup>[7]&lt;/sup>&lt;/li>
&lt;li>updates all connected registrations&lt;sup>[3]&lt;/sup>, changing the state of all present/future&lt;sup>[6]&lt;/sup> &lt;code>muted&lt;/code> &lt;code>scheduled_tasks&lt;/code> to &lt;code>scheduled&lt;/code>&lt;/li>
&lt;li>as of 3.12.0, updates the contact&amp;rsquo;s client-side &lt;code>muting_history&lt;/code> to set the &lt;code>last_update&lt;/code> property to &lt;code>server_side&lt;/code> and update the &lt;code>server_side&lt;/code> section with the current date and muted state.&lt;/li>
&lt;li>as of 3.12.0, if the report was processed client-side, all &amp;ldquo;following&amp;rdquo; muting/unmuting events that have affected the same contacts will be replayed. This means the transition &lt;em>could&lt;/em> end up running multiple times over the same report&lt;sup>[10]&lt;/sup>.&lt;/li>
&lt;/ul>
&lt;p>[1] Contacts that are already in the correct state are skipped. This applies to updates to the contact itself, updates to the Sentinel &lt;code>muting_history&lt;/code> and to the connected registrations (registrations of a contact that is already in the correct state will not be updated).&lt;br>
[2] The date represents the moment Sentinel has processed the muting action&lt;br>
[3] target contact and descendants&amp;rsquo; registrations&lt;br>
[4] &lt;code>scheduled_tasks&lt;/code> being in either &lt;code>scheduled&lt;/code> or &lt;code>pending&lt;/code> state&lt;br>
[5] Because the muted state is inherited, unmuting cascades upwards to the highest level muted ancestor. If none of the ancestors is muted, unmuting cascades downwards only.&lt;br>
[6] &lt;code>scheduled_tasks&lt;/code> which are due today or in the future. All &lt;code>scheduled_tasks&lt;/code> with a due date in the past will remain unchanged.&lt;br>
[8] The date represents the device&amp;rsquo;s date when the report is processed.&lt;br>
[9] Replaying is required due to how PouchDB &amp;lt;-&amp;gt; CouchDB synchronization does not respect the order in which the documents have been created, to ensure that contacts end up in the correct muted state. &lt;br>
[10] The updated contacts are limited to the contacts available on the device.&lt;/p>
&lt;h5 id="7-muting-history">[7] Muting history&lt;/h5>
&lt;p>Each time the &lt;code>muted&lt;/code> state of a contact changes, an entry is added to a &lt;code>muting_history&lt;/code> list saved in Sentinel &lt;code>info&lt;/code> docs (stored as an array property with the same name).
Entries in &lt;code>muting_history&lt;/code> contain the following information:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Property&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>muted&lt;/td>
&lt;td>Boolean representing the muted state&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>date&lt;/td>
&lt;td>Date in ISO Format&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>report_id&lt;/td>
&lt;td>An &lt;code>_id&lt;/code> reference to the report that triggered the action&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h5 id="11-client-side-muting-history-as-of-3120">[11] Client-side Muting history as of 3.12.0&lt;/h5>
&lt;p>Each time the client changes the &lt;code>muted&lt;/code> state of a contact, an entry is added to a &lt;code>muting_history&lt;/code> property on the contact&amp;rsquo;s doc. The &lt;code>last_update&lt;/code> entry is also changed to &lt;code>client_side&lt;/code>.
The &lt;code>muting_history&lt;/code> property contains the following information:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Property&lt;/th>
&lt;th>Values&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>last_update&lt;/td>
&lt;td>&lt;code>server_side&lt;/code> or &lt;code>client_side&lt;/code>&lt;/td>
&lt;td>Updated every time a service updates the contact, with the corresponding value&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>server_side&lt;/td>
&lt;td>Object&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>server_side.muted&lt;/td>
&lt;td>&lt;code>true&lt;/code> or &lt;code>false&lt;/code>&lt;/td>
&lt;td>Last known server-side muting state&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>server_side.date&lt;/td>
&lt;td>Date in ISO format&lt;/td>
&lt;td>Last known server-side muting/unmuting date&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>client_side&lt;/td>
&lt;td>Array&lt;/td>
&lt;td>Client-side muting/unmuting events list. &lt;br> New events are pushed at the end of this list and it should never be re-ordered. &lt;br>The list represents the &amp;ldquo;chronological&amp;rdquo; order in which the reports that triggered muting were created.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>client_side[].muted&lt;/td>
&lt;td>&lt;code>true&lt;/code> or &lt;code>false&lt;/code>&lt;/td>
&lt;td>Client-side muting state&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>client_side[].date&lt;/td>
&lt;td>Date in ISO format&lt;/td>
&lt;td>Client-side muting/unmuting date&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>client_side[].report_id&lt;/td>
&lt;td>uuid&lt;/td>
&lt;td>The uuid of the muting/unmuting report that triggered the update&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="configuration-4">Configuration&lt;/h4>
&lt;p>Configuration is stored in the &lt;code>muting&lt;/code> field of &lt;code>app_settings.json&lt;/code>.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Property&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>mute_forms&lt;/code>&lt;/td>
&lt;td>An array of form codes which will trigger muting. &lt;strong>Required&lt;/strong>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>unmute_forms&lt;/code>&lt;/td>
&lt;td>An array of form codes which will trigger unmuting. Optional.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>validations&lt;/code>&lt;/td>
&lt;td>List of form fields validations. All mute &amp;amp; unmute forms will be subjected to these validation rules. Invalid forms will not trigger muting/unmuting actions. Optional.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messages&lt;/code>&lt;/td>
&lt;td>List of tasks/errors that will be created, determined by &lt;code>event_type&lt;/code>. Optional.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Supported &lt;code>events_types&lt;/code> are:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Event Type&lt;/th>
&lt;th>Trigger&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>mute&lt;/code>&lt;/td>
&lt;td>On successful &lt;code>mute&lt;/code> action&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>unmute&lt;/code>&lt;/td>
&lt;td>On successful &lt;code>unmute&lt;/code> action&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>already_muted&lt;/code>&lt;/td>
&lt;td>On &lt;code>mute&lt;/code> action, when target contact is already muted&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>already_unmuted&lt;/code>&lt;/td>
&lt;td>On &lt;code>unmute&lt;/code> action, when target contact is already unmuted&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>contact_not_found&lt;/code>&lt;/td>
&lt;td>Either mute or unmute actions when target contact is not found&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
&lt;p>When muting events are processed both client-side and server-side, there is no guarantee that the state of the database will be the same between the two processing events. Some possible cases where the data is changed in significant ways, that will affect the final muting state are:&lt;/p>
&lt;ul>
&lt;li>updated muting settings between client and server processing of the same report / contact&lt;/li>
&lt;li>editing the muting/unmuting reports before they are synced, but after the transition ran locally, that either change the target contact or change the validity of the report&lt;/li>
&lt;li>deleting muting/unmuting reports before they are synced&lt;/li>
&lt;li>validation rules that depend on database data (for example using the &amp;ldquo;exists&amp;rdquo; rule, which will run over different data sets, a report could be valid for the client but invalid for the server and the other way around).&lt;/li>
&lt;li>conflicts that overwrite &lt;code>muting_history&lt;/code> for contacts&lt;/li>
&lt;li>delayed sync for some docs (either contacts or reports) could exacerbate the above because of the &amp;ldquo;replay&amp;rdquo; behavior.&lt;/li>
&lt;/ul>
&lt;/div>
&lt;h5 id="example-1">Example&lt;/h5>
&lt;pre>&lt;code>&amp;quot;muting&amp;quot;: {
&amp;quot;mute_forms&amp;quot;: [&amp;quot;mute_person&amp;quot;, &amp;quot;mute_clinic&amp;quot;],
&amp;quot;unmute_forms&amp;quot;: [&amp;quot;unmute_person&amp;quot;, &amp;quot;unmute_clinic&amp;quot;],
&amp;quot;validations&amp;quot;: {
&amp;quot;join_responses&amp;quot;: true,
&amp;quot;list&amp;quot;: []
},
&amp;quot;messages&amp;quot;: [
{
&amp;quot;translation_key&amp;quot;: &amp;quot;&amp;quot;,
&amp;quot;event_type&amp;quot;: &amp;quot;mute&amp;quot;,
&amp;quot;recipient&amp;quot;: &amp;quot;reporting_unit&amp;quot;
},
{
&amp;quot;translation_key&amp;quot;: &amp;quot;&amp;quot;,
&amp;quot;event_type&amp;quot;: &amp;quot;unmute&amp;quot;,
&amp;quot;recipient&amp;quot;: &amp;quot;reporting_unit&amp;quot;
},
{
&amp;quot;translation_key&amp;quot;: &amp;quot;&amp;quot;,
&amp;quot;event_type&amp;quot;: &amp;quot;already_muted&amp;quot;,
&amp;quot;recipient&amp;quot;: &amp;quot;reporting_unit&amp;quot;
},
{
&amp;quot;translation_key&amp;quot;: &amp;quot;&amp;quot;,
&amp;quot;event_type&amp;quot;: &amp;quot;already_unmuted&amp;quot;,
&amp;quot;recipient&amp;quot;: &amp;quot;reporting_unit&amp;quot;
},
{
&amp;quot;translation_key&amp;quot;: &amp;quot;&amp;quot;,
&amp;quot;event_type&amp;quot;: &amp;quot;contact_not_found&amp;quot;,
&amp;quot;recipient&amp;quot;: &amp;quot;reporting_unit&amp;quot;
}
]
}
&lt;/code>&lt;/pre>&lt;h3 id="accept-patient-reports">Accept patient reports&lt;/h3>
&lt;p>Allow reporting about patient and place centric workflows by&lt;/p>
&lt;ul>
&lt;li>validating the report,&lt;/li>
&lt;li>assigning the relevant subject (patient or place) to the report if a registration with the given shortcode (patient_id or place_id) exists,&lt;/li>
&lt;li>clearing messages on the registration, and&lt;/li>
&lt;li>generating response messages on the report.&lt;/li>
&lt;/ul>
&lt;h4 id="example-2">Example&lt;/h4>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#4e9a06">&amp;#34;transitions&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;accept_patient_reports&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#a40000">,&lt;/span>
&lt;span style="color:#4e9a06">&amp;#34;registrations&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;form&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;P&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;events&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;on_create&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;trigger&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;assign_schedule&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;params&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;ANC Reminders&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;bool_expr&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;!doc.fields.last_menstrual_period || !(/^[0-9]+$/.test(doc.fields.last_menstrual_period))&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}]&lt;/span>
&lt;span style="color:#000;font-weight:bold">}]&lt;/span>&lt;span style="color:#a40000">,&lt;/span>
&lt;span style="color:#4e9a06">&amp;#34;schedules&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;ANC Reminders&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;schedule.anc_no_lmp&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;summary&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;description&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;start_from&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;reported_date&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;messages&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[]&lt;/span>
&lt;span style="color:#000;font-weight:bold">}]&lt;/span>&lt;span style="color:#a40000">,&lt;/span>
&lt;span style="color:#4e9a06">&amp;#34;patient_reports&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;form&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;pregnancy_visit&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;silence_type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;ANC Reminders&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;silence_for&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;8 days&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;fields&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[],&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;validations&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;messages&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;messages.pregnancy_visit&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;event_type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;report_accepted&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;recipient&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;clinic&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}]&lt;/span>
&lt;span style="color:#000;font-weight:bold">}]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="accept-case-reports">Accept case reports&lt;/h3>
&lt;p>Allow reporting about case centric workflows by&lt;/p>
&lt;ul>
&lt;li>validating the report configuration documentation,&lt;/li>
&lt;li>assigning the relevant place to the report if a registration with the given case_id exists,&lt;/li>
&lt;li>clearing messages on the registration, and&lt;/li>
&lt;li>generating response messages on the report.&lt;/li>
&lt;/ul>
&lt;h4 id="example-3">Example&lt;/h4>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#4e9a06">&amp;#34;registrations&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;form&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;8&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;events&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;on_create&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;trigger&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;add_case&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}]&lt;/span>
&lt;span style="color:#000;font-weight:bold">}]&lt;/span>&lt;span style="color:#a40000">,&lt;/span>
&lt;span style="color:#4e9a06">&amp;#34;accept_case_reports&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;form&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;SIGNOFF&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;validations&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;messages&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;event_type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;report_accepted&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;bool_expr&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;some expression&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;message&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;some message&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;recipient&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;some recipients&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}]&lt;/span>
&lt;span style="color:#000;font-weight:bold">}]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="self_report">self_report&lt;/h3>
&lt;p>Updates a &lt;code>data_record&lt;/code> to set its patient to its sender. The resulting doc will have &lt;code>fields.patient_uuid&lt;/code> and &lt;code>fields.patient_id&lt;/code> filled with the sender&amp;rsquo;s information. Provides hydrated patient information to subsequent transitions.
The &lt;code>sender&lt;/code> is the contact associated with the phone number that sent the original SMS.&lt;br>
If a doc already contains a &lt;code>patient&lt;/code> field, does not have a sender or its &lt;code>form&lt;/code> is not configured to be enabled for this transition, it will be ignored.&lt;/p>
&lt;h4 id="configuration-5">Configuration&lt;/h4>
&lt;p>Configuration is stored in the &lt;code>self_report&lt;/code> field of &lt;code>app_settings.json&lt;/code> as a list of objects connecting forms to messages.
Every object should have this structure:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Property&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>form&lt;/code>&lt;/td>
&lt;td>Form code. &lt;strong>Required&lt;/strong>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messages&lt;/code>&lt;/td>
&lt;td>List of tasks/errors that will be created, determined by &lt;code>event_type&lt;/code>. Optional.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Supported &lt;code>events_types&lt;/code> are:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Event Type&lt;/th>
&lt;th>Trigger&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>report_accepted&lt;/code>&lt;/td>
&lt;td>On successful sender updating&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>sender_not_found&lt;/code>&lt;/td>
&lt;td>Sender not found&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h5 id="example-4">Example&lt;/h5>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#4e9a06">&amp;#34;self_report&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;form&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;FORM&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;messages&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;event_type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;report_accepted&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;recipient&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;reporting_unit&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;messages.form.report_accepted&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;event_type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;sender_not_found&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;recipient&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;reporting_unit&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;messages.form.sender_not_found&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;form&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;OTHER&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;messages&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;event_type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;report_accepted&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;recipient&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;reporting_unit&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;messages.other.report_accepted&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;event_type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;sender_not_found&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;recipient&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;reporting_unit&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;messages.other.sender_not_found&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="update_clinics">update_clinics&lt;/h3>
&lt;p>Adds a contact’s info to a data record so as to attribute an incoming SMS message or report to the appropriate contact.&lt;/p>
&lt;h4 id="configuration-6">Configuration&lt;/h4>
&lt;p>As of version 3.12 you can add configuration to send a message whenever a contact match fails while running this transition. Configuration is stored in the &lt;code>update_clinics&lt;/code> field of app_settings.json as a list of objects connecting forms to messages. Every object should have this structure:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Property&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>form&lt;/code>&lt;/td>
&lt;td>Form code.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>messages&lt;/code>&lt;/td>
&lt;td>List of tasks/errors that will be created, determined by &lt;code>event_type&lt;/code>.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Supported &lt;code>events_types&lt;/code> are:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Event Type&lt;/th>
&lt;th>Trigger&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>sys.facility_not_found&lt;/code>&lt;/td>
&lt;td>Facility not found&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>If this configuration is not set then the message defaults to what is set in the &lt;code>messages.generic.sys.facility_not_found&lt;/code> key.&lt;/p>
&lt;h5 id="example-5">Example&lt;/h5>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#4e9a06">&amp;#34;update_clinics&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;form&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;FORM&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;messages&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;event_type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;sys.facility_not_found&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;recipient&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;reporting_unit&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;sys.facility_not_found&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;form&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;OTHER&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;messages&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;event_type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;sys.facility_not_found&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;recipient&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;reporting_unit&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;messages.other.facility_not_found&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Apps: app</title><link>https://docs.communityhealthtoolkit.org/apps/reference/forms/app/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/reference/forms/app/</guid><description>
&lt;p>App forms are used for care guides within the web app, whether accessed in browser or via the Android app. When a user completes an app form, the contents are saved in the database with the type &lt;code>data_record&lt;/code>. These docs are known in the app as &lt;a href="https://docs.communityhealthtoolkit.org/apps/features/reports/">Reports&lt;/a>.&lt;/p>
&lt;p>App forms are defined by the following files:&lt;/p>
&lt;ul>
&lt;li>A XML form definition using a CHT-enhanced ODK XForm format&lt;/li>
&lt;li>A XLSForm form definition, easier to write and converts to the XForm (optional)&lt;/li>
&lt;li>Meta information in the &lt;code>{form_name}.properties.json&lt;/code> file (optional)&lt;/li>
&lt;li>Media files in the &lt;code>{form_name}-media&lt;/code> directory (optional). How to &lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/forms/multimedia/">include multimedia files&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h2 id="xform">XForm&lt;/h2>
&lt;p>A CHT-enhanced version of the ODK XForm standard is supported.&lt;/p>
&lt;p>Data needed during the completion of the form (eg patient&amp;rsquo;s name, prior information) is passed into the &lt;code>inputs&lt;/code> group. Reports that have at least one of &lt;code>place_id&lt;/code>, &lt;code>patient_id&lt;/code>, and &lt;code>patient_uuid&lt;/code> at the top level will be associated with that contact.&lt;/p>
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/contact-page/#care-guides">Passing contact data to care guides&lt;/a>&lt;/p>
&lt;p>A typical form ends with a summary group (eg &lt;code>group_summary&lt;/code>, or &lt;code>group_review&lt;/code>) where important information is shown to the user before they submit the form.&lt;/p>
&lt;p>In between the &lt;code>inputs&lt;/code> and the closing group is the form flow - a collection of questions that can be grouped into pages. All data fields submitted with a form are stored, but often important information that will need to be accessed from the form is brought to the top level. To make sure forms are properly associated to a contact, make sure at least one of &lt;code>place_id&lt;/code>, &lt;code>patient_id&lt;/code>, and &lt;code>patient_uuid&lt;/code> is stored at the top level of the form.&lt;/p>
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/design/best-practices/#content-and-layout">Content and Layout&lt;/a>&lt;/p>
&lt;h2 id="xlsform">XLSForm&lt;/h2>
&lt;p>Since writing raw XML can be tedious, we suggest creating the forms using the &lt;a href="http://xlsform.org/">XLSForm standard&lt;/a>, and using the &lt;a href="https://github.com/medic/cht-conf">cht-conf&lt;/a> command line configurer tool to &lt;a href="#build">convert them to XForm format&lt;/a>.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>type&lt;/th>
&lt;th>name&lt;/th>
&lt;th>label&lt;/th>
&lt;th>relevant&lt;/th>
&lt;th>appearance&lt;/th>
&lt;th>calculate&lt;/th>
&lt;th>&amp;hellip;&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>inputs&lt;/td>
&lt;td>Inputs&lt;/td>
&lt;td>./source = &amp;lsquo;user&amp;rsquo;&lt;/td>
&lt;td>field-list&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hidden&lt;/td>
&lt;td>source&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hidden&lt;/td>
&lt;td>source_id&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hidden&lt;/td>
&lt;td>task_id&lt;/td>
&lt;td>Task_ID&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>contact&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>db:person&lt;/td>
&lt;td>_id&lt;/td>
&lt;td>Patient ID&lt;/td>
&lt;td>&lt;/td>
&lt;td>db-object&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>string&lt;/td>
&lt;td>patient_id&lt;/td>
&lt;td>Medic ID&lt;/td>
&lt;td>&lt;/td>
&lt;td>hidden&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>string&lt;/td>
&lt;td>name&lt;/td>
&lt;td>Patient Name&lt;/td>
&lt;td>&lt;/td>
&lt;td>hidden&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>calculate&lt;/td>
&lt;td>_id&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>../inputs/contact/_id&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>calculate&lt;/td>
&lt;td>patient_id&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>../inputs/contact/patient_id&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>calculate&lt;/td>
&lt;td>name&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>../inputs/contact/name&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>group_summary&lt;/td>
&lt;td>Summary&lt;/td>
&lt;td>&lt;/td>
&lt;td>field-list summary&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>note&lt;/td>
&lt;td>r_patient_info&lt;/td>
&lt;td>**${patient_name}** ID: ${r_patient_id}&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>note&lt;/td>
&lt;td>r_followup&lt;/td>
&lt;td>Follow Up &amp;lt;i class=&amp;quot;fa fa-flag&amp;rdquo;&amp;gt;&amp;lt;/i&amp;gt;&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>note&lt;/td>
&lt;td>r_followup_note&lt;/td>
&lt;td>${r_followup_instructions}&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>Note:&lt;/strong> If the form uses a file picker to upload any type of file, and it is accessed by using CHT Android, then include the &lt;code>READ_EXTERNAL_STORAGE&lt;/code> permission in order to access the files in the device. To enable this permission add the following line in the branded app&amp;rsquo;s &lt;code>AndroidManifest.xml&lt;/code>.&lt;/p>
&lt;pre>&lt;code>&amp;lt;uses-permission android:name=&amp;quot;android.permission.READ_EXTERNAL_STORAGE&amp;quot;/&amp;gt;
&lt;/code>&lt;/pre>&lt;h3 id="supported-xlsform-meta-fields">Supported XLSForm Meta Fields&lt;/h3>
&lt;p>&lt;a href="http://xlsform.org/">XLSForm&lt;/a> has a number of &lt;a href="https://xlsform.org/en/#metadata">data type options&lt;/a> available for meta data collection, of which the following are supported in CHT app forms:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>element&lt;/th>
&lt;th>description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>start&lt;/code>&lt;/td>
&lt;td>A timestamp of when the form entry was started, which occurs when the form is fully loaded.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>end&lt;/code>&lt;/td>
&lt;td>A timestamp of when the form entry ended, which is when the user hits the Submit button.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>today&lt;/code>&lt;/td>
&lt;td>Day on which the form entry was started.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="xpath">XPath&lt;/h2>
&lt;p>Calculations are achieved within app forms using XPath statements in the &amp;ldquo;calculate&amp;rdquo; field of XForms and XLSForms. CHT apps support XPath from the &lt;a href="https://getodk.github.io/xforms-spec">ODK XForm spec&lt;/a>, which is based on a subset of &lt;a href="https://www.w3.org/TR/1999/REC-xpath-19991116/">XPath 1.0&lt;/a>, and is evaluated by &lt;a href="https://github.com/medic/openrosa-xpath-evaluator">&lt;code>medic/openrosa-xpath-evaluator&lt;/code>&lt;/a>. The ODK XForm documentation provides useful notes about the available &lt;a href="https://getodk.github.io/xforms-spec/#xpath-operators">operators&lt;/a> and &lt;a href="https://getodk.github.io/xforms-spec/#xpath-functions">functions&lt;/a>. Additionally, &lt;a href="#cht-xpath-functions">CHT specific functions&lt;/a> are available for forms in CHT apps.&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
The &lt;code>+&lt;/code> operator for string concatenation is deprecated and will be removed in a future version. You are strongly encouraged to use the &lt;a href="https://getodk.github.io/xforms-spec/#fn:concat">&lt;code>concat()&lt;/code>&lt;/a> function instead.
&lt;/div>
&lt;h2 id="cht-xform-widgets">CHT XForm Widgets&lt;/h2>
&lt;p>Some XForm widgets have been added or modified for use in the app:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Bikram Sambat Datepicker&lt;/strong>: Calendar widget using Bikram Sambat calendar. Used by default for appropriate languages. (See also: &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/forms/app/#to-bikram-sambat">&lt;code>to-bikram-sambat&lt;/code> xPath function&lt;/a>)&lt;/li>
&lt;/ul>
&lt;div class="alert alert-primary" role="alert">
A handy tool for converting Gregorian dates to Bikram Sambat is available &lt;a href="https://docs.communityhealthtoolkit.org/bikram-sambat/">here&lt;/a>.
&lt;/div>
&lt;ul>
&lt;li>&lt;strong>Countdown Timer&lt;/strong>: A visual timer widget that starts when tapped/clicked, and has an audible alert when done. To use it create a &lt;code>note&lt;/code> field with an &lt;code>appearance&lt;/code> set to &lt;code>countdown-timer&lt;/code>. The duration of the timer is the field&amp;rsquo;s value, which can be set in the XLSForm&amp;rsquo;s &lt;code>default&lt;/code> column. If this value is not set, the timer will be set to 60 seconds.&lt;/li>
&lt;li>&lt;strong>Contact Selector&lt;/strong>: Select a contact, such as a person or place, and save their UUID (and/or additional data) in the report. See &lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/forms/form-inputs/#contact-selector">the documentation&lt;/a> for more information.&lt;/li>
&lt;li>&lt;strong>Rapid Diagnostic Test capture&lt;/strong>: Take a picture of a Rapid Diagnotistic Test and save it with the report. Works with &lt;a href="https://github.com/medic/rdt-capture/">rdt-capture Android application&lt;/a>. To use create a string field with appearance &lt;code>mrdt-verify&lt;/code>.&lt;/li>
&lt;li>&lt;strong>Display Base64 Image&lt;/strong>: Available in +3.13.0. To display an image based on a field containing the Base64 encode value, add the appearance &lt;code>display-base64-image&lt;/code> to a field type &lt;code>text&lt;/code>.&lt;/li>
&lt;li>&lt;strong>Android App Launcher&lt;/strong>: Available in +3.13.0 and in Android device only. A widget to launch an Android app that receives and sends data back to an app form in CHT-Core. See more details in the &lt;a href="#android-app-launcher">Android App Launcher&lt;/a>.&lt;/li>
&lt;/ul>
&lt;p>The code for these widgets can be found in the &lt;a href="https://github.com/medic/cht-core/tree/master/webapp/src/js/enketo/widgets">CHT Core Framework repository&lt;/a>.&lt;/p>
&lt;h3 id="android-app-launcher">Android App Launcher&lt;/h3>
&lt;p>&lt;em>Available in +3.13.0&lt;/em>&lt;/p>
&lt;p>This widget requires the &lt;code>cht-android&lt;/code> app in order to work, and will be disabled for users running the CHT in a browser. This widget requires the &lt;code>READ_EXTERNAL_STORAGE&lt;/code> permission in CHT Android to work properly, to enable this permission add the following line in the branded app&amp;rsquo;s &lt;code>AndroidManifest.xml&lt;/code>.&lt;/p>
&lt;pre>&lt;code>&amp;lt;uses-permission android:name=&amp;quot;android.permission.READ_EXTERNAL_STORAGE&amp;quot;/&amp;gt;
&lt;/code>&lt;/pre>&lt;p>Use the Android App Launcher widget in a form to configure an intent to launch an Android app installed in the mobile device. The widget will send values from input fields type &lt;code>text&lt;/code> to the app and will assign the app&amp;rsquo;s response into output fields type &lt;code>text&lt;/code>. The only supported field type is &lt;code>text&lt;/code>. The widget will automatically display a button to launch the app.&lt;/p>
&lt;p>To define the widget, create a &lt;code>group&lt;/code> with the appearance &lt;code>android-app-launcher&lt;/code>, then define the &lt;a href="https://developer.android.com/reference/android/content/Intent">Android intent&lt;/a> fields with type &lt;code>text&lt;/code>. The fields &lt;code>action&lt;/code>, &lt;code>category&lt;/code>, &lt;code>type&lt;/code>, &lt;code>uri&lt;/code>, &lt;code>packageName&lt;/code> and &lt;code>flags&lt;/code> are optional. Every Android app has specific ways of launching with intents, so check the app&amp;rsquo;s documentation and assign the corresponding values in the &lt;code>default&lt;/code> column. See example below:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>type&lt;/th>
&lt;th>name&lt;/th>
&lt;th>label&lt;/th>
&lt;th>appearance&lt;/th>
&lt;th>repeat_count&lt;/th>
&lt;th>default&lt;/th>
&lt;th>&amp;hellip;&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>camara-app&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>android-app-launcher&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>action&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>android.media.action.IMAGE_CAPTURE&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>category&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>type&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>uri&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>packageName&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>flags&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>camara-app&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>To define the widget&amp;rsquo;s input fields and send data as Android Intent&amp;rsquo;s &lt;code>extras&lt;/code>, create a group inside the widget with the appearance &lt;code>android-app-inputs&lt;/code>. In order to assign the app&amp;rsquo;s response to the widget&amp;rsquo;s output fields, create a group with the appearance &lt;code>android-app-outputs&lt;/code>.&lt;/p>
&lt;p>&lt;strong>Important to remember:&lt;/strong> The fields inside the input and the output groups should to match in name and location to what the Android app receives and returns, otherwise the communication between the widget and the Android app won&amp;rsquo;t work properly.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>type&lt;/th>
&lt;th>name&lt;/th>
&lt;th>label&lt;/th>
&lt;th>appearance&lt;/th>
&lt;th>repeat_count&lt;/th>
&lt;th>default&lt;/th>
&lt;th>&amp;hellip;&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>camara-app&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>android-app-launcher&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>action&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>android.media.action.IMAGE_CAPTURE&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>camara-app-inputs&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>android-app-inputs&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>location&lt;/td>
&lt;td>Location&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>destination&lt;/td>
&lt;td>Destination&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>camara-app-inputs&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>camara-app-outputs&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>android-app-outputs&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>picture&lt;/td>
&lt;td>Picture&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>date&lt;/td>
&lt;td>Date&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>camara-app-outputs&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>camara-app&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>To instruct the widget to process nested data objects, create a new group inside the input or the output group with the appearance &lt;code>android-app-object&lt;/code>. Objects cannot be assigned to a field, it should be a group with fields to map the properties to fields that share the same name.&lt;/p>
&lt;p>&lt;strong>Important to remember:&lt;/strong> The nested group&amp;rsquo;s name should match in name and location to what the Android app receives and returns, otherwise it won&amp;rsquo;t be able to find the nested object.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>type&lt;/th>
&lt;th>name&lt;/th>
&lt;th>label&lt;/th>
&lt;th>appearance&lt;/th>
&lt;th>repeat_count&lt;/th>
&lt;th>default&lt;/th>
&lt;th>&amp;hellip;&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>camara-app&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>android-app-launcher&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>action&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>android.media.action.IMAGE_CAPTURE&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>camara-app-inputs&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>android-app-inputs&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>location&lt;/td>
&lt;td>Location&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>photo_configuration&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>android-app-object&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>aperture&lt;/td>
&lt;td>Aperture&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>shutter_speed&lt;/td>
&lt;td>Shutter Speed&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>photo_configuration&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>camara-app-inputs&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>camara-app-outputs&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>android-app-outputs&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>picture&lt;/td>
&lt;td>Picture&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>date&lt;/td>
&lt;td>Date&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>camara-app-outputs&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>camara-app&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>To instruct the widget to process an array of strings or numbers, create a new &lt;code>repeat&lt;/code> with fix size in the &lt;code>repeat_count&lt;/code> column and place it inside the input or the output group with the appearance &lt;code>android-app-value-list&lt;/code>, then create 1 field type &lt;code>text&lt;/code> to store every array&amp;rsquo;s value, &lt;em>only 1 field is allowed&lt;/em>. To process an array of objects, use the appearance &lt;code>android-app-object-list&lt;/code> instead.&lt;/p>
&lt;p>&lt;strong>Important to remember:&lt;/strong> The &lt;code>repeat&lt;/code>'s name should match in name and location to what the Android app receives and returns, otherwise it won&amp;rsquo;t be able to find the array.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>type&lt;/th>
&lt;th>name&lt;/th>
&lt;th>label&lt;/th>
&lt;th>appearance&lt;/th>
&lt;th>repeat_count&lt;/th>
&lt;th>default&lt;/th>
&lt;th>&amp;hellip;&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>camara-app&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>android-app-launcher&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>action&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>android.media.action.IMAGE_CAPTURE&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>flags&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>268435456&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>camara-app-inputs&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>android-app-inputs&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>location&lt;/td>
&lt;td>Location&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin repeat&lt;/td>
&lt;td>photo_filters&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>android-app-value-list&lt;/td>
&lt;td>2&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>filter&lt;/td>
&lt;td>Filter&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end repeat&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>camara-app-inputs&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>camara-app-outputs&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>android-app-outputs&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>date&lt;/td>
&lt;td>Date&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin repeat&lt;/td>
&lt;td>capture&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>android-app-object-list&lt;/td>
&lt;td>3&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>light_percentage&lt;/td>
&lt;td>Light&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>contrast_percentage&lt;/td>
&lt;td>Contrast&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>patient_details&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>android-app-object&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>picture&lt;/td>
&lt;td>Patient picture&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>patient_id&lt;/td>
&lt;td>Patient ID&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>patient_name&lt;/td>
&lt;td>Patient name&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>patient_details&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end repeat&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>camara-app-outputs&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>camara-app&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="cht-xpath-functions">CHT XPath Functions&lt;/h2>
&lt;h3 id="difference-in-months">&lt;code>difference-in-months&lt;/code>&lt;/h3>
&lt;p>Calculates the number of whole calendar months between two dates. This is often used when determining a child&amp;rsquo;s age for immunizations or assessments.&lt;/p>
&lt;h3 id="z-score">&lt;code>z-score&lt;/code>&lt;/h3>
&lt;p>In Enketo forms you have access to an XPath function to calculate the z-score value for a patient. The function accesses table data stored in CouchDB.&lt;/p>
&lt;p>The &lt;code>z-score&lt;/code> function takes four parameters:&lt;/p>
&lt;ul>
&lt;li>The name of z-score table to use, which corresponds to value of the database document&amp;rsquo;s &lt;code>_id&lt;/code> attribute.&lt;/li>
&lt;li>Patient&amp;rsquo;s sex, which corresponds to the data object&amp;rsquo;s name. In the example below &lt;code>male&lt;/code> for this parameter corresponds to &lt;code>charts[].data.male&lt;/code> in the database document.&lt;/li>
&lt;li>First parameter for the table lookup, such as age. Value maps to the &lt;code>key&lt;/code> value in the database document.&lt;/li>
&lt;li>Second parameter for the table lookup, such as height. Value is compared against the &lt;code>points&lt;/code> in the databae document.&lt;/li>
&lt;/ul>
&lt;h4 id="example-use">Example Use&lt;/h4>
&lt;p>&lt;a href="https://github.com/medic/cht-core/blob/master/demo-forms/z-score.xml">This example XForm form&lt;/a> shows the use of the z-score function. To calculate the z-score for a patient given their sex, age, and weight the XPath calculation is as follows:&lt;/p>
&lt;p>&lt;code>z-score('weight-for-age', ../my_sex, ../my_age, ../my_weight)&lt;/code>&lt;/p>
&lt;p>The data used by this function needs to be added to CouchDB. The example below shows the structure of the database document. It creates a &lt;code>weight-for-age&lt;/code> table, where you can see that a male aged 0 at 2.08kg has a z-score of -3. Your database doc will be substantially larger, so you may find the &lt;a href="https://github.com/medic/cht-core/blob/master/scripts/zscore-table-to-json.js">conversion script&lt;/a> helpful to convert z-score tables to the required doc format.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;zscore-charts&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;charts&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;weight-for-age&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;data&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;male&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;points&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#0000cf;font-weight:bold">1.701&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#0000cf;font-weight:bold">2.08&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#0000cf;font-weight:bold">2.459&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#0000cf;font-weight:bold">2.881&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#0000cf;font-weight:bold">3.346&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#0000cf;font-weight:bold">3.859&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#0000cf;font-weight:bold">4.419&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#0000cf;font-weight:bold">5.031&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#0000cf;font-weight:bold">5.642&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="parse-timestamp-to-date">&lt;code>parse-timestamp-to-date&lt;/code>&lt;/h3>
&lt;p>&lt;em>Available in +3.13.0.&lt;/em>&lt;/p>
&lt;p>Use this function to parse from a timestamp number to a date. This is useful when using other XForm utility functions that receive date type as parameter, see example below:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>type&lt;/th>
&lt;th>name&lt;/th>
&lt;th>label&lt;/th>
&lt;th>calculation&lt;/th>
&lt;th>default&lt;/th>
&lt;th>&amp;hellip;&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>string&lt;/td>
&lt;td>start_date_time&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>&lt;/td>
&lt;td>1628945040308&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>string&lt;/td>
&lt;td>start_date_time_formatted&lt;/td>
&lt;td>Started on:&lt;/td>
&lt;td>format-date-time(&lt;strong>parse-timestamp-to-date(${start_date_time})&lt;/strong>, &amp;ldquo;%e/%b/%Y %H:%M:%S&amp;rdquo;)&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="to-bikram-sambat">&lt;code>to-bikram-sambat&lt;/code>&lt;/h3>
&lt;p>&lt;em>Available in +3.14.0.&lt;/em>&lt;/p>
&lt;p>This function converts a &lt;code>date&lt;/code> to a &lt;code>string&lt;/code> containing the value of the date formatted according to the &lt;a href="https://en.wikipedia.org/wiki/Vikram_Samvat">Bikram Sambat&lt;/a> calendar.&lt;/p>
&lt;p>See also: &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/forms/app/#cht-xform-widgets">Bikram Sambat Datepicker&lt;/a>&lt;/p>
&lt;h2 id="input-data">Input data&lt;/h2>
&lt;p>&lt;code>app&lt;/code> forms have access to a variety of &lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/forms/form-inputs/#app-forms">input data&lt;/a> depending on the source of the form.&lt;/p>
&lt;h2 id="cht-special-fields">CHT Special Fields&lt;/h2>
&lt;p>Some fields in app forms control specific aspects of CHT Apps, either to bring data into forms or for a feature outside of the form.&lt;/p>
&lt;h3 id="quintiles">Quintiles&lt;/h3>
&lt;p>The &lt;code>NationalQuintile&lt;/code> and &lt;code>UrbanQuintile&lt;/code> fields on a form will be assigned to all people belonging to the place. This is helpful when household surveys have quintile information which could be used to target health services for individuals.
&lt;p>&lt;em>Read More&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/forms/wealth-quintiles/">Tracking Wealth Quintiles&lt;/a>&lt;/p>
&lt;/p>
&lt;h3 id="uhc-mode">UHC Mode&lt;/h3>
&lt;p>When the &lt;code>visited_contact_uuid&lt;/code> field is set at the top level of a form, this form is counted as a household visit in &lt;a href="https://docs.communityhealthtoolkit.org/apps/features/uhc-mode/">UHC Mode&lt;/a>. This field must be a &lt;code>calculate&lt;/code> field with the place UUID of the visited contact. You may run into performance issues if you configure this to look at forms submitted very frequently.
&lt;p>&lt;em>Read More&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/forms/uhc-mode/">Configuring UHC Mode&lt;/a>&lt;/p>
&lt;/p>
&lt;h2 id="uploading-binary-attachments">Uploading Binary Attachments&lt;/h2>
&lt;p>Forms can include arbitrary binary data which is submitted and included in the doc as an attachment. If this is an image type it&amp;rsquo;ll then be displayed inline in the report UI.&lt;/p>
&lt;p>To mark an element as having binary data add an extra column in the XLSForm called &lt;code>instance::type&lt;/code> and specify &lt;code>binary&lt;/code> in the element&amp;rsquo;s row.&lt;/p>
&lt;h2 id="properties">Properties&lt;/h2>
&lt;p>The meta information in the &lt;code>{form_name}.properties.json&lt;/code> file defines the form&amp;rsquo;s title and icon, as well as when and where the form should be available.&lt;/p>
&lt;h3 id="formsappform_namepropertiesjson">&lt;code>forms/app/{form_name}.properties.json&lt;/code>&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>property&lt;/th>
&lt;th>description&lt;/th>
&lt;th>required&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>title&lt;/code>&lt;/td>
&lt;td>The form&amp;rsquo;s title seen in the app. Uses a localization array using the 2-letter code, not the translation keys discussed in the &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/translations/">Localization section&lt;/a>.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>icon&lt;/code>&lt;/td>
&lt;td>Icon associated with the form. The value is the image&amp;rsquo;s key in the &lt;code>resources.json&lt;/code> file, as described in the &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/resources/#icons">Icons section&lt;/a>&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>subject_key&lt;/code>&lt;/td>
&lt;td>Override the default report list title with a custom translation key. The translation uses a summary of the report as the evaluation context so you can include report fields in your value, for example: &lt;code>Case registration {{case_id}}&lt;/code>. Useful properties available in the summary include: &lt;code>from&lt;/code> (the phone number of the sender), &lt;code>phone&lt;/code> (the phone number of the report contact), &lt;code>form&lt;/code> (the form code), &lt;code>subject.name&lt;/code> (the name of the subject), and &lt;code>case_id&lt;/code> (the generated case id). Defaults to the name of the report subject.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>hidden_fields&lt;/code>&lt;/td>
&lt;td>Array of Strings of form fields to hide in the view report UI in the app. This is only applied to future reports and will not change how existing reports are displayed.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>context&lt;/code>&lt;/td>
&lt;td>The context defines when and where the form should be available in the app&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>context.person&lt;/code>&lt;/td>
&lt;td>Boolean determining if the form can be seen in the Action list for a person&amp;rsquo;s profile. This is still subject to the &lt;code>expression&lt;/code>.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>context.place&lt;/code>&lt;/td>
&lt;td>Boolean determining if the form can be seen in the Action list for a person&amp;rsquo;s profile. This is still subject to the &lt;code>expression&lt;/code>.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>context.expression&lt;/code>&lt;/td>
&lt;td>A JavaScript expression which is evaluated when a contact profile or the reports tab is viewed. If the expression evaluates to true, the form will be listed as an available action. The inputs &lt;code>contact&lt;/code>, &lt;code>user&lt;/code>, and &lt;code>summary&lt;/code> are available. By default, forms are not shown on the reports tab, use &lt;code>&amp;quot;expression&amp;quot;: &amp;quot;!contact&amp;quot;&lt;/code> to show the form on the Reports tab since there is no contact for this scenario.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>context.permission&lt;/code>&lt;/td>
&lt;td>String permission key required to allow the user to view and submit this form. If blank, this defaults to allowing all access.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="code-sample">Code sample&lt;/h3>
&lt;p>In this sample properties file, the associated form would only show on a person&amp;rsquo;s page, and only if their sex is unspecified or female and they are between 10 and 65 years old:&lt;/p>
&lt;h4 id="formsapppregnancypropertiesjson">&lt;code>forms/app/pregnancy.properties.json&lt;/code>&lt;/h4>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json"> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;title&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;locale&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;en&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;content&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;New Pregnancy&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;locale&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;hi&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;content&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;नई गर्भावस्था&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;icon&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;pregnancy-1&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;hidden_fields&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;private&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;internal&amp;#34;&lt;/span> &lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;context&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;person&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;place&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">false&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;expression&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;contact.type === &amp;#39;person&amp;#39; &amp;amp;&amp;amp; (!contact.sex || contact.sex === &amp;#39;female&amp;#39;) &amp;amp;&amp;amp; (!contact.date_of_birth || (ageInYears(contact) &amp;gt;= 10 &amp;amp;&amp;amp; ageInYears(contact) &amp;lt; 65))&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;permission&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;can_register_pregnancies&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="build">Build&lt;/h2>
&lt;p>Convert and build the app forms into your application using the &lt;code>convert-app-forms&lt;/code> and &lt;code>upload-app-forms&lt;/code> actions in &lt;code>cht-conf&lt;/code>.&lt;/p>
&lt;pre>&lt;code>cht --local convert-app-forms upload-app-forms
&lt;/code>&lt;/pre></description></item><item><title>Apps: collect</title><link>https://docs.communityhealthtoolkit.org/apps/reference/forms/collect/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/reference/forms/collect/</guid><description>
&lt;p>ODK XForms are used to render forms in the Medic Collect Android app. These forms cannot use any CHT-specific XForm notations. All Medic Collect forms are processed as SMS (even when submitted over a wifi) therefore a corresponding JSON form with matching fields is used to interpret the incoming report.&lt;/p>
&lt;p>Collect forms must be in the &lt;code>forms/collect&lt;/code> folder to be processed by &lt;a href="https://github.com/medic/cht-conf">&lt;code>cht-conf&lt;/code>&lt;/a>&amp;lsquo;s &lt;code>convert-collect-forms&lt;/code> and &lt;code>upload-collect-forms&lt;/code> actions. Once uploaded to the server, they can be downloaded by the Medic Collect app. These forms can also be included in Medic Collect builds for users without a data connection to get forms.&lt;/p>
&lt;p>XForms require a couple minor changes to be compatible with Medic Collect so that they can properly be received by a Medic instance. The changes can be done either manually in the XForm&amp;rsquo;s XML, or automatically with XLSForm forms using &lt;code>cht-conf&lt;/code>.&lt;/p>
&lt;h3 id="automatic-changes-with-xlsforms">Automatic changes with XLSForms&lt;/h3>
&lt;p>If using a &lt;a href="http://xlsform.org/">XLSForm&lt;/a> and using &lt;a href="https://github.com/medic/cht-conf">&lt;code>cht-conf&lt;/code>&lt;/a> to convert to XForm, the necessary fields will be automatically added to the resulting XForm. You can override the default prefix and separator by declaring &lt;code>sms_keyword&lt;/code> and &lt;code>sms_seperator&lt;/code> respectively in the Settings tab.&lt;/p>
&lt;h3 id="manual-changes-in-xform">Manual changes in XForm&lt;/h3>
&lt;p>Collect forms need &lt;code>prefix&lt;/code> and &lt;code>delimiter&lt;/code> values added to the XForm&amp;rsquo;s XML. This is done where the form ID is declared in the instance&amp;rsquo;s data model. For example, the following:&lt;/p>
&lt;pre>&lt;code>&amp;lt;instance&amp;gt;
&amp;lt;data id=&amp;quot;myform&amp;quot; &amp;gt;
...
&lt;/code>&lt;/pre>&lt;p>becomes:&lt;/p>
&lt;pre>&lt;code>&amp;lt;instance&amp;gt;
&amp;lt;data id=&amp;quot;myform&amp;quot; prefix=&amp;quot;J1!FORM_CODE!&amp;quot; delimiter=&amp;quot;#&amp;quot;&amp;gt;
...
&lt;/code>&lt;/pre>&lt;p>Note that &lt;code>FORM_CODE&lt;/code> should be replaced with the form code as defined in the JSON forms version of the form. If the form code is &lt;code>ABCD&lt;/code> the prefix value would be &lt;code>J1!ABCD!&lt;/code>, resulting in &lt;code>prefix=&amp;quot;J1!ABCD!&amp;quot;&lt;/code>. In case you are curious, the &lt;code>J1&lt;/code> lets the CHT server know that version 1 of the JavaRosa parser should be used on the incoming SMS.&lt;/p></description></item><item><title>Apps: contact</title><link>https://docs.communityhealthtoolkit.org/apps/reference/forms/contact/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/reference/forms/contact/</guid><description>
&lt;p>Contact forms are used to create and edit contacts (persons and places). Each contact-type should ideally have two forms; one for creation, and another for editing.&lt;/p>
&lt;p>These forms are stored in the &lt;code>forms/contact&lt;/code> sub-folder of the project config directory. The naming convention used should be &lt;code>&amp;lt;contact_type_id-{create|edit}&amp;gt;.xlsx&lt;/code>.&lt;/p>
&lt;h2 id="form-details">Form details&lt;/h2>
&lt;h3 id="survey-sheet">Survey sheet&lt;/h3>
&lt;p>To collect information about the contact, use a top-level group with the &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/hierarchy/">id of the contact_type&lt;/a> as the &lt;code>name&lt;/code> of the group (e.g. &lt;code>person&lt;/code> when adding or editing a person contact). Information in this group will be saved to the contact&amp;rsquo;s document in the database.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>type&lt;/th>
&lt;th>name&lt;/th>
&lt;th>label::en&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>person&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hidden&lt;/td>
&lt;td>parent&lt;/td>
&lt;td>Parent Id&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hidden&lt;/td>
&lt;td>type&lt;/td>
&lt;td>Contact Type&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>string&lt;/td>
&lt;td>name&lt;/td>
&lt;td>Full Name&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>The &lt;code>parent&lt;/code>, &lt;code>type&lt;/code>, and &lt;code>name&lt;/code> fields are mandatory on forms that are adding contacts. &lt;code>parent&lt;/code> will be automatically populated with the id of the parent contact. &lt;code>type&lt;/code> will be automatically set to the contact_type id when saving the new contact.&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Edit forms&lt;/h4>
For edit forms, the name of the top-level group should still match the contact_type id of the contact, but only the relevant fields for editing need to be specified in the form.
&lt;/div>
&lt;h4 id="input-data">Input data&lt;/h4>
&lt;p>&lt;code>contact&lt;/code> forms have access to a variety of &lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/forms/form-inputs/#app-forms">input data&lt;/a>.&lt;/p>
&lt;h3 id="settings-sheet">Settings sheet&lt;/h3>
&lt;p>The &lt;code>form_id&lt;/code> should follow the pattern &lt;code>contact:CONTACT_TYPE_ID:ACTION&lt;/code> where CONTACT_TYPE_ID is the contact_type id for the contact and ACTION is &lt;code>create&lt;/code> or &lt;code>edit&lt;/code>. (e.g. &lt;code>contact:clinic:create&lt;/code>)&lt;/p>
&lt;h3 id="properties">Properties&lt;/h3>
&lt;p>Starting in cht-core release 3.10, we can now configure property files in contact create forms to show or hide them based on an expression or permission as specified in the &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/forms/app/#formsappform_namepropertiesjson">app form schema&lt;/a>. Note: this applies only to the create form, not the contacts themselves.&lt;/p>
&lt;h2 id="generic-contact-forms">Generic contact forms&lt;/h2>
&lt;p>If your place contact forms are similar across all levels of your specified project hierarchy, you can templatise the form creation process. You will need to create the following files in &lt;code>forms/contact&lt;/code>: &lt;code>place-types.json&lt;/code>, &lt;code>PLACE_TYPE-create.xlsx&lt;/code> and &lt;code>PLACE_TYPE-edit.xlsx&lt;/code>.&lt;/p>
&lt;p>&lt;code>place-types.json&lt;/code> maps the place contact_type id to a human-readable description that will be shown on the app&amp;rsquo;s user interface.&lt;/p>
&lt;p>Both &lt;code>PLACE_TYPE-create.xlsx&lt;/code> and &lt;code>PLACE_TYPE-edit.xlsx&lt;/code> will contain two placeholder values &lt;code>PLACE_TYPE&lt;/code> and &lt;code>PLACE_NAME&lt;/code> which will be replaced by the keys and values specified in &lt;code>place-types.json&lt;/code> respectively during form conversion. Also, copies of the different place-type forms will be created (if they don&amp;rsquo;t exist) during the form conversion process with &lt;code>PLACE_TYPE&lt;/code> being replaced with the keys specified in &lt;code>place-types.json&lt;/code>.&lt;/p>
&lt;p>Convert and build the contact forms into your application using the &lt;code>convert-contact-forms&lt;/code> and &lt;code>upload-contact-forms&lt;/code> actions in &lt;code>cht-conf&lt;/code>.&lt;/p>
&lt;blockquote>
&lt;p>&lt;code>cht --local convert-contact-forms upload-contact-forms&lt;/code>&lt;/p>
&lt;/blockquote>
&lt;p>For examples on how to structure the above files you can have a look at the sample configurations in CHT-core: &lt;a href="https://github.com/medic/cht-core/tree/master/config/default/forms/contact">default&lt;/a> and &lt;a href="https://github.com/medic/cht-core/tree/master/config/standard/forms/contact">standard&lt;/a>.&lt;/p>
&lt;h2 id="creating-person-and-place-contacts-in-the-same-form">Creating person and place contacts in the same form&lt;/h2>
&lt;p>Contact forms for creating a place can also optionally create one or more person-type documents. One of these person contacts can be linked to the created place as the primary contact.&lt;/p>
&lt;p>Below is a simple structure of a place form showing all the necessary components.&lt;/p>
&lt;p>&lt;img src="place-contact-form-survey.png" alt="Place forms survey sheet">&lt;/p>
&lt;p>Section 1 is similar to what has been described earlier for person forms.&lt;/p>
&lt;p>Section 2 specifies the contact that will be linked to the place being created. &lt;code>parent&lt;/code>, &lt;code>type&lt;/code> and &lt;code>contact_type&lt;/code> and &lt;code>name&lt;/code> are mandatory. This also applies to the place-type definition in section 4. &lt;code>contact&lt;/code> on the other hand is not mandatory for the successful creation of a place. It is usually more convenient to create a place and its primary contact at the same time.&lt;/p>
&lt;p>You can also create additional contacts linked to the place being created when you have a structure similar to that shown in section 3.&lt;/p></description></item><item><title>Apps: contact-summary.templated.js</title><link>https://docs.communityhealthtoolkit.org/apps/reference/contact-page/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/reference/contact-page/</guid><description>
&lt;p>Contact profile pages display basic information about the contact along with their history and upcoming tasks.
A contact&amp;rsquo;s profile page is defined by the &lt;a href="#contact-summary">Fields&lt;/a>, &lt;a href="#condition-cards">Cards&lt;/a>, and &lt;a href="#care-guides">Care Guides&lt;/a> available.&lt;/p>
&lt;p>Helper variables and functions for the contact summary can be defined in &lt;code>contact-summary-extras.js&lt;/code>. There are several variables available to inspect to generate the summary information:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Variable&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>contact&lt;/code>&lt;/td>
&lt;td>The currently selected contact. This has minimal stubs for the &lt;code>contact.parent&lt;/code>, so if you want to refer to a property on the parent use &lt;code>lineage&lt;/code> below.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>reports&lt;/code>&lt;/td>
&lt;td>An array of reports for the contact.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>lineage&lt;/code>&lt;/td>
&lt;td>An array of the contact&amp;rsquo;s parents (2.13+), eg &lt;code>lineage[0]&lt;/code> is the parent, &lt;code>lineage[1]&lt;/code> is the grandparent, etc. Each lineage entry has full information for the contact, so you can use &lt;code>lineage[1].contact.phone&lt;/code>. &lt;code>lineage&lt;/code> will include only those contacts which are visible to the logged in profile&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>targetDoc&lt;/code>&lt;/td>
&lt;td>Doc with &lt;a href="https://docs.communityhealthtoolkit.org/core/overview/db-schema/#targets">&lt;code>target&lt;/code>&lt;/a> document of the contact, hydrated with the config information of every target it contains a value for. If there is no target document available (for example when viewing a contact that does not upload targets), this value will be &lt;code>undefined&lt;/code>. This value might also be &lt;code>undefined&lt;/code> if the contact has not yet synced the current target document. Added in &lt;code>3.9.0&lt;/code>.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>uhcStats&lt;/code>&lt;/td>
&lt;td>Object containing UHC stats information. Added in &lt;code>v3.12.0&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>uhcStats.uhcInterval&lt;/code>&lt;/td>
&lt;td>Object containing the start and end date of UHC reporting period, it is calculated from the &lt;code>uhc.visit_count.month_start_date&lt;/code> defined in the &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/#app_settingsjson">app settings&lt;/a>.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>uhcStats.uhcInterval.start&lt;/code>&lt;/td>
&lt;td>Timestamp, start date of the UHC reporting period.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>uhcStats.uhcInterval.end&lt;/code>&lt;/td>
&lt;td>Timestamp, end date of the UHC reporting period.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>uhcStats.homeVisits&lt;/code>&lt;/td>
&lt;td>Object containing the contact&amp;rsquo;s home visits stats. The &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/hierarchy/#app_settingsjson-contact_types">contact&amp;rsquo;s type&lt;/a> should have &lt;code>count_visits&lt;/code> enabled and the &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/#app_settingsjson">UHC visit count settings&lt;/a> should be defined, additionally this information is only available for users that have &lt;code>can_view_uhc_stats&lt;/code> permission and that are not System Administrators.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>uhcStats.homeVisits.lastVisitedDate&lt;/code>&lt;/td>
&lt;td>Timestamp, date of contact&amp;rsquo;s last home visit.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>uhcStats.homeVisits.count&lt;/code>&lt;/td>
&lt;td>Number of contact&amp;rsquo;s home visits in the current reporting interval.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>uhcStats.homeVisits.countGoal&lt;/code>&lt;/td>
&lt;td>Number, home visits goal, defined in the &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/#app_settingsjson">UHC visit count settings&lt;/a>.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>cht&lt;/code>&lt;/td>
&lt;td>Object containing the &lt;a href="#cht-api">CHT API&lt;/a> for contact summary, targets and tasks. Added in &lt;code>v3.12.0&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="cht-api">CHT API&lt;/h2>
&lt;p>&lt;em>Introduced in v3.12.0&lt;/em>&lt;/p>
&lt;p>Provides CHT-Core Framework&amp;rsquo;s functions to contact summary, targets and tasks. The API is available in the &lt;code>cht&lt;/code> reserved variable under the &lt;code>v1&lt;/code> version.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Function&lt;/th>
&lt;th>Arguments&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>hasPermissions(permissions, userRoles, chtPermissionsSettings)&lt;/td>
&lt;td>&lt;code>permissions&lt;/code>: String or array of permission name(s).&lt;br>&lt;code>userRoles&lt;/code>: (Optional) Array of user roles. Default to the current logged in user.&lt;br>&lt;code>chtPermissionsSettings&lt;/code>: (Optional) Object of configured permissions in CHT-Core&amp;rsquo;s settings. Default to the current instance&amp;rsquo;s configured permissions.&lt;/td>
&lt;td>Returns true if the user has the permission(s), otherwise returns false.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hasAnyPermission(permissionsGroups, userRoles, chtPermissionsSettings)&lt;/td>
&lt;td>&lt;code>permissionsGroups&lt;/code>: Array of groups of permission name(s).&lt;br>&lt;code>userRoles&lt;/code>: (Optional) Array of user roles. Default to the current logged in user.&lt;br>&lt;code>chtPermissionsSettings&lt;/code>: (Optional) Object of configured permissions in CHT-Core&amp;rsquo;s settings. Default to the current instance&amp;rsquo;s configured permissions.&lt;/td>
&lt;td>Returns true if the user has all the permissions of any of the provided groups, otherwise returns false.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="cht-apis-code-samples">CHT API&amp;rsquo;s code samples&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-js" data-lang="js">&lt;span style="color:#204a87;font-weight:bold">const&lt;/span> &lt;span style="color:#000">canEdit&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000">cht&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">v1&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">hasPermissions&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;can_edit&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">const&lt;/span> &lt;span style="color:#000">canManagePlaces&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000">cht&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">v1&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">hasPermissions&lt;/span>&lt;span style="color:#000;font-weight:bold">([&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;can_create_places&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;can_update_places&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">]);&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">const&lt;/span> &lt;span style="color:#000">hasAnyGroup&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000">cht&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">v1&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">hasAnyPermission&lt;/span>&lt;span style="color:#000;font-weight:bold">([&lt;/span>
&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;can_view_messages&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;can_view_message_action&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;can_view_reports&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;can_verify_reports&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;span style="color:#000;font-weight:bold">]);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="contact-summary">Contact Summary&lt;/h2>
&lt;p>Each field that can be shown on a contact&amp;rsquo;s profile is defined as an object in the &lt;code>fields&lt;/code> array of &lt;code>contact-summary.templated.js&lt;/code>. The properties for each object determine how and when the field is shown.&lt;/p>
&lt;h3 id="contact-summarytemplatedjs-fields">&lt;code>contact-summary.templated.js .fields[]&lt;/code>&lt;/h3>
&lt;!-- If you change this table, update the duplicate descriptions in ### Cards -->
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>property&lt;/th>
&lt;th>type&lt;/th>
&lt;th>description&lt;/th>
&lt;th>required&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>label&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code>&lt;/td>
&lt;td>A translation key which is shown with the field.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>icon&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code>&lt;/td>
&lt;td>The name of the icon to display beside this field, as defined through the Configuration &amp;gt; Icons page.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>value&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code>&lt;/td>
&lt;td>The value shown for the field.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>filter&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code>&lt;/td>
&lt;td>The display filter to apply to the value, eg: &lt;code>{ value: '2005-10-09', filter: 'age' }&lt;/code> will render as &amp;ldquo;11 years&amp;rdquo;. Common filters are: &lt;code>age&lt;/code>, &lt;code>phone&lt;/code>, &lt;code>weeksPregnant&lt;/code>, &lt;code>relativeDate&lt;/code>, &lt;code>relativeDay&lt;/code>, &lt;code>fullDate&lt;/code>, &lt;code>simpleDate&lt;/code>, &lt;code>simpleDateTime&lt;/code>, &lt;code>lineage&lt;/code>, &lt;code>resourceIcon&lt;/code>, &lt;code>translate&lt;/code>. For the complete list of filters, and more details on what each does, check out the code in &lt;a href="https://github.com/medic/cht-core/tree/3.15.x/webapp/src/ts/pipes">&lt;code>webapp/src/ts/pipes&lt;/code> dir&lt;/a>.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>width&lt;/code>&lt;/td>
&lt;td>&lt;code>integer&lt;/code>&lt;/td>
&lt;td>The horizontal space for the field. Common values are 12 for full width, 6 for half width, or 3 for quarter width. Default 12.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>translate&lt;/code>&lt;/td>
&lt;td>&lt;code>boolean&lt;/code>&lt;/td>
&lt;td>Whether or not to translate the &lt;code>value&lt;/code>. Defaults to false.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>context&lt;/code>&lt;/td>
&lt;td>&lt;code>object&lt;/code>&lt;/td>
&lt;td>When &lt;code>translate: true&lt;/code> and &lt;code>value&lt;/code> uses &lt;a href="https://angular-translate.github.io/docs/#/guide/06_variable-replacement">translation variables&lt;/a>, this value should provide the translation variables.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>appliesIf&lt;/code>&lt;/td>
&lt;td>&lt;code>function()&lt;/code> or &lt;code>boolean&lt;/code>&lt;/td>
&lt;td>Return true if the field should be shown.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>appliesToType&lt;/code>&lt;/td>
&lt;td>&lt;code>string[]&lt;/code>&lt;/td>
&lt;td>Filters the contacts for which &lt;code>appliesIf&lt;/code> will be evaluated. For example, &lt;code>['person']&lt;/code> or &lt;code>['clinic', 'health_center']&lt;/code>. It defaults to all types if it is not defined.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;!-- TODO: See [How to configure profile pages]() for an example. -->
&lt;h2 id="condition-cards">Condition Cards&lt;/h2>
&lt;p>Each condition card is defined as a card object in the &lt;code>cards&lt;/code> array of &lt;code>contact-summary.templated.js&lt;/code>. The properties for each object determine how and when the card and its fields are shown.&lt;/p>
&lt;h3 id="contact-summarytemplatedjs-cards">&lt;code>contact-summary.templated.js .cards[]&lt;/code>&lt;/h3>
&lt;!-- If you change the field data in this table, update the duplicate descriptions in ### Fields -->
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>property&lt;/th>
&lt;th>type&lt;/th>
&lt;th>description&lt;/th>
&lt;th>required&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>label&lt;/code>&lt;/td>
&lt;td>&lt;code>translation key&lt;/code>&lt;/td>
&lt;td>Label on top of card.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>appliesToType&lt;/code>&lt;/td>
&lt;td>&lt;code>string[]&lt;/code>&lt;/td>
&lt;td>A filter, so &lt;code>appliesIf&lt;/code> is called only if the contact&amp;rsquo;s type matches one or more of the elements. For example, &lt;code>['person']&lt;/code>. Please, note that &lt;code>['report']&lt;/code> is also allowed to create a report card. But, you cannot use it in conjunction with a contact&amp;rsquo;s type. It defaults to all types if it is not defined.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>appliesIf&lt;/code>&lt;/td>
&lt;td>&lt;code>function()&lt;/code> or &lt;code>boolean&lt;/code>&lt;/td>
&lt;td>Return true if the field should be shown.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>modifyContext&lt;/code>&lt;/td>
&lt;td>&lt;code>function(context)&lt;/code>&lt;/td>
&lt;td>Used to modify or add data which is passed as input to forms filled from the contact page.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>fields&lt;/code>&lt;/td>
&lt;td>&lt;code>Array[]&lt;/code> of fields&lt;/td>
&lt;td>The content of the card.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>fields[n].appliesIf&lt;/code>&lt;/td>
&lt;td>&lt;code>boolean&lt;/code> or &lt;code>function(report)&lt;/code>&lt;/td>
&lt;td>Same as Fields.appliesIf above.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>fields[n].label&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code> or &lt;code>function(report)&lt;/code>&lt;/td>
&lt;td>Label shown with the field.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>fields[n].icon&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code> or &lt;code>function(report)&lt;/code>&lt;/td>
&lt;td>The name of the icon to display beside this field, as defined through the Configuration &amp;gt; Icons page.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>fields[n].value&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code> or &lt;code>function(report)&lt;/code>&lt;/td>
&lt;td>The value shown for the field.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>fields[n].filter&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code> or &lt;code>function(report)&lt;/code>&lt;/td>
&lt;td>The display filter to apply to the value, eg: &lt;code>{ value: '2005-10-09', filter: 'age' }&lt;/code> will render as &amp;ldquo;11 years&amp;rdquo;. Common filters are: &lt;code>age&lt;/code>, &lt;code>phone&lt;/code>, &lt;code>weeksPregnant&lt;/code>, &lt;code>relativeDate&lt;/code>, &lt;code>relativeDay&lt;/code>, &lt;code>fullDate&lt;/code>, &lt;code>simpleDate&lt;/code>, &lt;code>simpleDateTime&lt;/code>, &lt;code>lineage&lt;/code>, &lt;code>resourceIcon&lt;/code>, &lt;code>translate&lt;/code>. For the complete list of filters, and more details on what each does, check out the code in &lt;a href="https://github.com/medic/cht-core/tree/3.15.x/webapp/src/ts/pipes">&lt;code>webapp/src/ts/pipes&lt;/code> dir&lt;/a>.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>fields[n].width&lt;/code>&lt;/td>
&lt;td>&lt;code>integer&lt;/code> or &lt;code>function(report)&lt;/code>&lt;/td>
&lt;td>The horizontal space for the field. Common values are 12 for full width, 6 for half width, or 3 for quarter width. Default 12.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>fields[n].translate&lt;/code>&lt;/td>
&lt;td>&lt;code>boolean&lt;/code> or &lt;code>function(report)&lt;/code>&lt;/td>
&lt;td>Whether or not to translate the &lt;code>value&lt;/code>. Defaults to false.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>fields[n].context&lt;/code>&lt;/td>
&lt;td>&lt;code>object&lt;/code>&lt;/td>
&lt;td>When &lt;code>translate: true&lt;/code> and &lt;code>value&lt;/code> uses &lt;a href="https://angular-translate.github.io/docs/#/guide/06_variable-replacement">translation variables&lt;/a>, this value should provide the translation variables. Only supports properties &lt;code>count&lt;/code> and &lt;code>total&lt;/code> on cards.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;!-- TODO: See [How to configure profile pages]() for an example. -->
&lt;h2 id="care-guides">Care Guides&lt;/h2>
&lt;p>Each care guide accessible from a contact profile is defined as an &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/forms/app/">App Form&lt;/a>. Context information can be provided to forms via the &lt;code>context&lt;/code> object of &lt;code>contact-summary.templated.js&lt;/code>.&lt;/p>
&lt;p>To show an App Form on a contact&amp;rsquo;s profile, the form&amp;rsquo;s &lt;code>expression&lt;/code> field in its properties file must evaluate to true for that contact. The context infomation from the profile is accessible as the variable &lt;code>summary&lt;/code>.&lt;/p>
&lt;p>The context data is also available directly within the app forms&amp;rsquo; XForm calculations, as &lt;code>instance('contact-summary')/context/${variable}&lt;/code>. For instance if &lt;code>context.is_pregnant&lt;/code> is used in the contact summary, it can be accessed in an XForm field&amp;rsquo;s calculation as &lt;code>instance('contact-summary')/context/is_pregnant&lt;/code>. Note that these fields are not available when editing a previously completed form, or when accessing the form from outside of the profile page.&lt;/p>
&lt;!-- TODO: See [How to configure profile pages]() and [How to build app forms]() for examples and more information. -->
&lt;h2 id="code-samples">Code samples&lt;/h2>
&lt;p>The following samples show how fields, cards, and care guide context comes together in the &lt;code>contact-summary.templated.js&lt;/code> file.&lt;/p>
&lt;h3 id="contact-summarytemplatedjs">&lt;code>contact-summary.templated.js&lt;/code>&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-js" data-lang="js">&lt;span style="color:#000">module&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">exports&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">context&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">use_cases&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">anc&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000">isCoveredByUseCaseInLineage&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">lineage&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;anc&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span>
&lt;span style="color:#000">pnc&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000">isCoveredByUseCaseInLineage&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">lineage&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;pnc&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000">fields&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#000">appliesToType&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;person&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">label&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;patient_id&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">value&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000">contact&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">patient_id&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">width&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">4&lt;/span> &lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#000">appliesToType&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;person&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">label&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;contact.age&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">value&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000">contact&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">date_of_birth&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">width&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">4&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">filter&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;age&amp;#39;&lt;/span> &lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#000">appliesToType&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;person&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">label&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;contact.parent&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">value&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000">lineage&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">filter&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;lineage&amp;#39;&lt;/span> &lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#000">appliesToType&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;!person&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">appliesIf&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">function&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#000">contact&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">parent&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#000">lineage&lt;/span>&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>&lt;span style="color:#000;font-weight:bold">];&lt;/span> &lt;span style="color:#000;font-weight:bold">},&lt;/span> &lt;span style="color:#000">label&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;contact.parent&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">value&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000">lineage&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">filter&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;lineage&amp;#39;&lt;/span> &lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#000">cards&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">label&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;contact.profile.pregnancy&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">appliesToType&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;report&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">appliesIf&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000">extras&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">isActivePregnancy&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">fields&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">label&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;contact.profile.edd&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">value&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">function&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">report&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#000">report&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">fields&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">edd_8601&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span> &lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000">filter&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;relativeDay&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">width&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">12&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">label&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;contact.profile.visit&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">value&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;contact.profile.visits.of&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">translate&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">context&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">count&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">function&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">report&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#000">extras&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">getSubsequentVisits&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">report&lt;/span>&lt;span style="color:#000;font-weight:bold">).&lt;/span>&lt;span style="color:#000">length&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span> &lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000">total&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">4&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000">width&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">6&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">label&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;contact.profile.risk.title&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">value&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">function&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">report&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#000">extras&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">isHighRiskPregnancy&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">report&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">?&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;high&amp;#39;&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;normal&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span> &lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000">translate&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">width&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">5&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">icon&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">function&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">report&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#000">extras&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">isHighRiskPregnancy&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">report&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">?&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;risk&amp;#39;&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span> &lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#000">modifyContext&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">function&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">ctx&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">ctx&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">pregnant&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span> &lt;span style="color:#8f5902;font-style:italic">// don&amp;#39;t show Create Pregnancy Report button
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#000;font-weight:bold">};&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="contact-summary-extrasjs">&lt;code>contact-summary-extras.js&lt;/code>&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-js" data-lang="js">&lt;span style="color:#000">module&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">exports&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">isActivePregnancy&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">function&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">report&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">// ...
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000">isCoveredByUseCaseInLineage&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">function&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">lineage&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">usecase&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">// ...
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000">isHighRiskPregnancy&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">function&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">report&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">// ...
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000">getSubsequentVisits&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">function&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">report&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">// ...
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">};&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="build">Build&lt;/h2>
&lt;p>To update the Contact profiles for an app, changes must be compiled into &lt;code>app-settings&lt;/code>, then uploaded.&lt;/p>
&lt;p>&lt;code>cht --local compile-app-settings backup-app-settings upload-app-settings&lt;/code>&lt;/p></description></item><item><title>Apps: Requirements</title><link>https://docs.communityhealthtoolkit.org/apps/guides/hosting/requirements/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/guides/hosting/requirements/</guid><description>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
For production CHT deployments, Linux is recommended, with &lt;a href="https://ubuntu.com/server">Ubuntu&lt;/a> the most commonly used. For CHT development, Linux or macOS may be used. Windows can be used for either, but without recommendation.
&lt;/div>
&lt;p>Hosting a CHT instance in a cloud provider like AWS or on bare-metal requires you have sufficient hardware specifications, Docker and Docker Compose installed and other infrastructure requirements met.&lt;/p>
&lt;h2 id="hardware-requirements">Hardware Requirements&lt;/h2>
&lt;ul>
&lt;li>4 GiB RAM&lt;/li>
&lt;li>2 CPU/vCPU&lt;/li>
&lt;li>8 GB Hard Disk (SSD prefered)&lt;/li>
&lt;li>SSL certificates ( To be able to use the CHT app on mobile)&lt;/li>
&lt;li>Root Access&lt;/li>
&lt;/ul>
&lt;p>Depending on the scale of your operation these may need to be adjusted. Be sure to monitor disk usage so that the 8 GB can be increased as needed.&lt;/p>
&lt;h2 id="docker">Docker&lt;/h2>
&lt;p>Install both &lt;code>docker&lt;/code> and &lt;code>docker-compose&lt;/code> to run the two &lt;code>medic-os&lt;/code> and &lt;code>haproxy&lt;/code> containers.&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
Skip this step if you&amp;rsquo;re following the &lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/hosting/ec2-setup-guide/#create-and-configure-ec2-instance">EC2 guide&lt;/a> as &lt;code>docker&lt;/code> and &lt;code>docker-compose&lt;/code> are automatically installed when following the setup scripts.
&lt;/div>
&lt;h3 id="linux">Linux&lt;/h3>
&lt;p>Depending on which distro you run, install the Docker packages from &lt;a href="https://docs.docker.com/engine/install/#server">Docker&amp;rsquo;s Linux options&lt;/a>. Historically, Medic runs Ubuntu: see &lt;a href="https://docs.docker.com/engine/install/ubuntu/">Docker CE&lt;/a> and &lt;a href="https://docs.docker.com/compose/install/">Docker-compose&lt;/a> install pages.&lt;/p>
&lt;h3 id="windows">Windows&lt;/h3>
&lt;p>Docker Desktop for Windows needs either Hyper-V support or Windows Subsystem for Linux 2 (WSL 2). &lt;a href="https://docs.docker.com/docker-for-windows/install/">Docker&amp;rsquo;s Windows Docker Desktop install page&lt;/a> covers both scenarios.&lt;/p>
&lt;h3 id="macos">macOS:&lt;/h3>
&lt;p>See &lt;a href="https://docs.docker.com/docker-for-mac/install/">Docker&amp;rsquo;s macOS Docker Desktop install page&lt;/a>.&lt;/p>
&lt;h3 id="verify-install">Verify install&lt;/h3>
&lt;p>Test that &lt;code>docker&lt;/code> and &lt;code>docker-compose&lt;/code> installed correctly by showing their versions with &lt;code>sudo docker-compose --version&lt;/code> and &lt;code>sudo docker --version&lt;/code>. Note, your version may be different:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">
sudo docker-compose --version
docker-compose version 1.27.1, build 509cfb99
sudo docker --version
Docker version 19.03.12, build 48a66213fe
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Finally, confirm you can run the &amp;ldquo;hello world&amp;rdquo; docker container: &lt;code>sudo docker run hello-world&lt;/code>&lt;/p>
&lt;h2 id="considerations">Considerations&lt;/h2>
&lt;p>There are serious implications to consider when deploying a CHT instance beyond the above requirements. Be sure to account for:&lt;/p>
&lt;ul>
&lt;li>Alerting - How will alerts be sent in the case of downtime or degraded service?&lt;/li>
&lt;li>Power failures and unplanned restarts - Will the server cleanly restart such that the CHT resumes service correctly?&lt;/li>
&lt;li>Backups - What happens to the CHT data if there&amp;rsquo;s a hard drive failure?&lt;/li>
&lt;li>Disaster Recovery - What happens if there is a flood at the facility and on-site active and backup data are destroyed?&lt;/li>
&lt;li>Scale - What happens when the hardware deployed needs to be upgraded to increase capacity?&lt;/li>
&lt;li>Updates - By definition TLS certificates expire and software needs to be updated - how will the deployment get these updates on a regular basis?&lt;/li>
&lt;li>Security - While the TLS certificate will protect data on the LAN, is the server hard drive encrypted in the event of property theft?&lt;/li>
&lt;li>Privacy - The CHT inherently carries sensitive patient medical information in the database. Are there sufficient measures in place to protect this sensitive data?&lt;/li>
&lt;/ul></description></item><item><title>Apps: Building SMS Forms</title><link>https://docs.communityhealthtoolkit.org/apps/tutorials/sms-forms/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/tutorials/sms-forms/</guid><description>
&lt;p>SMS forms allow users to submit reports from any device including &lt;a href="https://en.wikipedia.org/wiki/Feature_phone">feature phones&lt;/a> without internet access. SMS forms are ideal in scenarios where targeted users have no way of accessing internet or where they are restricted to using feature phones.&lt;/p>
&lt;div class="pageinfo pageinfo-primary">
&lt;p>This tutorial will take you through how to build SMS forms for CHT applications, including:&lt;/p>
&lt;ul>
&lt;li>Defining SMS forms&lt;/li>
&lt;li>Setting validation rules for SMS forms&lt;/li>
&lt;li>Setting automatic responses to SMS reports&lt;/li>
&lt;/ul>
&lt;p>You will be building a pregnancy registration workflow that allows Community Health Workers to register households, register household members, and register new pregnancies for the household members.&lt;/p>
&lt;/div>
&lt;h2 id="brief-overview-of-key-concepts">Brief Overview of Key Concepts&lt;/h2>
&lt;p>&lt;em>&lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/forms/">SMS forms&lt;/a>&lt;/em> are structured text messages that contain a form code representing a report type and some information associated with the report.&lt;/p>
&lt;p>SMS forms are defined in either the &lt;code>base_settings.json&lt;/code> or the &lt;code>app_settings/forms.json&lt;/code> file and compiled into the &lt;em>&lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/">app_settings.json&lt;/a>&lt;/em> file with the &lt;code>compile-app-settings&lt;/code> action in the &lt;code>cht-conf&lt;/code> tool, then stored in the settings doc in the database.&lt;/p>
&lt;p>&lt;em>&lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/messaging/gateways/">SMS gateways&lt;/a>&lt;/em> allow the CHT coreframework to send and recieve SMS transmission to or from a mobile network operator.&lt;/p>
&lt;p>&lt;em>SMS aggregators&lt;/em> act as intermediaries between the mobile network operators and the CHT coreframework. They allow for greater customization of SMS workflows in the CHT.&lt;/p>
&lt;p>&lt;em>Interoperability:&lt;/em> CHT apps can receive data from other software when it is submitted as reports using the same JSON/SMS form notation.&lt;/p>
&lt;h2 id="required-resources">Required Resources&lt;/h2>
&lt;p>You should have a &lt;a href="https://docs.communityhealthtoolkit.org/apps/tutorials/local-setup/">functioning CHT instance with &lt;code>cht-conf&lt;/code> installed locally&lt;/a>.&lt;/p>
&lt;p>You also need to have some &lt;a href="https://docs.communityhealthtoolkit.org/apps/tutorials/application-settings/">prior knowledge on &lt;code>app_settings.json&lt;/code>&lt;/a>.&lt;/p>
&lt;h2 id="implementation-steps">Implementation Steps&lt;/h2>
&lt;p>SMS forms are defined &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/forms/#app_settingsjson-forms">using JSON&lt;/a> in the &lt;code>app_settings.json&lt;/code> file.&lt;/p>
&lt;h3 id="1-enable-transitions">1. Enable Transitions&lt;/h3>
&lt;p>To ensure SMS forms function as expected, you will first need to enable the following transitions in &lt;code>app_settings.json&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json"> &lt;span style="color:#4e9a06">&amp;#34;update_clinics&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>&lt;span style="color:#a40000">,&lt;/span>
&lt;span style="color:#4e9a06">&amp;#34;registration&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>&lt;span style="color:#a40000">,&lt;/span>
&lt;span style="color:#4e9a06">&amp;#34;accept_patient_reports&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>&lt;span style="color:#a40000">,&lt;/span>
&lt;span style="color:#4e9a06">&amp;#34;generate_shortcode_on_contacts&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>&lt;span style="color:#a40000">,&lt;/span>
&lt;span style="color:#4e9a06">&amp;#34;death_reporting&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/transitions/">Transitions&lt;/a>&lt;/p>
&lt;h3 id="2-define-a-place-registration-form">2. Define a Place Registration Form&lt;/h3>
&lt;p>To define a form, edit the object corresponding to the &lt;code>forms&lt;/code> key in &lt;code>app_settings.json&lt;/code>.&lt;/p>
&lt;p>Add a household registration form by adding a key and object pair to the &lt;code>forms&lt;/code> object as shown below.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#4e9a06">&amp;#34;forms&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;HR&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;meta&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;code&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;HR&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;label&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;en&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;New Household Registration&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;fields&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;place_name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;labels&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;tiny&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;en&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;household_name&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;description&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;en&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Name of Household&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;short&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;en&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Household name&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;position&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;string&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;length&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#0000cf;font-weight:bold">3&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#0000cf;font-weight:bold">30&lt;/span>
&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;required&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
Users will register new households by sending a text message in the format &lt;code>HR &amp;lt;household name&amp;gt;&lt;/code>. For example, &lt;code>HR Mary&lt;/code> will register &lt;code>Mary&amp;rsquo;s Household&lt;/code>.
&lt;/div>
&lt;p>To set the validation rules and autoresponses, edit the array corresponding to the &lt;code>registration&lt;/code> key in &lt;code>app_settings.json&lt;/code>. Add an object within the array as shown below.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#4e9a06">&amp;#34;registrations&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;form&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;HR&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;events&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;on_create&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;trigger&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;add_place&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;params&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;{ \&amp;#34;contact_type\&amp;#34;: \&amp;#34;clinic\&amp;#34; }&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;bool_expr&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;validations&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;join_respones&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">false&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;list&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;property&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;place_name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;rule&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;!regex(&amp;#39;household&amp;#39;) &amp;amp;&amp;amp; !regex(&amp;#39;house hold&amp;#39;)&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;messages.hr.validation.no_household_in_name&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;property&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;place_name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;rule&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;lenMin(1) &amp;amp;&amp;amp; lenMax(30)&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;messages.hr.validation.household_name_length&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;messages&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;event_type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;report_accepted&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;recepient&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;reporting_unit&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;messages.hr.report_accepted&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You can also define your own &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/#validations">validation rules&lt;/a>.&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
&lt;code>translation_key&lt;/code> represents the message that is sent out. This will be defined in a &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/translations/">translations&lt;/a> file.
&lt;/div>
&lt;h3 id="3-define-a-person-registration-form">3. Define a Person Registration Form&lt;/h3>
&lt;p>Add a person registration form by adding a key and object pair to the &lt;code>forms&lt;/code> object as shown below.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#4e9a06">&amp;#34;forms&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;N&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;meta&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;code&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;N&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;label&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;en&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;New Person Registration&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;fields&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;place_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;labels&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;tiny&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;en&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;place_id&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;description&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;en&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Household ID&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;short&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;en&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;HH ID&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;position&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;string&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;length&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#0000cf;font-weight:bold">13&lt;/span>
&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;required&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;gender&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;labels&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;tiny&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;en&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;gender&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;description&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;en&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Gender&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;short&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;en&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Gender&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;position&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;string&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;length&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#0000cf;font-weight:bold">6&lt;/span>
&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;required&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;age&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;labels&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;tiny&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;en&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;age&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;description&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;en&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Age&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;short&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;en&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Age&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;position&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">2&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;integer&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;length&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#0000cf;font-weight:bold">2&lt;/span>
&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;required&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;patient_name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;labels&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;tiny&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;en&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;patient_name&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;description&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;en&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Patient name&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;short&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;en&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Patient name&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;position&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">3&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;string&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;length&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#0000cf;font-weight:bold">3&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#0000cf;font-weight:bold">30&lt;/span>
&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;required&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
Users will register a new person by sending a text message in the format &lt;code>N &amp;lt;household id&amp;gt; &amp;lt;gender&amp;gt; &amp;lt;age&amp;gt; &amp;lt;name&amp;gt;&lt;/code>. For example, &lt;code>N 12345 F 20 Jane Cho&lt;/code> will register &lt;code>Jane Cho&lt;/code> who belongs to the household with household ID &lt;code>12345&lt;/code>.
&lt;/div>
&lt;p>To set the validation rules and autoresponses, edit the array corresponding to the &lt;code>registration&lt;/code> key in &lt;code>app_settings.json&lt;/code>. Add an object within the array as shown below.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#4e9a06">&amp;#34;registrations&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;form&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;N&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;events&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;on_create&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;trigger&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;add_patient&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;params&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;{ \&amp;#34;parent_id\&amp;#34;: \&amp;#34;place_id\&amp;#34; }&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;bool_expr&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;validations&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;join_responses&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">false&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;list&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;property&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;place_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;rule&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;regex(&amp;#39;^[0-9]{5,13}$&amp;#39;)&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;messages.validation.household_id&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;property&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;gender&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;rule&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;iEquals(&amp;#39;m&amp;#39;) || iEquals(&amp;#39;f&amp;#39;)&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;messages.n.validation.gender&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;property&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;age&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;rule&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;between(5,130)&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;messages.n.validation.age&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;messages&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;event&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;report_accepted&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;messages.n.report_accepted&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;recipient&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;reporting_unit&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="4-define-a-report-submission-form">4. Define a Report Submission form&lt;/h3>
&lt;p>Add a report submission form by adding a key and object pair to the &lt;code>forms&lt;/code> object as shown below.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#4e9a06">&amp;#34;forms&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;P&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;meta&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;code&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;P&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;label&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;en&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Pregnancy Registration&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;fields&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;patient_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;position&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;labels&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;tiny&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;en&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;patient_id&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;short&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;en&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Woman&amp;#39;s ID&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;description&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;en&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Woman&amp;#39;s ID&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;string&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;length&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#0000cf;font-weight:bold">5&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#0000cf;font-weight:bold">13&lt;/span>
&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;required&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;lmp&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;position&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;labels&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;tiny&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;en&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;lmp&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;short&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;en&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;LMP in weeks&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;description&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;en&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Last menstrual period - in weeks&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;integer&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;length&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#0000cf;font-weight:bold">2&lt;/span>
&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;required&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">false&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
Users will pregnancy registration report by sending a text message in the format &lt;code>P &amp;lt;patient id&amp;gt; &amp;lt;last menstrual period&amp;gt;&lt;/code>. For example, &lt;code>P 23456 21&lt;/code> will register a pregnancy report for a person whose unique ID is &lt;code>23456&lt;/code> and the last menstrual period was &lt;code>21 weeks ago&lt;/code>.
&lt;/div>
&lt;p>To set the validation rules and autoresponses, edit the array corresponding to the &lt;code>registration&lt;/code> key in &lt;code>app_settings.json&lt;/code>. Add an object within the array as shown below.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#4e9a06">&amp;#34;registrations&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;form&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;P&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;events&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;on_create&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;trigger&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;add_expected_date&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;params&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;lmp_date&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;bool_expr&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;doc.fields.lmp &amp;amp;&amp;amp; /^[0-9]+$/.test(doc.fields.lmp)&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;validations&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;join_responses&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">false&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;list&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;property&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;patient_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;rule&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;regex(&amp;#39;^[0-9]{5,13}$&amp;#39;)&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;messages.validation.patient_id&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;property&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;lmp&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;rule&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;lenMin(1) ? (integer &amp;amp;&amp;amp; between(4,42)) : optional&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;messages.p.validation.weeks_since_last_lmp&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;messages&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;event_type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;report_accepted&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;messages.p.report_accepted&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;recipient&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;reporting_unit&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;event_type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;registration_not_found&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;messages.validation.woman_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;recipient&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;reporting_unit&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="5-upload-app-settings">5. Upload App Settings&lt;/h3>
&lt;p>To upload app settings to your local instance, run the following command:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-zsh" data-lang="zsh">cht --url&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>https://&amp;lt;username&amp;gt;:&amp;lt;password&amp;gt;@localhost --accept-self-signed-certs upload-app-settings
&lt;/code>&lt;/pre>&lt;/div>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
Be sure to replace the values &lt;code>&amp;lt;username&amp;gt;&lt;/code> and &lt;code>&amp;lt;password&amp;gt;&lt;/code> with the actual username and password of your test instance.
&lt;/div>
&lt;h2 id="next-steps">Next steps&lt;/h2>
&lt;p>In the next tutorial, you will define scheduled messages that can be triggered or cleared by submitting SMS forms.&lt;/p></description></item><item><title>Apps: targets.js</title><link>https://docs.communityhealthtoolkit.org/apps/reference/targets/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/reference/targets/</guid><description>
&lt;p>&lt;img src="counts.png" alt="Percentages">&lt;/p>
&lt;p>&lt;img src="percentages.png" alt="Percentages">&lt;/p>
&lt;p>All targets are defined in the &lt;code>targets.js&lt;/code> file as an array of objects according to the Targets schema defined below. Each object corresponds to a target widget that shows in the app. The order of objects in the array defines the display order of widgets on the Targets tab. The properties of the object are used to define when the target should appear, what it should look like, and the values it will display.&lt;/p>
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/apps/features/targets/">Targets Overview&lt;/a>&lt;/p>
&lt;h2 id="targetsjs">&lt;code>targets.js&lt;/code>&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>property&lt;/th>
&lt;th>type&lt;/th>
&lt;th>description&lt;/th>
&lt;th>required&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>id&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code>&lt;/td>
&lt;td>An identifier for the target.&lt;/td>
&lt;td>yes, unique&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>icon&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code>&lt;/td>
&lt;td>The icon to show alongside the target. Should correspond with a value defined in &lt;code>resources.json&lt;/code>.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>translation_key&lt;/code>&lt;/td>
&lt;td>&lt;code>translation key&lt;/code>&lt;/td>
&lt;td>Translation key for the title of this target.&lt;/td>
&lt;td>no, but recommended&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>subtitle_translation_key&lt;/code>&lt;/td>
&lt;td>&lt;code>translation key&lt;/code>&lt;/td>
&lt;td>Translation key for the subtitle of this target. If none supplied the subtitle will be blank.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>percentage_count_translation_key&lt;/code>&lt;/td>
&lt;td>&lt;code>translation key&lt;/code>&lt;/td>
&lt;td>Translation key for the percentage value detail shown at the bottom of the target, eg &amp;ldquo;(5 of 6 deliveries)&amp;quot;. The translation context has &lt;code>pass&lt;/code> and &lt;code>total&lt;/code> variables available. If none supplied this defaults to &lt;code>targets.count.default&lt;/code>.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>context&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code>&lt;/td>
&lt;td>A string containing a JavaScript expression. This widget will only be shown if the expression evaluates to true. Details of the current user is available through the variable &lt;code>user&lt;/code>.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>type&lt;/code>&lt;/td>
&lt;td>&lt;code>'count'&lt;/code> or &lt;code>'percent'&lt;/code>&lt;/td>
&lt;td>The type of the widget.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>goal&lt;/code>&lt;/td>
&lt;td>&lt;code>integer&lt;/code>&lt;/td>
&lt;td>For targets with &lt;code>type: 'percent'&lt;/code>, an integer from 0 to 100. For &lt;code>type: 'count'&lt;/code>, any positive number. If there is no goal, put -1.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>appliesTo&lt;/code>&lt;/td>
&lt;td>&lt;code>'contacts'&lt;/code> or &lt;code>'reports'&lt;/code>&lt;/td>
&lt;td>Do you want to count reports or contacts? This attribute controls the behavior of other attributes herein.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>appliesToType&lt;/code>&lt;/td>
&lt;td>If &lt;code>appliesTo: 'reports'&lt;/code>, an array of form codes. If &lt;code>appliesTo: 'contacts'&lt;/code>, an array of contact types.&lt;/td>
&lt;td>Filters the contacts or reports for which &lt;code>appliesIf&lt;/code> will be evaluated. For example, &lt;code>['person']&lt;/code> or &lt;code>['clinic', 'health_center']&lt;/code>. For example, &lt;code>['pregnancy']&lt;/code> or &lt;code>['P', 'pregnancy']&lt;/code>.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>appliesIf&lt;/code>&lt;/td>
&lt;td>&lt;code>function(contact, report)&lt;/code>&lt;/td>
&lt;td>If &lt;code>appliesTo: 'contacts'&lt;/code>, this function is invoked once per contact and &lt;code>report&lt;/code> is undefined. If &lt;code>appliesTo: 'reports'&lt;/code>, this function is invoked once per report. Return true to count this document. For &lt;code>type: 'percent'&lt;/code>, this controls the denominator.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>passesIf&lt;/code>&lt;/td>
&lt;td>&lt;code>function(contact, report)&lt;/code>&lt;/td>
&lt;td>For &lt;code>type: 'percent'&lt;/code>, return true to increment the numerator.&lt;/td>
&lt;td>yes, if &lt;code>type: 'percent'&lt;/code>. Forbidden when &lt;code>groupBy&lt;/code> is defined.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>date&lt;/code>&lt;/td>
&lt;td>&lt;code>'reported'&lt;/code> or &lt;code>'now'&lt;/code> or &lt;code>function(contact, report)&lt;/code>&lt;/td>
&lt;td>When &lt;code>'reported'&lt;/code>, the target will count documents with a &lt;code>reported_date&lt;/code> within the current month. When &lt;code>'now'&lt;/code>, target includes all documents. A function can be used to indicate when the document should be counted. Default is &lt;code>'reported'&lt;/code>.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>idType&lt;/code>&lt;/td>
&lt;td>&lt;code>'report'&lt;/code> or &lt;code>'contact'&lt;/code> or &lt;code>function(contact, report)&lt;/code>&lt;/td>
&lt;td>The target&amp;rsquo;s values are incremented once per unique ID. To count individual contacts that have one or more reports that apply, use &lt;code>'contact'&lt;/code>. Use &lt;code>'report'&lt;/code> to count all reports, even if there are multiple that apply for a single contact. If you need more than a single count for each applying contact or report then a custom function can be used returning an array with unique IDs — one element for each count.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>groupBy&lt;/code>&lt;/td>
&lt;td>&lt;code>function(contact, report)&lt;/code> returning string&lt;/td>
&lt;td>Allows for target ids to be aggregated and scored in groups. Not required for most targets. Use with passesIfGroupCount.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>passesIfGroupCount&lt;/code>&lt;/td>
&lt;td>&lt;code>object&lt;/code>&lt;/td>
&lt;td>The criteria to determine if the target ids within a group should be counted as passing&lt;/td>
&lt;td>yes when &lt;code>groupBy&lt;/code> is defined&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>passesIfGroupCount.gte&lt;/code>&lt;/td>
&lt;td>&lt;code>number&lt;/code>&lt;/td>
&lt;td>The group should be counted as passing if the number of target ids in the group is greater-than-or-equal-to this value&lt;/td>
&lt;td>yes when &lt;code>groupBy&lt;/code> is defined&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>dhis&lt;/code>&lt;/td>
&lt;td>&lt;code>object&lt;/code> or &lt;code>object[]&lt;/code>&lt;/td>
&lt;td>Settings relevant to the &lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/integrations/dhis2-aggregate/#configuration">DHIS2 Integration&lt;/a>&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>dhis[n].dataElement&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code>&lt;/td>
&lt;td>The hash id of a data element configured in the DHIS2 data set you&amp;rsquo;re integrating with&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>dhis[n].dataSet&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code>&lt;/td>
&lt;td>The hash id of the data set that contains the data element you&amp;rsquo;re integrating with. If this is left undefined, the data element will appear in all data sets.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>visible&lt;/code>&lt;/td>
&lt;td>&lt;code>boolean&lt;/code>&lt;/td>
&lt;td>Whether the target is visible in the targets page. &lt;strong>Default: true&lt;/strong>&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>aggregate&lt;/code>&lt;/td>
&lt;td>&lt;code>boolean&lt;/code>&lt;/td>
&lt;td>As of 3.9, defines whether the target will be displayed on the TargetAggregates page&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="utils">Utils&lt;/h2>
&lt;p>Utility functions in the Core Framework can make common tasks much easier. These are available only for Tasks and Targets. To use the function call &lt;code>Utils.&amp;lt;function-name&amp;gt;(&amp;lt;params&amp;gt;)&lt;/code>, for example &lt;code>Utils.addDate(report.reported_date, 10)&lt;/code>.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Name&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>isTimely(date, event)&lt;/code>&lt;/td>
&lt;td>Returns true if the given date is after the start date and before the end date of the event.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>addDate(date, days)&lt;/code>&lt;/td>
&lt;td>Returns a new Date set to midnight the given number of days after the given date. If no date is given the date defaults to today.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>getLmpDate(doc)&lt;/code>&lt;/td>
&lt;td>Attempts to work out the LMP from the given doc. If no LMP is given it defaults to four weeks before the reported_date.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>getSchedule(name)&lt;/code>&lt;/td>
&lt;td>Returns the task schedule with the given name from the configuration.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>getMostRecentTimestamp(reports, form)&lt;/code>&lt;/td>
&lt;td>Returns the reported_date of the most recent of the reports with form ID matching the given form.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>getMostRecentReport(reports, form)&lt;/code>&lt;/td>
&lt;td>Like &lt;code>getMostRecentTimestamp&lt;/code> but returns the report, not just the reported_date. From CHT v3.14.0, it also accepts an array of forms.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>isFormSubmittedInWindow(reports, form, start, end)&lt;/code>&lt;/td>
&lt;td>Returns true if any of the given reports are for the given form and were reported after start and before end.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>isFirstReportNewer(firstReport, secondReport)&lt;/code>&lt;/td>
&lt;td>Returns true if the firstReport was reported before the secondReport.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>isDateValid(date)&lt;/code>&lt;/td>
&lt;td>Returns true if the given date is a validate JavaScript Date.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>now()&lt;/code>&lt;/td>
&lt;td>Returns the current Date.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>MS_IN_DAY&lt;/code>&lt;/td>
&lt;td>A constant for the number of milliseconds in a day.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Please open &lt;a href="https://github.com/medic/cht-core/issues/new">an issue&lt;/a> if you&amp;rsquo;d like other functions included.&lt;/p>
&lt;h2 id="cht-api">CHT API&lt;/h2>
&lt;p>&lt;em>Introduced in v3.12.0&lt;/em>&lt;/p>
&lt;p>Provides CHT-Core Framework&amp;rsquo;s functions to contact summary, targets and tasks. The API is available in the &lt;code>cht&lt;/code> reserved variable under the &lt;code>v1&lt;/code> version.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Function&lt;/th>
&lt;th>Arguments&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>hasPermissions(permissions, userRoles, chtPermissionsSettings)&lt;/td>
&lt;td>&lt;code>permissions&lt;/code>: String or array of permission name(s).&lt;br>&lt;code>userRoles&lt;/code>: (Optional) Array of user roles. Default to the current logged in user.&lt;br>&lt;code>chtPermissionsSettings&lt;/code>: (Optional) Object of configured permissions in CHT-Core&amp;rsquo;s settings. Default to the current instance&amp;rsquo;s configured permissions.&lt;/td>
&lt;td>Returns true if the user has the permission(s), otherwise returns false.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hasAnyPermission(permissionsGroups, userRoles, chtPermissionsSettings)&lt;/td>
&lt;td>&lt;code>permissionsGroups&lt;/code>: Array of groups of permission name(s).&lt;br>&lt;code>userRoles&lt;/code>: (Optional) Array of user roles. Default to the current logged in user.&lt;br>&lt;code>chtPermissionsSettings&lt;/code>: (Optional) Object of configured permissions in CHT-Core&amp;rsquo;s settings. Default to the current instance&amp;rsquo;s configured permissions.&lt;/td>
&lt;td>Returns true if the user has all the permissions of any of the provided groups, otherwise returns false.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="cht-apis-code-samples">CHT API&amp;rsquo;s code samples&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-js" data-lang="js">&lt;span style="color:#204a87;font-weight:bold">const&lt;/span> &lt;span style="color:#000">canEdit&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000">cht&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">v1&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">hasPermissions&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;can_edit&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">const&lt;/span> &lt;span style="color:#000">canManagePlaces&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000">cht&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">v1&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">hasPermissions&lt;/span>&lt;span style="color:#000;font-weight:bold">([&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;can_create_places&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;can_update_places&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">]);&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">const&lt;/span> &lt;span style="color:#000">hasAnyGroup&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000">cht&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">v1&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">hasAnyPermission&lt;/span>&lt;span style="color:#000;font-weight:bold">([&lt;/span>
&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;can_view_messages&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;can_view_message_action&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;can_view_reports&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;can_verify_reports&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;span style="color:#000;font-weight:bold">]);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="code-samples">Code Samples&lt;/h2>
&lt;p>This sample &lt;code>targets.js&lt;/code> generates three widgets, and uses functions written in the &lt;code>targets-extras.js&lt;/code> file.&lt;/p>
&lt;h3 id="targetsjs-1">&lt;code>targets.js&lt;/code>&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-js" data-lang="js">&lt;span style="color:#204a87;font-weight:bold">const&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#000">isHealthyDelivery&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">countReportsSubmittedInWindow&lt;/span> &lt;span style="color:#000;font-weight:bold">}&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000">require&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;./targets-extras&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>
&lt;span style="color:#000">module&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">exports&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">// BIRTHS THIS MONTH
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">id&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;births-this-month&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">type&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;count&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">icon&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;infant&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">goal&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">translation_key&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;targets.births.title&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">subtitle_translation_key&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;targets.this_month.subtitle&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">appliesTo&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;reports&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">appliesIf&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000">isHealthyDelivery&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">date&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;reported&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">// % DELIVERIES ALL TIME WITH 1+ VISITS
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">id&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;delivery-with-min-1-visit&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">type&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;percent&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">icon&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;nurse&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">goal&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">100&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">translation_key&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;targets.delivery_1_visit.title&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">subtitle_translation_key&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;targets.all_time.subtitle&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">appliesTo&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;reports&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">idType&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;report&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">appliesIf&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000">isHealthyDelivery&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">passesIf&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">function&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">c&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">r&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">var&lt;/span> &lt;span style="color:#000">visits&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000">countReportsSubmittedInWindow&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">c&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">reports&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">antenatalForms&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">r&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">reported_date&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span> &lt;span style="color:#000">MAX_DAYS_IN_PREGNANCY&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">*&lt;/span>&lt;span style="color:#000">MS_IN_DAY&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">r&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">reported_date&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#000">visits&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000">date&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;now&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">id&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;2-home-visits-per-family&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">icon&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;home-visit&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">type&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;percent&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">goal&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">100&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">translation_key&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">`target.2-home-visits-per-family`&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">context&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;user.role === &amp;#34;chw&amp;#34;&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">date&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;reported&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">appliesTo&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;contacts&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">appliesToType&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;person&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">idType&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000">contact&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">// Determines the target ids which will be in the group.
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#8f5902;font-style:italic">// eg. &amp;#34;family1~2000-02-15&amp;#34; and &amp;#34;family1~2000-02-16&amp;#34;
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#204a87;font-weight:bold">const&lt;/span> &lt;span style="color:#000">householdVisitDates&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#204a87;font-weight:bold">new&lt;/span> &lt;span style="color:#000">Set&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">contact&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">reports&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">map&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">report&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span> &lt;span style="color:#000">toDateString&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">report&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">reported_date&lt;/span>&lt;span style="color:#000;font-weight:bold">)));&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">const&lt;/span> &lt;span style="color:#000">familyId&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000">contact&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">contact&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">parent&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">_id&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#204a87">Array&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">from&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">householdVisitDates&lt;/span>&lt;span style="color:#000;font-weight:bold">).&lt;/span>&lt;span style="color:#000">map&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">date&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span> &lt;span style="color:#4e9a06">`&lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">familyId&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">~&lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">date&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">`&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000">groupBy&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000">contact&lt;/span> &lt;span style="color:#000;font-weight:bold">=&amp;gt;&lt;/span> &lt;span style="color:#000">contact&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">contact&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">parent&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">_id&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">passesIfGroupCount&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#000">gte&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">2&lt;/span> &lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="targets-extrasjs">&lt;code>targets-extras.js&lt;/code>&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-js" data-lang="js">&lt;span style="color:#000">module&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">exports&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">isHealthyDelivery&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">c&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">r&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#000">r&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">form&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">===&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;D&amp;#39;&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">||&lt;/span>
&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">r&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">form&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">===&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;delivery&amp;#39;&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#000">r&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">fields&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">pregnancy_outcome&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">===&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;healthy&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000">countReportsSubmittedInWindow&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">reports&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">form&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">start&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">end&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">var&lt;/span> &lt;span style="color:#000">reportsFound&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;span style="color:#000">reports&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">forEach&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#204a87;font-weight:bold">function&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">r&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">if&lt;/span> &lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">form&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">indexOf&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">r&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">form&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;=&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">if&lt;/span> &lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">r&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">reported_date&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;=&lt;/span> &lt;span style="color:#000">start&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#000">r&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">reported_date&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;=&lt;/span> &lt;span style="color:#000">end&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">reportsFound&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">++&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">});&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#000">reportsFound&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">};&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="build">Build&lt;/h2>
&lt;p>To build your targets into your app, you must compile them into app-settings, then upload them to your instance.&lt;/p>
&lt;p>&lt;code>cht --local compile-app-settings backup-app-settings upload-app-settings&lt;/code>&lt;/p></description></item><item><title>Apps: tasks.js</title><link>https://docs.communityhealthtoolkit.org/apps/reference/tasks/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/reference/tasks/</guid><description>
&lt;p>&lt;img src="task-with-description.png" alt="task">&lt;/p>
&lt;p>Tasks are configured in the &lt;code>tasks.js&lt;/code> file. This file is a JavaScript module which defines an array of objects conforming to the Task schema detailed below. When defining tasks, all the data about contacts on the device (both people and places) along with all their reports are available. Tasks are available only for users of type &amp;ldquo;restricted to their place&amp;rdquo;. Tasks can pull in fields from reports and pass data as inputs to the form that opens when the task is selected, enabling richer user experiences.&lt;/p>
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/apps/features/tasks/">Tasks Overview&lt;/a>&lt;/p>
&lt;h2 id="tasksjs">&lt;code>tasks.js&lt;/code>&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>property&lt;/th>
&lt;th>type&lt;/th>
&lt;th>description&lt;/th>
&lt;th>required&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>name&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code>&lt;/td>
&lt;td>A unique identifier for the task. Used for querying task completeness.&lt;/td>
&lt;td>yes, unique&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>icon&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code>&lt;/td>
&lt;td>The icon to show alongside the task. Should correspond with a value defined in &lt;code>resources.json&lt;/code>.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>title&lt;/code>&lt;/td>
&lt;td>&lt;code>translation key&lt;/code>&lt;/td>
&lt;td>The title of the task (labeled above).&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>appliesTo&lt;/code>&lt;/td>
&lt;td>&lt;code>'contacts'&lt;/code> or &lt;code>'reports'&lt;/code>&lt;/td>
&lt;td>Do you want to emit one task per report, or one task per contact? See &lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/tasks/task-schema-parameters/">Understanding the Parameters in the Task Schema&lt;/a>.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>appliesIf&lt;/code>&lt;/td>
&lt;td>&lt;code>function(contact, report)&lt;/code>&lt;/td>
&lt;td>If &lt;code>appliesTo: 'contacts'&lt;/code>, this function is invoked once per contact and &lt;code>report&lt;/code> is undefined. If &lt;code>appliesTo: 'reports'&lt;/code>, this function is invoked once per report. Return true if the task should appear for the given documents. See &lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/tasks/task-schema-parameters/">Understanding the Parameters in the Task Schema&lt;/a>.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>appliesToType&lt;/code>&lt;/td>
&lt;td>&lt;code>string[]&lt;/code>&lt;/td>
&lt;td>Filters the contacts or reports for which &lt;code>appliesIf&lt;/code> will be evaluated. If &lt;code>appliesTo: 'reports'&lt;/code>, this is an array of form codes. If &lt;code>appliesTo: 'contacts'&lt;/code>, this is an array of contact types. For example, &lt;code>['person']&lt;/code> or &lt;code>['clinic', 'health_center']&lt;/code>. For example, &lt;code>['pregnancy']&lt;/code> or &lt;code>['P', 'pregnancy']&lt;/code>. See &lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/tasks/task-schema-parameters/">Understanding the Parameters in the Task Schema&lt;/a>.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>contactLabel&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code> or &lt;code>function(contact, report)&lt;/code>&lt;/td>
&lt;td>Controls the label describing the subject of the task. Defaults to the name of the contact (&lt;code>contact.contact.name&lt;/code>).&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>resolvedIf&lt;/code>&lt;/td>
&lt;td>&lt;code>function(contact, report, event, dueDate)&lt;/code>&lt;/td>
&lt;td>Return true to mark the task as &amp;ldquo;resolved&amp;rdquo;. A resolved task uses memory on the phone, but is not displayed.&lt;/td>
&lt;td>no, if any &lt;code>actions[n].type&lt;/code> is &lt;code>'report'&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>events&lt;/code>&lt;/td>
&lt;td>&lt;code>object[]&lt;/code>&lt;/td>
&lt;td>An event is used to specify the timing of the task.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>events[n].id&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code>&lt;/td>
&lt;td>A descriptive identifier. Used for querying task completeness.&lt;/td>
&lt;td>yes if task has multiple events, unique&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>events[n].days&lt;/code>&lt;/td>
&lt;td>&lt;code>integer&lt;/code>&lt;/td>
&lt;td>Number of days after the doc&amp;rsquo;s &lt;code>reported_date&lt;/code> that the event is due&lt;/td>
&lt;td>yes, if &lt;code>dueDate&lt;/code> is not set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>events[n].dueDate&lt;/code>&lt;/td>
&lt;td>&lt;code>function(event, contact, report)&lt;/code>&lt;/td>
&lt;td>Returns a &lt;code>Date&lt;/code> object for the day when this event is due.&lt;/td>
&lt;td>yes, if &lt;code>days&lt;/code> is not set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>events[n].start&lt;/code>&lt;/td>
&lt;td>&lt;code>integer&lt;/code>&lt;/td>
&lt;td>Number of days to show the task before it is due.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>events[n].end&lt;/code>&lt;/td>
&lt;td>&lt;code>integer&lt;/code>&lt;/td>
&lt;td>Number of days to show the task after it is due.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>actions&lt;/code>&lt;/td>
&lt;td>&lt;code>object[]&lt;/code>&lt;/td>
&lt;td>The actions (forms) that a user can access after clicking on a task. If you put multiple forms here, the user will see a task summary screen where they can select which action they would like to complete.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>actions[n].type&lt;/code>&lt;/td>
&lt;td>&lt;code>'report'&lt;/code> or &lt;code>'contact'&lt;/code>&lt;/td>
&lt;td>When &lt;code>'report'&lt;/code>, the action opens the given form. When &lt;code>'contact'&lt;/code>, the action redirects to a contact&amp;rsquo;s profile page. Defaults to &amp;lsquo;report&amp;rsquo;.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>actions[n].form&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code>&lt;/td>
&lt;td>The code of the form that should open when you select the action.&lt;/td>
&lt;td>yes, if &lt;code>actions[n].type&lt;/code> is &lt;code>'report'&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>actions[n].label&lt;/code>&lt;/td>
&lt;td>&lt;code>translation key&lt;/code>&lt;/td>
&lt;td>The label that should appear on the task summary screen if multiple actions are present.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>actions[n].modifyContent&lt;/code>&lt;/td>
&lt;td>&lt;code>function (content, contact, report, event)&lt;/code>&lt;/td>
&lt;td>Set the values on the content object to control the data which will be passed as &lt;code>inputs&lt;/code> to the form which opens when the action is selected. See &lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/tasks/pass-data-to-form/">Passing data from a task into the app form&lt;/a>.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>priority&lt;/code>&lt;/td>
&lt;td>&lt;code>object&lt;/code> or &lt;code>function(contact, report)&lt;/code> returning object of same schema&lt;/td>
&lt;td>Controls the &amp;ldquo;high risk&amp;rdquo; line seen above.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>priority.level&lt;/code>&lt;/td>
&lt;td>&lt;code>high&lt;/code> or &lt;code>medium&lt;/code>&lt;/td>
&lt;td>Tasks that are &lt;code>high&lt;/code> will display a high risk icon with the task. Default: &lt;code>medium&lt;/code>.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>priority.label&lt;/code>&lt;/td>
&lt;td>&lt;code>translation key&lt;/code>&lt;/td>
&lt;td>Text shown with the task associated to the risk level.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="utils">Utils&lt;/h2>
&lt;p>Utility functions in the Core Framework can make common tasks much easier. These are available only for Tasks and Targets. To use the function call &lt;code>Utils.&amp;lt;function-name&amp;gt;(&amp;lt;params&amp;gt;)&lt;/code>, for example &lt;code>Utils.addDate(report.reported_date, 10)&lt;/code>.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Name&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>isTimely(date, event)&lt;/code>&lt;/td>
&lt;td>Returns true if the given date is after the start date and before the end date of the event.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>addDate(date, days)&lt;/code>&lt;/td>
&lt;td>Returns a new Date set to midnight the given number of days after the given date. If no date is given the date defaults to today.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>getLmpDate(doc)&lt;/code>&lt;/td>
&lt;td>Attempts to work out the LMP from the given doc. If no LMP is given it defaults to four weeks before the reported_date.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>getSchedule(name)&lt;/code>&lt;/td>
&lt;td>Returns the task schedule with the given name from the configuration.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>getMostRecentTimestamp(reports, form)&lt;/code>&lt;/td>
&lt;td>Returns the reported_date of the most recent of the reports with form ID matching the given form.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>getMostRecentReport(reports, form)&lt;/code>&lt;/td>
&lt;td>Like &lt;code>getMostRecentTimestamp&lt;/code> but returns the report, not just the reported_date. From CHT v3.14.0, it also accepts an array of forms.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>isFormSubmittedInWindow(reports, form, start, end)&lt;/code>&lt;/td>
&lt;td>Returns true if any of the given reports are for the given form and were reported after start and before end.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>isFirstReportNewer(firstReport, secondReport)&lt;/code>&lt;/td>
&lt;td>Returns true if the firstReport was reported before the secondReport.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>isDateValid(date)&lt;/code>&lt;/td>
&lt;td>Returns true if the given date is a validate JavaScript Date.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>now()&lt;/code>&lt;/td>
&lt;td>Returns the current Date.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>MS_IN_DAY&lt;/code>&lt;/td>
&lt;td>A constant for the number of milliseconds in a day.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Please open &lt;a href="https://github.com/medic/cht-core/issues/new">an issue&lt;/a> if you&amp;rsquo;d like other functions included.&lt;/p>
&lt;h2 id="cht-api">CHT API&lt;/h2>
&lt;p>&lt;em>Introduced in v3.12.0&lt;/em>&lt;/p>
&lt;p>Provides CHT-Core Framework&amp;rsquo;s functions to contact summary, targets and tasks. The API is available in the &lt;code>cht&lt;/code> reserved variable under the &lt;code>v1&lt;/code> version.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Function&lt;/th>
&lt;th>Arguments&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>hasPermissions(permissions, userRoles, chtPermissionsSettings)&lt;/td>
&lt;td>&lt;code>permissions&lt;/code>: String or array of permission name(s).&lt;br>&lt;code>userRoles&lt;/code>: (Optional) Array of user roles. Default to the current logged in user.&lt;br>&lt;code>chtPermissionsSettings&lt;/code>: (Optional) Object of configured permissions in CHT-Core&amp;rsquo;s settings. Default to the current instance&amp;rsquo;s configured permissions.&lt;/td>
&lt;td>Returns true if the user has the permission(s), otherwise returns false.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hasAnyPermission(permissionsGroups, userRoles, chtPermissionsSettings)&lt;/td>
&lt;td>&lt;code>permissionsGroups&lt;/code>: Array of groups of permission name(s).&lt;br>&lt;code>userRoles&lt;/code>: (Optional) Array of user roles. Default to the current logged in user.&lt;br>&lt;code>chtPermissionsSettings&lt;/code>: (Optional) Object of configured permissions in CHT-Core&amp;rsquo;s settings. Default to the current instance&amp;rsquo;s configured permissions.&lt;/td>
&lt;td>Returns true if the user has all the permissions of any of the provided groups, otherwise returns false.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="cht-apis-code-samples">CHT API&amp;rsquo;s code samples&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-js" data-lang="js">&lt;span style="color:#204a87;font-weight:bold">const&lt;/span> &lt;span style="color:#000">canEdit&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000">cht&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">v1&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">hasPermissions&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;can_edit&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">const&lt;/span> &lt;span style="color:#000">canManagePlaces&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000">cht&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">v1&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">hasPermissions&lt;/span>&lt;span style="color:#000;font-weight:bold">([&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;can_create_places&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;can_update_places&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">]);&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">const&lt;/span> &lt;span style="color:#000">hasAnyGroup&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000">cht&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">v1&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">hasAnyPermission&lt;/span>&lt;span style="color:#000;font-weight:bold">([&lt;/span>
&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;can_view_messages&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;can_view_message_action&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;can_view_reports&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;can_verify_reports&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;span style="color:#000;font-weight:bold">]);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="code-samples">Code samples&lt;/h2>
&lt;h3 id="basic-task">Basic task&lt;/h3>
&lt;p>This sample &lt;code>tasks.js&lt;/code> generates two postnatal-visit tasks for each delivery form. The tasks are due 7 and 14 days after the delivery report was submitted. Each task is displayed for 2 days before the due date and 2 days after the due date.&lt;/p>
&lt;h4 id="tasksjs-1">tasks.js&lt;/h4>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-js" data-lang="js">&lt;span style="color:#000">module&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">exports&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">icon&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;mother-child&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">title&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;task.postnatal_followup&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">appliesTo&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;reports&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">appliesToType&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;delivery&amp;#39;&lt;/span> &lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#000">actions&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#000">form&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;postnatal_visit&amp;#39;&lt;/span> &lt;span style="color:#000;font-weight:bold">}&lt;/span> &lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#000">events&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">id&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;postnatal-followup-1&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">days&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">7&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">start&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">2&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">end&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">2&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">id&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;postnatal-followup-2&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">days&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">14&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">start&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">2&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">end&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">2&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#000">resolvedIf&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">function&lt;/span> &lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">contact&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">report&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">event&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">dueDate&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#000">Utils&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">isFormSubmittedInWindow&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>
&lt;span style="color:#000">contact&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">reports&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#4e9a06">&amp;#39;delivery&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">Utils&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">addDate&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">dueDate&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">event&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">start&lt;/span>&lt;span style="color:#000;font-weight:bold">).&lt;/span>&lt;span style="color:#000">getTime&lt;/span>&lt;span style="color:#000;font-weight:bold">(),&lt;/span>
&lt;span style="color:#000">Utils&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">addDate&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">dueDate&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">event&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">end&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">).&lt;/span>&lt;span style="color:#000">getTime&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span>
&lt;span style="color:#000;font-weight:bold">);&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">];&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="tasks-with-functions">Tasks with functions&lt;/h3>
&lt;p>These samples show more complex tasks which use functions kept in a separate &lt;code>nools-extras.js&lt;/code> file&lt;/p>
&lt;h4 id="tasksjs-2">&lt;code>tasks.js&lt;/code>&lt;/h4>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-js" data-lang="js">&lt;span style="color:#204a87;font-weight:bold">const&lt;/span> &lt;span style="color:#000">extras&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000">require&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;./nools-extras&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">const&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#000">isFormFromArraySubmittedInWindow&lt;/span> &lt;span style="color:#000;font-weight:bold">}&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000">extras&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;span style="color:#000">module&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">exports&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">// PNC TASK 1: If a home delivery, needs clinic tasks
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">icon&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;mother-child&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">title&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#000">locale&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;en&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">content&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;Postnatal visit needed&amp;#39;&lt;/span> &lt;span style="color:#000;font-weight:bold">}&lt;/span> &lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#000">appliesTo&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;reports&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">appliesToType&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;D&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;delivery&amp;#39;&lt;/span> &lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#000">appliesIf&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">function&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">c&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">r&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#000">isCoveredByUseCase&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">c&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">contact&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;pnc&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&amp;amp;&lt;/span>
&lt;span style="color:#000">r&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">fields&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&amp;amp;&lt;/span>
&lt;span style="color:#000">r&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">fields&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">delivery_code&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&amp;amp;&lt;/span>
&lt;span style="color:#000">r&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">fields&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">delivery_code&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">toUpperCase&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">!==&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;F&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000">actions&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[{&lt;/span>
&lt;span style="color:#000">form&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;postnatal_visit&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">// Pass content that will be used within the task form
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#000">modifyContent&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">function&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">content&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">c&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">r&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">event&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">content&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">delivery_place&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;home&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;span style="color:#000">content&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">event_id&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000">event&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">id&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}],&lt;/span>
&lt;span style="color:#000">events&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">id&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;postnatal-visit&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">days&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">start&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">end&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">4&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span> &lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#000">priority&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">level&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;high&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">label&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#000">locale&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;en&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">content&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;Home Birth&amp;#39;&lt;/span> &lt;span style="color:#000;font-weight:bold">}&lt;/span> &lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000">resolvedIf&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">function&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">c&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">r&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">event&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">dueDate&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">// Resolved if there a visit report received in time window or a newer pregnancy
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#000">r&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">reported_date&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span> &lt;span style="color:#000">extras&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">getNewestDeliveryTimestamp&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">c&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">||&lt;/span>
&lt;span style="color:#000">r&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">reported_date&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span> &lt;span style="color:#000">extras&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">getNewestPregnancyTimestamp&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">c&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">||&lt;/span>
&lt;span style="color:#000">isFormFromArraySubmittedInWindow&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">c&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">reports&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">extras&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">postnatalForms&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">Utils&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">addDate&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">dueDate&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">event&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">start&lt;/span>&lt;span style="color:#000;font-weight:bold">).&lt;/span>&lt;span style="color:#000">getTime&lt;/span>&lt;span style="color:#000;font-weight:bold">(),&lt;/span>
&lt;span style="color:#000">Utils&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">addDate&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">dueDate&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">event&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">end&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">).&lt;/span>&lt;span style="color:#000">getTime&lt;/span>&lt;span style="color:#000;font-weight:bold">());&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">// Option 1a: Place-based task: Family survey when place is created, then every 6 months
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">icon&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;family&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">title&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;task.family_survey.title&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">appliesTo&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;contacts&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">appliesToType&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;clinic&amp;#39;&lt;/span> &lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#000">actions&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#000">form&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;family_survey&amp;#39;&lt;/span> &lt;span style="color:#000;font-weight:bold">}&lt;/span> &lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#000">events&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">id&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;family-survey&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">days&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">start&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">end&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">14&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span> &lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#000">resolvedIf&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">function&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">c&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">r&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">event&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">dueDate&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">// Resolved if there a family survey received in time window
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#000">isFormFromArraySubmittedInWindow&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">c&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">reports&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;family_survey&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">Utils&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">addDate&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">dueDate&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">event&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">start&lt;/span>&lt;span style="color:#000;font-weight:bold">).&lt;/span>&lt;span style="color:#000">getTime&lt;/span>&lt;span style="color:#000;font-weight:bold">(),&lt;/span>
&lt;span style="color:#000">Utils&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">addDate&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">dueDate&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">event&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">end&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">).&lt;/span>&lt;span style="color:#000">getTime&lt;/span>&lt;span style="color:#000;font-weight:bold">());&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">// Regular check for infants
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">icon&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;infant&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">title&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;task.infant.title&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">appliesTo&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;contacts&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">appliesToType&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;person&amp;#39;&lt;/span> &lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#000">actions&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#000">form&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;infant_assessment&amp;#39;&lt;/span> &lt;span style="color:#000;font-weight:bold">}&lt;/span> &lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#000">events&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">id&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;infant_asssessment-q1&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">days&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">91&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">start&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">7&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">end&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">14&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">id&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;infant_asssessment-q2&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">days&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">182&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">start&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">7&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">end&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">14&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">id&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;infant_asssessment-q3&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">days&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">273&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">start&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">7&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">end&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">14&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">id&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;infant_asssessment-q4&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">days&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">365&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">start&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">7&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">end&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">14&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">// Option 2: Place-based task: Family survey every 6 months
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">icon&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;family&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">title&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;task.family_survey.title&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">appliesTo&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;contacts&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">appliesToType&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;clinic&amp;#39;&lt;/span> &lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#000">appliesIf&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000">extras&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">needsFamilySurvey&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#8f5902;font-style:italic">// function returns true if family doesn&amp;#39;t have survey in previous 6 months
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#000">actions&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span> &lt;span style="color:#000">form&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;family_survey&amp;#39;&lt;/span> &lt;span style="color:#000;font-weight:bold">}&lt;/span> &lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#000">events&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">id&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;family-survey&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">start&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">end&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">14&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">dueDate&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000">extras&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">getNextFamilySurveyDate&lt;/span> &lt;span style="color:#8f5902;font-style:italic">// function gets expected date of next family survey
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#000;font-weight:bold">}&lt;/span> &lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#000">resolvedIf&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">function&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">c&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">r&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">event&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">dueDate&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">// Resolved if there a family survey received in time window
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#000">isFormFromArraySubmittedInWindow&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">c&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">reports&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#39;family_survey&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000">Utils&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">addDate&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">dueDate&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">event&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">start&lt;/span>&lt;span style="color:#000;font-weight:bold">).&lt;/span>&lt;span style="color:#000">getTime&lt;/span>&lt;span style="color:#000;font-weight:bold">(),&lt;/span>
&lt;span style="color:#000">Utils&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">addDate&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">dueDate&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">event&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">end&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">).&lt;/span>&lt;span style="color:#000">getTime&lt;/span>&lt;span style="color:#000;font-weight:bold">());&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="nools-extrasjs">&lt;code>nools-extras.js&lt;/code>&lt;/h4>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-js" data-lang="js">&lt;span style="color:#000">module&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">exports&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#000">isCoveredByUseCase&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">function&lt;/span> &lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">contact&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">usecase&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">// ...
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000">getNewestDeliveryTimestamp&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">function&lt;/span> &lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">c&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">// ...
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000">getNewestPregnancyTimestamp&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">function&lt;/span> &lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">c&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">// ...
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000">isFormFromArraySubmittedInWindow&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">function&lt;/span> &lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">reports&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">formsArray&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">startTime&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">endTime&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">// ...
&lt;/span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">};&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="default-resolvedif-method">Default resolvedIf method&lt;/h3>
&lt;p>If the &lt;code>resolvedIf&lt;/code> is undefined in an action of type &lt;code>report&lt;/code>, then &lt;code>resolvedIf&lt;/code> is going to default to &lt;code>defaultResolvedIf&lt;/code> method.&lt;/p>
&lt;p>The &lt;code>defaultResolvedIf&lt;/code> method returns &lt;code>true&lt;/code> if it finds any report assigned to the contact that matches the &lt;code>form&lt;/code> defined in the action of type &lt;code>report&lt;/code>. Only the reports submitted during a specific time period are considered:&lt;/p>
&lt;ul>
&lt;li>For a contact-based task, the period is the same as the task window period i.e. when the task is visible.&lt;/li>
&lt;li>For a report based task, the period is determined between &lt;code>start&lt;/code> and &lt;code>end&lt;/code> as:
&lt;ul>
&lt;li>&lt;code>start&lt;/code>: the latest date between start of the task window and one millisecond after the report&amp;rsquo;s reported date&lt;/li>
&lt;li>&lt;code>end&lt;/code>: end of the task window&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>You can also use &lt;code>this.definition.defaultResolvedIf&lt;/code> inside the &lt;code>resolvedIf&lt;/code> definition and optionally add more conditions:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-js" data-lang="js">&lt;span style="color:#000">resolvedIf&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">function&lt;/span> &lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">contact&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">report&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">event&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">dueDate&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#204a87;font-weight:bold">this&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">definition&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">defaultResolvedIf&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">contact&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">report&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">event&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">dueDate&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#000">otherConditions&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="build">Build&lt;/h2>
&lt;p>To build your tasks into your app, you must compile them into app-settings, then upload them to your instance.&lt;/p>
&lt;p>&lt;code>cht --local compile-app-settings backup-app-settings upload-app-settings&lt;/code>&lt;/p></description></item><item><title>Apps: Configuring UHC Mode</title><link>https://docs.communityhealthtoolkit.org/apps/guides/forms/uhc-mode/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/guides/forms/uhc-mode/</guid><description>
&lt;p>&lt;em>Introduced in v2.18.0&lt;/em>&lt;/p>
&lt;figure class="right col-6 col-lg-3">&lt;a href="UHC.gif">
&lt;img src="UHC.gif"
alt="UHC Mode screenshot"/> &lt;/a>
&lt;/figure>
&lt;p>The CHT&amp;rsquo;s &lt;a href="https://docs.communityhealthtoolkit.org/apps/features/uhc-mode/">UHC Mode&lt;/a> empowers CHWs to provide equitable and timely care to families in their catchment area. The Community Health Toolkit supports this use-case by displaying the number of visits made to a household and highlighting households which haven&amp;rsquo;t met their visit goal in red at the top of the contact list.&lt;/p>
&lt;p>The date last visited is colored red whenever the date is 30 days or more in the past. The date last visited is displayed as a relative date. This period is described in terms of &amp;ldquo;days&amp;rdquo; up until two months, so &amp;ldquo;Visited 3 days ago&amp;rdquo; or &amp;ldquo;Visited 36 days ago&amp;rdquo;. After two months, we simply say &amp;ldquo;2 months&amp;rdquo; or &amp;ldquo;3 months&amp;rdquo;.&lt;/p>
&lt;h2 id="household-visits">Household Visits&lt;/h2>
&lt;figure class="right col-6 col-lg-3">&lt;a href="sort-dropdown.png">
&lt;img src="sort-dropdown.png"
alt="Contact sorting screenshot"/> &lt;/a>
&lt;/figure>
&lt;p>The date of the last visit is displayed and contacts can be sorted by last visit date to allow the CHW plan their work.&lt;/p>
&lt;p>&amp;ldquo;Date last visited&amp;rdquo; and &amp;ldquo;Visits this month&amp;rdquo; are different data points:&lt;/p>
&lt;ul>
&lt;li>Date last visited is calculated based upon a rolling count of &amp;ldquo;how many days ago&amp;rdquo; and is not tied to the calendar at all.&lt;/li>
&lt;li>Visits this month are tied directly to the calendar.&lt;/li>
&lt;/ul>
&lt;h2 id="configuration">Configuration&lt;/h2>
&lt;p>Any patient- or household-level form or forms can be used to update the date last visited. You may run into performance issues if you configure this to look at forms submitted very frequently. For example, five forms submitted only once a month would work better than two forms submitted every day.&lt;/p>
&lt;h3 id="uhc-permissions">UHC Permissions&lt;/h3>
&lt;p>To see the date last visited instead of the primary contact, grant the relevant user role (usually CHW) the &lt;code>can_view_last_visited_date&lt;/code> permission. Once that permission is enabled, you&amp;rsquo;ll be able to display the date the household was last visited in the list.&lt;/p>
&lt;p>To view UHC metrics, the &lt;code>can_view_uhc_stats&lt;/code> permission needs to be granted to the CHW user role.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json"> &lt;span style="color:#4e9a06">&amp;#34;permissions&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;can_view_last_visited_date&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;chwUserRole&amp;#34;&lt;/span> &lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#a40000">,&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="forms">Forms&lt;/h3>
&lt;p>Indicate which forms should be included in the calculation of the date last visited. You can use forms at the person or household level. Add the &lt;code>visited_contact_uuid&lt;/code> field to forms to track visits. This should be a &lt;code>calculate&lt;/code> field that contains the place UUID of the visited contact. Ensure this is a top-level field and not in any group. When the form is submitted it would be seen as &lt;code>doc.fields.visited_contact_uuid&lt;/code>.&lt;/p>
&lt;h3 id="settings">Settings&lt;/h3>
&lt;p>Information on when to begin counting visits, household visit goals, and default contact sorting is defined in &lt;code>base_settings.json&lt;/code>.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Setting&lt;/th>
&lt;th>Description&lt;/th>
&lt;th>Default&lt;/th>
&lt;th>Version&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>uhc.contacts_default_sort&lt;/td>
&lt;td>&lt;ul>&lt;li>&amp;quot;alpha&amp;rdquo;: Sort contacts alphanumerically&lt;/li>&lt;li>&amp;quot;last_visited_date&amp;rdquo;: sort contacts by the date they were most recently visited.&lt;/li>&lt;/ul>&lt;/td>
&lt;td>&amp;ldquo;alpha&amp;rdquo;&lt;/td>
&lt;td>2.18.0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>uhc.visit_count.month_start_date&lt;/td>
&lt;td>The date of each month when the visit count is reset to 0.&lt;/td>
&lt;td>1&lt;/td>
&lt;td>2.18.0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>uhc.visit_count.visit_count_goal&lt;/td>
&lt;td>The monthly visit count goal.&lt;/td>
&lt;td>0&lt;/td>
&lt;td>2.18.0&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Apps: Building Workflows</title><link>https://docs.communityhealthtoolkit.org/apps/concepts/workflows/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/concepts/workflows/</guid><description>
&lt;p>Workflows can be defined within apps built with the Core Framework to connect actions and data with people. Forms are the main building block of tasks and messaging workflows, and are useful in creating reminders for follow-up visits or referrals.&lt;/p>
&lt;h2 id="tasks">Tasks&lt;/h2>
&lt;p>Tasks within the app can drive a workflow, ensuring that the right actions are taken for people at the right time. Tasks indicate a recommended action to the user. They indicate who the user should perform the action with, and the recommended timeframe of that action. When the user taps the task, they are directed to a form where the details of the action are captured.&lt;/p>
&lt;p>Tasks can be triggered by a set of conditions, such as contact details or submitted reports. Tasks are accessible in the Tasks tab and the profile in the Contact tab, and initiate a follow up action to complete a form. More information on building app workflows is available in the &lt;a href="https://docs.communityhealthtoolkit.org/apps/features/tasks/">Tasks section&lt;/a>.&lt;/p>
&lt;p>Data submitted in one form can generate several tasks at once, for example, multiple ANC visits following one pregnancy registration. Some workflows involve a series of sequential forms and tasks, such as a child health assessment form, a follow up task scheduled 48 hours later, a referral form (only if the child’s condition hasn’t improved), and then a referral follow up task. Tasks are accessible on the Tasks tab, as well as the Tasks section of profiles.
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/tasks/">Defining Tasks&lt;/a>&lt;/p>
&lt;/p>
&lt;p>&lt;figure class="left col-3 col-lg-3">&lt;a href="tasks-mobile.png">
&lt;img src="tasks-mobile.png"/> &lt;/a>
&lt;/figure>
&lt;figure class="left col-9 col-lg-9">&lt;a href="tasks-desktop.png">
&lt;img src="tasks-desktop.png"/> &lt;/a>
&lt;/figure>
&lt;/p>
&lt;h2 id="sms-messaging">SMS Messaging&lt;/h2>
&lt;p>Workflows can include notifications and interactions with CHWs, nurses, supervisors, and patients via SMS. A report can trigger SMS messages to be sent immediately or upon a set schedule. Responses via SMS or the app can update the workflows.
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/#sms-workflows">Defining SMS Workflows&lt;/a>&lt;/p>
&lt;/p>
&lt;p>&lt;figure class="left col-3 col-lg-3">&lt;a href="messages-mobile.png">
&lt;img src="messages-mobile.png"/> &lt;/a>
&lt;/figure>
&lt;figure class="left col-9 col-lg-9">&lt;a href="messages-desktop.png">
&lt;img src="messages-desktop.png"/> &lt;/a>
&lt;/figure>
&lt;/p>
&lt;h2 id="interoperability">Interoperability&lt;/h2>
&lt;p>Workflows can incorporate other digital tools, such as a facility-based electronic medical record system for referral workflows. New contacts or reports can trigger an interoperabilty workflow using the &lt;a href="">outbound push&lt;/a> feature. Data can be received as reports using the &lt;a href="https://github.com/medic/cht-core/tree/master/api">CHT API&lt;/a>
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/outbound/">Outbound Push&lt;/a>&lt;/p>
&lt;/p></description></item><item><title>Apps: Configurable Hierarchies</title><link>https://docs.communityhealthtoolkit.org/apps/concepts/hierarchy/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/concepts/hierarchy/</guid><description>
&lt;p>The Core Framework requires a hierarchy to organize the information in the app. It is often based on the hierarchy of a health system within a particular geographic region.&lt;/p>
&lt;p>Large deployment sites often need three or more levels of place hierarchy, while some small sites need fewer than three levels. For this reason, the Core Framework’s information hierarchies are configurable to meet a users needs.&lt;/p>
&lt;p>A user logging into their app will see a custom set of people, tasks, reports, and analytics based on the hierarchy level that they belong to. This allows appropriate data sharing based on the role of the user in the health system.&lt;/p>
&lt;p>The information hierarchy is configured in the administration console. The hierarchy levels can be given different titles depending on a particular health system’s program or reporting structures.&lt;/p>
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/hierarchy/">Defining Hierarchy&lt;/a>&lt;/p>
&lt;h3 id="places">Places&lt;/h3>
&lt;p>This is an example of a simple hierarchy that includes a CHW Supervisor area, CHW area, and families as levels which serve as “places” or units of organizing people.&lt;/p>
&lt;p>&lt;img src="hierarchy-with-places.png" alt="hierarchy-with-places.png">&lt;/p>
&lt;p>User roles can be assigned to log in at any of these levels. For example, it would be customary for a CHW to log in at the CHW Area level and view the families, and below that the people, i.e. patients or family members, who belong there.&lt;/p>
&lt;h3 id="people">People&lt;/h3>
&lt;p>The hierarchy can be modeled after the health system, health program and/or the community. All people are associated with a place and these places can be associated to each other.&lt;/p>
&lt;p>For example, a Family Member is part of a Family. A Family and CHWs are part of a CHW Area. A Family Member, a Family, and CHWs are part of a CHW Supervisor Area.&lt;/p>
&lt;p>&lt;img src="hierarchy-with-people.png" alt="hierarchy-with-people.png">&lt;/p>
&lt;p>Additional hierarchy levels may be added as needed and each section of the hierarchy is configurable. For instance, many large projects have unbalanced hierarchies, which is to say, some parts of the hierarchy have more or different layers than others.
The Admin level operates outside of the hierarchy structure and enables access to all levels and people within the hierarchy.&lt;/p></description></item><item><title>Apps: Building SMS Schedules</title><link>https://docs.communityhealthtoolkit.org/apps/tutorials/sms-schedules/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/tutorials/sms-schedules/</guid><description>
&lt;p>SMS schedules allow you to send reminder messages at predetermined times. These reminders serve as useful prompts for end-users to take specific actions.&lt;/p>
&lt;div class="pageinfo pageinfo-primary">
&lt;p>This tutorial takes you through how to set up SMS schedules for CHT applications. It uses a pregnancy registration workflow and follow-up reminders for a Community Health Worker as an example. The same methodology can be applied to other workflows and reminders as needed.&lt;/p>
&lt;/div>
&lt;h2 id="brief-overview-of-key-concepts">Brief Overview of Key Concepts&lt;/h2>
&lt;p>&lt;em>&lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/schedules/">SMS schedules&lt;/a>&lt;/em> are a series of SMS messages that are to be sent to specific contacts at future dates and times. They are defined in either the &lt;code>base_settings.json&lt;/code> or the &lt;code>app_settings/schedules.json&lt;/code> file and compiled into the &lt;em>&lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/">app_settings.json&lt;/a>&lt;/em> file with the &lt;code>compile-app-settings&lt;/code> action in the &lt;code>cht-conf&lt;/code> tool.&lt;/p>
&lt;p>SMS schedules can be triggered by &lt;em>&lt;a href="https://docs.communityhealthtoolkit.org/apps/tutorials/sms-forms/">SMS forms&lt;/a>&lt;/em> or &lt;em>&lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/forms/app/">App forms&lt;/a>&lt;/em>.&lt;/p>
&lt;h2 id="required-resources">Required Resources&lt;/h2>
&lt;p>You should have &lt;a href="https://docs.communityhealthtoolkit.org/apps/tutorials/sms-forms/#4-define-a-report-submission-form">built a pregnancy SMS form&lt;/a>.&lt;/p>
&lt;h2 id="implementation-steps">Implementation Steps&lt;/h2>
&lt;p>SMS schedules are defined &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/schedules/#app_settingsjson-schedules">using JSON&lt;/a> in the &lt;code>app_settings.json&lt;/code> file.&lt;/p>
&lt;h3 id="1-define-a-pregnancy-follow-up-schedule">1. Define a Pregnancy Follow Up Schedule&lt;/h3>
&lt;p>To set the pregnancy follow up schedule, edit the array corresponding to the &lt;code>schedules&lt;/code> key in &lt;code>app_settings.json&lt;/code>. Add an object within the array as shown. This will set a schedule of reminders that will be sent after a time interval (&lt;code>offset&lt;/code>) relative to a base date (&lt;code>start_from&lt;/code>).&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#a40000">schedules:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Pregnancy Follow Up Reminders&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;summary&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;description&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;start_from&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;fields.lmp_date&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;messages&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;message&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;content&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Hello {{contact.name}}, please remind {{patient_name}} ({{patient_id}}) to go for her clinic visit this week.&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;locale&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;en&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;group&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;offset&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;23 days&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;send_day&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;send_time&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;09:00&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;recipient&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;reporting_unit&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;message&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;content&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Hello {{contact.name}}, please remind {{patient_name}} ({{patient_id}}) to go for her clinic visit this week.&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;locale&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;en&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;group&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">2&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;offset&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;51 days&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;send_day&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;send_time&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;09:00&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;recipient&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;reporting_unit&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;message&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;content&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Hello {{contact.name}}, please remind {{patient_name}} ({{patient_id}}) to go for her clinic visit this week.&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;locale&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;en&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;group&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">3&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;offset&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;79 days&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;send_day&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;send_time&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;09:00&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;recipient&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;reporting_unit&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;message&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;content&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Hello {{contact.name}}, please remind {{patient_name}} ({{patient_id}}) to go for her clinic visit this week.&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;locale&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;en&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;group&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">4&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;offset&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;107 days&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;send_day&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;send_time&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;09:00&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;recipient&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;reporting_unit&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/schedules/">Schedule properties&lt;/a>&lt;/p>
&lt;h3 id="2-assign-the-schedule">2. Assign the Schedule&lt;/h3>
&lt;p>In the &lt;code>registrations&lt;/code> array where you have defined the pregnancy registration events, add an event to assign the &lt;code>Pregnancy Follow Up Reminders&lt;/code> schedule. This will assign a new schedule for every pregnancy that is registered.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;on_create&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;trigger&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;assign_schedule&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;params&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Pregnancy Follow Up Reminders&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;bool_expr&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;doc.fields.lmp &amp;amp;&amp;amp; /^[0-9]+$/.test(doc.fields.lmp)&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The final result should look like this:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#4e9a06">&amp;#34;registrations&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;form&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;P&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;events&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;on_create&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;trigger&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;add_expected_date&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;params&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;lmp_date&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;bool_expr&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;doc.fields.lmp &amp;amp;&amp;amp; /^[0-9]+$/.test(doc.fields.lmp)&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;on_create&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;trigger&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;assign_schedule&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;params&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Pregnancy Follow Up Reminders&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;bool_expr&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;doc.fields.lmp &amp;amp;&amp;amp; /^[0-9]+$/.test(doc.fields.lmp)&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;validations&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;join_responses&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">false&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;list&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;property&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;patient_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;rule&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;regex(&amp;#39;^[0-9]{5,13}$&amp;#39;)&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;messages.validation.patient_id&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;property&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;lmp&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;rule&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;lenMin(1) ? (integer &amp;amp;&amp;amp; between(4,42)) : optional&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;messages.p.validation.weeks_since_last_lmp&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;messages&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;event_type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;report_accepted&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;messages.p.report_accepted&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;recipient&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;reporting_unit&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;event_type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;registration_not_found&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;translation_key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;messages.validation.woman_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;recipient&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;reporting_unit&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="3-upload-app-settings">3. Upload App Settings&lt;/h3>
&lt;p>To upload app settings to your local instance, run the following command:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-zsh" data-lang="zsh">cht --url&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>https://&amp;lt;username&amp;gt;:&amp;lt;password&amp;gt;@localhost --accept-self-signed-certs upload-app-settings
&lt;/code>&lt;/pre>&lt;/div>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
Be sure to replace the values &lt;code>&amp;lt;username&amp;gt;&lt;/code> and &lt;code>&amp;lt;password&amp;gt;&lt;/code> with the actual username and password of your test instance.
&lt;/div>
&lt;h2 id="frequenty-asked-questions">Frequenty Asked Questions&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://forum.communityhealthtoolkit.org/t/can-you-schedule-sms-based-on-date-field-in-report/87">Can you schedule SMS based on date field in report?&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://forum.communityhealthtoolkit.org/t/can-sms-schedules-be-cleared-based-on-a-field-in-a-form/651">Can SMS schedules be cleared based on a field in a form?&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Apps: Building App Forms</title><link>https://docs.communityhealthtoolkit.org/apps/tutorials/app-forms/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/tutorials/app-forms/</guid><description>
&lt;p>App forms allow users to submit reports from Android devices&lt;/p>
&lt;div class="pageinfo pageinfo-primary">
&lt;p>This tutorial will take you through how to build App forms for CHT applications, including:&lt;/p>
&lt;ul>
&lt;li>Authoring forms in Excel, Google sheets or other spreadsheet applications.&lt;/li>
&lt;li>Converting XLSForms to XForms&lt;/li>
&lt;li>Uploading XForms to CHT&lt;/li>
&lt;/ul>
&lt;p>You will be building assessment workflow that allows Community Health Workers to conduct a health assessment for children under the age of 5.&lt;/p>
&lt;/div>
&lt;h2 id="brief-overview-of-key-concepts">Brief Overview of Key Concepts&lt;/h2>
&lt;p>&lt;em>&lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/forms/app/">App forms&lt;/a>&lt;/em> serve as actions within the app.&lt;/p>
&lt;p>&lt;em>&lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/forms/app/#xlsform">XLSForm&lt;/a>&lt;/em> is a form &lt;a href="http://xlsform.org/en/">standard&lt;/a> created to help simplify the authoring of forms in Excel.&lt;/p>
&lt;p>&lt;em>&lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/forms/app/#xform">XForm&lt;/a>&lt;/em> is a CHT-enhanced version of the &lt;a href="https://getodk.github.io/xforms-spec/">ODK XForm&lt;/a> standard.&lt;/p>
&lt;h2 id="required-resources">Required Resources&lt;/h2>
&lt;p>You should have a &lt;a href="https://docs.communityhealthtoolkit.org/apps/tutorials/local-setup/">functioning CHT instance with &lt;code>cht-conf&lt;/code> installed locally&lt;/a> and a &lt;a href="https://docs.communityhealthtoolkit.org/apps/tutorials/local-setup/#3-create-and-upload-a-blank-project">project folder set up&lt;/a> already.&lt;/p>
&lt;h2 id="implementation-steps">Implementation Steps&lt;/h2>
&lt;p>Create a new spread sheet in Google sheets or other preferred editor like Excel or Open Office. Name the spreadsheet &lt;code>assessment&lt;/code>. The final file name should be &lt;code>assessment.xlsx&lt;/code>.&lt;/p>
&lt;p>Create 2 additional sheets. Rename the sheets &lt;code>survey&lt;/code>, &lt;code>choices&lt;/code> and &lt;code>settings&lt;/code>.&lt;/p>
&lt;h3 id="1-define-xls-surveyform-fields">1. Define XLS Survey/Form Fields&lt;/h3>
&lt;p>Create the following columns in the survey sheet and then add the following rows that are populated automatically before the form is rendered to the user. These fields are usually hidden by default but can be accessed to display certain information about the person being assessed:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>type&lt;/th>
&lt;th>name&lt;/th>
&lt;th>label&lt;/th>
&lt;th>required&lt;/th>
&lt;th>relevant&lt;/th>
&lt;th>appearance&lt;/th>
&lt;th>constraint&lt;/th>
&lt;th>constraint_message&lt;/th>
&lt;th>calculation&lt;/th>
&lt;th>choice_filter&lt;/th>
&lt;th>hint&lt;/th>
&lt;th>default&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>inputs&lt;/td>
&lt;td>Patient&lt;/td>
&lt;td>&lt;/td>
&lt;td>./source = &amp;lsquo;user&amp;rsquo;&lt;/td>
&lt;td>field-list&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hidden&lt;/td>
&lt;td>source&lt;/td>
&lt;td>Source&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>user&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hidden&lt;/td>
&lt;td>source_id&lt;/td>
&lt;td>Source_ID&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hidden&lt;/td>
&lt;td>task_id&lt;/td>
&lt;td>Task_ID&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>contact&lt;/td>
&lt;td>Contact&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>db:person&lt;/td>
&lt;td>_id&lt;/td>
&lt;td>Patient ID&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>db-object&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>Select a person from the list&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hidden&lt;/td>
&lt;td>patient_id&lt;/td>
&lt;td>Medic ID&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hidden&lt;/td>
&lt;td>name&lt;/td>
&lt;td>Patient Name&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>parent&lt;/td>
&lt;td>Parent&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hidden&lt;/td>
&lt;td>_id&lt;/td>
&lt;td>Family UUID&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>parent&lt;/td>
&lt;td>Grandparent&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hidden&lt;/td>
&lt;td>_id&lt;/td>
&lt;td>CHW Area UUID&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hidden&lt;/td>
&lt;td>name&lt;/td>
&lt;td>CHW Name&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hidden&lt;/td>
&lt;td>phone&lt;/td>
&lt;td>CHW Phone&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>parent&lt;/td>
&lt;td>Great Grandparent&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hidden&lt;/td>
&lt;td>_id&lt;/td>
&lt;td>CU UUID&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>calculate&lt;/td>
&lt;td>patient_id&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>../inputs/contact/_id&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>calculate&lt;/td>
&lt;td>patient_name&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>../inputs/contact/name&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Add the following rows that define the data collection fields below the existing rows (leave out the column names):&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>type&lt;/th>
&lt;th>name&lt;/th>
&lt;th>label&lt;/th>
&lt;th>required&lt;/th>
&lt;th>relevant&lt;/th>
&lt;th>appearance&lt;/th>
&lt;th>constraint&lt;/th>
&lt;th>constraint_message&lt;/th>
&lt;th>calculation&lt;/th>
&lt;th>choice_filter&lt;/th>
&lt;th>hint&lt;/th>
&lt;th>default&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>group_assessment&lt;/td>
&lt;td>Assessment&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>select_one yes_no&lt;/td>
&lt;td>cough&lt;/td>
&lt;td>Does ${patient_name} have a cough?&lt;/td>
&lt;td>yes&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>select_one symptom_duration&lt;/td>
&lt;td>cough_duration&lt;/td>
&lt;td>How long has the cough lasted?&lt;/td>
&lt;td>yes&lt;/td>
&lt;td>${cough} = &amp;lsquo;yes&amp;rsquo;&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="2-define-the-choices">2. Define the Choices&lt;/h3>
&lt;p>Add the following column names and rows to the choices sheet:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>list_name&lt;/th>
&lt;th>name&lt;/th>
&lt;th>label&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>yes_no&lt;/td>
&lt;td>yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>yes_no&lt;/td>
&lt;td>no&lt;/td>
&lt;td>No&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>symptom_duration&lt;/td>
&lt;td>3&lt;/td>
&lt;td>3 days or less&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>symptom_duration&lt;/td>
&lt;td>7&lt;/td>
&lt;td>4 - 7 days&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>symptom_duration&lt;/td>
&lt;td>13&lt;/td>
&lt;td>8 - 13 days&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>symptom_duration&lt;/td>
&lt;td>14&lt;/td>
&lt;td>14 days or more&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="3-define-the-xls-settings">3. Define the XLS Settings&lt;/h3>
&lt;p>Add the following column names and rows to the settings sheet:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>form_title&lt;/th>
&lt;th>form_id&lt;/th>
&lt;th>version&lt;/th>
&lt;th>style&lt;/th>
&lt;th>path&lt;/th>
&lt;th>instance_name&lt;/th>
&lt;th>default_language&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Assess patient&lt;/td>
&lt;td>assessment&lt;/td>
&lt;td>1&lt;/td>
&lt;td>pages&lt;/td>
&lt;td>data&lt;/td>
&lt;td>&lt;/td>
&lt;td>en&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="4-convert-the-xlsform-and-upload-the-xform">4. Convert the XLSForm and Upload the XForm&lt;/h3>
&lt;p>Add the file to the &lt;code>forms/app&lt;/code> subfolder in your project.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-text" data-lang="text">project-name
forms
app
assessment.xlsx
&lt;/code>&lt;/pre>&lt;/div>&lt;p>To convert and upload the form to your local instance, run the following command from the root folder:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-zsh" data-lang="zsh">cht --url&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>https://&amp;lt;username&amp;gt;:&amp;lt;password&amp;gt;@localhost --accept-self-signed-certs convert-app-forms upload-app-forms -- assessment
&lt;/code>&lt;/pre>&lt;/div>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
Be sure to replace the values &lt;code>&amp;lt;username&amp;gt;&lt;/code> and &lt;code>&amp;lt;password&amp;gt;&lt;/code> with the actual username and password of your test instance.
&lt;/div>
&lt;h2 id="next-steps">Next steps&lt;/h2>
&lt;p>In the next tutorial, you will define the form &lt;code>&amp;lt;form_id&amp;gt;.properties.json&lt;/code> which will allow you to define the form’s title and icon, as well as when and where the form should be available.&lt;/p></description></item></channel></rss>