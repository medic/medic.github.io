<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Community Health Toolkit – forms/</title><link>https://docs.communityhealthtoolkit.org/apps/reference/forms/</link><description>Recent content in forms/ on Community Health Toolkit</description><generator>Hugo -- gohugo.io</generator><language>en</language><atom:link href="https://docs.communityhealthtoolkit.org/apps/reference/forms/index.xml" rel="self" type="application/rss+xml"/><item><title>Apps: app</title><link>https://docs.communityhealthtoolkit.org/apps/reference/forms/app/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/reference/forms/app/</guid><description>
&lt;p>App forms are used for care guides within the web app, whether accessed in browser or via the Android app. When a user completes an app form, the contents are saved in the database with the type &lt;code>data_record&lt;/code>. These docs are known in the app as &lt;a href="https://docs.communityhealthtoolkit.org/apps/features/reports/">Reports&lt;/a>.&lt;/p>
&lt;p>App forms are defined by the following files:&lt;/p>
&lt;ul>
&lt;li>A XML form definition using a CHT-enhanced ODK XForm format&lt;/li>
&lt;li>A XLSForm form definition, easier to write and converts to the XForm (optional)&lt;/li>
&lt;li>Meta information in the &lt;code>{form_name}.properties.json&lt;/code> file (optional)&lt;/li>
&lt;li>Media files in the &lt;code>{form_name}-media&lt;/code> directory (optional). How to &lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/forms/multimedia/">include multimedia files&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h2 id="xform">XForm&lt;/h2>
&lt;p>A CHT-enhanced version of the ODK XForm standard is supported.&lt;/p>
&lt;p>Data needed during the completion of the form (eg patient&amp;rsquo;s name, prior information) is passed into the &lt;code>inputs&lt;/code> group. Reports that have at least one of &lt;code>place_id&lt;/code>, &lt;code>patient_id&lt;/code>, and &lt;code>patient_uuid&lt;/code> at the top level will be associated with that contact.&lt;/p>
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/contact-page/#care-guides">Passing contact data to care guides&lt;/a>&lt;/p>
&lt;p>A typical form ends with a summary group (eg &lt;code>group_summary&lt;/code>, or &lt;code>group_review&lt;/code>) where important information is shown to the user before they submit the form.&lt;/p>
&lt;p>In between the &lt;code>inputs&lt;/code> and the closing group is the form flow - a collection of questions that can be grouped into pages. All data fields submitted with a form are stored, but often important information that will need to be accessed from the form is brought to the top level. To make sure forms are properly associated to a contact, make sure at least one of &lt;code>place_id&lt;/code>, &lt;code>patient_id&lt;/code>, and &lt;code>patient_uuid&lt;/code> is stored at the top level of the form.&lt;/p>
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/design/best-practices/#content-and-layout">Content and Layout&lt;/a>&lt;/p>
&lt;h2 id="xlsform">XLSForm&lt;/h2>
&lt;p>Since writing raw XML can be tedious, we suggest creating the forms using the &lt;a href="http://xlsform.org/">XLSForm standard&lt;/a>, and using the &lt;a href="https://github.com/medic/cht-conf">cht-conf&lt;/a> command line configurer tool to &lt;a href="#build">convert them to XForm format&lt;/a>.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>type&lt;/th>
&lt;th>name&lt;/th>
&lt;th>label&lt;/th>
&lt;th>relevant&lt;/th>
&lt;th>appearance&lt;/th>
&lt;th>calculate&lt;/th>
&lt;th>&amp;hellip;&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>inputs&lt;/td>
&lt;td>Inputs&lt;/td>
&lt;td>./source = &amp;lsquo;user&amp;rsquo;&lt;/td>
&lt;td>field-list&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hidden&lt;/td>
&lt;td>source&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hidden&lt;/td>
&lt;td>source_id&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hidden&lt;/td>
&lt;td>task_id&lt;/td>
&lt;td>Task_ID&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>contact&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>string&lt;/td>
&lt;td>_id&lt;/td>
&lt;td>Patient ID&lt;/td>
&lt;td>&lt;/td>
&lt;td>select-contact type-person&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>string&lt;/td>
&lt;td>patient_id&lt;/td>
&lt;td>Medic ID&lt;/td>
&lt;td>&lt;/td>
&lt;td>hidden&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>string&lt;/td>
&lt;td>name&lt;/td>
&lt;td>Patient Name&lt;/td>
&lt;td>&lt;/td>
&lt;td>hidden&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>calculate&lt;/td>
&lt;td>_id&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>../inputs/contact/_id&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>calculate&lt;/td>
&lt;td>patient_id&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>../inputs/contact/patient_id&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>calculate&lt;/td>
&lt;td>name&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>../inputs/contact/name&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>group_summary&lt;/td>
&lt;td>Summary&lt;/td>
&lt;td>&lt;/td>
&lt;td>field-list summary&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>note&lt;/td>
&lt;td>r_patient_info&lt;/td>
&lt;td>**${patient_name}** ID: ${r_patient_id}&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>note&lt;/td>
&lt;td>r_followup&lt;/td>
&lt;td>Follow Up &amp;lt;i class=&amp;ldquo;fa fa-flag&amp;rdquo;&amp;gt;&amp;lt;/i&amp;gt;&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>note&lt;/td>
&lt;td>r_followup_note&lt;/td>
&lt;td>${r_followup_instructions}&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>Note:&lt;/strong> If the form uses a file picker to upload any type of file, and it is accessed by using CHT Android, then include the &lt;code>READ_EXTERNAL_STORAGE&lt;/code> permission in order to access the files in the device. To enable this permission add the following line in the branded app&amp;rsquo;s &lt;code>AndroidManifest.xml&lt;/code>.&lt;/p>
&lt;pre tabindex="0">&lt;code>&amp;lt;uses-permission android:name=&amp;#34;android.permission.READ_EXTERNAL_STORAGE&amp;#34;/&amp;gt;
&lt;/code>&lt;/pre>&lt;h3 id="supported-xlsform-meta-fields">Supported XLSForm Meta Fields&lt;/h3>
&lt;p>&lt;a href="http://xlsform.org/">XLSForm&lt;/a> has a number of &lt;a href="https://xlsform.org/en/#metadata">data type options&lt;/a> available for meta data collection, of which the following are supported in CHT app forms:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>element&lt;/th>
&lt;th>description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>start&lt;/code>&lt;/td>
&lt;td>A timestamp of when the form entry was started, which occurs when the form is fully loaded.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>end&lt;/code>&lt;/td>
&lt;td>A timestamp of when the form entry ended, which is when the user hits the Submit button.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>today&lt;/code>&lt;/td>
&lt;td>Day on which the form entry was started.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="xpath">XPath&lt;/h2>
&lt;p>Calculations are achieved within app forms using XPath statements in the &amp;ldquo;calculate&amp;rdquo; field of XForms and XLSForms. CHT apps support XPath from the &lt;a href="https://getodk.github.io/xforms-spec">ODK XForm spec&lt;/a>, which is based on a subset of &lt;a href="https://www.w3.org/TR/1999/REC-xpath-19991116/">XPath 1.0&lt;/a>, and is evaluated by &lt;a href="https://github.com/enketo/enketo/tree/main/packages/openrosa-xpath-evaluator">&lt;code>openrosa-xpath-evaluator&lt;/code>&lt;/a>. The ODK XForm documentation provides useful notes about the available &lt;a href="https://getodk.github.io/xforms-spec/#xpath-operators">operators&lt;/a> and &lt;a href="https://getodk.github.io/xforms-spec/#xpath-functions">functions&lt;/a>. Additionally, &lt;a href="#cht-xpath-functions">CHT specific functions&lt;/a> are available for forms in CHT apps.&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
The &lt;code>+&lt;/code> operator for string concatenation is deprecated and will be removed in a future version. You are strongly encouraged to use the &lt;a href="https://getodk.github.io/xforms-spec/#fn:concat">&lt;code>concat()&lt;/code>&lt;/a> function instead.
&lt;/div>
&lt;h2 id="cht-xform-widgets">CHT XForm Widgets&lt;/h2>
&lt;p>Some XForm widgets have been added or modified for use in CHT applications. The code for these widgets can be found in the &lt;a href="https://github.com/medic/cht-core/tree/master/webapp/src/js/enketo/widgets">CHT Core Framework repository&lt;/a>.&lt;/p>
&lt;h3 id="bikram-sambat-datepicker">Bikram Sambat Datepicker&lt;/h3>
&lt;p>Calendar widget using Bikram Sambat calendar, which is used by default for appropriate languages. The CHT documentation includes a &lt;a href="https://docs.communityhealthtoolkit.org/bikram-sambat/">conversion tool&lt;/a> to check the conversion between Gregorian and Bikram Sambat dates.
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/forms/app/#to-bikram-sambat">`to-bikram-sambat` XPath function&lt;/a>&lt;/p>
&lt;/p>
&lt;h3 id="countdown-timer">Countdown Timer&lt;/h3>
&lt;p>A visual timer widget that starts when tapped/clicked, and has an audible alert when done. To use it, first make sure you have the &lt;a href="https://getodk.github.io/xforms-spec/#namespaces">&lt;code>namespaces&lt;/code> column&lt;/a> in the &amp;ldquo;settings&amp;rdquo; tab of your XLSForm populated with a value that includes &lt;code>cht=https://communityhealthtoolkit.org&lt;/code>. Then, you can add the timer as a &lt;code>trigger&lt;/code> field with the &lt;em>appearance&lt;/em> set to &lt;code>countdown-timer&lt;/code>. The duration of the timer (in seconds) can be set in a column named &lt;em>instance::cht:duration&lt;/em> (the default value is &lt;code>60&lt;/code>).&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>type&lt;/th>
&lt;th>appearance&lt;/th>
&lt;th>instance::cht:duration&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>trigger&lt;/td>
&lt;td>countdown-timer&lt;/td>
&lt;td>30&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>If you want to make the timer mandatory so users must wait for the timer to complete before continuing to the next page or submitting the form, you can populate the &lt;em>required&lt;/em> column with an XPath expression as you would do for any other required question. A value of &lt;code>&amp;quot;OK&amp;quot;&lt;/code> will be set for the &lt;code>trigger&lt;/code> field when the timer completes.&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
The &lt;code>trigger&lt;/code> implementation of the countdown timer is only supported for CHT versions &lt;code>4.7.0+&lt;/code>. For older CHT versions, the deprecated &lt;code>note&lt;/code> implementation of the countdown timer can be used. However, it does not support setting a value in the &lt;em>required&lt;/em> column. To use the deprecated countdown timer, create a &lt;code>note&lt;/code> field with the &lt;em>appearance&lt;/em> set to &lt;code>countdown-timer&lt;/code>. The duration of the timer (in seconds) can be set in the &lt;code>default&lt;/code> column. If this value is not set, the timer will be set to 60 seconds.
&lt;/div>
&lt;h3 id="contact-selector">Contact Selector&lt;/h3>
&lt;p>A dropdown field to search and select a person or place, and save their UUID in the report. The contact&amp;rsquo;s data will also be mapped to fields with matching names within the containing group. If the contact selector&amp;rsquo;s appearance includes &lt;code>bind-id-only&lt;/code>, the associated data fields are not mapped. See &lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/forms/form-inputs/#contact-selector">the form input guide&lt;/a> for an example.&lt;/p>
&lt;h3 id="rapid-diagnostic-test-capture">Rapid Diagnostic Test Capture&lt;/h3>
&lt;p>Take a picture of a Rapid Diagnotistic Test and save it with the report. Works with &lt;a href="https://github.com/medic/rdt-capture/">rdt-capture Android application&lt;/a>. To use create a string field with appearance &lt;code>mrdt-verify&lt;/code>.&lt;/p>
&lt;h3 id="display-base64-image">Display Base64 Image&lt;/h3>
&lt;p>&lt;em>Available in +3.13.0.&lt;/em>&lt;/p>
&lt;p>To display an image based on a field containing the Base64 encode value, add the appearance &lt;code>display-base64-image&lt;/code> to a field type &lt;code>text&lt;/code>.&lt;/p>
&lt;h3 id="android-app-launcher">Android App Launcher&lt;/h3>
&lt;p>&lt;em>Available in +3.13.0 and in Android device only.&lt;/em>&lt;/p>
&lt;p>A widget to launch an Android app that receives and sends data back to an app form in CHT-Core.&lt;/p>
&lt;p>This widget requires the &lt;code>cht-android&lt;/code> app in order to work, and will be disabled for users running the CHT in a browser. This widget requires the &lt;code>READ_EXTERNAL_STORAGE&lt;/code> permission in CHT Android to work properly, to enable this permission add the following line in the branded app&amp;rsquo;s &lt;code>AndroidManifest.xml&lt;/code>.&lt;/p>
&lt;pre tabindex="0">&lt;code>&amp;lt;uses-permission android:name=&amp;#34;android.permission.READ_EXTERNAL_STORAGE&amp;#34;/&amp;gt;
&lt;/code>&lt;/pre>&lt;p>Use the Android App Launcher widget in a form to configure an intent to launch an Android app installed in the mobile device. The widget will send values from input fields type &lt;code>text&lt;/code> to the app and will assign the app&amp;rsquo;s response into output fields type &lt;code>text&lt;/code>. The only supported field type is &lt;code>text&lt;/code>. The widget will automatically display a button to launch the app.&lt;/p>
&lt;p>To define the widget, create a &lt;code>group&lt;/code> with the appearance &lt;code>android-app-launcher&lt;/code>, then define the &lt;a href="https://developer.android.com/reference/android/content/Intent">Android intent&lt;/a> fields with type &lt;code>text&lt;/code>. The fields &lt;code>action&lt;/code>, &lt;code>category&lt;/code>, &lt;code>type&lt;/code>, &lt;code>uri&lt;/code>, &lt;code>packageName&lt;/code> and &lt;code>flags&lt;/code> are optional. Every Android app has specific ways of launching with intents, so check the app&amp;rsquo;s documentation and assign the corresponding values in the &lt;code>default&lt;/code> column. See example below:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>type&lt;/th>
&lt;th>name&lt;/th>
&lt;th>label&lt;/th>
&lt;th>appearance&lt;/th>
&lt;th>repeat_count&lt;/th>
&lt;th>default&lt;/th>
&lt;th>&amp;hellip;&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>camera-app&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>android-app-launcher&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>action&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>android.media.action.IMAGE_CAPTURE&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>category&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>type&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>uri&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>packageName&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>flags&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>camera-app&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>To define the widget&amp;rsquo;s input fields and send data as Android Intent&amp;rsquo;s &lt;code>extras&lt;/code>, create a group inside the widget with the appearance &lt;code>android-app-inputs&lt;/code>. In order to assign the app&amp;rsquo;s response to the widget&amp;rsquo;s output fields, create a group with the appearance &lt;code>android-app-outputs&lt;/code>.&lt;/p>
&lt;p>&lt;strong>Important to remember:&lt;/strong> The fields inside the input and the output groups should to match in name and location to what the Android app receives and returns, otherwise the communication between the widget and the Android app won&amp;rsquo;t work properly.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>type&lt;/th>
&lt;th>name&lt;/th>
&lt;th>label&lt;/th>
&lt;th>appearance&lt;/th>
&lt;th>repeat_count&lt;/th>
&lt;th>default&lt;/th>
&lt;th>&amp;hellip;&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>camera-app&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>android-app-launcher&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>action&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>android.media.action.IMAGE_CAPTURE&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>camera-app-inputs&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>android-app-inputs&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>location&lt;/td>
&lt;td>Location&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>destination&lt;/td>
&lt;td>Destination&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>camera-app-inputs&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>camera-app-outputs&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>android-app-outputs&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>picture&lt;/td>
&lt;td>Picture&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>date&lt;/td>
&lt;td>Date&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>camera-app-outputs&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>camera-app&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>To instruct the widget to process nested data objects, create a new group inside the input or the output group with the appearance &lt;code>android-app-object&lt;/code>. Objects cannot be assigned to a field, it should be a group with fields to map the properties to fields that share the same name.&lt;/p>
&lt;p>&lt;strong>Important to remember:&lt;/strong> The nested group&amp;rsquo;s name should match in name and location to what the Android app receives and returns, otherwise it won&amp;rsquo;t be able to find the nested object.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>type&lt;/th>
&lt;th>name&lt;/th>
&lt;th>label&lt;/th>
&lt;th>appearance&lt;/th>
&lt;th>repeat_count&lt;/th>
&lt;th>default&lt;/th>
&lt;th>&amp;hellip;&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>camera-app&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>android-app-launcher&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>action&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>android.media.action.IMAGE_CAPTURE&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>camera-app-inputs&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>android-app-inputs&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>location&lt;/td>
&lt;td>Location&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>photo_configuration&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>android-app-object&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>aperture&lt;/td>
&lt;td>Aperture&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>shutter_speed&lt;/td>
&lt;td>Shutter Speed&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>photo_configuration&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>camera-app-inputs&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>camera-app-outputs&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>android-app-outputs&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>picture&lt;/td>
&lt;td>Picture&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>date&lt;/td>
&lt;td>Date&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>camera-app-outputs&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>camera-app&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>To instruct the widget to process an array of strings or numbers, create a new &lt;code>repeat&lt;/code> with fix size in the &lt;code>repeat_count&lt;/code> column and place it inside the input or the output group with the appearance &lt;code>android-app-value-list&lt;/code>, then create 1 field type &lt;code>text&lt;/code> to store every array&amp;rsquo;s value, &lt;em>only 1 field is allowed&lt;/em>. To process an array of objects, use the appearance &lt;code>android-app-object-list&lt;/code> instead.&lt;/p>
&lt;p>&lt;strong>Important to remember:&lt;/strong> The &lt;code>repeat&lt;/code>&amp;rsquo;s name should match in name and location to what the Android app receives and returns, otherwise it won&amp;rsquo;t be able to find the array.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>type&lt;/th>
&lt;th>name&lt;/th>
&lt;th>label&lt;/th>
&lt;th>appearance&lt;/th>
&lt;th>repeat_count&lt;/th>
&lt;th>default&lt;/th>
&lt;th>&amp;hellip;&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>camera-app&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>android-app-launcher&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>action&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>android.media.action.IMAGE_CAPTURE&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>flags&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>268435456&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>camera-app-inputs&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>android-app-inputs&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>location&lt;/td>
&lt;td>Location&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin repeat&lt;/td>
&lt;td>photo_filters&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>android-app-value-list&lt;/td>
&lt;td>2&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>filter&lt;/td>
&lt;td>Filter&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end repeat&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>camera-app-inputs&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>camera-app-outputs&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>android-app-outputs&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>date&lt;/td>
&lt;td>Date&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin repeat&lt;/td>
&lt;td>capture&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>android-app-object-list&lt;/td>
&lt;td>3&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>light_percentage&lt;/td>
&lt;td>Light&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>contrast_percentage&lt;/td>
&lt;td>Contrast&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>patient_details&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>android-app-object&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>picture&lt;/td>
&lt;td>Patient picture&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>patient_id&lt;/td>
&lt;td>Patient ID&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>patient_name&lt;/td>
&lt;td>Patient name&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>patient_details&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end repeat&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>camera-app-outputs&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>camera-app&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&amp;hellip;&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="cht-xpath-functions">CHT XPath Functions&lt;/h2>
&lt;h3 id="add-date">&lt;code>add-date&lt;/code>&lt;/h3>
&lt;p>&lt;em>Available in +4.0.0.&lt;/em>&lt;/p>
&lt;p>Adds the provided number of years/months/days/hours/minutes to a date value.&lt;/p>
&lt;pre tabindex="0">&lt;code>add-date(date, years, months, days, hours, minutes)
&lt;/code>&lt;/pre>&lt;p>This function is useful for things like calculating a date that is a specific number of days in the future. For example, the following returns a date that is two weeks from now: &lt;code>add-date(today(), 0, 0, 14)&lt;/code>.&lt;/p>
&lt;p>You can also add negative numbers to get dates in the past. This can be used to calculate a person&amp;rsquo;s birthdate date based on how many years/months old they are: &lt;code>add-date(today(), 0-${age_years}, 0-${age_months})&lt;/code>.&lt;/p>
&lt;h3 id="chtdifference-in-days">&lt;code>cht:difference-in-days&lt;/code>&lt;/h3>
&lt;p>&lt;em>Available in +4.7.0.&lt;/em>&lt;/p>
&lt;p>Calculates the number of whole days between two dates.&lt;/p>
&lt;h3 id="chtdifference-in-weeks">&lt;code>cht:difference-in-weeks&lt;/code>&lt;/h3>
&lt;p>&lt;em>Available in +4.7.0.&lt;/em>&lt;/p>
&lt;p>Calculates the number of whole calendar weeks between two dates.&lt;/p>
&lt;h3 id="chtdifference-in-months">&lt;code>cht:difference-in-months&lt;/code>&lt;/h3>
&lt;p>Calculates the number of whole calendar months between two dates. This is often used when determining a child&amp;rsquo;s age for immunizations or assessments.&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
For CHT versions lower than &lt;code>4.7.0&lt;/code>, the deprecated &lt;code>difference-in-months&lt;/code> function (without the &lt;code>cht&lt;/code> namespace) should be used.
&lt;/div>
&lt;h3 id="chtdifference-in-years">&lt;code>cht:difference-in-years&lt;/code>&lt;/h3>
&lt;p>&lt;em>Available in +4.7.0.&lt;/em>&lt;/p>
&lt;p>Calculates the number of whole calendar years between two dates.&lt;/p>
&lt;h3 id="z-score">&lt;code>z-score&lt;/code>&lt;/h3>
&lt;p>In Enketo forms you have access to an XPath function to calculate the z-score value for a patient. The function accesses table data stored in CouchDB.&lt;/p>
&lt;p>The &lt;code>z-score&lt;/code> function takes four parameters:&lt;/p>
&lt;ul>
&lt;li>The name of z-score table to use, which corresponds to value of the database document&amp;rsquo;s &lt;code>_id&lt;/code> attribute.&lt;/li>
&lt;li>Patient&amp;rsquo;s sex, which corresponds to the data object&amp;rsquo;s name. In the example below &lt;code>male&lt;/code> for this parameter corresponds to &lt;code>charts[].data.male&lt;/code> in the database document.&lt;/li>
&lt;li>First parameter for the table lookup, such as age. Value maps to the &lt;code>key&lt;/code> value in the database document.&lt;/li>
&lt;li>Second parameter for the table lookup, such as height. Value is compared against the &lt;code>points&lt;/code> in the database document.&lt;/li>
&lt;/ul>
&lt;h4 id="example-use">Example Use&lt;/h4>
&lt;p>&lt;a href="https://github.com/medic/cht-core/blob/3.13.x/demo-forms/z-score.xml">This example XForm form&lt;/a> shows the use of the z-score function. To calculate the z-score for a patient given their sex, age, and weight the XPath calculation is as follows:&lt;/p>
&lt;p>&lt;code>z-score('weight-for-age', ../my_sex, ../my_age, ../my_weight)&lt;/code>&lt;/p>
&lt;p>The data used by this function needs to be added to CouchDB. The example below shows the structure of the database document. It creates a &lt;code>weight-for-age&lt;/code> table, where you can see that a male aged 0 at 2.08kg has a z-score of -3. Your database doc will be substantially larger, so you may find the &lt;a href="https://github.com/medic/cht-core/blob/master/scripts/zscore-table-to-json.js">conversion script&lt;/a> helpful to convert z-score tables to the required doc format.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;zscore-charts&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;charts&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;weight-for-age&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;data&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;male&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;key&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;points&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#0000cf;font-weight:bold">1.701&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#0000cf;font-weight:bold">2.08&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#0000cf;font-weight:bold">2.459&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#0000cf;font-weight:bold">2.881&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#0000cf;font-weight:bold">3.346&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#0000cf;font-weight:bold">3.859&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#0000cf;font-weight:bold">4.419&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#0000cf;font-weight:bold">5.031&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#0000cf;font-weight:bold">5.642&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="parse-timestamp-to-date">&lt;code>parse-timestamp-to-date&lt;/code>&lt;/h3>
&lt;p>&lt;em>Available in +3.13.0.&lt;/em>&lt;/p>
&lt;p>Use this function to parse from a timestamp number to a date. This is useful when using other XForm utility functions that receive date type as parameter, see example below:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>type&lt;/th>
&lt;th>name&lt;/th>
&lt;th>label&lt;/th>
&lt;th>calculation&lt;/th>
&lt;th>default&lt;/th>
&lt;th>&amp;hellip;&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>string&lt;/td>
&lt;td>start_date_time&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;td>&lt;/td>
&lt;td>1628945040308&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>string&lt;/td>
&lt;td>start_date_time_formatted&lt;/td>
&lt;td>Started on:&lt;/td>
&lt;td>format-date-time(&lt;strong>parse-timestamp-to-date(${start_date_time})&lt;/strong>, &amp;ldquo;%e/%b/%Y %H:%M:%S&amp;rdquo;)&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="to-bikram-sambat">&lt;code>to-bikram-sambat&lt;/code>&lt;/h3>
&lt;p>&lt;em>Available in +3.14.0.&lt;/em>&lt;/p>
&lt;p>This function converts a &lt;code>date&lt;/code> to a &lt;code>string&lt;/code> containing the value of the date formatted according to the &lt;a href="https://en.wikipedia.org/wiki/Vikram_Samvat">Bikram Sambat&lt;/a> calendar.&lt;/p>
&lt;p>See also: &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/forms/app/#cht-xform-widgets">Bikram Sambat Datepicker&lt;/a>&lt;/p>
&lt;h3 id="chtextension-lib">&lt;code>cht:extension-lib&lt;/code>&lt;/h3>
&lt;p>&lt;em>Available in +4.2.0.&lt;/em>&lt;/p>
&lt;p>This function invokes a configured &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/extension-libs/">extension library&lt;/a>. The first parameter is a string with the name of the library to execute, and any remaining parameters are passed through as is. For example, to calculate an average of two numbers, the xpath could be: &lt;code>cht:extension-lib('average.js', /data/first, /data/second )&lt;/code>.&lt;/p>
&lt;h2 id="input-data">Input data&lt;/h2>
&lt;p>&lt;code>app&lt;/code> forms have access to a variety of &lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/forms/form-inputs/#app-forms">input data&lt;/a> depending on the source of the form.&lt;/p>
&lt;h2 id="cht-special-fields">CHT Special Fields&lt;/h2>
&lt;p>Some fields in app forms control specific aspects of CHT Apps, either to bring data into forms or for a feature outside of the form.&lt;/p>
&lt;h3 id="quintiles">Quintiles&lt;/h3>
&lt;p>The &lt;code>NationalQuintile&lt;/code> and &lt;code>UrbanQuintile&lt;/code> fields on a form will be assigned to all people belonging to the place. This is helpful when household surveys have quintile information which could be used to target health services for individuals.
&lt;p>&lt;em>Read More&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/forms/wealth-quintiles/">Tracking Wealth Quintiles&lt;/a>&lt;/p>
&lt;/p>
&lt;h3 id="uhc-mode">UHC Mode&lt;/h3>
&lt;p>When the &lt;code>visited_contact_uuid&lt;/code> field is set at the top level of a form, this form is counted as a household visit in &lt;a href="https://docs.communityhealthtoolkit.org/apps/features/uhc-mode/">UHC Mode&lt;/a>. This field must be a &lt;code>calculate&lt;/code> field with the place UUID of the visited contact. You may run into performance issues if you configure this to look at forms submitted very frequently.
&lt;p>&lt;em>Read More&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/forms/uhc-mode/">Configuring UHC Mode&lt;/a>&lt;/p>
&lt;/p>
&lt;h2 id="uploading-binary-attachments">Uploading Binary Attachments&lt;/h2>
&lt;p>Forms can include arbitrary binary data which is submitted and included in the doc as an attachment. If this is an image type it&amp;rsquo;ll then be displayed inline in the report UI.&lt;/p>
&lt;p>To mark an element as having binary data add an extra column in the XLSForm called &lt;code>instance::type&lt;/code> and specify &lt;code>binary&lt;/code> in the element&amp;rsquo;s row.&lt;/p>
&lt;h2 id="properties">Properties&lt;/h2>
&lt;p>The meta information in the &lt;code>{form_name}.properties.json&lt;/code> file defines the form&amp;rsquo;s title and icon, as well as when and where the form should be available.&lt;/p>
&lt;h3 id="formsappform_namepropertiesjson">&lt;code>forms/app/{form_name}.properties.json&lt;/code>&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>property&lt;/th>
&lt;th>description&lt;/th>
&lt;th>required&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>title&lt;/code>&lt;/td>
&lt;td>The form&amp;rsquo;s title seen in the app. Uses a localization array using the 2-letter code, not the translation keys discussed in the &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/translations/">Localization section&lt;/a>.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>icon&lt;/code>&lt;/td>
&lt;td>Icon associated with the form. The value is the image&amp;rsquo;s key in the &lt;code>resources.json&lt;/code> file, as described in the &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/resources/#icons">Icons section&lt;/a>&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>subject_key&lt;/code>&lt;/td>
&lt;td>Override the default report list title with a custom translation key. The translation uses a summary of the report as the evaluation context so you can include report fields in your value, for example: &lt;code>Case registration {{case_id}}&lt;/code>. Useful properties available in the summary include: &lt;code>from&lt;/code> (the phone number of the sender), &lt;code>phone&lt;/code> (the phone number of the report contact), &lt;code>form&lt;/code> (the form code), &lt;code>subject.name&lt;/code> (the name of the subject), and &lt;code>case_id&lt;/code> (the generated case id). Defaults to the name of the report subject.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>hidden_fields&lt;/code>&lt;/td>
&lt;td>Array of Strings of form fields to hide in the view report UI in the app. This is only applied to future reports and will not change how existing reports are displayed.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>context&lt;/code>&lt;/td>
&lt;td>The context defines when and where the form should be available in the app&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>context.person&lt;/code>&lt;/td>
&lt;td>Boolean determining if the form can be seen in the Action list for a person&amp;rsquo;s profile. This is still subject to the &lt;code>expression&lt;/code>.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>context.place&lt;/code>&lt;/td>
&lt;td>Boolean determining if the form can be seen in the Action list for a person&amp;rsquo;s profile. This is still subject to the &lt;code>expression&lt;/code>.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>context.expression&lt;/code>&lt;/td>
&lt;td>A JavaScript expression which is evaluated when a contact profile or the reports tab is viewed. If the expression evaluates to true, the form will be listed as an available action. The inputs &lt;code>contact&lt;/code>, &lt;code>user&lt;/code>, and &lt;code>summary&lt;/code> are available. By default, forms are not shown on the reports tab, use &lt;code>&amp;quot;expression&amp;quot;: &amp;quot;!contact&amp;quot;&lt;/code> to show the form on the Reports tab since there is no contact for this scenario.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>context.permission&lt;/code>&lt;/td>
&lt;td>String permission key required to allow the user to view and submit this form. If blank, this defaults to allowing all access.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="code-sample">Code sample&lt;/h3>
&lt;p>In this sample properties file, the associated form would only show on a person&amp;rsquo;s page, and only if their sex is unspecified or female and they are between 10 and 65 years old:&lt;/p>
&lt;h4 id="formsapppregnancypropertiesjson">&lt;code>forms/app/pregnancy.properties.json&lt;/code>&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;title&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;locale&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;en&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;content&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;New Pregnancy&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">},&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;locale&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;hi&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;content&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;नई गर्भावस्था&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;icon&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;pregnancy-1&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;hidden_fields&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;private&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;internal&amp;#34;&lt;/span> &lt;span style="color:#000;font-weight:bold">],&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;context&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;person&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;place&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">false&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;expression&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;contact.type === &amp;#39;person&amp;#39; &amp;amp;&amp;amp; (!contact.sex || contact.sex === &amp;#39;female&amp;#39;) &amp;amp;&amp;amp; (!contact.date_of_birth || (ageInYears(contact) &amp;gt;= 10 &amp;amp;&amp;amp; ageInYears(contact) &amp;lt; 65))&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;permission&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;can_register_pregnancies&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="build">Build&lt;/h2>
&lt;p>Convert and build the app forms into your application using the &lt;code>convert-app-forms&lt;/code> and &lt;code>upload-app-forms&lt;/code> actions in &lt;code>cht-conf&lt;/code>.&lt;/p>
&lt;pre>&lt;code>cht --local convert-app-forms upload-app-forms
&lt;/code>&lt;/pre></description></item><item><title>Apps: collect</title><link>https://docs.communityhealthtoolkit.org/apps/reference/forms/collect/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/reference/forms/collect/</guid><description>
&lt;p>ODK XForms are used to render forms in the Medic Collect Android app. These forms cannot use any CHT-specific XForm notations. All Medic Collect forms are processed as SMS (even when submitted over a wifi) therefore a corresponding JSON form with matching fields is used to interpret the incoming report.&lt;/p>
&lt;p>Collect forms must be in the &lt;code>forms/collect&lt;/code> folder to be processed by &lt;a href="https://github.com/medic/cht-conf">&lt;code>cht-conf&lt;/code>&lt;/a>&amp;rsquo;s &lt;code>convert-collect-forms&lt;/code> and &lt;code>upload-collect-forms&lt;/code> actions. Once uploaded to the server, they can be downloaded by the Medic Collect app. These forms can also be included in Medic Collect builds for users without a data connection to get forms.&lt;/p>
&lt;p>XForms require a couple minor changes to be compatible with Medic Collect so that they can properly be received by a Medic instance. The changes can be done either manually in the XForm&amp;rsquo;s XML, or automatically with XLSForm forms using &lt;code>cht-conf&lt;/code>.&lt;/p>
&lt;h3 id="automatic-changes-with-xlsforms">Automatic changes with XLSForms&lt;/h3>
&lt;p>If using a &lt;a href="http://xlsform.org/">XLSForm&lt;/a> and using &lt;a href="https://github.com/medic/cht-conf">&lt;code>cht-conf&lt;/code>&lt;/a> to convert to XForm, the necessary fields will be automatically added to the resulting XForm. You can override the default prefix and separator by declaring &lt;code>sms_keyword&lt;/code> and &lt;code>sms_separator&lt;/code> respectively in the Settings tab.&lt;/p>
&lt;h3 id="manual-changes-in-xform">Manual changes in XForm&lt;/h3>
&lt;p>Collect forms need &lt;code>prefix&lt;/code> and &lt;code>delimiter&lt;/code> values added to the XForm&amp;rsquo;s XML. This is done where the form ID is declared in the instance&amp;rsquo;s data model. For example, the following:&lt;/p>
&lt;pre tabindex="0">&lt;code>&amp;lt;instance&amp;gt;
&amp;lt;data id=&amp;#34;myform&amp;#34; &amp;gt;
...
&lt;/code>&lt;/pre>&lt;p>becomes:&lt;/p>
&lt;pre tabindex="0">&lt;code>&amp;lt;instance&amp;gt;
&amp;lt;data id=&amp;#34;myform&amp;#34; prefix=&amp;#34;J1!FORM_CODE!&amp;#34; delimiter=&amp;#34;#&amp;#34;&amp;gt;
...
&lt;/code>&lt;/pre>&lt;p>Note that &lt;code>FORM_CODE&lt;/code> should be replaced with the form code as defined in the JSON forms version of the form. If the form code is &lt;code>ABCD&lt;/code> the prefix value would be &lt;code>J1!ABCD!&lt;/code>, resulting in &lt;code>prefix=&amp;quot;J1!ABCD!&amp;quot;&lt;/code>. In case you are curious, the &lt;code>J1&lt;/code> lets the CHT server know that version 1 of the JavaRosa parser should be used on the incoming SMS.&lt;/p></description></item><item><title>Apps: contact</title><link>https://docs.communityhealthtoolkit.org/apps/reference/forms/contact/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/apps/reference/forms/contact/</guid><description>
&lt;p>Contact forms are used to create and edit contacts (persons and places). Each contact-type should ideally have two forms; one for creation, and another for editing.&lt;/p>
&lt;p>These forms are stored in the &lt;code>forms/contact&lt;/code> sub-folder of the project config directory. The naming convention used should be &lt;code>&amp;lt;contact_type_id-{create|edit}&amp;gt;.xlsx&lt;/code>.&lt;/p>
&lt;h2 id="form-details">Form details&lt;/h2>
&lt;h3 id="survey-sheet">Survey sheet&lt;/h3>
&lt;p>To collect information about the contact, use a top-level group with the &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/app-settings/hierarchy/">id of the contact_type&lt;/a> as the &lt;code>name&lt;/code> of the group (e.g. &lt;code>person&lt;/code> when adding or editing a person contact). Information in this group will be saved to the contact&amp;rsquo;s document in the database.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>type&lt;/th>
&lt;th>name&lt;/th>
&lt;th>label::en&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>begin group&lt;/td>
&lt;td>person&lt;/td>
&lt;td>NO_LABEL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hidden&lt;/td>
&lt;td>parent&lt;/td>
&lt;td>Parent Id&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hidden&lt;/td>
&lt;td>type&lt;/td>
&lt;td>Contact Type&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>string&lt;/td>
&lt;td>name&lt;/td>
&lt;td>Full Name&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;hellip;&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>end group&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>The &lt;code>parent&lt;/code>, &lt;code>type&lt;/code>, and &lt;code>name&lt;/code> fields are mandatory on forms that are adding contacts. &lt;code>parent&lt;/code> will be automatically populated with the id of the parent contact. &lt;code>type&lt;/code> will be automatically set to the contact_type id when saving the new contact.&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Edit forms&lt;/h4>
For edit forms, the name of the top-level group should still match the contact_type id of the contact, but only the relevant fields for editing need to be specified in the form.
&lt;/div>
&lt;h4 id="input-data">Input data&lt;/h4>
&lt;p>&lt;code>contact&lt;/code> forms have access to a variety of &lt;a href="https://docs.communityhealthtoolkit.org/apps/guides/forms/form-inputs/#app-forms">input data&lt;/a>.&lt;/p>
&lt;h3 id="settings-sheet">Settings sheet&lt;/h3>
&lt;p>The &lt;code>form_id&lt;/code> should follow the pattern &lt;code>contact:CONTACT_TYPE_ID:ACTION&lt;/code> where CONTACT_TYPE_ID is the contact_type id for the contact and ACTION is &lt;code>create&lt;/code> or &lt;code>edit&lt;/code>. (e.g. &lt;code>contact:clinic:create&lt;/code>)&lt;/p>
&lt;h3 id="properties">Properties&lt;/h3>
&lt;p>Starting in cht-core release 3.10, we can now configure property files in contact create forms to show or hide them based on an expression or permission as specified in the &lt;a href="https://docs.communityhealthtoolkit.org/apps/reference/forms/app/#formsappform_namepropertiesjson">app form schema&lt;/a>. Note: this applies only to the create form, not the contacts themselves.&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
The form expression for contact forms will only have access to &lt;code>user&lt;/code> data. The &lt;code>contact&lt;/code> and &lt;code>summary&lt;/code> data are &lt;a href="https://github.com/medic/cht-core/issues/6612">not currently available&lt;/a>.
&lt;/div>
&lt;h2 id="generic-contact-forms">Generic contact forms&lt;/h2>
&lt;p>If your place contact forms are similar across all levels of your specified project hierarchy, you can templatise the form creation process. You will need to create the following files in &lt;code>forms/contact&lt;/code>: &lt;code>place-types.json&lt;/code>, &lt;code>PLACE_TYPE-create.xlsx&lt;/code> and &lt;code>PLACE_TYPE-edit.xlsx&lt;/code>.&lt;/p>
&lt;p>&lt;code>place-types.json&lt;/code> maps the place contact_type id to a human-readable description that will be shown on the app&amp;rsquo;s user interface.&lt;/p>
&lt;p>Both &lt;code>PLACE_TYPE-create.xlsx&lt;/code> and &lt;code>PLACE_TYPE-edit.xlsx&lt;/code> will contain two placeholder values &lt;code>PLACE_TYPE&lt;/code> and &lt;code>PLACE_NAME&lt;/code> which will be replaced by the keys and values specified in &lt;code>place-types.json&lt;/code> respectively during form conversion. Also, copies of the different place-type forms will be created (if they don&amp;rsquo;t exist) during the form conversion process with &lt;code>PLACE_TYPE&lt;/code> being replaced with the keys specified in &lt;code>place-types.json&lt;/code>.&lt;/p>
&lt;p>Convert and build the contact forms into your application using the &lt;code>convert-contact-forms&lt;/code> and &lt;code>upload-contact-forms&lt;/code> actions in &lt;code>cht-conf&lt;/code>.&lt;/p>
&lt;blockquote>
&lt;p>&lt;code>cht --local convert-contact-forms upload-contact-forms&lt;/code>&lt;/p>
&lt;/blockquote>
&lt;p>For examples on how to structure the above files you can have a look at the &lt;a href="https://github.com/medic/cht-core/tree/master/config/default/forms/contact">default&lt;/a> configuration in CHT-core.&lt;/p>
&lt;h2 id="creating-person-and-place-contacts-in-the-same-form">Creating person and place contacts in the same form&lt;/h2>
&lt;p>Contact forms for creating a place can also optionally create one or more person-type documents. One of these person contacts can be linked to the created place as the primary contact.&lt;/p>
&lt;p>Below is a simple structure of a place form showing all the necessary components.&lt;/p>
&lt;p>&lt;img src="place-contact-form-survey.png" alt="Place forms survey sheet">&lt;/p>
&lt;p>Section 1 is similar to what has been described earlier for person forms.&lt;/p>
&lt;p>Section 2 specifies the contact that will be linked to the place being created. &lt;code>parent&lt;/code>, &lt;code>type&lt;/code> and &lt;code>contact_type&lt;/code> and &lt;code>name&lt;/code> are mandatory. This also applies to the place-type definition in section 4. &lt;code>contact&lt;/code> on the other hand is not mandatory for the successful creation of a place. It is usually more convenient to create a place and its primary contact at the same time.&lt;/p>
&lt;p>You can also create additional contacts linked to the place being created when you have a structure similar to that shown in section 3.&lt;/p></description></item></channel></rss>