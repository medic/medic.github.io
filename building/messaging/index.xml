<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Community Health Toolkit – Messaging</title><link>https://docs.communityhealthtoolkit.org/building/messaging/</link><description>Recent content in Messaging on Community Health Toolkit</description><generator>Hugo -- gohugo.io</generator><language>en</language><atom:link href="https://docs.communityhealthtoolkit.org/building/messaging/index.xml" rel="self" type="application/rss+xml"/><item><title>Overview</title><link>https://docs.communityhealthtoolkit.org/building/messaging/overview/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/building/messaging/overview/</guid><description>
&lt;p&gt;Messaging is a quick way to coordinate with other health workers. The Messages tab allows users to send a SMS message to any person or group of people in the app. Common uses of messages include asking questions, coordinating care logistics, providing encouragement or confirming training times.&lt;/p&gt;
&lt;p&gt;The main list is a combination of both outgoing and incoming messages. Messages exchanged with the same person or group are organized into a thread, similar to messages in a phone’s messaging app.&lt;/p&gt;
&lt;p&gt;The features on the Messages tab are best supported on desktop and most often used by someone in a supervisor role.&lt;/p&gt;
&lt;div class="hextra-cards hx-mt-4 hx-gap-4 hx-grid not-prose" style="--hextra-cards-grid-cols: 3;"&gt;
&lt;a
class="hextra-card hx-group hx-flex hx-flex-col hx-justify-start hx-overflow-hidden hx-rounded-lg hx-border hx-border-gray-200 hx-text-current hx-no-underline dark:hx-shadow-none hover:hx-shadow-gray-100 dark:hover:hx-shadow-none hx-shadow-gray-100 active:hx-shadow-sm active:hx-shadow-gray-200 hx-transition-all hx-duration-200 hover:hx-border-gray-300 hx-bg-gray-100 hx-shadow dark:hx-border-neutral-700 dark:hx-bg-neutral-800 dark:hx-text-gray-50 hover:hx-shadow-lg dark:hover:hx-border-neutral-500 dark:hover:hx-bg-neutral-700"href="messages-mobile.png"
&gt;&lt;img
alt=""
class="hextra-card-image"
loading="lazy"
decoding="async"
src="https://docs.communityhealthtoolkit.org/building/messaging/overview/messages-mobile_hu_934466e452c7e36b.webp"
width="800"
height="1426"
/&gt;&lt;span class="hextra-card-icon hx-flex hx-font-semibold hx-items-start hx-gap-2 hx-p-4 hx-text-gray-700 hover:hx-text-gray-900 dark:hx-text-neutral-200 dark:hover:hx-text-neutral-50"&gt;&lt;/span&gt;&lt;/a&gt;
&lt;a
class="hextra-card hx-group hx-flex hx-flex-col hx-justify-start hx-overflow-hidden hx-rounded-lg hx-border hx-border-gray-200 hx-text-current hx-no-underline dark:hx-shadow-none hover:hx-shadow-gray-100 dark:hover:hx-shadow-none hx-shadow-gray-100 active:hx-shadow-sm active:hx-shadow-gray-200 hx-transition-all hx-duration-200 hover:hx-border-gray-300 hx-bg-gray-100 hx-shadow dark:hx-border-neutral-700 dark:hx-bg-neutral-800 dark:hx-text-gray-50 hover:hx-shadow-lg dark:hover:hx-border-neutral-500 dark:hover:hx-bg-neutral-700"href="messages-desktop.png"
&gt;&lt;img
alt=""
class="hextra-card-image"
loading="lazy"
decoding="async"
src="https://docs.communityhealthtoolkit.org/building/messaging/overview/messages-desktop_hu_47bb759b6ae442ae.webp"
width="800"
height="569"
/&gt;&lt;span class="hextra-card-icon hx-flex hx-font-semibold hx-items-start hx-gap-2 hx-p-4 hx-text-gray-700 hover:hx-text-gray-900 dark:hx-text-neutral-200 dark:hover:hx-text-neutral-50"&gt;&lt;/span&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;h2&gt;Main List&lt;span class="hx-absolute -hx-mt-20" id="main-list"&gt;&lt;/span&gt;
&lt;a href="#main-list" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div class="hextra-cards hx-mt-4 hx-gap-4 hx-grid not-prose" style="--hextra-cards-grid-cols: 3;"&gt;
&lt;a
class="hextra-card hx-group hx-flex hx-flex-col hx-justify-start hx-overflow-hidden hx-rounded-lg hx-border hx-border-gray-200 hx-text-current hx-no-underline dark:hx-shadow-none hover:hx-shadow-gray-100 dark:hover:hx-shadow-none hx-shadow-gray-100 active:hx-shadow-sm active:hx-shadow-gray-200 hx-transition-all hx-duration-200 hover:hx-border-gray-300 hx-bg-gray-100 hx-shadow dark:hx-border-neutral-700 dark:hx-bg-neutral-800 dark:hx-text-gray-50 hover:hx-shadow-lg dark:hover:hx-border-neutral-500 dark:hover:hx-bg-neutral-700"href="messages-mobile.png"
&gt;&lt;img
alt=""
class="hextra-card-image"
loading="lazy"
decoding="async"
src="https://docs.communityhealthtoolkit.org/building/messaging/overview/messages-mobile_hu_934466e452c7e36b.webp"
width="800"
height="1426"
/&gt;&lt;span class="hextra-card-icon hx-flex hx-font-semibold hx-items-start hx-gap-2 hx-p-4 hx-text-gray-700 hover:hx-text-gray-900 dark:hx-text-neutral-200 dark:hover:hx-text-neutral-50"&gt;&lt;/span&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;p&gt;On the main list of messages, the first line of bold text is the name and / or phone number of the sender. The second line is an excerpt from the most recent message, and the third line, if applicable, is the place(s) that the sender belongs to.&lt;/p&gt;
&lt;p&gt;In the upper right corner, a timestamp displays when the most recent message was sent. An unread message is indicated by a blue line and bold blue timestamp. Messages are sorted by date with the most recent at the top of the list.&lt;/p&gt;
&lt;p&gt;To send a new message that starts a brand new conversation thread, select the “Send Message +” button at the bottom of the screen. On the new message screen, enter the phone number you would like to send the message to or select a person in the app from the drop-down list. Then, type out your message text.&lt;/p&gt;
&lt;h2&gt;Detail Page&lt;span class="hx-absolute -hx-mt-20" id="detail-page"&gt;&lt;/span&gt;
&lt;a href="#detail-page" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div class="hextra-cards hx-mt-4 hx-gap-4 hx-grid not-prose" style="--hextra-cards-grid-cols: 3;"&gt;
&lt;a
class="hextra-card hx-group hx-flex hx-flex-col hx-justify-start hx-overflow-hidden hx-rounded-lg hx-border hx-border-gray-200 hx-text-current hx-no-underline dark:hx-shadow-none hover:hx-shadow-gray-100 dark:hover:hx-shadow-none hx-shadow-gray-100 active:hx-shadow-sm active:hx-shadow-gray-200 hx-transition-all hx-duration-200 hover:hx-border-gray-300 hx-bg-gray-100 hx-shadow dark:hx-border-neutral-700 dark:hx-bg-neutral-800 dark:hx-text-gray-50 hover:hx-shadow-lg dark:hover:hx-border-neutral-500 dark:hover:hx-bg-neutral-700"href="messages-detail.png"
&gt;&lt;img
alt=""
class="hextra-card-image"
loading="lazy"
decoding="async"
src="https://docs.communityhealthtoolkit.org/building/messaging/overview/messages-detail_hu_32b1a5c60599238a.webp"
width="800"
height="1425"
/&gt;&lt;span class="hextra-card-icon hx-flex hx-font-semibold hx-items-start hx-gap-2 hx-p-4 hx-text-gray-700 hover:hx-text-gray-900 dark:hx-text-neutral-200 dark:hover:hx-text-neutral-50"&gt;&lt;/span&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;p&gt;Clicking on a message in the main list will take you to a detail tab where you can see the full text of the conversation. Underneath each individual message in the conversation, you will see the message status which tells you whether or not the message was successfully delivered or received and at what time.&lt;/p&gt;
&lt;p&gt;To reply to a message, tap or click in the box at the bottom of the conversation that says “Reply to…” and start typing. Each message is limited to 160 characters but you may send more than one message if necessary.&lt;/p&gt;
&lt;p&gt;It is also possible to configure auto-responses and for schedules of personalized, automated messages to be triggered upon submission of a form (e.g., a pregnancy registration triggers a schedule of personalized Antenatal care messages).&lt;/p&gt;</description></item><item><title>Messaging Gateways</title><link>https://docs.communityhealthtoolkit.org/building/messaging/gateways/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/building/messaging/gateways/</guid><description>
&lt;div class="section-pages-list"&gt;
&lt;h3&gt;Content in this section &lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;a href="https://docs.communityhealthtoolkit.org/building/messaging/gateways/africas-talking/"&gt;Africa’s Talking SMS Aggregator&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;a href="https://docs.communityhealthtoolkit.org/building/messaging/gateways/rapidpro/"&gt;RapidPro Messaging Gateway&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;a href="https://docs.communityhealthtoolkit.org/building/messaging/gateways/rapidpro_cht_gateway/"&gt;Installing RapidPro - CHT Gateway Android APK&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</description></item><item><title>SMS message states</title><link>https://docs.communityhealthtoolkit.org/building/messaging/sms-states/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/building/messaging/sms-states/</guid><description>
&lt;h2&gt;Interaction with SMS providers&lt;span class="hx-absolute -hx-mt-20" id="interaction-with-sms-providers"&gt;&lt;/span&gt;
&lt;a href="#interaction-with-sms-providers" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;a href="https://github.com/medic/cht-core" target="_blank" rel="noopener"&gt;CHT Applications&lt;/a&gt; can use &lt;a href="https://github.com/medic/cht-gateway" target="_blank" rel="noopener"&gt;CHT Gateway&lt;/a&gt; and third party aggregators to send and receive SMS messages.&lt;/p&gt;
&lt;p&gt;When an SMS report comes in from a user, &lt;a href="https://github.com/medic/medic-sentinel" target="_blank" rel="noopener"&gt;medic-sentinel&lt;/a&gt; adds the appropriate list of scheduled messages (to be sent at a future date) to the report doc.&lt;/p&gt;
&lt;p&gt;Periodically, sentinel checks for messages that need to be sent, and &lt;a href="https://github.com/medic/medic-sentinel/blob/master/schedule/due_tasks.js" target="_blank" rel="noopener"&gt;sets their state to &lt;code&gt;pending&lt;/code&gt;&lt;/a&gt; if their scheduled sending time has been reached or passed.&lt;/p&gt;
&lt;p&gt;Periodically, the aggregator checks for messages that need to be sent (i.e. that are in &lt;code&gt;pending&lt;/code&gt; state).&lt;/p&gt;
&lt;p&gt;The aggregator also reports on the status of the messages it&amp;rsquo;s sending.&lt;/p&gt;
&lt;h2&gt;Message statuses/states&lt;span class="hx-absolute -hx-mt-20" id="message-statusesstates"&gt;&lt;/span&gt;
&lt;a href="#message-statusesstates" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Both webapp and the aggregator store states/statuses of the messages to keep track of the exchange. They each have their set of statuses, which sometimes are called the same but do not mean the same thing. Watch out.&lt;/p&gt;
&lt;h3&gt;Message statuses in cht-gateway&lt;span class="hx-absolute -hx-mt-20" id="message-statuses-in-cht-gateway"&gt;&lt;/span&gt;
&lt;a href="#message-statuses-in-cht-gateway" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;See &lt;a href="https://github.com/medic/cht-gateway#user-content-content" target="_blank" rel="noopener"&gt;https://github.com/medic/cht-gateway#content&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;Message states in medic&lt;span class="hx-absolute -hx-mt-20" id="message-states-in-medic"&gt;&lt;/span&gt;
&lt;a href="#message-states-in-medic" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;scheduled&lt;/td&gt;
&lt;td&gt;Not yet due. Messages as part of a configured schedule start in this state and are changed to &lt;code&gt;pending&lt;/code&gt; when due.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;pending&lt;/td&gt;
&lt;td&gt;Due to be sent. The SMS gateway should pick this up for sending. Auto replies and instant messages start in this state.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;forwarded-to-gateway&lt;/td&gt;
&lt;td&gt;Message has been sent to gateway.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;received-by-gateway&lt;/td&gt;
&lt;td&gt;Has been received by the gateway.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;forwarded-by-gateway&lt;/td&gt;
&lt;td&gt;Gateway has tried sending the message.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;sent&lt;/td&gt;
&lt;td&gt;Successfully delivered to the sms network.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;delivered&lt;/td&gt;
&lt;td&gt;Successfully received by the recipient&amp;rsquo;s device.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;failed&lt;/td&gt;
&lt;td&gt;The sending attempt failed. Sending will not be retried without user intervention.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;denied&lt;/td&gt;
&lt;td&gt;This will not be sent. The recipient phone number is configured to be denied via &lt;code&gt;outgoing_deny_list&lt;/code&gt;, &lt;code&gt;outgoing_deny_with_alphas&lt;/code&gt;, or &lt;code&gt;outgoing_deny_shorter_than&lt;/code&gt;.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;cleared&lt;/td&gt;
&lt;td&gt;This will not be sent as a report has triggered an event to stop it. This can happen if a patient visit has occurred before the visit reminder is sent.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;muted&lt;/td&gt;
&lt;td&gt;This will not be sent as the task has been deliberately stopped. Messages in this state can be unmuted by user action.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;Timeline of the cht-gateway protocol for webapp-originating message&lt;span class="hx-absolute -hx-mt-20" id="timeline-of-the-cht-gateway-protocol-for-webapp-originating-message"&gt;&lt;/span&gt;
&lt;a href="#timeline-of-the-cht-gateway-protocol-for-webapp-originating-message" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Read the table below like a vertical timeline : each time an event happens, the states/statuses corresponding to the message get updated.&lt;/p&gt;
&lt;p&gt;Note 1 : Gateway only sends a status update for a message only if the &amp;ldquo;needs forwarding&amp;rdquo; flag for the message status is true, and then sets it back to false. So it only sends status updates once.&lt;/p&gt;
&lt;p&gt;Note 2 : If api sends the same WO message again, then gateway sets its needs forwarding flag to true, and so sends the status at the next poll.&lt;/p&gt;
&lt;p&gt;Note 3 : not all of the events below happen every time : this is assuming only one step of SMS-sending happens between each poll. If several steps happened, then some of the events below are skipped. If several status changes have happened between polls, Gateway will report the multiple new statuses at the next poll.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;number&lt;/th&gt;
&lt;th&gt;Event&lt;/th&gt;
&lt;th&gt;webapp state&lt;/th&gt;
&lt;th&gt;gateway status&lt;/th&gt;
&lt;th&gt;gateway &amp;ldquo;Needs forwarding&amp;rdquo; flag&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;Due date to send the message passes&lt;/td&gt;
&lt;td&gt;pending&lt;/td&gt;
&lt;td&gt;&amp;mdash;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;Gateway polls and gets a new WO message&lt;/td&gt;
&lt;td&gt;forwarded-to-gateway&lt;/td&gt;
&lt;td&gt;&amp;mdash;&lt;/td&gt;
&lt;td&gt;&amp;mdash;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;Gateway saves message in its DB&lt;/td&gt;
&lt;td&gt;forwarded-to-gateway&lt;/td&gt;
&lt;td&gt;UNSENT&lt;/td&gt;
&lt;td&gt;true&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;Gateway reports UNSENT status for the message&lt;/td&gt;
&lt;td&gt;received-by-gateway&lt;/td&gt;
&lt;td&gt;UNSENT&lt;/td&gt;
&lt;td&gt;false&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;Gateway sends the message&lt;/td&gt;
&lt;td&gt;received-by-gateway&lt;/td&gt;
&lt;td&gt;PENDING&lt;/td&gt;
&lt;td&gt;true&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;6&lt;/td&gt;
&lt;td&gt;Gateway reports PENDING status for the message&lt;/td&gt;
&lt;td&gt;forwarded-by-gateway&lt;/td&gt;
&lt;td&gt;PENDING&lt;/td&gt;
&lt;td&gt;false&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;7&lt;/td&gt;
&lt;td&gt;Gateway gets confirmation the message left&lt;/td&gt;
&lt;td&gt;forwarded-by-gateway&lt;/td&gt;
&lt;td&gt;SENT&lt;/td&gt;
&lt;td&gt;true&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;8&lt;/td&gt;
&lt;td&gt;Gateway reports SENT status for the message&lt;/td&gt;
&lt;td&gt;sent&lt;/td&gt;
&lt;td&gt;SENT&lt;/td&gt;
&lt;td&gt;false&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;9&lt;/td&gt;
&lt;td&gt;Gateway gets confirmation the message arrived&lt;/td&gt;
&lt;td&gt;sent&lt;/td&gt;
&lt;td&gt;DELIVERED&lt;/td&gt;
&lt;td&gt;true&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;10&lt;/td&gt;
&lt;td&gt;Gateway reports DELIVERED status for the message&lt;/td&gt;
&lt;td&gt;delivered&lt;/td&gt;
&lt;td&gt;DELIVERED&lt;/td&gt;
&lt;td&gt;false&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;</description></item><item><title>Short Contact Identifiers</title><link>https://docs.communityhealthtoolkit.org/building/messaging/shortcodes/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/building/messaging/shortcodes/</guid><description>
&lt;p&gt;Short unique identifiers for contacts are often used to identify contacts in messaging workflows. Unique short codes are generated on &lt;code&gt;doc.patient_id&lt;/code&gt; against any document of a &lt;code&gt;person&lt;/code&gt; &lt;code&gt;type&lt;/code&gt;, and on every &lt;code&gt;doc.place_id&lt;/code&gt; against any document of a &lt;code&gt;place&lt;/code&gt; &lt;code&gt;type&lt;/code&gt;. By default, these IDs start at 5 numeric digits long, and will increase in length as deemed necessary by the generation algorithm.&lt;/p&gt;
&lt;p&gt;If the length is increased, this increase is stored in a CouchDB documented called &lt;code&gt;shortcode-id-length&lt;/code&gt;:&lt;/p&gt;
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code"&gt;
&lt;div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;_id&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;shortcode-id-length&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;current_length&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0"&gt;
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
&gt;
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"&gt;&lt;/div&gt;
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"&gt;&lt;/div&gt;
&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h2&gt;Configuring a minimum length&lt;span class="hx-absolute -hx-mt-20" id="configuring-a-minimum-length"&gt;&lt;/span&gt;
&lt;a href="#configuring-a-minimum-length" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;If you wish to change the minimum length of the generated identifiers, create or edit the &lt;code&gt;shortcode-id-length&lt;/code&gt; document in CouchDB. For example, if you wish for the minimum length to be 7:&lt;/p&gt;
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code"&gt;
&lt;div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;_id&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;shortcode-id-length&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;current_length&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0"&gt;
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
&gt;
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"&gt;&lt;/div&gt;
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"&gt;&lt;/div&gt;
&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;If this file already exists be sure to include the existing &lt;code&gt;_rev&lt;/code&gt; property.&lt;/p&gt;
&lt;div class="hx-overflow-x-auto hx-mt-6 hx-flex hx-flex-col hx-rounded-lg hx-border hx-py-4 hx-px-4 contrast-more:hx-border-current contrast-more:dark:hx-border-current hx-border-blue-200 hx-bg-blue-100 hx-text-blue-900 dark:hx-border-blue-200/30 dark:hx-bg-blue-900/30 dark:hx-text-blue-200"&gt;
&lt;p class="hx-flex hx-items-center hx-font-medium"&gt;&lt;svg height=16px class="hx-inline-block hx-align-middle hx-mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"&gt;&lt;path stroke-linecap="round" stroke-linejoin="round" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/&gt;&lt;/svg&gt;Note&lt;/p&gt;
&lt;div class="hx-w-full hx-min-w-0 hx-leading-7"&gt;
&lt;div class="hx-mt-6 hx-leading-7 first:hx-mt-0"&gt;&lt;p&gt;If you are changing this document and want to make it relevant straight away, &lt;strong&gt;you must restart Sentinel.&lt;/strong&gt; Otherwise there may be a collection of cached already accepted IDs of the previous length that Sentinel will work through first.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h2&gt;Configuring a maximum length, locking down an exact length etc&lt;span class="hx-absolute -hx-mt-20" id="configuring-a-maximum-length-locking-down-an-exact-length-etc"&gt;&lt;/span&gt;
&lt;a href="#configuring-a-maximum-length-locking-down-an-exact-length-etc" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;It is not possible to either alter the maximum length of IDs, to stop it automatically increasing, or to tweak when it decides to automatically increase. IDs automatically increasing in length when required is important to the continual correct functioning of Sentinel.&lt;/p&gt;
&lt;h2&gt;Valid sizes&lt;span class="hx-absolute -hx-mt-20" id="valid-sizes"&gt;&lt;/span&gt;
&lt;a href="#valid-sizes" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;The shortcode identifiers can be between 5 and 13 digits long. Due to the last digit being a checksum digit, there are at most 10,000 5 digit ids, and at most 1,000,000,000,000 13 digit IDs.&lt;/p&gt;</description></item><item><title>Message Loops</title><link>https://docs.communityhealthtoolkit.org/building/messaging/message-loops/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/building/messaging/message-loops/</guid><description>
&lt;p&gt;Endless messaging loops can between the webapp and a mobile number via the gateway due to autoreplies from the webapp.&lt;/p&gt;
&lt;p&gt;See the &lt;a href="https://github.com/medic/cht-core/issues/750" target="_blank" rel="noopener"&gt;Github Issue&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Solution:&lt;/strong&gt; Add the offending number(e.g &lt;code&gt;800&lt;/code&gt; or &lt;code&gt;SAFARICOM&lt;/code&gt;) to the &lt;code&gt;Outgoing Deny List&lt;/code&gt; in the webapp&amp;rsquo;s &lt;code&gt;app_settings&lt;/code&gt; configuration file.&lt;/p&gt;
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code"&gt;
&lt;div&gt;&lt;pre&gt;&lt;code&gt; &amp;#34;multipart_sms_limit&amp;#34;: 10,
&amp;#34;outgoing_deny_list&amp;#34;: &amp;#34;800, SAFARICOM&amp;#34;,
&amp;#34;contact_summary&amp;#34;: &amp;#34;&amp;#34;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0"&gt;
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
&gt;
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"&gt;&lt;/div&gt;
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"&gt;&lt;/div&gt;
&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;</description></item></channel></rss>