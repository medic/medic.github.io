<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Community Health Toolkit – Branding</title><link>https://docs.communityhealthtoolkit.org/building/branding/</link><description>Recent content in Branding on Community Health Toolkit</description><generator>Hugo -- gohugo.io</generator><language>en</language><atom:link href="https://docs.communityhealthtoolkit.org/building/branding/index.xml" rel="self" type="application/rss+xml"/><item><title>Configuring CHT Application Graphics</title><link>https://docs.communityhealthtoolkit.org/building/branding/application-graphics/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/building/branding/application-graphics/</guid><description>
&lt;p>This tutorial will take you through customising some graphical elements of CHT core.&lt;/p>
&lt;p>You will cover site branding, partner logos, header tab icons, and app icons (used in tasks, targets, and contacts).&lt;/p>
&lt;h2>Required Resources&lt;span class="hx-absolute -hx-mt-20" id="required-resources">&lt;/span>
&lt;a href="#required-resources" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>You should have a functioning &lt;a href="https://docs.communityhealthtoolkit.org/building/local-setup/" >CHT instance with &lt;code>cht-conf&lt;/code> installed locally&lt;/a> and completed a &lt;a href="https://docs.communityhealthtoolkit.org/building/local-setup/#3-create-and-upload-a-blank-project" >project folder&lt;/a> setup.&lt;/p>
&lt;h2>Implementation Steps&lt;span class="hx-absolute -hx-mt-20" id="implementation-steps">&lt;/span>
&lt;a href="#implementation-steps" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;h3>1. Site branding&lt;span class="hx-absolute -hx-mt-20" id="1-site-branding">&lt;/span>
&lt;a href="#1-site-branding" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>You have the ability to modify the app title, logo, and favicon. For Progressive Web App installations you can also configure the desktop icon.&lt;/p>
&lt;figure class="center col-6 col-lg-8">&lt;a href="branding_elements.png">&lt;img src="https://docs.communityhealthtoolkit.org/building/branding/application-graphics/branding_elements.png">&lt;/a>
&lt;/figure>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Variable&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>logo&lt;/strong>&lt;/td>
&lt;td>Should be less than 100KB, have a transparent background, have high contrast, and be horizontal in shape with a ratio of about 3.5:1. We recommend SVG or PNG image formats.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>favicon&lt;/strong>&lt;/td>
&lt;td>Ideally 32x32 pixels, simple, and very small in size. We recommend SVG or PNG image formats.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>icon&lt;/strong>&lt;/td>
&lt;td>Must be at least 192x192 pixels, square. We recommend SVG or PNG image formats.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4>Using cht-conf&lt;span class="hx-absolute -hx-mt-20" id="using-cht-conf">&lt;/span>
&lt;a href="#using-cht-conf" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>Create a &lt;code>branding.json&lt;/code> file if it doesn&amp;rsquo;t exist. (This may have already been created by the initialise-project-layout command).
Edit the file with the following content:&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;My App Name&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;resources&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logo&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;logo.png&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;favicon&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;favicon.ico&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;icon&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;pwa-icon.svg&amp;#34;&lt;/span> &lt;span class="c1">// required for PWA installation only
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The folder and files structure would look like this:&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">./
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> branding.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /branding
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> logo.png
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> favicon.ico
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pwa-icon.svg&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Finally run the command: &lt;code>cht --url=&amp;lt;instance-url&amp;gt; upload-branding&lt;/code>&lt;/p>
&lt;h4>Using the admin interface&lt;span class="hx-absolute -hx-mt-20" id="using-the-admin-interface">&lt;/span>
&lt;a href="#using-the-admin-interface" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>Log in to your instance and navigate to &lt;code>Menu &amp;gt; App Settings &amp;gt; Images &amp;gt; Icons&lt;/code>&lt;/p>
&lt;figure>&lt;a href="menu.png">&lt;img src="https://docs.communityhealthtoolkit.org/building/branding/application-graphics/menu.png">&lt;/a>
&lt;/figure>
&lt;figure>&lt;a href="images.png">&lt;img src="https://docs.communityhealthtoolkit.org/building/branding/application-graphics/images.png">&lt;/a>
&lt;/figure>
&lt;div class="hx-overflow-x-auto hx-mt-6 hx-flex hx-flex-col hx-rounded-lg hx-border hx-py-4 hx-px-4 contrast-more:hx-border-current contrast-more:dark:hx-border-current hx-border-blue-200 hx-bg-blue-100 hx-text-blue-900 dark:hx-border-blue-200/30 dark:hx-bg-blue-900/30 dark:hx-text-blue-200">
&lt;p class="hx-flex hx-items-center hx-font-medium">&lt;svg height=16px class="hx-inline-block hx-align-middle hx-mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">&lt;path stroke-linecap="round" stroke-linejoin="round" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>&lt;/svg>Note&lt;/p>
&lt;div class="hx-w-full hx-min-w-0 hx-leading-7">
&lt;div class="hx-mt-6 hx-leading-7 first:hx-mt-0">&lt;p>If your changes are not reflected on the browser, you will have to clear browser data to get rid of the already cached resources.&lt;/p>&lt;/div>
&lt;/div>
&lt;/div>
&lt;h3>2. Partner logos&lt;span class="hx-absolute -hx-mt-20" id="2-partner-logos">&lt;/span>
&lt;a href="#2-partner-logos" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>If you would like to display a collection of logos representing all of the organizations and funders involved in a project, there is a space for these at the bottom of the About page. This page can be accessed through; &lt;code>Menu &amp;gt; About&lt;/code>&lt;/p>
&lt;figure class="center col-6 col-lg-8">&lt;a href="about_page.png">&lt;img src="https://docs.communityhealthtoolkit.org/building/branding/application-graphics/about_page.png">&lt;/a>
&lt;/figure>
&lt;h4>Using cht-conf&lt;span class="hx-absolute -hx-mt-20" id="using-cht-conf-1">&lt;/span>
&lt;a href="#using-cht-conf-1" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>Create a &lt;code>partners.json&lt;/code> file if it doesn&amp;rsquo;t exist. (This may have already been created by the initialise-project-layout command).
Edit the file with the following content:&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;resources&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;partnerA&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;parnerA.png&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;partnerB&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;parnerB.png&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;partnerC&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;parnerC.png&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The folder and files structure would look like this:&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">./
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> partners.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /partners
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> parnerA.png
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> parnerB.png&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Finally run the command: &lt;code>cht --url=&amp;lt;instance-url&amp;gt; upload-partners&lt;/code>&lt;/p>
&lt;h4>Using the admin interface&lt;span class="hx-absolute -hx-mt-20" id="using-the-admin-interface-1">&lt;/span>
&lt;a href="#using-the-admin-interface-1" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>Log in to your instance and navigate to &lt;code>Menu &amp;gt; App Settings &amp;gt; Images &amp;gt; Partners&lt;/code>&lt;/p>
&lt;figure>&lt;a href="menu.png">&lt;img src="https://docs.communityhealthtoolkit.org/building/branding/application-graphics/menu.png">&lt;/a>
&lt;/figure>
&lt;figure>&lt;a href="partners.png">&lt;img src="https://docs.communityhealthtoolkit.org/building/branding/application-graphics/partners.png">&lt;/a>
&lt;/figure>
&lt;h3>3. Header tab icons&lt;span class="hx-absolute -hx-mt-20" id="3-header-tab-icons">&lt;/span>
&lt;a href="#3-header-tab-icons" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>As of cht-core 3.10, app header tabs icons are configurable. CHT currently has five tabs: messages, tasks, reports, contacts, analytics.&lt;/p>
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/building/reference/app-settings/header_tabs/">Header tabs&lt;/a>&lt;/p>
&lt;h4>Using cht-conf&lt;span class="hx-absolute -hx-mt-20" id="using-cht-conf-2">&lt;/span>
&lt;a href="#using-cht-conf-2" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>Create a &lt;code>app_settings.json&lt;/code> file if it doesn&amp;rsquo;t exist. (This may have already been created by the initialise-project-layout command).&lt;/p>
&lt;p>We will then add a &lt;code>header_tabs&lt;/code> key within app_settings with the following structure:&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;messages&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;icon&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;fa-user&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;tasks&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;resource_icon&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;medic-health-center&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;analytics&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;icon&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;fa-flag&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;resource_icon&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;icon-treatment&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;reports&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;icon&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;fa-list-alt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;contacts&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;icon&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;fa-user&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The above assumes you have the following resource icons already in your instance (either uploaded or out-of-the-box): &lt;code>medic-health-center&lt;/code>, &lt;code>icon-treatment&lt;/code>.&lt;/p>
&lt;p>Finally run the command: &lt;code>cht --url=&amp;lt;instance-url&amp;gt; upload-app-settings&lt;/code>&lt;/p>
&lt;p>&lt;a href="https://imfing.github.io/hextra-starter-template/" target="_blank" rel="noopener">🌐 Demo ↗&lt;/a>&lt;/p>
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/building/branding/resources/">Icons&lt;/a>&lt;/p>
&lt;h4>Using the admin interface&lt;span class="hx-absolute -hx-mt-20" id="using-the-admin-interface-2">&lt;/span>
&lt;a href="#using-the-admin-interface-2" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>Log in to your instance and navigate to &lt;code>Menu &amp;gt; App Settings &amp;gt; Images &amp;gt; Header Icons&lt;/code>&lt;/p>
&lt;p>&lt;figure>&lt;a href="menu.png">&lt;img src="https://docs.communityhealthtoolkit.org/building/branding/application-graphics/menu.png">&lt;/a>
&lt;/figure>
&lt;figure>&lt;a href="header_icons.png">&lt;img src="https://docs.communityhealthtoolkit.org/building/branding/application-graphics/header_icons.png">&lt;/a>
&lt;/figure>
&lt;/p>
&lt;h3>4. App Icons&lt;span class="hx-absolute -hx-mt-20" id="4-app-icons">&lt;/span>
&lt;a href="#4-app-icons" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>Apps can be customised by defining the icons to use for tasks, targets, contacts or forms on the action bar.&lt;/p>
&lt;p>Add icons to the &lt;code>resources&lt;/code> folder, and include them by name in the &lt;code>resources.json&lt;/code> file as the following example:&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;icon-risk&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;icon-healthcare-warning@2x.png&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;icon-treatment&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;icon-healthcare-medicine@2x.png&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;medic-clinic&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;medic-family.svg&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;medic-district-hospital&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;medic-family.svg&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;medic-health-center&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;medic-chw-area.svg&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;medic-person&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;medic-person.svg&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/design/interface/icons/">Icon Library&lt;/a>&lt;/p>
&lt;p>The folder and files structure would look like this:&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">./
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resources.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /resources
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> icon-healthcare-warning@2x.png
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> icon-healthcare-medicine@2x.png
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> medic-family.svg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> medic-family.svg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> medic-chw-area.svg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> medic-person.svg&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Finally run the command: &lt;code>cht --url=&amp;lt;instance-url&amp;gt; upload-resources&lt;/code>&lt;/p>
&lt;p>To modify the icon used in contacts, you will need to edit the icon subkey in app_settings.json (under contact_types). You will modify app_settings.json with the following contents:&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;contact_types&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;person&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;name_key&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;contact.type.person&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;group_key&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;contact.type.person.plural&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;create_key&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;contact.type.person.new&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;edit_key&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;contact.type.person.edit&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;primary_contact_key&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;person.field.contact&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;icon&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;medic-person&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;create_form&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;form:contact:person:create&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;edit_form&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;form:contact:person:edit&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Finally run the command: &lt;code>cht --local upload-app-settings&lt;/code>&lt;/p>
&lt;p>To customise the icons used in tasks or the action bar, you will need to edit a form properties file and add an icon property as outline in &lt;a href="https://docs.communityhealthtoolkit.org/building/forms/form-properties/" >form properties&lt;/a> tutorial.&lt;/p>
&lt;p>To customise the icons used in targets, you will need to add an icon property in a target&amp;rsquo;s definition as shown in the &lt;a href="https://docs.communityhealthtoolkit.org/building/targets/target-widgets/" >targets&lt;/a> tutorial.&lt;/p></description></item><item><title>resources/</title><link>https://docs.communityhealthtoolkit.org/building/branding/resources/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/building/branding/resources/</guid><description>
&lt;h2>Icons&lt;span class="hx-absolute -hx-mt-20" id="icons">&lt;/span>
&lt;a href="#icons" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Apps can be customized by defining the icons to use for tasks, targets, and contacts.&lt;/p>
&lt;p>Add icons to the &lt;code>resources&lt;/code> folder, and include them by name in the &lt;code>resources.json&lt;/code> file as the following example:&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;icon-risk&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;icon-healthcare-warning@2x.png&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;icon-treatment&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;icon-healthcare-medicine@2x.png&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;medic-clinic&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;medic-family.svg&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;medic-district-hospital&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;medic-family.svg&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;medic-health-center&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;medic-chw-area.svg&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;medic-person&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;medic-person.svg&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/design/interface/">Interface&lt;/a>&lt;/p>
&lt;p>The folder and files structure would look like this:&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">./
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resources.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /resources
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> icon-healthcare-warning@2x.png
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> icon-healthcare-medicine@2x.png
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> medic-family.svg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> medic-family.svg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> medic-chw-area.svg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> medic-person.svg&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Finally run the command: &lt;code>cht --local upload-resources&lt;/code>&lt;/p>
&lt;h2>Branding&lt;span class="hx-absolute -hx-mt-20" id="branding">&lt;/span>
&lt;a href="#branding" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The site title, favicon, and header logo are configurable. The location to change these are in the Admin console on the images page under the branding tab.&lt;/p>
&lt;p>Another way to configure these options is by using the &lt;code>cht-conf&lt;/code>, add the favicon and the header logo in the &lt;code>branding&lt;/code> folder, then include the options in the &lt;code>branding.json&lt;/code> as the following example:&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;My Clinic&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;resources&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logo&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;logo.png&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;favicon&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;favicon.ico&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The folder and files structure would look like this:&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">./
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> branding.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /branding
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> logo.png
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> favicon.ico&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Finally run the command: &lt;code>cht --local upload-branding&lt;/code>&lt;/p>
&lt;h2>Partner logos&lt;span class="hx-absolute -hx-mt-20" id="partner-logos">&lt;/span>
&lt;a href="#partner-logos" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Adding your partner logos can be done in the Admin console on the images page under the Partners tab. This will add partner logos on the about page.&lt;/p>
&lt;p>Another way is by using the &lt;code>cht-conf&lt;/code>, add the partners logo in the &lt;code>partners&lt;/code> folder, then include them in the &lt;code>partners.json&lt;/code> as the following example:&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;resources&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;partnerA&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;parnerA.png&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;partnerB&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;parnerB.png&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The folder and files structure would look like this:&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">./
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> partners.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /partners
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> parnerA.png
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> parnerB.png&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Finally run the command: &lt;code>cht --local upload-partners&lt;/code>&lt;/p></description></item><item><title>Building CHT Android Flavors</title><link>https://docs.communityhealthtoolkit.org/building/branding/android/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/building/branding/android/</guid><description>
&lt;p>This tutorial will take you through building a CHT Android Application off the existing wrapper.&lt;/p>
&lt;p>The CHT Android application is a thin wrapper to load the CHT Core Framework web application in a WebView.&lt;/p>
&lt;p>You will be adding a new android flavor based off the &lt;a href="https://github.com/medic/cht-android" target="_blank" rel="noopener">CHT Android&lt;/a>.&lt;/p>
&lt;h2>Brief Overview of Key Concepts&lt;span class="hx-absolute -hx-mt-20" id="brief-overview-of-key-concepts">&lt;/span>
&lt;a href="#brief-overview-of-key-concepts" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The CHT Android is a native Android container for the Community Health Toolkit (CHT). The repository contains &amp;ldquo;flavored&amp;rdquo; configurations, where each &amp;ldquo;flavor&amp;rdquo; or &amp;ldquo;brand&amp;rdquo; is an app. All apps share the same code and features, but can be customized, hard-coding a specific CHT deployment and have a partner specific logo and display name.&lt;/p>
&lt;h2>Add a new Brand&lt;span class="hx-absolute -hx-mt-20" id="add-a-new-brand">&lt;/span>
&lt;a href="#add-a-new-brand" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Adding a new &lt;em>&amp;ldquo;brand&amp;rdquo;&lt;/em> or &lt;em>&amp;ldquo;flavor&amp;rdquo;&lt;/em> requires the following steps:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Check you meet the &lt;strong>&lt;a href="#1-required-resources" >Required Resources&lt;/a>&lt;/strong>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Add the &lt;strong>&lt;a href="#2-new-brand" >New Brand&lt;/a>&lt;/strong> in the source code.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>&lt;a href="#3-generate-a-new-keystore" >Generate a new keystore&lt;/a>&lt;/strong> if there is no one.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>&lt;a href="#4-test-locally-the-keystore" >Test locally&lt;/a>&lt;/strong> and create a pull request with the changes.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>&lt;a href="#5-release-the-new-flavor" >Release&lt;/a>&lt;/strong> the new flavor.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>&lt;a href="#6-publish-the-app" >Publish&lt;/a>&lt;/strong> in the Play Store or whatever channel.&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>Below are more instructions for each step.&lt;/p>
&lt;h3>1. Required Resources&lt;span class="hx-absolute -hx-mt-20" id="1-required-resources">&lt;/span>
&lt;a href="#1-required-resources" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>To proceed you need to have ready the following:&lt;/p>
&lt;ul>
&lt;li>The URL of your CHT server so users don&amp;rsquo;t have to type it in post install.&lt;/li>
&lt;li>The app logo and title.&lt;/li>
&lt;li>Translations for your supported languages (most flavors don&amp;rsquo;t need to customize translations though).&lt;/li>
&lt;/ul>
&lt;p>Also be sure to have a working &lt;strong>&lt;a href="https://docs.communityhealthtoolkit.org/community/contributing/code/android/development-setup/" >Development Environment&lt;/a>&lt;/strong>.&lt;/p>
&lt;p>While you should use your own branding, the &lt;a href="./CHT.logo.512.png" >CHT logo&lt;/a> is available to use if so desired.&lt;/p>
&lt;h4>Play Store assets&lt;span class="hx-absolute -hx-mt-20" id="play-store-assets">&lt;/span>
&lt;a href="#play-store-assets" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>If you are going to publish the app in the &lt;strong>Play Store&lt;/strong>, Google will require to provide the following to list the app:&lt;/p>
&lt;ul>
&lt;li>A description of the app.&lt;/li>
&lt;li>A shorter description (80 characters).&lt;/li>
&lt;li>Logo 512x512px, typically a version of the partner logo e.g. square design icons.&lt;/li>
&lt;li>A background image.&lt;/li>
&lt;li>Screenshots.&lt;/li>
&lt;/ul>
&lt;p>Google is constantly changing the requirements to publish in the Play Store, it&amp;rsquo;s a good practice to check in advance whether all the requirements are met (checkout &lt;em>&lt;a href="https://support.google.com/googleplay/android-developer/answer/9866151" target="_blank" rel="noopener">Add preview assets&amp;hellip;&lt;/a>&lt;/em>).&lt;/p>
&lt;h5>Test data&lt;span class="hx-absolute -hx-mt-20" id="test-data">&lt;/span>
&lt;a href="#test-data" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>When publishing for the first time in the Play Store, a reviewer from Google will try to check whether the permission requested by the app follows the Play Store rules. The CHT Android app has enabled by default location request permissions, and the workflow to request the permission follows the strict rules imposed by Google, but they won&amp;rsquo;t be aware that your &lt;em>flavored&lt;/em> app is based on the CHT Android, so you have to provide Google with instructions of how to test the app, specifically how to test the location request.&lt;/p>
&lt;p>To do so, give them instructions of how to login with the app (with a real username and password), and the basic steps to reach the location request, like open up a form.&lt;/p>
&lt;p>Once approved you can delete the &amp;ldquo;test&amp;rdquo; user, Google conduct the tests only the first time, or when a new permission request is added to the app.&lt;/p>
&lt;h3>2. New Brand&lt;span class="hx-absolute -hx-mt-20" id="2-new-brand">&lt;/span>
&lt;a href="#2-new-brand" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>Each branded app has an identifier (&lt;em>id&lt;/em>) that is used to identify and configure it in different parts of the source code and when invoking some commands. In the instructions below we will use as example the id &lt;strong>&lt;code>new_brand&lt;/code>&lt;/strong>.&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Check out the tag from the &lt;a href="https://github.com/medic/cht-android/releases" target="_blank" rel="noopener">last stable release&lt;/a> in CHT Android repository and create a branch, for example, if the latest stable release is &lt;code>v0.11.0&lt;/code> and the branch name is &lt;code>v0.11.0-new-brand&lt;/code>, then the command is:&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl"> git checkout v0.11.0 -b v0.11.0-new-brand&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;/li>
&lt;li>
&lt;p>Add &lt;code>productFlavors { &amp;lt;new_brand&amp;gt; { ... } }&lt;/code> in &lt;a href="https://github.com/medic/cht-android/blob/master/build.gradle" target="_blank" rel="noopener">build.gradle&lt;/a>, e.g.:&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-groovy" data-lang="groovy">&lt;span class="line">&lt;span class="cl">&lt;span class="n">new_brand&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dimension&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;brand&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">applicationId&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;org.medicmobile.webapp.mobile.new_brand&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;/li>
&lt;li>
&lt;p>Add icons, strings etc. in the &lt;code>src/&amp;lt;new_brand&amp;gt;&lt;/code> folder. It&amp;rsquo;s required to place there at least the &lt;code>src/new_brand/res/values/strings.xml&lt;/code> file with the name of the app and the URL of the CHT instance:&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&amp;lt;?xml version=&amp;#34;1.0&amp;#34; encoding=&amp;#34;utf-8&amp;#34;?&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;resources&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;string&lt;/span> &lt;span class="na">name=&lt;/span>&lt;span class="s">&amp;#34;app_name&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>New Brand&lt;span class="nt">&amp;lt;/string&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;string&lt;/span> &lt;span class="na">name=&lt;/span>&lt;span class="s">&amp;#34;app_host&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>new_brand.app.medicmobile.org&lt;span class="nt">&amp;lt;/string&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;/resources&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;/li>
&lt;li>
&lt;p>Enable automated builds of the APKs and AABs: add the &lt;code>new_brand&lt;/code> flavor in &lt;a href="https://github.com/medic/cht-android/blob/master/.github/workflows/publish.yml" target="_blank" rel="noopener">.github/workflows/publish.yml&lt;/a>. The &lt;em>Unpack secrets &amp;hellip;&lt;/em> task unpacks and decrypts the secret file with the keystore (next section), The &lt;em>Assemble &amp;hellip;&lt;/em> task takes care of generating the &lt;code>.apk&lt;/code> files for sideloading, and the &lt;em>Bundle &amp;hellip;&lt;/em> task is responsible of generating the &lt;code>.aab&lt;/code> files for publishing in the Play Store (you can skip the last if you are not going to publish in the Play Store):&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Unpack secrets new_brand&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">env&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ANDROID_SECRETS_KEY&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ secrets.ANDROID_SECRETS_KEY_NEW_BRAND }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ANDROID_SECRETS_IV&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ secrets.ANDROID_SECRETS_IV_NEW_BRAND }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">make org=new_brand keydec&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Assemble new_brand&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">maierj/fastlane-action@v1.4.0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">lane&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">options&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;{ &amp;#34;flavor&amp;#34;: &amp;#34;new_brand&amp;#34; }&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">env&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ANDROID_KEYSTORE_PATH&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">new_brand.keystore&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ANDROID_KEYSTORE_PASSWORD&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ secrets.ANDROID_KEYSTORE_PASSWORD_NEW_BRAND }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ANDROID_KEY_PASSWORD&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ secrets.ANDROID_KEY_PASSWORD_NEW_BRAND }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Bundle new_brand&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">maierj/fastlane-action@v1.4.0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">lane&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">bundle&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">options&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;{ &amp;#34;flavor&amp;#34;: &amp;#34;new_brand&amp;#34; }&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">env&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ANDROID_KEYSTORE_PATH&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">new_brand.keystore&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ANDROID_KEYSTORE_PASSWORD&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ secrets.ANDROID_KEYSTORE_PASSWORD_NEW_BRAND }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ANDROID_KEY_PASSWORD&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ secrets.ANDROID_KEY_PASSWORD_NEW_BRAND }}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The variables in the &lt;code>env&lt;/code> sections point to a keystore and the passwords to unlock the keystore that will be generated in the following steps, but it&amp;rsquo;s important to follow the name convention, in the example all the variables that are configured in Github Actions end with the suffix &lt;code>_NEW_BRAND&lt;/code>, these variables need to be added in the CHT Android repository settings by a manager of Medic.&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3>3. Generate a new keystore&lt;span class="hx-absolute -hx-mt-20" id="3-generate-a-new-keystore">&lt;/span>
&lt;a href="#3-generate-a-new-keystore" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>Each branded app created needs its own keystore to sign the binaries for releasing.&lt;/p>
&lt;p>Since the &lt;code>.aab&lt;/code> files generated here are signed with the same key you generated, the files and key can be uploaded to the Play Store later and any file generated locally following the steps above will be compatible with any installation made from the Play Store.&lt;/p>
&lt;p>The keystore files are placed into a compressed and encrypted file in the &lt;a href="https://github.com/medic/cht-android/tree/master/secrets" target="_blank" rel="noopener">secrets/&lt;/a> folder. In our case the file will be &lt;code>secrets/secrets-new_brand.tar.gz.enc&lt;/code>, and the content inside when the file is decrypted is:&lt;/p>
&lt;ul>
&lt;li>&lt;code>new_brand.keystore&lt;/code>: the Java keystore with a signature key inside that is always called &lt;code>medicmobile&lt;/code>. It&amp;rsquo;s used to sign the APKs and the bundles, and the one that Google will use to sign the optimized APKs that generates in the Play Store.&lt;/li>
&lt;li>&lt;code>new_brand_private_key.pepk&lt;/code>: a PEPK file is an encrypted file that contains inside the &lt;code>medicmobile&lt;/code> key from the keystore above, ready to be uploaded to the Play Store the first time the app is registered in the Play Console. The file is only used there, but kept in the compressed file as a backup.&lt;/li>
&lt;/ul>
&lt;p>Don&amp;rsquo;t worry to follow all the name conventions and how to generate these files, you can create all them in one step: the new keystore, the passwords and the PEPK file with &lt;code>make org=new_brand keygen&lt;/code>.&lt;/p>
&lt;p>Executing the command will check that you have the necessary tooling installed, and ask you the information about the certificate like the organization name, organization unit, etc. The command also takes care of picking random passwords that meet the security requirements, and then compresses the key files and finally encrypt the &lt;code>.tar.gz&lt;/code> file into the &lt;code>.enc&lt;/code> file. At the end of the execution, the script will also show the list of environment variables that you have to setup in CI (Github Actions) and locally in order to sign the apps with the new keystore. Below is an example of executing it to create the keystore for our &amp;ldquo;new_brand&amp;rdquo;:&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">make &lt;span class="nv">org&lt;/span>&lt;span class="o">=&lt;/span>new_brand keygen
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Verifying the following executables are in the &lt;span class="nv">$PATH&lt;/span>: java keytool openssl ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">keytool -genkey -storepass dd8668... -v -keystore new_brand.keystore -alias medicmobile -keyalg RSA -keysize &lt;span class="m">2048&lt;/span> -validity &lt;span class="m">9125&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">What is your first and last name?
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span>Unknown&lt;span class="o">]&lt;/span>:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">What is the name of your organizational unit?
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span>Unknown&lt;span class="o">]&lt;/span>: New Brand
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">What is the name of your organization?
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span>Unknown&lt;span class="o">]&lt;/span>: Medic
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">What is the name of your City or Locality?
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span>Unknown&lt;span class="o">]&lt;/span>: San Fran... ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Is &lt;span class="nv">CN&lt;/span>&lt;span class="o">=&lt;/span>Unknown, &lt;span class="nv">OU&lt;/span>&lt;span class="o">=&lt;/span>New Brand, &lt;span class="nv">O&lt;/span>&lt;span class="o">=&lt;/span>Medic, &lt;span class="nv">L&lt;/span>&lt;span class="o">=&lt;/span>San Francisco, &lt;span class="nv">ST&lt;/span>&lt;span class="o">=&lt;/span>CA, &lt;span class="nv">C&lt;/span>&lt;span class="o">=&lt;/span>US correct?
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span>no&lt;span class="o">]&lt;/span>: y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Generating 2,048 bit RSA key pair and self-signed certificate &lt;span class="o">(&lt;/span>SHA256withRSA&lt;span class="o">)&lt;/span> with a validity of 9,125 days
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span>: &lt;span class="nv">CN&lt;/span>&lt;span class="o">=&lt;/span>Unknown, &lt;span class="nv">OU&lt;/span>&lt;span class="o">=&lt;/span>New Brand, &lt;span class="nv">O&lt;/span>&lt;span class="o">=&lt;/span>Medic, &lt;span class="nv">L&lt;/span>&lt;span class="o">=&lt;/span>San Francisco, &lt;span class="nv">ST&lt;/span>&lt;span class="o">=&lt;/span>CA, &lt;span class="nv">C&lt;/span>&lt;span class="o">=&lt;/span>US
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>Storing new_brand.keystore&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">... ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">####################################### Secrets! #######################################&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># #&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># The following environment variables needs to be added to the CI environment #&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># (Github Actions), and to your local environment if you also want #&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># to sign APK or AAB files locally: #&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># #&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">ANDROID_KEYSTORE_PASSWORD_NEW_BRAND&lt;/span>&lt;span class="o">=&lt;/span>dd8668...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">ANDROID_KEY_PASSWORD_NEW_BRAND&lt;/span>&lt;span class="o">=&lt;/span>dd8668...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">ANDROID_SECRETS_IV_NEW_BRAND&lt;/span>&lt;span class="o">=&lt;/span>88d9c2dea7a9...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">ANDROID_SECRETS_KEY_NEW_BRAND&lt;/span>&lt;span class="o">=&lt;/span>2824d02d2bc221f5844b8fe1d928211dcbbc...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># The file secrets/secrets-new_brand.tar.gz.enc was created and has to be added to the git&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># repository (don&amp;#39;t worry, it&amp;#39;s encrypted with some of the keys above). #&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># NOTE: *keep the environment variables secret !!* #&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># #&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">########################################### End of Secrets ###################################&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The &lt;em>Secrets!&lt;/em> section at the end is as important as the &lt;code>secrets/secrets-new_brand.tar.gz.enc&lt;/code> file generated, because as it says above, it needs to be configured in CI.&lt;/p>
&lt;p>Use a safe channel to send the environment variables to the manager in charge, like a password manager, and keep them locally at least for testing, storing in a script file that is safe in your computer.&lt;/p>
&lt;p>About the file &lt;code>secrets/secrets-new_brand.tar.gz.enc&lt;/code>, as the last paragraph in the console says: &lt;em>has to be added to the git repository (don&amp;rsquo;t worry, it&amp;rsquo;s encrypted with some of the keys above)&lt;/em>.&lt;/p>
&lt;p>If you want to start over because some of the parameters were wrong, just execute &lt;code>make org=new_brand keyrm-all&lt;/code> to clean all the files generated. Once committed the &lt;code>.enc&lt;/code> file, you can delete the uncompressed and unencrypted version with &lt;code>make org=new_brand keyrm&lt;/code>, it will delete the &lt;code>new_brand.keystore&lt;/code>, &lt;code>new_brand_private_key.pepk&lt;/code>, and the unencrypted &lt;code>.tar.gz&lt;/code> files, that are safer kept in the &lt;code>.tar.gz.enc&lt;/code> file.&lt;/p>
&lt;p>If you encounter issues with the &lt;code>make org=new_brand keygen&lt;/code> command repeatedly looping through questions, we recommend changing your OS language to English.&lt;/p>
&lt;h3>4. Test the keystore locally&lt;span class="hx-absolute -hx-mt-20" id="4-test-the-keystore-locally">&lt;/span>
&lt;a href="#4-test-the-keystore-locally" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>&lt;strong>Want to check the keystore?&lt;/strong> here are a few things you must test before upload to the repository:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>To decrypt the content like CI does to sign the app, execute: &lt;code>make org=new_brand keydec&lt;/code>, it will decrypt and decompress the files removed in the step above. Remember that the environment variables printed in the console needs to be loaded in the CLI. Note that all the variables above end with the suffix &lt;code>_NEW_BRAND&lt;/code>, as the id of the app that we pass through the &lt;code>org&lt;/code> argument in lowercase, but if Make found the same variables defined without the prefix, they take precedence over the suffix ones.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Execute &lt;code>make org=new_brand keyprint&lt;/code> to see the certificate content, like the org name, the certificate fingerprints, etc.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Sign your app! You can try locally to build the app with the certificate. To create the .apk files run: &lt;code>make org=new_brand flavor=New_brand assemble&lt;/code>. The &amp;ldquo;release&amp;rdquo; files signed should be placed in &lt;code>build/outputs/apk/new_brand/release/&lt;/code>. To ensure the files were signed with the right signature execute &lt;code>make keyprint-apk&lt;/code>, it will check the certificate of the first apk file under the &lt;code>build/&lt;/code> folder:&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">make keyprint-apk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apksigner verify -v --print-certs build/outputs/apk/new_brand/release/cht-android-SNAPSHOT-new_brand-arm64-v8a-release.apk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">... ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Verified using v2 scheme &lt;span class="o">(&lt;/span>APK Signature Scheme v2&lt;span class="o">)&lt;/span>: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">... ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Signer &lt;span class="c1">#1 certificate DN: CN=Unknown, OU=New Brand, O=Medic Mobile, L=San Francisco, ST=CA, C=US&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Signer &lt;span class="c1">#1 certificate SHA-256 digest: 7f072b...&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;/li>
&lt;/ol>
&lt;p>Also, do the same for the bundle format: build and verify, despite the AAB are not useful for local development. In our example, execute first &lt;code>make org=new_brand flavor=New_brand bundle&lt;/code>, and then &lt;code>make keyprint-bundle&lt;/code> to see the signature of one of the &lt;code>.aab&lt;/code> files generated.&lt;/p>
&lt;p>Because the files generated here are signed with the same key that you are going to use in CI, and the files produced in CI will be uploaded to the Play Store later, any file generated locally following the steps above will be compatible with any installation made from the Play Store, means that if a user install the app from the Play Store, and then we want to replace the installation with an alpha version generated in CI or a local version generated in dev environment, it will work without requiring the user to uninstall the app and lost the data.&lt;/p>
&lt;h3>5. Release the new flavor&lt;span class="hx-absolute -hx-mt-20" id="5-release-the-new-flavor">&lt;/span>
&lt;a href="#5-release-the-new-flavor" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>Releasing a new flavor requires the following steps:&lt;/p>
&lt;ol>
&lt;li>Make a pull request to the release branch in the CHT Android repository.&lt;/li>
&lt;li>Once approved it&amp;rsquo;s recommended to create an alpha version to do final tests.&lt;/li>
&lt;li>Merge the pull request.&lt;/li>
&lt;li>&lt;a href="https://docs.communityhealthtoolkit.org/community/contributing/code/android/releasing/" >Release the flavor&lt;/a>.&lt;/li>
&lt;/ol>
&lt;h3>6. Publish the app&lt;span class="hx-absolute -hx-mt-20" id="6-publish-the-app">&lt;/span>
&lt;a href="#6-publish-the-app" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>The last step is to publish it in the Play Store, or whatever option best suit your needs. Checkout the &lt;a href="https://docs.communityhealthtoolkit.org/building/guides/android/publishing/" >Publishing&lt;/a> page to see all the options available and instructions.&lt;/p>
&lt;h2>Android App Links verification&lt;span class="hx-absolute -hx-mt-20" id="android-app-links-verification">&lt;/span>
&lt;a href="#android-app-links-verification" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>&lt;em>Supported for CHT Core 4.7.0+ and CHT Android 1.3.0+&lt;/em>&lt;/p>
&lt;p>Starting with Android 12, Android supports associating an app with a domain and automatically verifying this association. This allows deep links to immediately open content in the app. To get this working, you need to host a Digital Asset Links JSON file at &lt;code>https://&amp;lt;domain.name&amp;gt;/.well-known/assetlinks.json&lt;/code> containing some information about your app to associate it with your domain. More information is available on the &lt;a href="https://developer.android.com/training/app-links/verify-android-applinks" target="_blank" rel="noopener">official Android docs&lt;/a>.&lt;/p>
&lt;h3>Hosting &lt;code>assetlinks.json&lt;/code> with the CHT&lt;span class="hx-absolute -hx-mt-20" id="hosting-assetlinksjson-with-the-cht">&lt;/span>
&lt;a href="#hosting-assetlinksjson-with-the-cht" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>Since CHT Core version 4.7.0, the CHT supports serving &lt;code>assetlinks.json&lt;/code> by adding it to your app settings.
All you have to do to make the CHT serve your assetlinks at &lt;code>/.well-known/assetlinks.json&lt;/code> is to:&lt;/p>
&lt;ol>
&lt;li>Ensure your flavor of cht-android &lt;a href="#3-generate-a-new-keystore" >has a valid keystore&lt;/a>.&lt;/li>
&lt;li>Use the &lt;code>keytool&lt;/code> utility (included with your Java SDK) to get your app&amp;rsquo;s cert fingerprint:
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">keytool -list -v -keystore ./path/to/release-key.keystore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># or alternatively:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">keytool -printcert -jarfile ./path/to/project.apk&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;/li>
&lt;li>Set the cert fingerprint in the &lt;a href="https://docs.communityhealthtoolkit.org/building/reference/app-settings/assetlinks/" >&lt;code>assetlinks&lt;/code> configuration&lt;/a> for your CHT instance and deploy it to your server with cht-conf.&lt;/li>
&lt;/ol>
&lt;h4>Note for Apps Using Google Play Signing&lt;span class="hx-absolute -hx-mt-20" id="note-for-apps-using-google-play-signing">&lt;/span>
&lt;a href="#note-for-apps-using-google-play-signing" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>For apps signed by Google Play, you need to use the SHA256 fingerprint provided in the Google Play Console to ensure successful domain verification.&lt;/p>
&lt;h4>Steps to Retrieve SHA256 Fingerprint from Google Play&lt;span class="hx-absolute -hx-mt-20" id="steps-to-retrieve-sha256-fingerprint-from-google-play">&lt;/span>
&lt;a href="#steps-to-retrieve-sha256-fingerprint-from-google-play" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;ol>
&lt;li>&lt;strong>Log in to Google Play Console&lt;/strong>.&lt;/li>
&lt;li>&lt;strong>Navigate to your app&lt;/strong>: Select your app from the list of published applications.&lt;/li>
&lt;li>&lt;strong>Setup &amp;gt; App signing&lt;/strong>: In the left-hand menu, under the Setup Menu, there is App Signing.&lt;/li>
&lt;li>&lt;strong>Find SHA256 fingerprint&lt;/strong>: Google Play will display the SHA256 fingerprint required for your app.&lt;/li>
&lt;li>&lt;strong>Update assetlinks.json&lt;/strong>: Use this SHA256 fingerprint in your &lt;code>assetlinks.json&lt;/code> file. (Google Play also provides the full JSON)&lt;/li>
&lt;/ol>
&lt;p>Once added and pushed to the server, the deep link can be monitored from the console as well, under the &lt;strong>Deep Links&lt;/strong> in the left-hand menu where the Play Console allows you to check the deep link settings and also provides hints to fix any errors (providing the right SHA256 fingerprint to add).&lt;/p>
&lt;h3>Verifying it works&lt;span class="hx-absolute -hx-mt-20" id="verifying-it-works">&lt;/span>
&lt;a href="#verifying-it-works" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>There are different ways to verify your setup works and we&amp;rsquo;ll go through a few of them in the next steps.&lt;/p>
&lt;h4>Using Android Debug Bridge &lt;code>adb&lt;/code>&lt;span class="hx-absolute -hx-mt-20" id="using-android-debug-bridge-adb">&lt;/span>
&lt;a href="#using-android-debug-bridge-adb" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;ol>
&lt;li>To install the &lt;code>adb&lt;/code> command, follow the instructions under the &lt;a href="https://docs.communityhealthtoolkit.org/community/contributing/code/android/development-setup/#debug-tool-adb" >Development Environment &amp;gt; Debug tool adb&lt;/a> section.&lt;/li>
&lt;li>With the phone connected to your computer, open a command line session and write the following command: &lt;code>adb shell pm get-app-links &amp;lt;package_name&amp;gt;&lt;/code> where &lt;code>&amp;lt;package_name&amp;gt;&lt;/code> is your application ID.&lt;/li>
&lt;/ol>
&lt;p>The output of this command should look like this:&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&amp;lt;package_name&amp;gt;:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ID: 01234567-89ab-cdef-0123-456789abcdef
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Signatures: &lt;span class="o">[&lt;/span>&lt;span class="s2">&amp;#34;62:BF:C1:78:24:D8:4D:5C:B4:E1:8B:66:98:EA:14:16:57:6F:A4:E5:96:CD:93:81:B2:65:19:71:A7:80:EA:4D&amp;#34;&lt;/span>&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Domain verification state:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mobile.webapp.medicmobile.org: verified&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The domain verification state for your CHT instance&amp;rsquo;s domain should show &lt;code>verified&lt;/code>.&lt;/p>
&lt;h4>Manually testing on the device&lt;span class="hx-absolute -hx-mt-20" id="manually-testing-on-the-device">&lt;/span>
&lt;a href="#manually-testing-on-the-device" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;figure class="right col-6 col-md-4 col-lg-2">&lt;a href="android-12-prompt.png">&lt;img src="https://docs.communityhealthtoolkit.org/building/branding/android/android-12-prompt.png">&lt;/a>
&lt;/figure>
&lt;p>Another way of verifying your Android app has been properly associated to your CHT instance&amp;rsquo;s domain is by opening
the Android app on a device. You can run this test on a real device or with the emulator in Android Studio.&lt;/p>
&lt;p>Opening the app for the first time should take you straight to the login page &lt;strong>without&lt;/strong> prompting you to link a domain to the app as shown in the following screenshot:&lt;/p>
&lt;p>Additionally, clicking a link to your CHT instance should open the app immediately instead of opening the CHT instance in the default browser.&lt;/p>
&lt;h3>Use case - a single Android app for many CHT instances&lt;span class="hx-absolute -hx-mt-20" id="use-case---a-single-android-app-for-many-cht-instances">&lt;/span>
&lt;a href="#use-case---a-single-android-app-for-many-cht-instances" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>For specific large deployment scenarios, you might publish a single Android app to serve multiple CHT instances.
In this case, each CHT instance&amp;rsquo;s app settings will need to be configured with the same &lt;code>assetlinks.json&lt;/code> because
they share the same Android app and hence the same &lt;code>package_name&lt;/code> and &lt;code>sha256_cert_fingerprints&lt;/code> properties.&lt;/p>
&lt;p>When building your Android app, you will need to ensure the app&amp;rsquo;s manifest has &lt;code>&amp;lt;intent-filter android:autoverify=&amp;quot;true&amp;quot;&amp;gt;&lt;/code>
with each CHT instance&amp;rsquo;s domain listed in it like so:&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&amp;lt;?xml version=&amp;#34;1.0&amp;#34; encoding=&amp;#34;utf-8&amp;#34;?&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;manifest&lt;/span> &lt;span class="na">xmlns:android=&lt;/span>&lt;span class="s">&amp;#34;http://schemas.android.com/apk/res/android&amp;#34;&lt;/span> &lt;span class="na">xmlns:tools=&lt;/span>&lt;span class="s">&amp;#34;http://schemas.android.com/tools&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;uses-permission&lt;/span> &lt;span class="na">android:name=&lt;/span>&lt;span class="s">&amp;#34;android.permission.READ_EXTERNAL_STORAGE&amp;#34;&lt;/span> &lt;span class="na">tools:node=&lt;/span>&lt;span class="s">&amp;#34;remove&amp;#34;&lt;/span> &lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;application&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;activity&lt;/span> &lt;span class="na">android:name=&lt;/span>&lt;span class="s">&amp;#34;AppUrlIntentActivity&amp;#34;&lt;/span> &lt;span class="na">android:launchMode=&lt;/span>&lt;span class="s">&amp;#34;singleInstance&amp;#34;&lt;/span> &lt;span class="na">android:exported=&lt;/span>&lt;span class="s">&amp;#34;true&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;intent-filter&lt;/span> &lt;span class="na">android:autoVerify=&lt;/span>&lt;span class="s">&amp;#34;true&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;action&lt;/span> &lt;span class="na">android:name=&lt;/span>&lt;span class="s">&amp;#34;android.intent.action.VIEW&amp;#34;&lt;/span> &lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;category&lt;/span> &lt;span class="na">android:name=&lt;/span>&lt;span class="s">&amp;#34;android.intent.category.DEFAULT&amp;#34;&lt;/span> &lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;category&lt;/span> &lt;span class="na">android:name=&lt;/span>&lt;span class="s">&amp;#34;android.intent.category.BROWSABLE&amp;#34;&lt;/span> &lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;data&lt;/span> &lt;span class="na">android:scheme=&lt;/span>&lt;span class="s">&amp;#34;https&amp;#34;&lt;/span> &lt;span class="na">android:host=&lt;/span>&lt;span class="s">&amp;#34;first-cht-app.org&amp;#34;&lt;/span> &lt;span class="na">android:pathPattern=&lt;/span>&lt;span class="s">&amp;#34;.*&amp;#34;&lt;/span>&lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;data&lt;/span> &lt;span class="na">android:scheme=&lt;/span>&lt;span class="s">&amp;#34;https&amp;#34;&lt;/span> &lt;span class="na">android:host=&lt;/span>&lt;span class="s">&amp;#34;second-cht-app.org&amp;#34;&lt;/span> &lt;span class="na">android:pathPattern=&lt;/span>&lt;span class="s">&amp;#34;.*&amp;#34;&lt;/span>&lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;data&lt;/span> &lt;span class="na">android:scheme=&lt;/span>&lt;span class="s">&amp;#34;https&amp;#34;&lt;/span> &lt;span class="na">android:host=&lt;/span>&lt;span class="s">&amp;#34;third-cht-app.org&amp;#34;&lt;/span> &lt;span class="na">android:pathPattern=&lt;/span>&lt;span class="s">&amp;#34;.*&amp;#34;&lt;/span>&lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/intent-filter&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/activity&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/application&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;/manifest&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div></description></item></channel></rss>