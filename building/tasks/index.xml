<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Community Health Toolkit – CHT Tasks</title><link>https://docs.communityhealthtoolkit.org/building/tasks/</link><description>Recent content in CHT Tasks on Community Health Toolkit</description><generator>Hugo -- gohugo.io</generator><language>en</language><atom:link href="https://docs.communityhealthtoolkit.org/building/tasks/index.xml" rel="self" type="application/rss+xml"/><item><title>Overview</title><link>https://docs.communityhealthtoolkit.org/building/tasks/tasks-overview/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/building/tasks/tasks-overview/</guid><description>
&lt;p>Tasks help CHWs plan their day by prompting them to complete follow-up visits and other activities. The list might include upcoming scheduled ANC or Immunization visits, treatment or referral follow-ups, or other required activities such as a household survey.&lt;/p>
&lt;div class="hextra-cards hx-mt-4 hx-gap-4 hx-grid not-prose" style="--hextra-cards-grid-cols: 3;">
&lt;a
class="hextra-card hx-group hx-flex hx-flex-col hx-justify-start hx-overflow-hidden hx-rounded-lg hx-border hx-border-gray-200 hx-text-current hx-no-underline dark:hx-shadow-none hover:hx-shadow-gray-100 dark:hover:hx-shadow-none hx-shadow-gray-100 active:hx-shadow-sm active:hx-shadow-gray-200 hx-transition-all hx-duration-200 hover:hx-border-gray-300 hx-bg-gray-100 hx-shadow dark:hx-border-neutral-700 dark:hx-bg-neutral-800 dark:hx-text-gray-50 hover:hx-shadow-lg dark:hover:hx-border-neutral-500 dark:hover:hx-bg-neutral-700"href="tasks-mobile.png"
>&lt;img
alt=""
class="hextra-card-image"
loading="lazy"
decoding="async"
src="https://docs.communityhealthtoolkit.org/building/tasks/tasks-overview/tasks-mobile_hu_2ecd5e840fcd5f67.webp"
width="800"
height="1421"
/>&lt;span class="hextra-card-icon hx-flex hx-font-semibold hx-items-start hx-gap-2 hx-p-4 hx-text-gray-700 hover:hx-text-gray-900 dark:hx-text-neutral-200 dark:hover:hx-text-neutral-50">&lt;/span>&lt;/a>
&lt;a
class="hextra-card hx-group hx-flex hx-flex-col hx-justify-start hx-overflow-hidden hx-rounded-lg hx-border hx-border-gray-200 hx-text-current hx-no-underline dark:hx-shadow-none hover:hx-shadow-gray-100 dark:hover:hx-shadow-none hx-shadow-gray-100 active:hx-shadow-sm active:hx-shadow-gray-200 hx-transition-all hx-duration-200 hover:hx-border-gray-300 hx-bg-gray-100 hx-shadow dark:hx-border-neutral-700 dark:hx-bg-neutral-800 dark:hx-text-gray-50 hover:hx-shadow-lg dark:hover:hx-border-neutral-500 dark:hover:hx-bg-neutral-700"href="tasks-desktop.png"
>&lt;img
alt=""
class="hextra-card-image"
loading="lazy"
decoding="async"
src="https://docs.communityhealthtoolkit.org/building/tasks/tasks-overview/tasks-desktop_hu_7aa2d698450a780f.webp"
width="800"
height="569"
/>&lt;span class="hextra-card-icon hx-flex hx-font-semibold hx-items-start hx-gap-2 hx-p-4 hx-text-gray-700 hover:hx-text-gray-900 dark:hx-text-neutral-200 dark:hover:hx-text-neutral-50">&lt;/span>&lt;/a>
&lt;/div>
&lt;h2>Main List&lt;span class="hx-absolute -hx-mt-20" id="main-list">&lt;/span>
&lt;a href="#main-list" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;div class="hextra-cards hx-mt-4 hx-gap-4 hx-grid not-prose" style="--hextra-cards-grid-cols: 3;">
&lt;a
class="hextra-card hx-group hx-flex hx-flex-col hx-justify-start hx-overflow-hidden hx-rounded-lg hx-border hx-border-gray-200 hx-text-current hx-no-underline dark:hx-shadow-none hover:hx-shadow-gray-100 dark:hover:hx-shadow-none hx-shadow-gray-100 active:hx-shadow-sm active:hx-shadow-gray-200 hx-transition-all hx-duration-200 hover:hx-border-gray-300 hx-bg-gray-100 hx-shadow dark:hx-border-neutral-700 dark:hx-bg-neutral-800 dark:hx-text-gray-50 hover:hx-shadow-lg dark:hover:hx-border-neutral-500 dark:hover:hx-bg-neutral-700"href="tasks-mobile.png"
>&lt;img
alt=""
class="hextra-card-image"
loading="lazy"
decoding="async"
src="https://docs.communityhealthtoolkit.org/building/tasks/tasks-overview/tasks-mobile_hu_2ecd5e840fcd5f67.webp"
width="800"
height="1421"
/>&lt;span class="hextra-card-icon hx-flex hx-font-semibold hx-items-start hx-gap-2 hx-p-4 hx-text-gray-700 hover:hx-text-gray-900 dark:hx-text-neutral-200 dark:hover:hx-text-neutral-50">&lt;/span>&lt;/a>
&lt;/div>
&lt;p>On the Tasks tab is a consolidated list of tasks for all people and families that the user looks after. The task definition determines how long the task will show on this list before and after it is due.&lt;/p>
&lt;p>Each task has an icon on the left side which indicates which type of task it is. The first bold line of text is the person or family that the task is about. The second line of text is the title of the task. The due date for the task is located in the upper right-hand corner. If a task is overdue, the due date will be red.&lt;/p>
&lt;p>Tasks are listed in order of due date. Tasks that are past due will appear at the top of the list. CHWs should strive to complete tasks before they are overdue. Many programs add targets to track task completion and timeliness.&lt;/p>
&lt;br clear="all">
&lt;h2>Care Guides&lt;span class="hx-absolute -hx-mt-20" id="care-guides">&lt;/span>
&lt;a href="#care-guides" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>When a CHW clicks on a task, the care guide configured for that task displays. CHWs are then guided through questions for that specific workflow.&lt;/p>
&lt;div class="hextra-cards hx-mt-4 hx-gap-4 hx-grid not-prose" style="--hextra-cards-grid-cols: 3;">
&lt;a
class="hextra-card hx-group hx-flex hx-flex-col hx-justify-start hx-overflow-hidden hx-rounded-lg hx-border hx-border-gray-200 hx-text-current hx-no-underline dark:hx-shadow-none hover:hx-shadow-gray-100 dark:hover:hx-shadow-none hx-shadow-gray-100 active:hx-shadow-sm active:hx-shadow-gray-200 hx-transition-all hx-duration-200 hover:hx-border-gray-300 hx-bg-gray-100 hx-shadow dark:hx-border-neutral-700 dark:hx-bg-neutral-800 dark:hx-text-gray-50 hover:hx-shadow-lg dark:hover:hx-border-neutral-500 dark:hover:hx-bg-neutral-700"href="tasks-care1.png"
>&lt;img
alt=""
class="hextra-card-image"
loading="lazy"
decoding="async"
src="https://docs.communityhealthtoolkit.org/building/tasks/tasks-overview/tasks-care1_hu_c8f4be42c5cd69cf.webp"
width="800"
height="1423"
/>&lt;span class="hextra-card-icon hx-flex hx-font-semibold hx-items-start hx-gap-2 hx-p-4 hx-text-gray-700 hover:hx-text-gray-900 dark:hx-text-neutral-200 dark:hover:hx-text-neutral-50">&lt;/span>&lt;/a>
&lt;a
class="hextra-card hx-group hx-flex hx-flex-col hx-justify-start hx-overflow-hidden hx-rounded-lg hx-border hx-border-gray-200 hx-text-current hx-no-underline dark:hx-shadow-none hover:hx-shadow-gray-100 dark:hover:hx-shadow-none hx-shadow-gray-100 active:hx-shadow-sm active:hx-shadow-gray-200 hx-transition-all hx-duration-200 hover:hx-border-gray-300 hx-bg-gray-100 hx-shadow dark:hx-border-neutral-700 dark:hx-bg-neutral-800 dark:hx-text-gray-50 hover:hx-shadow-lg dark:hover:hx-border-neutral-500 dark:hover:hx-bg-neutral-700"href="tasks-care2.png"
>&lt;img
alt=""
class="hextra-card-image"
loading="lazy"
decoding="async"
src="https://docs.communityhealthtoolkit.org/building/tasks/tasks-overview/tasks-care2_hu_cbf0e95c9523389.webp"
width="800"
height="1423"
/>&lt;span class="hextra-card-icon hx-flex hx-font-semibold hx-items-start hx-gap-2 hx-p-4 hx-text-gray-700 hover:hx-text-gray-900 dark:hx-text-neutral-200 dark:hover:hx-text-neutral-50">&lt;/span>&lt;/a>
&lt;a
class="hextra-card hx-group hx-flex hx-flex-col hx-justify-start hx-overflow-hidden hx-rounded-lg hx-border hx-border-gray-200 hx-text-current hx-no-underline dark:hx-shadow-none hover:hx-shadow-gray-100 dark:hover:hx-shadow-none hx-shadow-gray-100 active:hx-shadow-sm active:hx-shadow-gray-200 hx-transition-all hx-duration-200 hover:hx-border-gray-300 hx-bg-gray-100 hx-shadow dark:hx-border-neutral-700 dark:hx-bg-neutral-800 dark:hx-text-gray-50 hover:hx-shadow-lg dark:hover:hx-border-neutral-500 dark:hover:hx-bg-neutral-700"href="tasks-care3.png"
>&lt;img
alt=""
class="hextra-card-image"
loading="lazy"
decoding="async"
src="https://docs.communityhealthtoolkit.org/building/tasks/tasks-overview/tasks-care3_hu_216f56d32128a9b7.webp"
width="800"
height="1423"
/>&lt;span class="hextra-card-icon hx-flex hx-font-semibold hx-items-start hx-gap-2 hx-p-4 hx-text-gray-700 hover:hx-text-gray-900 dark:hx-text-neutral-200 dark:hover:hx-text-neutral-50">&lt;/span>&lt;/a>
&lt;a
class="hextra-card hx-group hx-flex hx-flex-col hx-justify-start hx-overflow-hidden hx-rounded-lg hx-border hx-border-gray-200 hx-text-current hx-no-underline dark:hx-shadow-none hover:hx-shadow-gray-100 dark:hover:hx-shadow-none hx-shadow-gray-100 active:hx-shadow-sm active:hx-shadow-gray-200 hx-transition-all hx-duration-200 hover:hx-border-gray-300 hx-bg-gray-100 hx-shadow dark:hx-border-neutral-700 dark:hx-bg-neutral-800 dark:hx-text-gray-50 hover:hx-shadow-lg dark:hover:hx-border-neutral-500 dark:hover:hx-bg-neutral-700"href="tasks-care4.png"
>&lt;img
alt=""
class="hextra-card-image"
loading="lazy"
decoding="async"
src="https://docs.communityhealthtoolkit.org/building/tasks/tasks-overview/tasks-care4_hu_ae6ff399ca593479.webp"
width="800"
height="1423"
/>&lt;span class="hextra-card-icon hx-flex hx-font-semibold hx-items-start hx-gap-2 hx-p-4 hx-text-gray-700 hover:hx-text-gray-900 dark:hx-text-neutral-200 dark:hover:hx-text-neutral-50">&lt;/span>&lt;/a>
&lt;/div>
&lt;p>Find more information on how &lt;a href="https://docs.communityhealthtoolkit.org/building/concepts/care-guides/" >care guides&lt;/a> provide decision support for healthcare workers.&lt;/p>
&lt;p>When the user completes the care guide, the task will be cleared from the Tasks tab, and the report will be accessible from the Reports page or on the profile of the person or place whom the report is about.&lt;/p>
&lt;h2>Household Tasks&lt;span class="hx-absolute -hx-mt-20" id="household-tasks">&lt;/span>
&lt;a href="#household-tasks" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;div class="hextra-cards hx-mt-4 hx-gap-4 hx-grid not-prose" style="--hextra-cards-grid-cols: 3;">
&lt;a
class="hextra-card hx-group hx-flex hx-flex-col hx-justify-start hx-overflow-hidden hx-rounded-lg hx-border hx-border-gray-200 hx-text-current hx-no-underline dark:hx-shadow-none hover:hx-shadow-gray-100 dark:hover:hx-shadow-none hx-shadow-gray-100 active:hx-shadow-sm active:hx-shadow-gray-200 hx-transition-all hx-duration-200 hover:hx-border-gray-300 hx-bg-gray-100 hx-shadow dark:hx-border-neutral-700 dark:hx-bg-neutral-800 dark:hx-text-gray-50 hover:hx-shadow-lg dark:hover:hx-border-neutral-500 dark:hover:hx-bg-neutral-700"href="tasks-household.png"
>&lt;img
alt=""
class="hextra-card-image"
loading="lazy"
decoding="async"
src="https://docs.communityhealthtoolkit.org/building/tasks/tasks-overview/tasks-household_hu_786dac12a8a0e8ea.webp"
width="800"
height="1373"
/>&lt;span class="hextra-card-icon hx-flex hx-font-semibold hx-items-start hx-gap-2 hx-p-4 hx-text-gray-700 hover:hx-text-gray-900 dark:hx-text-neutral-200 dark:hover:hx-text-neutral-50">&lt;/span>&lt;/a>
&lt;/div>
&lt;p>Alternatively, there is an option to configure Household Tasks. When this &lt;a href="https://docs.communityhealthtoolkit.org/building/reference/app-settings/user-permissions/" >permission&lt;/a> is enabled, once a CHW has completed a task, they are taken to the Other Household Tasks page. This page shows the CHW all the additional outstanding tasks within the same household in which the initial task was completed.&lt;/p>
&lt;p>CHWs are able to complete tasks directly from this page, or exit by tapping on the “X”. If the household has no additional tasks, they will return directly to the main task list.&lt;/p>
&lt;h2>Profile Page&lt;span class="hx-absolute -hx-mt-20" id="profile-page">&lt;/span>
&lt;a href="#profile-page" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;div class="hextra-cards hx-mt-4 hx-gap-4 hx-grid not-prose" style="--hextra-cards-grid-cols: 3;">
&lt;a
class="hextra-card hx-group hx-flex hx-flex-col hx-justify-start hx-overflow-hidden hx-rounded-lg hx-border hx-border-gray-200 hx-text-current hx-no-underline dark:hx-shadow-none hover:hx-shadow-gray-100 dark:hover:hx-shadow-none hx-shadow-gray-100 active:hx-shadow-sm active:hx-shadow-gray-200 hx-transition-all hx-duration-200 hover:hx-border-gray-300 hx-bg-gray-100 hx-shadow dark:hx-border-neutral-700 dark:hx-bg-neutral-800 dark:hx-text-gray-50 hover:hx-shadow-lg dark:hover:hx-border-neutral-500 dark:hover:hx-bg-neutral-700"href="tasks-profile.png"
>&lt;img
alt=""
class="hextra-card-image"
loading="lazy"
decoding="async"
src="https://docs.communityhealthtoolkit.org/building/tasks/tasks-overview/tasks-profile_hu_cab3d84f9970b97a.webp"
width="800"
height="1423"
/>&lt;span class="hextra-card-icon hx-flex hx-font-semibold hx-items-start hx-gap-2 hx-p-4 hx-text-gray-700 hover:hx-text-gray-900 dark:hx-text-neutral-200 dark:hover:hx-text-neutral-50">&lt;/span>&lt;/a>
&lt;/div>
&lt;p>Tasks are also accessed from the People tab in the app.&lt;/p>
&lt;p>Tasks for a particular person or place can be viewed on the contact’s profile in the “Tasks” section. Filters allow you to choose how many tasks you’d like to view for each due date.&lt;/p>
&lt;br clear="all"></description></item><item><title>Building A Simple Task</title><link>https://docs.communityhealthtoolkit.org/building/tasks/simple-tasks/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/building/tasks/simple-tasks/</guid><description>
&lt;p>Tasks prompt users to complete activities on a programmatic schedule. This guide will explain how to write a task which prompts CHW users to complete an &lt;em>assessment&lt;/em> &lt;a href="https://docs.communityhealthtoolkit.org/building/tutorials/app-forms/" >app form&lt;/a> for new patients within 7 days of registration.&lt;/p>
&lt;ul>
&lt;li>Creating a straight-forward task&lt;/li>
&lt;li>Running and testing that task&lt;/li>
&lt;/ul>
&lt;h2>Prerequisites&lt;span class="hx-absolute -hx-mt-20" id="prerequisites">&lt;/span>
&lt;a href="#prerequisites" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;ul>
&lt;li>Complete the &lt;a href="https://docs.communityhealthtoolkit.org/building/tutorials/app-forms/" >App Forms Tutorial&lt;/a> - Tasks prompt users to &lt;em>complete activities&lt;/em> by opening an app form. The app forms tutorial produces an &lt;em>assessment&lt;/em> app form which we will use here. You can also elect to substitute that with any &lt;a href="https://github.com/medic/cht-core/tree/master/config/default/forms/app" target="_blank" rel="noopener">example app form&lt;/a>.&lt;/li>
&lt;li>Complete the &lt;a href="https://docs.communityhealthtoolkit.org/building/contact-management/contact-and-users-2/" >Contact and User Management - Part 1 Tutorial&lt;/a> to create a hierarchy of contacts and an offline CHW user.&lt;/li>
&lt;li>Read &lt;a href="https://docs.communityhealthtoolkit.org/building/tasks/managing-tasks/task-schema-parameters/" >Understanding the data available in tasks and targets&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2>Implementation Steps&lt;span class="hx-absolute -hx-mt-20" id="implementation-steps">&lt;/span>
&lt;a href="#implementation-steps" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Create a &lt;code>tasks.js&lt;/code> file (this may have already been created by the &lt;code>initialise-project-layout&lt;/code> command).&lt;/p>
&lt;h3>1. Define a Simple Task&lt;span class="hx-absolute -hx-mt-20" id="1-define-a-simple-task">&lt;/span>
&lt;a href="#1-define-a-simple-task" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>The appearance, behaviour, and schedule of tasks are all controlled through the JavaScript in the &lt;code>tasks.js&lt;/code> file. Let&amp;rsquo;s start in that file with a simple first task:&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">module&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">exports&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;assessment-after-registration&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">title&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;First Assessment&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">icon&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;icon-healthcare&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">appliesTo&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;contacts&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">appliesToType&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;patient&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">appliesIf&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">c&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">user&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">parent&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">user&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">parent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">contact_type&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="s1">&amp;#39;chw_area&amp;#39;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="o">!&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">contact&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">date_of_death&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="o">!&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">contact&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">muted&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">actions&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[{&lt;/span> &lt;span class="nx">form&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;assessment&amp;#39;&lt;/span> &lt;span class="p">}],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">events&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">start&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">days&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">end&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}];&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>&lt;strong>What is this code doing?&lt;/strong>&lt;/p>
&lt;p>The &lt;code>tasks.js&lt;/code> file follows the JavaScript ES6 Module syntax and &lt;em>exports&lt;/em> an array of objects matching the &lt;a href="https://docs.communityhealthtoolkit.org/building/tasks/tasks-js/#tasksjs" >task.js schema&lt;/a>*. In the code above, the &lt;code>tasks.js&lt;/code> file is exporting one task object with the following:&lt;/p>
&lt;ul>
&lt;li>&lt;code>name&lt;/code> - This is used exclusively in the task&amp;rsquo;s backend data. The &lt;em>name&lt;/em> isn&amp;rsquo;t controlling any element of the tasks&amp;rsquo;s behaviour, appearance, or schedule.&lt;/li>
&lt;li>&lt;code>title&lt;/code> - This is controlling the &amp;ldquo;Task title&amp;rdquo; as defined in the &lt;a href="https://docs.communityhealthtoolkit.org/design/best-practices/#anatomy-of-a-task" >anatomy of a task&lt;/a>.&lt;/li>
&lt;li>&lt;code>icon&lt;/code> - This references a &lt;a href="https://docs.communityhealthtoolkit.org/building/branding/resources/" >resource&lt;/a> to be used as the task&amp;rsquo;s icon. Refer to &lt;a href="https://docs.communityhealthtoolkit.org/design/best-practices/#anatomy-of-a-task" >anatomy of a task&lt;/a>.&lt;/li>
&lt;li>&lt;code>appliesTo&lt;/code> - We use &lt;code>contacts&lt;/code> because we want one task &lt;em>per contact&lt;/em>. For more details, read &lt;a href="https://docs.communityhealthtoolkit.org/building/tasks/managing-tasks/task-schema-parameters/" >Understanding the data available in tasks and targets&lt;/a>.&lt;/li>
&lt;li>&lt;code>appliesToType&lt;/code> - The task should only show for contacts with &lt;code>contact_type&lt;/code> equal to &lt;code>patient&lt;/code>. This &lt;code>appliesToType&lt;/code> is a &lt;em>short-hand&lt;/em> equivalent to &lt;code>appliesIf: c =&amp;gt; c.contact.contact_type === 'patient'&lt;/code>.&lt;/li>
&lt;li>&lt;code>appliesIf&lt;/code> - A predicate which gates the creation of the task&amp;rsquo;s event schedule. For more details, read &lt;a href="https://docs.communityhealthtoolkit.org/building/tasks/managing-tasks/task-schema-parameters/" >Understanding the data available in tasks and targets&lt;/a>.
&lt;ul>
&lt;li>&lt;code>user.parent.contact_type&lt;/code> - The user is a CHW iff their parent is of type &lt;code>chw_area&lt;/code>. The user object is hydrated.&lt;/li>
&lt;li>&lt;code>!c.contact.date_of_death&lt;/code> - The contact must be alive&lt;/li>
&lt;li>&lt;code>!c.contact.muted&lt;/code> - The contact must be unmuted&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>actions&lt;/code> - Actions control what happens when the user &amp;ldquo;selects&amp;rdquo; the task (clicks on it or touches it). We want to have the single option of completing the &lt;em>assessment form&lt;/em>.&lt;/li>
&lt;li>&lt;code>events&lt;/code> - This controls the task&amp;rsquo;s schedule. We want a single event because this is a one-time follow-up.&lt;/li>
&lt;li>&lt;code>events[0].days&lt;/code> - The task event is due 7 days after the contact&amp;rsquo;s creation date.&lt;/li>
&lt;li>&lt;code>events[0].start&lt;/code> - The task event should appear 7 days before the due date, or immediately when the contact is created.&lt;/li>
&lt;li>&lt;code>events[0].end&lt;/code> - The task event should disappear the day after the due date.&lt;/li>
&lt;/ul>
&lt;h3>2. Uploading the Task&lt;span class="hx-absolute -hx-mt-20" id="2-uploading-the-task">&lt;/span>
&lt;a href="#2-uploading-the-task" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>To run the &lt;code>tasks.js&lt;/code> code, you&amp;rsquo;ll need to load the code into your running CHT application.&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-zsh" data-lang="zsh">&lt;span class="line">&lt;span class="cl">cht --url&lt;span class="o">=&lt;/span>https://&amp;lt;username&amp;gt;:&amp;lt;password&amp;gt;@localhost&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>or for a faster experience, compile and upload only the relevant changes:&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-zsh" data-lang="zsh">&lt;span class="line">&lt;span class="cl">cht --url&lt;span class="o">=&lt;/span>https://&amp;lt;username&amp;gt;:&amp;lt;password&amp;gt;@localhost compile-app-settings upload-app-settings&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h3>3. Testing the Task&lt;span class="hx-absolute -hx-mt-20" id="3-testing-the-task">&lt;/span>
&lt;a href="#3-testing-the-task" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>Tasks are only available to &lt;a href="https://docs.communityhealthtoolkit.org/building/concepts/users/#offline-users" >offline users&lt;/a>. To view and test this simple task, you&amp;rsquo;ll need to login as an offline user like the CHW-level user created in the &lt;a href="https://docs.communityhealthtoolkit.org/building/contact-management/contact-and-users-1/" >Contact and User Management - Part 1 Tutorial&lt;/a>. Once logged in, sync to make sure you have the latest configuration. You may be prompted to reload the application.&lt;/p>
&lt;p>Create a new contact in the hierarchy and navigate to the &lt;code>Tasks&lt;/code> tab. You should see the new &lt;code>assessment-after-registration&lt;/code> task!&lt;/p>
&lt;figure>&lt;a href="first-task.png">&lt;img src="https://docs.communityhealthtoolkit.org/building/tasks/simple-tasks/first-task.png">&lt;/a>
&lt;/figure>
&lt;p>Next, test a few of the expected behaviours for the task:&lt;/p>
&lt;ul>
&lt;li>Confirm that clicking on the task causes the &lt;em>assessment app form&lt;/em> to load.&lt;/li>
&lt;li>Confirm that completing the &lt;em>assessment app form&lt;/em> causes the task to disappear.&lt;/li>
&lt;li>Move your system clock forward 7 days and reload the tasks tab. You should see that the task is now &amp;ldquo;Due Today&amp;rdquo;.&lt;/li>
&lt;li>Move your system clock forward 8 days and reload the tasks tab. The task should disappear since the 7 day window has expired.&lt;/li>
&lt;li>Login as a supervisor user. You should not be able to see the task.&lt;/li>
&lt;li>The task should not appear only for patients - not for places or CHWs.&lt;/li>
&lt;li>If you mute a contact or &lt;a href="https://docs.communityhealthtoolkit.org/building/workflows/death-reporting/" >report the contact dead&lt;/a>, the task should disappear.&lt;/li>
&lt;/ul>
&lt;div class="hx-overflow-x-auto hx-mt-6 hx-flex hx-flex-col hx-rounded-lg hx-border hx-py-4 hx-px-4 contrast-more:hx-border-current contrast-more:dark:hx-border-current hx-border-indigo-200 hx-bg-indigo-100 hx-text-indigo-900 dark:hx-border-indigo-200/30 dark:hx-bg-indigo-900/30 dark:hx-text-indigo-200">
&lt;p class="hx-flex hx-items-center hx-font-medium">&lt;svg height=16px class="hx-inline-block hx-align-middle hx-mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">&lt;path stroke-linecap="round" stroke-linejoin="round" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>&lt;/svg>Important&lt;/p>
&lt;div class="hx-w-full hx-min-w-0 hx-leading-7">
&lt;div class="hx-mt-6 hx-leading-7 first:hx-mt-0">&lt;p>Remember to reset your system clock to be accurate when you are done testing.&lt;/p>&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2>Frequently Asked Questions&lt;span class="hx-absolute -hx-mt-20" id="frequently-asked-questions">&lt;/span>
&lt;a href="#frequently-asked-questions" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;ul>
&lt;li>&lt;a href="https://forum.communityhealthtoolkit.org/t/error-fetching-tasks-tasks-not-appearing/537" target="_blank" rel="noopener">&amp;ldquo;Error fetching tasks&amp;rdquo; - Tasks not appearing&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://forum.communityhealthtoolkit.org/t/tasks-for-online-users/574" target="_blank" rel="noopener">Tasks for online users&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://forum.communityhealthtoolkit.org/t/how-can-i-debug-task-rules/108" target="_blank" rel="noopener">How can I debug task rules?&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Building A Complex Task (Optional)</title><link>https://docs.communityhealthtoolkit.org/building/tasks/complex-tasks/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/building/tasks/complex-tasks/</guid><description>
&lt;p>Tasks prompt users to complete activities on a programmatic schedule. This tutorial will guide you through the development of an advanced task. This is an &lt;em>optional&lt;/em> tutorial and is not required to &lt;em>get started&lt;/em> with CHT Application development.&lt;/p>
&lt;ul>
&lt;li>Create a task with a complex follow-up schedule&lt;/li>
&lt;li>Use a 3rd party JavaScript library &lt;code>luxon&lt;/code> to make Date/Time calculations easier&lt;/li>
&lt;li>Pass information from the task into the action &lt;em>app form&lt;/em>&lt;/li>
&lt;li>Custom logic for resolving a task&lt;/li>
&lt;/ul>
&lt;h2>Prerequisites&lt;span class="hx-absolute -hx-mt-20" id="prerequisites">&lt;/span>
&lt;a href="#prerequisites" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;ul>
&lt;li>&lt;a href="https://docs.communityhealthtoolkit.org/building/tasks/simple-tasks/" >Building a simple task&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://docs.communityhealthtoolkit.org/reference-apps/maternal-newborn/" >Maternal and Newborn Health Reference App&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2>Scenario&lt;span class="hx-absolute -hx-mt-20" id="scenario">&lt;/span>
&lt;a href="#scenario" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>This scenario is loosely based on the &lt;em>Pregnancy Visit Task&lt;/em> from the &lt;a href="https://docs.communityhealthtoolkit.org/reference-apps/maternal-newborn/" >Maternal and Newborn Health Reference App&lt;/a>.&lt;/p>
&lt;p>We expectations for the task are:&lt;/p>
&lt;ol>
&lt;li>Only CHW users should be prompted to complete pregnancy visits&lt;/li>
&lt;li>Pregnancy visits should appear for pregnant patients after their pregnancy registration&lt;/li>
&lt;li>Pregnancy visits should be scheduled eight times between the last mentrual period (LMP) and delivery.&lt;/li>
&lt;li>A pregnancy visit should be skipped if an &lt;em>assessment followup&lt;/em> is completed within the scheduled window for the pregancy visit.&lt;/li>
&lt;li>The first pregnancy visit should prompt the CHW to ask some additional questions&lt;/li>
&lt;/ol>
&lt;h2>Developing the task&lt;span class="hx-absolute -hx-mt-20" id="developing-the-task">&lt;/span>
&lt;a href="#developing-the-task" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>This solution relies on the library &lt;a href="https://moment.github.io/luxon" target="_blank" rel="noopener">luxon&lt;/a> for parsing and manipulating dates and times. Let&amp;rsquo;s start by installing it locally:&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-zsh" data-lang="zsh">&lt;span class="line">&lt;span class="cl">npm install --save-dev luxon&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>And then in &lt;code>tasks.js&lt;/code> we can analyse this solution:&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">DateTime&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;luxon&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">module&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">exports&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;pnc-after-pregnancy&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">icon&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;icon-follow-up&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">title&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;task.pnc_followup&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">appliesTo&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;contacts&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">appliesToType&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;patient&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">appliesIf&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">contact&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">userIsChw&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">user&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">parent&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">user&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">parent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">contact_type&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="s1">&amp;#39;chw_area&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">isDead&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">contact&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">contact&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">date_of_death&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">isMuted&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">contact&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">contact&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">muted&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">userIsChw&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="o">!&lt;/span>&lt;span class="nx">isDead&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="o">!&lt;/span>&lt;span class="nx">isMuted&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">mostRecentPregnancy&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Utils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getMostRecentReport&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">contact&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">reports&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;pregnancy&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">calculatedLmp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">mostRecentPregnancy&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">Utils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getField&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">mostRecentPregnancy&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;g_details.estimated_lmp&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">lmp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">calculatedLmp&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">DateTime&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">fromFormat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">calculatedLmp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;yyyy-MM-dd&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">lmp&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">lmp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">isValid&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">events&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">26&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">30&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">34&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">36&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">38&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">40&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c1">// follow-up weeks after LMP
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="nx">map&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">weekAfterLmp&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">id&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="sb">`pnc-week-&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">weekAfterLmp&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">start&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">weekAfterLmp&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">30&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="mi">6&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">end&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">weekAfterLmp&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">30&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="mi">7&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">dueDate&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">lmp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">plus&lt;/span>&lt;span class="p">({&lt;/span> &lt;span class="nx">weeks&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">weekAfterLmp&lt;/span> &lt;span class="p">}).&lt;/span>&lt;span class="nx">toJsDate&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">resolvedIf&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">contact&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">report&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">event&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">dueDate&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">start&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Utils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">addDate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">dueDate&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">event&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">start&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">getTime&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">end&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Utils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">addDate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">dueDate&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">event&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">end&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">getTime&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">pncInWindow&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Utils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">isFormSubmittedInWindow&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">contact&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">reports&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;pnc_followup&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">start&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">end&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">assessmentInWindow&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Utils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">isFormSubmittedInWindow&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">contact&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">reports&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;assessment_followup&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">start&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">end&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">pncInWindow&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nx">assessmentInWindow&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">actions&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">form&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;pnc_followup&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">modifyContent&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">content&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">contact&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">report&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">event&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">followupCount&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">definition&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">events&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">findIndex&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">e&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">event&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nx">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">content&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">t_followup_count&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">followupCount&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">toString&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h2>What is this code doing?&lt;span class="hx-absolute -hx-mt-20" id="what-is-this-code-doing">&lt;/span>
&lt;a href="#what-is-this-code-doing" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;h3>AppliesIf&lt;span class="hx-absolute -hx-mt-20" id="appliesif">&lt;/span>
&lt;a href="#appliesif" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;pre>&lt;code>1. Only CHW users should be prompted to complete pregnancy visits
2. Pregnancy visits should appear for pregnant patients after their pregnancy registration&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>This function starts with the standard stuff from the &lt;a href="https://docs.communityhealthtoolkit.org/building/tasks/simple-tasks/" >Configuring Tasks Tutorial&lt;/a>. We want to confirm the user is a CHW, and the patient is alive and unmuted.&lt;/p>
&lt;p>Then, the code searches through each contact&amp;rsquo;s reports to find the most recent (&lt;em>newest&lt;/em>) pregnancy registration using the &lt;a href="https://docs.communityhealthtoolkit.org/building/reference/_partial_utils/" >Utils helper library&lt;/a>. It gets that report&amp;rsquo;s value for &lt;code>report.fields.g_details.estimated_lmp&lt;/code>, which is a date string calculated by the app form. It parses that string using the luxon library and returns true if it is a valid date.&lt;/p>
&lt;p>Defining &lt;code>lmp&lt;/code> as a property of &lt;code>this&lt;/code>, &lt;em>stores&lt;/em> the LMP DateTime and we will use that value later.&lt;/p>
&lt;h3>Events&lt;span class="hx-absolute -hx-mt-20" id="events">&lt;/span>
&lt;a href="#events" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;pre>&lt;code>3. Pregnancy visits should be scheduled eight times between the last mentrual period (LMP) and delivery.&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>This is a recurring task, unlike the one-time task we wrote in &lt;a href="https://docs.communityhealthtoolkit.org/building/tasks/simple-tasks/" >Configuring Tasks Tutorial&lt;/a>. This task is going to appear once 12 weeks after the estimated LMP date, again after 20 weeks, and again 6 more times. The &lt;code>dueDate&lt;/code> on the event says that the task event is due &lt;em>a variable number of weeks after the estimated LMP&lt;/em>. The time the CHW has to complete the visit is shorter toward the end of the schedule.&lt;/p>
&lt;p>We&amp;rsquo;re using the &lt;code>this.lmp&lt;/code> value which was calculated and saved in the &lt;code>appliesIf&lt;/code> function.&lt;/p>
&lt;h2>ResolvedIf&lt;span class="hx-absolute -hx-mt-20" id="resolvedif">&lt;/span>
&lt;a href="#resolvedif" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;pre>&lt;code>4. A pregnancy visit should be skipped if an _assessment followup_ is completed within the scheduled window for the pregancy visit.&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>&lt;code>resolvedIf&lt;/code> captures the conditions when the task event should disappear because it has been &lt;em>completed&lt;/em>. Since we want the task schedule to appear if the user completes an &lt;em>assessment followup&lt;/em> or the &lt;em>pnc followup&lt;/em>, we can&amp;rsquo;t use the &lt;a href="https://docs.communityhealthtoolkit.org/building/tasks/tasks-js/#default-resolvedif-method" >default resolvedIf definition&lt;/a>.&lt;/p>
&lt;p>This function calculates timestamps for the start and end of each event. Then, it uses the &lt;a href="https://docs.communityhealthtoolkit.org/building/reference/_partial_utils/" >Utils helper library&lt;/a> to see if &lt;em>either&lt;/em> a &lt;em>pnc&lt;/em> or an &lt;em>assessment&lt;/em> followup is present within those timestamps.&lt;/p>
&lt;p>The concept of &lt;em>task completion&lt;/em> is covered in more depth in &lt;a href="https://docs.communityhealthtoolkit.org/building/tasks/managing-tasks/query-task-data/#completion-vs-cancellation" >Task Completion vs Cancellation&lt;/a>.&lt;/p>
&lt;h2>Actions&lt;span class="hx-absolute -hx-mt-20" id="actions">&lt;/span>
&lt;a href="#actions" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;pre>&lt;code>5. The first pregnancy visit should prompt the CHW to ask some additional questions&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The &lt;code>modifyContent&lt;/code> attribute allows the task to pass data from the task (in JavaScript) into the action app form (xlsx). Check out the guide for &lt;a href="https://docs.communityhealthtoolkit.org/building/tasks/managing-tasks/pass-data-to-form/" >Passing data from a task into the app form&lt;/a>.&lt;/p></description></item><item><title>tasks.js</title><link>https://docs.communityhealthtoolkit.org/building/tasks/tasks-js/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/building/tasks/tasks-js/</guid><description>
&lt;figure>&lt;a href="task-with-description.png">&lt;img src="https://docs.communityhealthtoolkit.org/building/tasks/tasks-js/task-with-description.png"
alt="task">&lt;/a>&lt;figcaption>
&lt;p>task&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;p>Task generation is configured in the &lt;code>tasks.js&lt;/code> file. This file is a JavaScript module which defines an array of objects conforming to the Task schema detailed below. When defining tasks, all the data about contacts on the device (both people and places) along with all their reports are available. Tasks are available only for users of type &amp;ldquo;restricted to their place&amp;rdquo;. Tasks can pull in fields from reports and pass data as inputs to the form that opens when the task is selected, enabling richer user experiences.&lt;/p>
&lt;p>Task generation occurs on the client periodically and creates documents which track the status of the task over time. To avoid performance issues the developer needs to be conscious about generating too many tasks. For example, to remind a user to do something every day, you could generate one task for each day and fill up the user&amp;rsquo;s device. The recommended approach is to only generate the tasks for the near future, or only once the previous task is resolved. To limit the impact of this misconfiguration, the CHT will only generate tasks that can be completed between 60 days in the past, and (as of 4.0.0) 180 days in the future.&lt;/p>
&lt;p>&lt;em>See Also&lt;/em>: &lt;a href="https://docs.communityhealthtoolkit.org/building/tasks/">Tasks Overview&lt;/a>&lt;/p>
&lt;h2>&lt;code>tasks.js&lt;/code>&lt;span class="hx-absolute -hx-mt-20" id="tasksjs">&lt;/span>
&lt;a href="#tasksjs" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>property&lt;/th>
&lt;th>type&lt;/th>
&lt;th>description&lt;/th>
&lt;th>required&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>name&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code>&lt;/td>
&lt;td>A unique identifier for the task. Used for querying task completeness.&lt;/td>
&lt;td>yes, unique&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>icon&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code>&lt;/td>
&lt;td>The icon to show alongside the task. Should correspond with a value defined in &lt;code>resources.json&lt;/code>.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>title&lt;/code>&lt;/td>
&lt;td>&lt;code>translation key&lt;/code>&lt;/td>
&lt;td>The title of the task (labeled above).&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>appliesTo&lt;/code>&lt;/td>
&lt;td>&lt;code>'contacts'&lt;/code> or &lt;code>'reports'&lt;/code>&lt;/td>
&lt;td>Do you want to emit one task per report, or one task per contact? See &lt;a href="https://docs.communityhealthtoolkit.org/building/tasks/managing-tasks/task-schema-parameters/" >Understanding the Parameters in the Task Schema&lt;/a>.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>appliesIf&lt;/code>&lt;/td>
&lt;td>&lt;code>function(contact, report)&lt;/code>&lt;/td>
&lt;td>If &lt;code>appliesTo: 'contacts'&lt;/code>, this function is invoked once per contact and &lt;code>report&lt;/code> is undefined. If &lt;code>appliesTo: 'reports'&lt;/code>, this function is invoked once per report. Return true if the task should appear for the given documents. See &lt;a href="https://docs.communityhealthtoolkit.org/building/tasks/managing-tasks/task-schema-parameters/" >Understanding the Parameters in the Task Schema&lt;/a>.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>appliesToType&lt;/code>&lt;/td>
&lt;td>&lt;code>string[]&lt;/code>&lt;/td>
&lt;td>Filters the contacts or reports for which &lt;code>appliesIf&lt;/code> will be evaluated. If &lt;code>appliesTo: 'reports'&lt;/code>, this is an array of form codes. For example, &lt;code>['pregnancy']&lt;/code> or &lt;code>['P', 'pregnancy']&lt;/code>. If &lt;code>appliesTo: 'contacts'&lt;/code>, this is an array of contact types. For example, &lt;code>['person']&lt;/code> or &lt;code>['clinic', 'health_center']&lt;/code>. See &lt;a href="https://docs.communityhealthtoolkit.org/building/tasks/managing-tasks/task-schema-parameters/" >Understanding the Parameters in the Task Schema&lt;/a>.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>contactLabel&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code> or &lt;code>function(contact, report)&lt;/code>&lt;/td>
&lt;td>Controls the label describing the subject of the task. Defaults to the name of the contact (&lt;code>contact.contact.name&lt;/code>).&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>resolvedIf&lt;/code>&lt;/td>
&lt;td>&lt;code>function(contact, report, event, dueDate)&lt;/code>&lt;/td>
&lt;td>Return true to mark the task as &amp;ldquo;resolved&amp;rdquo;. A resolved task uses memory on the phone, but is not displayed.&lt;/td>
&lt;td>no, if any &lt;code>actions[n].type&lt;/code> is &lt;code>'report'&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>events&lt;/code>&lt;/td>
&lt;td>&lt;code>object[]&lt;/code>&lt;/td>
&lt;td>An event is used to specify the timing of the task.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>events[n].id&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code>&lt;/td>
&lt;td>A descriptive identifier. Used for querying task completeness.&lt;/td>
&lt;td>yes if task has multiple events, unique&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>events[n].days&lt;/code>&lt;/td>
&lt;td>&lt;code>integer&lt;/code>&lt;/td>
&lt;td>Number of days after the doc&amp;rsquo;s &lt;code>reported_date&lt;/code> that the event is due&lt;/td>
&lt;td>yes, if &lt;code>dueDate&lt;/code> is not set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>events[n].dueDate&lt;/code>&lt;/td>
&lt;td>&lt;code>function(event, contact, report)&lt;/code>&lt;/td>
&lt;td>Returns a &lt;code>Date&lt;/code> object for the day when this event is due.&lt;/td>
&lt;td>yes, if &lt;code>days&lt;/code> is not set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>events[n].start&lt;/code>&lt;/td>
&lt;td>&lt;code>integer&lt;/code>&lt;/td>
&lt;td>Number of days to show the task before it is due.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>events[n].end&lt;/code>&lt;/td>
&lt;td>&lt;code>integer&lt;/code>&lt;/td>
&lt;td>Number of days to show the task after it is due.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>actions&lt;/code>&lt;/td>
&lt;td>&lt;code>object[]&lt;/code>&lt;/td>
&lt;td>The actions (forms) that a user can access after clicking on a task. If you put multiple forms here, the user will see a task summary screen where they can select which action they would like to complete.&lt;/td>
&lt;td>yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>actions[n].type&lt;/code>&lt;/td>
&lt;td>&lt;code>'report'&lt;/code> or &lt;code>'contact'&lt;/code>&lt;/td>
&lt;td>When &lt;code>'report'&lt;/code>, the action opens the given form. When &lt;code>'contact'&lt;/code>, the action redirects to a contact&amp;rsquo;s profile page. Defaults to &amp;lsquo;report&amp;rsquo;.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>actions[n].form&lt;/code>&lt;/td>
&lt;td>&lt;code>string&lt;/code>&lt;/td>
&lt;td>The code of the form that should open when you select the action.&lt;/td>
&lt;td>yes, if &lt;code>actions[n].type&lt;/code> is &lt;code>'report'&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>actions[n].label&lt;/code>&lt;/td>
&lt;td>&lt;code>translation key&lt;/code>&lt;/td>
&lt;td>The label that should appear on the task summary screen if multiple actions are present.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>actions[n].modifyContent&lt;/code>&lt;/td>
&lt;td>&lt;code>function (content, contact, report, event)&lt;/code>&lt;/td>
&lt;td>Set the values on the content object to control the data which will be passed as &lt;code>inputs&lt;/code> to the form which opens when the action is selected. See &lt;a href="https://docs.communityhealthtoolkit.org/building/tasks/managing-tasks/pass-data-to-form/" >Passing data from a task into the app form&lt;/a>.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>priority&lt;/code>&lt;/td>
&lt;td>&lt;code>object&lt;/code> or &lt;code>function(contact, report)&lt;/code> returning object of same schema&lt;/td>
&lt;td>Controls the &amp;ldquo;high risk&amp;rdquo; line seen above.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>priority.level&lt;/code>&lt;/td>
&lt;td>&lt;code>high&lt;/code> or &lt;code>medium&lt;/code>&lt;/td>
&lt;td>Tasks that are &lt;code>high&lt;/code> will display a high risk icon with the task. Default: &lt;code>medium&lt;/code>.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>priority.label&lt;/code>&lt;/td>
&lt;td>&lt;code>translation key&lt;/code>&lt;/td>
&lt;td>Text shown with the task associated to the risk level.&lt;/td>
&lt;td>no&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2>Utils&lt;span class="hx-absolute -hx-mt-20" id="utils">&lt;/span>
&lt;a href="#utils" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>
&lt;p>Utility functions in the Core Framework can make common tasks much easier. These are available only for Tasks and Targets. To use the function call &lt;code>Utils.&amp;lt;function-name&amp;gt;(&amp;lt;params&amp;gt;)&lt;/code>, for example &lt;code>Utils.addDate(report.reported_date, 10)&lt;/code>.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Name&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>isTimely(date, event)&lt;/code>&lt;/td>
&lt;td>Returns true if the given date is after the start date and before the end date of the event.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>addDate(date, days)&lt;/code>&lt;/td>
&lt;td>Returns a new Date set to midnight the given number of days after the given date. If no date is given the date defaults to today.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>getLmpDate(doc)&lt;/code>&lt;/td>
&lt;td>Attempts to work out the LMP from the given doc. If no LMP is given it defaults to four weeks before the reported_date.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>getSchedule(name)&lt;/code>&lt;/td>
&lt;td>Returns the task schedule with the given name from the configuration.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>getMostRecentTimestamp(reports, form)&lt;/code>&lt;/td>
&lt;td>Returns the reported_date of the most recent of the reports with form ID matching the given form.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>getMostRecentReport(reports, form)&lt;/code>&lt;/td>
&lt;td>Like &lt;code>getMostRecentTimestamp&lt;/code> but returns the report, not just the reported_date. From CHT v3.14.0, it also accepts an array of forms.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>isFormSubmittedInWindow(reports, form, start, end)&lt;/code>&lt;/td>
&lt;td>Returns true if any of the given reports are for the given form and were reported after start and before end.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>isFirstReportNewer(firstReport, secondReport)&lt;/code>&lt;/td>
&lt;td>Returns true if the firstReport was reported before the secondReport.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>isDateValid(date)&lt;/code>&lt;/td>
&lt;td>Returns true if the given date is a validate JavaScript Date.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>now()&lt;/code>&lt;/td>
&lt;td>Returns the current Date.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>getField(report, fieldPath)&lt;/code>&lt;/td>
&lt;td>Returns the value of the specified fieldPath. The fieldPath is a period separated json path.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>MS_IN_DAY&lt;/code>&lt;/td>
&lt;td>A constant for the number of milliseconds in a day.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Open &lt;a href="https://github.com/medic/cht-core/issues/new" target="_blank" rel="noopener">an issue&lt;/a> if you&amp;rsquo;d like other functions included.&lt;/p>
&lt;h2>CHT API&lt;span class="hx-absolute -hx-mt-20" id="cht-api">&lt;/span>
&lt;a href="#cht-api" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>
&lt;p>&lt;em>Introduced in v3.12.0&lt;/em>&lt;/p>
&lt;p>Provides CHT-Core Framework&amp;rsquo;s functions to contact summary, targets and tasks. The API is available in the &lt;code>cht&lt;/code> reserved variable under the &lt;code>v1&lt;/code> version.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Function&lt;/th>
&lt;th>Arguments&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>hasPermissions(permissions, userRoles, chtPermissionsSettings)&lt;/td>
&lt;td>&lt;code>permissions&lt;/code>: String or array of permission name(s).&lt;br>&lt;code>userRoles&lt;/code>: (Optional) Array of user roles. Default to the current logged in user.&lt;br>&lt;code>chtPermissionsSettings&lt;/code>: (Optional) Object of configured permissions in CHT-Core&amp;rsquo;s settings. Default to the current instance&amp;rsquo;s configured permissions.&lt;/td>
&lt;td>Returns true if the user has the permission(s), otherwise returns false.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hasAnyPermission(permissionsGroups, userRoles, chtPermissionsSettings)&lt;/td>
&lt;td>&lt;code>permissionsGroups&lt;/code>: Array of groups of permission name(s).&lt;br>&lt;code>userRoles&lt;/code>: (Optional) Array of user roles. Default to the current logged in user.&lt;br>&lt;code>chtPermissionsSettings&lt;/code>: (Optional) Object of configured permissions in CHT-Core&amp;rsquo;s settings. Default to the current instance&amp;rsquo;s configured permissions.&lt;/td>
&lt;td>Returns true if the user has all the permissions of any of the provided groups, otherwise returns false.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>getExtensionLib(name)&lt;/td>
&lt;td>&lt;code>name&lt;/code>: String of script name&lt;/td>
&lt;td>Returns an executable function identified by the given name configured as &lt;a href="https://docs.communityhealthtoolkit.org/building/reference/extension-libs/" >extension-libs&lt;/a>.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>analytics.getTargetDocs()&lt;/td>
&lt;td>&lt;/td>
&lt;td>Returns three &lt;a href="https://docs.communityhealthtoolkit.org/technical-overview/concepts/db-schema/#targets" >target&lt;/a> documents of the contact, calculated for the last three reporting intervals, including the current one. When viewing one of the current logged in user&amp;rsquo;s associated facilities, returns the target documents for the contact associated with the current logged in user. Returns an empty array if no target documents are found (for example when viewing a contact that does not upload targets). &lt;em>Introduced in v4.11.0&lt;/em>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3>CHT API&amp;rsquo;s code samples&lt;span class="hx-absolute -hx-mt-20" id="cht-apis-code-samples">&lt;/span>
&lt;a href="#cht-apis-code-samples" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">canEdit&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">cht&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">v1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">hasPermissions&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;can_edit&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">canManagePlaces&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">cht&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">v1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">hasPermissions&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="s1">&amp;#39;can_create_places&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;can_update_places&amp;#39;&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">hasAnyGroup&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">cht&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">v1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">hasAnyPermission&lt;/span>&lt;span class="p">([&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;can_view_messages&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;can_view_message_action&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;can_view_reports&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;can_verify_reports&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">averageFn&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">cht&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">v1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getExtensionLib&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;average.js&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">targetDocs&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">cht&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">v1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">analytics&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getTargetDocs&lt;/span>&lt;span class="p">();&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h2>Code samples&lt;span class="hx-absolute -hx-mt-20" id="code-samples">&lt;/span>
&lt;a href="#code-samples" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;h3>Basic task&lt;span class="hx-absolute -hx-mt-20" id="basic-task">&lt;/span>
&lt;a href="#basic-task" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>This sample &lt;code>tasks.js&lt;/code> generates two postnatal-visit tasks for each delivery form. The tasks are due 7 and 14 days after the delivery report was submitted. Each task is displayed for 2 days before the due date and 2 days after the due date.&lt;/p>
&lt;h4>tasks.js&lt;span class="hx-absolute -hx-mt-20" id="tasksjs-1">&lt;/span>
&lt;a href="#tasksjs-1" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">module&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">exports&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">icon&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;mother-child&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">title&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;task.postnatal_followup&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">appliesTo&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;reports&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">appliesToType&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;delivery&amp;#39;&lt;/span> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">actions&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">form&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;postnatal_visit&amp;#39;&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">events&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">id&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;postnatal-followup-1&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">days&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">start&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">end&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">id&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;postnatal-followup-2&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">days&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">start&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">end&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">resolvedIf&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">contact&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">report&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">event&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">dueDate&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">Utils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">isFormSubmittedInWindow&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">contact&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">reports&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;delivery&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Utils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">addDate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">dueDate&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">event&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">start&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">getTime&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Utils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">addDate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">dueDate&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">event&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">end&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">getTime&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">];&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h3>Tasks with functions&lt;span class="hx-absolute -hx-mt-20" id="tasks-with-functions">&lt;/span>
&lt;a href="#tasks-with-functions" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>These samples show more complex tasks which use functions kept in a separate &lt;code>nools-extras.js&lt;/code> file&lt;/p>
&lt;h4>&lt;code>tasks.js&lt;/code>&lt;span class="hx-absolute -hx-mt-20" id="tasksjs-2">&lt;/span>
&lt;a href="#tasksjs-2" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">extras&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;./nools-extras&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">isFormFromArraySubmittedInWindow&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">extras&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">module&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">exports&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// PNC TASK 1: If a home delivery, needs clinic tasks
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">icon&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;mother-child&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">title&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;task.postnatal_followup.title&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">appliesTo&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;reports&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">appliesToType&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;D&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;delivery&amp;#39;&lt;/span> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">appliesIf&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">isCoveredByUseCase&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">contact&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;pnc&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">fields&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">fields&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">delivery_code&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">fields&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">delivery_code&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">toUpperCase&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">!==&lt;/span> &lt;span class="s1">&amp;#39;F&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">actions&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">form&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="s1">&amp;#39;postnatal_visit&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Pass content that will be used within the task form
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">modifyContent&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">content&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">event&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">content&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">delivery_place&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;home&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">content&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">event_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">event&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">events&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">id&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;postnatal-visit&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">days&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">start&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">end&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">priority&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">level&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;high&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">label&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">locale&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="s1">&amp;#39;en&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">content&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="s1">&amp;#39;Home Birth&amp;#39;&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">resolvedIf&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">event&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">dueDate&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Resolved if there a visit report received in time window or a newer pregnancy
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">reported_date&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nx">extras&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getNewestDeliveryTimestamp&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">||&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">reported_date&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nx">extras&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getNewestPregnancyTimestamp&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">||&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">isFormFromArraySubmittedInWindow&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">reports&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">extras&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">postnatalForms&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Utils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">addDate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">dueDate&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">event&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">start&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">getTime&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Utils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">addDate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">dueDate&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">event&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">end&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">getTime&lt;/span>&lt;span class="p">());&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Option 1a: Place-based task: Family survey when place is created, then every 6 months
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">icon&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;family&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">title&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;task.family_survey.title&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">appliesTo&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;contacts&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">appliesToType&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;clinic&amp;#39;&lt;/span> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">actions&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">form&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="s1">&amp;#39;family_survey&amp;#39;&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">events&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">id&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;family-survey&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">days&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">start&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">end&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">resolvedIf&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">event&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">dueDate&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Resolved if there a family survey received in time window
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nx">isFormFromArraySubmittedInWindow&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">reports&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;family_survey&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Utils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">addDate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">dueDate&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">event&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">start&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">getTime&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Utils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">addDate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">dueDate&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">event&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">end&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">getTime&lt;/span>&lt;span class="p">());&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Regular check for infants
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">icon&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;infant&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">title&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;task.infant.title&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">appliesTo&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;contacts&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">appliesToType&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;person&amp;#39;&lt;/span> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">actions&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">form&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="s1">&amp;#39;infant_assessment&amp;#39;&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">events&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">id&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;infant_asssessment-q1&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">days&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">91&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">start&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">end&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">id&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;infant_asssessment-q2&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">days&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">182&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">start&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">end&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">id&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;infant_asssessment-q3&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">days&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">273&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">start&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">end&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">id&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;infant_asssessment-q4&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">days&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">365&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">start&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">end&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Option 2: Place-based task: Family survey every 6 months
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">icon&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;family&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">title&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;task.family_survey.title&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">appliesTo&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;contacts&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">appliesToType&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;clinic&amp;#39;&lt;/span> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">appliesIf&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">extras&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">needsFamilySurvey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// function returns true if family doesn&amp;#39;t have survey in previous 6 months
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">actions&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">form&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="s1">&amp;#39;family_survey&amp;#39;&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">events&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">id&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;family-survey&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">start&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">end&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">dueDate&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">extras&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getNextFamilySurveyDate&lt;/span> &lt;span class="c1">// function gets expected date of next family survey
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">resolvedIf&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">event&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">dueDate&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Resolved if there a family survey received in time window
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nx">isFormFromArraySubmittedInWindow&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">reports&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;family_survey&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Utils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">addDate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">dueDate&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">event&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">start&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">getTime&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Utils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">addDate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">dueDate&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">event&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">end&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">getTime&lt;/span>&lt;span class="p">());&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">]&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h4>&lt;code>nools-extras.js&lt;/code>&lt;span class="hx-absolute -hx-mt-20" id="nools-extrasjs">&lt;/span>
&lt;a href="#nools-extrasjs" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">module&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">exports&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">isCoveredByUseCase&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">contact&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">usecase&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">getNewestDeliveryTimestamp&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">getNewestPregnancyTimestamp&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">isFormFromArraySubmittedInWindow&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">reports&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">formsArray&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">startTime&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">endTime&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h3>Default resolvedIf method&lt;span class="hx-absolute -hx-mt-20" id="default-resolvedif-method">&lt;/span>
&lt;a href="#default-resolvedif-method" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>If the &lt;code>resolvedIf&lt;/code> is undefined in an action of type &lt;code>report&lt;/code>, then &lt;code>resolvedIf&lt;/code> is going to default to &lt;code>defaultResolvedIf&lt;/code> method.&lt;/p>
&lt;p>The &lt;code>defaultResolvedIf&lt;/code> method returns &lt;code>true&lt;/code> if it finds any report assigned to the contact that matches the &lt;code>form&lt;/code> defined in the action of type &lt;code>report&lt;/code>. Only the reports submitted during a specific time period are considered:&lt;/p>
&lt;ul>
&lt;li>For a contact-based task, the period is the same as the task window period i.e. when the task is visible.&lt;/li>
&lt;li>For a report based task, the period is determined between &lt;code>start&lt;/code> and &lt;code>end&lt;/code> as:
&lt;ul>
&lt;li>&lt;code>start&lt;/code>: the latest date between start of the task window and one millisecond after the report&amp;rsquo;s reported date&lt;/li>
&lt;li>&lt;code>end&lt;/code>: end of the task window&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>You can also use &lt;code>this.definition.defaultResolvedIf&lt;/code> inside the &lt;code>resolvedIf&lt;/code> definition and optionally add more conditions:&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">resolvedIf&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">contact&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">report&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">event&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">dueDate&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">definition&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">defaultResolvedIf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">contact&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">report&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">event&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">dueDate&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">otherConditions&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h2>Build&lt;span class="hx-absolute -hx-mt-20" id="build">&lt;/span>
&lt;a href="#build" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>To build your tasks into your app, you must compile them into app-settings, then upload them to your instance.&lt;/p>
&lt;p>&lt;code>cht --local compile-app-settings backup-app-settings upload-app-settings&lt;/code>&lt;/p></description></item><item><title>Managing tasks</title><link>https://docs.communityhealthtoolkit.org/building/tasks/managing-tasks/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/building/tasks/managing-tasks/</guid><description>
&lt;div class="section-pages-list">
&lt;h3>Content in this section &lt;/h3>
&lt;ul>
&lt;li>
&lt;a href="https://docs.communityhealthtoolkit.org/building/tasks/managing-tasks/pass-data-to-form/">Passing data from a task into the app form&lt;/a>
&lt;/li>
&lt;li>
&lt;a href="https://docs.communityhealthtoolkit.org/building/tasks/managing-tasks/query-task-data/">Querying Task Documents&lt;/a>
&lt;/li>
&lt;li>
&lt;a href="https://docs.communityhealthtoolkit.org/building/tasks/managing-tasks/task-schema-parameters/">Understanding the parameters in the Task Schema&lt;/a>
&lt;/li>
&lt;/ul>
&lt;/div></description></item></channel></rss>